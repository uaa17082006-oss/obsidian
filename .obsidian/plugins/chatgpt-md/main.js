/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Q$=Object.create;var cs=Object.defineProperty;var eE=Object.getOwnPropertyDescriptor;var tE=Object.getOwnPropertyNames;var rE=Object.getPrototypeOf,nE=Object.prototype.hasOwnProperty;var Yr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Or=(e,t)=>{for(var r in t)cs(e,r,{get:t[r],enumerable:!0})},Cv=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of tE(t))!nE.call(e,n)&&n!==r&&cs(e,n,{get:()=>t[n],enumerable:!(o=eE(t,n))||o.enumerable});return e};var ds=(e,t,r)=>(r=e!=null?Q$(rE(e)):{},Cv(t||!e||!e.__esModule?cs(r,"default",{value:e,enumerable:!0}):r,e)),oE=e=>Cv(cs({},"__esModule",{value:!0}),e);var Uh=Yr((D3,CI)=>{"use strict";var zh=Object.defineProperty,Sz=Object.getOwnPropertyDescriptor,kz=Object.getOwnPropertyNames,Iz=Object.prototype.hasOwnProperty,Tz=(e,t)=>{for(var r in t)zh(e,r,{get:t[r],enumerable:!0})},$z=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of kz(t))!Iz.call(e,n)&&n!==r&&zh(e,n,{get:()=>t[n],enumerable:!(o=Sz(t,n))||o.enumerable});return e},Ez=e=>$z(zh({},"__esModule",{value:!0}),e),$I={};Tz($I,{SYMBOL_FOR_REQ_CONTEXT:()=>EI,getContext:()=>Cz});CI.exports=Ez($I);var EI=Symbol.for("@vercel/request-context");function Cz(){var t,r,o;return(o=(r=(t=globalThis[EI])==null?void 0:t.get)==null?void 0:r.call(t))!=null?o:{}}});var Ui=Yr((z3,PI)=>{"use strict";var Lh=Object.defineProperty,Az=Object.getOwnPropertyDescriptor,Pz=Object.getOwnPropertyNames,Oz=Object.prototype.hasOwnProperty,Rz=(e,t)=>{for(var r in t)Lh(e,r,{get:t[r],enumerable:!0})},Mz=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Pz(t))!Oz.call(e,n)&&n!==r&&Lh(e,n,{get:()=>t[n],enumerable:!(o=Az(t,n))||o.enumerable});return e},Nz=e=>Mz(Lh({},"__esModule",{value:!0}),e),AI={};Rz(AI,{VercelOidcTokenError:()=>Fh});PI.exports=Nz(AI);var Fh=class extends Error{constructor(t,r){super(t),this.name="VercelOidcTokenError",this.cause=r}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}});var NI=Yr((U3,MI)=>{"use strict";var jz=Object.create,Nu=Object.defineProperty,Dz=Object.getOwnPropertyDescriptor,zz=Object.getOwnPropertyNames,Uz=Object.getPrototypeOf,Fz=Object.prototype.hasOwnProperty,Lz=(e,t)=>{for(var r in t)Nu(e,r,{get:t[r],enumerable:!0})},OI=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zz(t))!Fz.call(e,n)&&n!==r&&Nu(e,n,{get:()=>t[n],enumerable:!(o=Dz(t,n))||o.enumerable});return e},Zh=(e,t,r)=>(r=e!=null?jz(Uz(e)):{},OI(t||!e||!e.__esModule?Nu(r,"default",{value:e,enumerable:!0}):r,e)),qz=e=>OI(Nu({},"__esModule",{value:!0}),e),RI={};Lz(RI,{findRootDir:()=>Gz,getUserDataDir:()=>Hz});MI.exports=qz(RI);var Fi=Zh(require("path")),Zz=Zh(require("fs")),qh=Zh(require("os")),Vz=Ui();function Gz(){try{let e=process.cwd();for(;e!==Fi.default.dirname(e);){let t=Fi.default.join(e,".vercel");if(Zz.default.existsSync(t))return e;e=Fi.default.dirname(e)}}catch(e){throw new Vz.VercelOidcTokenError("Token refresh only supported in node server environments")}return null}function Hz(){if(process.env.XDG_DATA_HOME)return process.env.XDG_DATA_HOME;switch(qh.default.platform()){case"darwin":return Fi.default.join(qh.default.homedir(),"Library/Application Support");case"linux":return Fi.default.join(qh.default.homedir(),".local/share");case"win32":return process.env.LOCALAPPDATA?process.env.LOCALAPPDATA:null;default:return null}}});var qI=Yr((F3,LI)=>{"use strict";var Bz=Object.create,ju=Object.defineProperty,Jz=Object.getOwnPropertyDescriptor,Wz=Object.getOwnPropertyNames,Kz=Object.getPrototypeOf,Yz=Object.prototype.hasOwnProperty,Xz=(e,t)=>{for(var r in t)ju(e,r,{get:t[r],enumerable:!0})},jI=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Wz(t))!Yz.call(e,n)&&n!==r&&ju(e,n,{get:()=>t[n],enumerable:!(o=Jz(t,n))||o.enumerable});return e},DI=(e,t,r)=>(r=e!=null?Bz(Kz(e)):{},jI(t||!e||!e.__esModule?ju(r,"default",{value:e,enumerable:!0}):r,e)),Qz=e=>jI(ju({},"__esModule",{value:!0}),e),zI={};Xz(zI,{isValidAccessToken:()=>n1,readAuthConfig:()=>t1,writeAuthConfig:()=>r1});LI.exports=Qz(zI);var Li=DI(require("fs")),UI=DI(require("path")),e1=Du();function FI(){let e=(0,e1.getVercelDataDir)();if(!e)throw new Error(`Unable to find Vercel CLI data directory. Your platform: ${process.platform}. Supported: darwin, linux, win32.`);return UI.join(e,"auth.json")}function t1(){try{let e=FI();if(!Li.existsSync(e))return null;let t=Li.readFileSync(e,"utf8");return t?JSON.parse(t):null}catch(e){return null}}function r1(e){let t=FI(),r=UI.dirname(t);Li.existsSync(r)||Li.mkdirSync(r,{mode:504,recursive:!0}),Li.writeFileSync(t,JSON.stringify(e,null,2),{mode:384})}function n1(e){if(!e.token)return!1;if(typeof e.expiresAt!="number")return!0;let t=Math.floor(Date.now()/1e3);return e.expiresAt>=t}});var HI=Yr((L3,GI)=>{"use strict";var Hh=Object.defineProperty,o1=Object.getOwnPropertyDescriptor,a1=Object.getOwnPropertyNames,i1=Object.prototype.hasOwnProperty,s1=(e,t)=>{for(var r in t)Hh(e,r,{get:t[r],enumerable:!0})},l1=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of a1(t))!i1.call(e,n)&&n!==r&&Hh(e,n,{get:()=>t[n],enumerable:!(o=o1(t,n))||o.enumerable});return e},u1=e=>l1(Hh({},"__esModule",{value:!0}),e),ZI={};s1(ZI,{processTokenResponse:()=>f1,refreshTokenRequest:()=>m1});GI.exports=u1(ZI);var Vh=require("os"),c1="https://vercel.com",d1="cl_HYyOPBNtFMfHhaUn9L4QPfTZz6TP47bp",VI=`@vercel/oidc node-${process.version} ${(0,Vh.platform)()} (${(0,Vh.arch)()}) ${(0,Vh.hostname)()}`,Gh=null;async function p1(){if(Gh)return Gh;let e=`${c1}/.well-known/openid-configuration`,t=await fetch(e,{headers:{"user-agent":VI}});if(!t.ok)throw new Error("Failed to discover OAuth endpoints");let r=await t.json();if(!r||typeof r.token_endpoint!="string")throw new Error("Invalid OAuth discovery response");let o=r.token_endpoint;return Gh=o,o}async function m1(e){let t=await p1();return await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","user-agent":VI},body:new URLSearchParams({client_id:d1,grant_type:"refresh_token",...e})})}async function f1(e){let t=await e.json();if(!e.ok){let r=typeof t=="object"&&t&&"error"in t?String(t.error):"Token refresh failed";return[new Error(r)]}return typeof t!="object"||t===null?[new Error("Invalid token response")]:typeof t.access_token!="string"?[new Error("Missing access_token in response")]:t.token_type!=="Bearer"?[new Error("Invalid token_type in response")]:typeof t.expires_in!="number"?[new Error("Missing expires_in in response")]:[null,t]}});var Du=Yr((q3,YI)=>{"use strict";var g1=Object.create,zu=Object.defineProperty,h1=Object.getOwnPropertyDescriptor,v1=Object.getOwnPropertyNames,y1=Object.getPrototypeOf,_1=Object.prototype.hasOwnProperty,b1=(e,t)=>{for(var r in t)zu(e,r,{get:t[r],enumerable:!0})},JI=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of v1(t))!_1.call(e,n)&&n!==r&&zu(e,n,{get:()=>t[n],enumerable:!(o=h1(t,n))||o.enumerable});return e},WI=(e,t,r)=>(r=e!=null?g1(y1(e)):{},JI(t||!e||!e.__esModule?zu(r,"default",{value:e,enumerable:!0}):r,e)),x1=e=>JI(zu({},"__esModule",{value:!0}),e),KI={};b1(KI,{assertVercelOidcTokenResponse:()=>Bh,findProjectInfo:()=>I1,getTokenPayload:()=>E1,getVercelCliToken:()=>S1,getVercelDataDir:()=>w1,getVercelOidcToken:()=>k1,isExpired:()=>C1,loadToken:()=>$1,saveToken:()=>T1});YI.exports=x1(KI);var qi=WI(require("path")),co=WI(require("fs")),Ia=Ui(),Uu=NI(),ka=qI(),BI=HI();function w1(){let e="com.vercel.cli",t=(0,Uu.getUserDataDir)();return t?qi.join(t,e):null}async function S1(){var t;let e=(0,ka.readAuthConfig)();if(!e)return null;if((0,ka.isValidAccessToken)(e))return e.token||null;if(!e.refreshToken)return(0,ka.writeAuthConfig)({}),null;try{let r=await(0,BI.refreshTokenRequest)({refresh_token:e.refreshToken}),[o,n]=await(0,BI.processTokenResponse)(r);if(o||!n)return(0,ka.writeAuthConfig)({}),null;let i={token:n.access_token,expiresAt:Math.floor(Date.now()/1e3)+n.expires_in};return n.refresh_token&&(i.refreshToken=n.refresh_token),(0,ka.writeAuthConfig)(i),(t=i.token)!=null?t:null}catch(r){return(0,ka.writeAuthConfig)({}),null}}async function k1(e,t,r){let o=`https://api.vercel.com/v1/projects/${t}/token?source=vercel-oidc-refresh${r?`&teamId=${r}`:""}`,n=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw new Ia.VercelOidcTokenError(`Failed to refresh OIDC token: ${n.statusText}`);let i=await n.json();return Bh(i),i}function Bh(e){if(!e||typeof e!="object")throw new TypeError("Vercel OIDC token is malformed. Expected an object. Please run `vc env pull` and try again");if(!("token"in e)||typeof e.token!="string")throw new TypeError("Vercel OIDC token is malformed. Expected a string-valued token property. Please run `vc env pull` and try again")}function I1(){let e=(0,Uu.findRootDir)();if(!e)throw new Ia.VercelOidcTokenError("Unable to find project root directory. Have you linked your project with `vc link?`");let t=qi.join(e,".vercel","project.json");if(!co.existsSync(t))throw new Ia.VercelOidcTokenError("project.json not found, have you linked your project with `vc link?`");let r=JSON.parse(co.readFileSync(t,"utf8"));if(typeof r.projectId!="string"&&typeof r.orgId!="string")throw new TypeError("Expected a string-valued projectId property. Try running `vc link` to re-link your project.");return{projectId:r.projectId,teamId:r.orgId}}function T1(e,t){let r=(0,Uu.getUserDataDir)();if(!r)throw new Ia.VercelOidcTokenError("Unable to find user data directory. Please reach out to Vercel support.");let o=qi.join(r,"com.vercel.token",`${t}.json`),n=JSON.stringify(e);co.mkdirSync(qi.dirname(o),{mode:504,recursive:!0}),co.writeFileSync(o,n),co.chmodSync(o,432)}function $1(e){let t=(0,Uu.getUserDataDir)();if(!t)throw new Ia.VercelOidcTokenError("Unable to find user data directory. Please reach out to Vercel support.");let r=qi.join(t,"com.vercel.token",`${e}.json`);if(!co.existsSync(r))return null;let o=JSON.parse(co.readFileSync(r,"utf8"));return Bh(o),o}function E1(e){let t=e.split(".");if(t.length!==3)throw new Ia.VercelOidcTokenError("Invalid token. Please run `vc env pull` and try again");let r=t[1].replace(/-/g,"+").replace(/_/g,"/"),o=r.padEnd(r.length+(4-r.length%4)%4,"=");return JSON.parse(Buffer.from(o,"base64").toString("utf8"))}function C1(e){return e.exp*1e3<Date.now()}});var eT=Yr((Z3,QI)=>{"use strict";var Wh=Object.defineProperty,A1=Object.getOwnPropertyDescriptor,P1=Object.getOwnPropertyNames,O1=Object.prototype.hasOwnProperty,R1=(e,t)=>{for(var r in t)Wh(e,r,{get:t[r],enumerable:!0})},M1=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of P1(t))!O1.call(e,n)&&n!==r&&Wh(e,n,{get:()=>t[n],enumerable:!(o=A1(t,n))||o.enumerable});return e},N1=e=>M1(Wh({},"__esModule",{value:!0}),e),XI={};R1(XI,{refreshToken:()=>j1});QI.exports=N1(XI);var Jh=Ui(),po=Du();async function j1(){let{projectId:e,teamId:t}=(0,po.findProjectInfo)(),r=(0,po.loadToken)(e);if(!r||(0,po.isExpired)((0,po.getTokenPayload)(r.token))){let o=await(0,po.getVercelCliToken)();if(!o)throw new Jh.VercelOidcTokenError("Failed to refresh OIDC token: Log in to Vercel CLI and link your project with `vc link`");if(!e)throw new Jh.VercelOidcTokenError("Failed to refresh OIDC token: Try re-linking your project with `vc link`");if(r=await(0,po.getVercelOidcToken)(o,e,t),!r)throw new Jh.VercelOidcTokenError("Failed to refresh OIDC token");(0,po.saveToken)(r,e)}process.env.VERCEL_OIDC_TOKEN=r.token}});var nT=Yr((V3,rT)=>{"use strict";var Yh=Object.defineProperty,D1=Object.getOwnPropertyDescriptor,z1=Object.getOwnPropertyNames,U1=Object.prototype.hasOwnProperty,F1=(e,t)=>{for(var r in t)Yh(e,r,{get:t[r],enumerable:!0})},L1=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of z1(t))!U1.call(e,n)&&n!==r&&Yh(e,n,{get:()=>t[n],enumerable:!(o=D1(t,n))||o.enumerable});return e},q1=e=>L1(Yh({},"__esModule",{value:!0}),e),tT={};F1(tT,{getVercelOidcToken:()=>G1,getVercelOidcTokenSync:()=>Kh});rT.exports=q1(tT);var Z1=Uh(),V1=Ui();async function G1(){let e="",t;try{e=Kh()}catch(r){t=r}try{let[{getTokenPayload:r,isExpired:o},{refreshToken:n}]=await Promise.all([await Promise.resolve().then(()=>ds(Du())),await Promise.resolve().then(()=>ds(eT()))]);(!e||o(r(e)))&&(await n(),e=Kh())}catch(r){let o=t instanceof Error?t.message:"";throw r instanceof Error&&(o=`${o}
${r.message}`),o?new V1.VercelOidcTokenError(o):r}return e}function Kh(){var t,r;let e=(r=(t=(0,Z1.getContext)().headers)==null?void 0:t["x-vercel-oidc-token"])!=null?r:process.env.VERCEL_OIDC_TOKEN;if(!e)throw new Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return e}});var Qh=Yr((G3,iT)=>{"use strict";var Xh=Object.defineProperty,H1=Object.getOwnPropertyDescriptor,B1=Object.getOwnPropertyNames,J1=Object.prototype.hasOwnProperty,W1=(e,t)=>{for(var r in t)Xh(e,r,{get:t[r],enumerable:!0})},K1=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of B1(t))!J1.call(e,n)&&n!==r&&Xh(e,n,{get:()=>t[n],enumerable:!(o=H1(t,n))||o.enumerable});return e},Y1=e=>K1(Xh({},"__esModule",{value:!0}),e),aT={};W1(aT,{getContext:()=>X1.getContext,getVercelOidcToken:()=>oT.getVercelOidcToken,getVercelOidcTokenSync:()=>oT.getVercelOidcTokenSync});iT.exports=Y1(aT);var oT=nT(),X1=Uh()});var _F={};Or(_F,{default:()=>Cc});module.exports=oE(_F);var as=require("obsidian");var zc=require("obsidian");var Ua=require("obsidian"),ps=class extends Ua.Modal{constructor(t,r,o){super(t),this.folderName=r,this.folderPath=o,this.result=!1,this.modalPromise=new Promise(n=>{this.resolveModalPromise=n})}onOpen(){let{contentEl:t}=this;t.createEl("h2",{text:`[ChatGPT MD] No ${this.folderName} folder found.`}),t.createEl("p",{text:`If you choose "Yes, Create", the plugin will automatically create a folder at: ${this.folderPath}. You can change this path in the plugin settings.`}),new Ua.Setting(t).addButton(r=>r.setButtonText("Yes, Create Folder").setTooltip("Create folder").setCta().onClick(()=>{this.result=!0,this.resolveModalPromise(this.result),this.close()})),new Ua.Setting(t).addButton(r=>r.setButtonText("No, I'll create it myself").setTooltip("Cancel").setCta().onClick(()=>{this.result=!1,this.resolveModalPromise(this.result),this.close()}))}waitForModalValue(){return this.modalPromise}onClose(){let{contentEl:t}=this;t.empty()}};var Av=async(e,t,r)=>{let o=new ps(e,t,r);o.open();let n=await o.waitForModalValue();return n&&await e.vault.createFolder(r),n};var _o=class{constructor(t){this.app=t}async writeInferredTitle(t,r){var l,d;let o=t.file;if(!o)throw new Error("No file is currently open");let n=this.sanitizeFileName(r),i=(d=(l=o.parent)==null?void 0:l.path)!=null?d:"/",s=`${i}/${n}.md`;for(let u=1;await this.app.vault.adapter.exists(s);u++)s=`${i}/${n} (${u}).md`;try{await this.app.fileManager.renameFile(o,s)}catch(u){throw new zc.Notice("[ChatGPT MD] Error writing inferred title to editor"),u}}sanitizeFileName(t){return t.replace(/[\\/:*?"<>|]/g,"-")}async ensureFolderExists(t,r){return!await this.app.vault.adapter.exists(t)&&!await Av(this.app,r,t)?(new zc.Notice(`[ChatGPT MD] No ${r} found. One must be created to use the plugin. Set one in settings and make sure it exists.`),!1):!0}async createNewFile(t,r){return this.app.vault.create(t,r)}async readFile(t){return this.app.vault.read(t)}async getLinkedNoteContent(t){try{let r=this.app.metadataCache.getFirstLinkpathDest(t,"");return r?await this.app.vault.read(r):null}catch(r){return null}}formatDate(t,r){return t.toISOString().replace(/[-:]/g,"").replace(/\..+/,"")}};var aE="ChatGPT MD",Uc=`[${aE}]`,it="ollama",rt="openai",Ve="openrouter",ut="lmstudio",st="anthropic",lt="gemini",mt="zai";var AF={[rt]:"/v1/chat/completions",[Ve]:"/api/v1/chat/completions",[it]:"/api/chat",[ut]:"/v1/chat/completions",[st]:"/v1/messages",[lt]:"/v1beta/models/{model}:generateContent"};var Pv="add-hr",Ov="call-chatgpt-api",Rv="stop-streaming",Mv="move-to-chat",Nv="infer-title",jv="choose-chat-template",Dv="clear-chat";var Fc="chatFolder",zv="chatTemplateFolder",Fa="agentFolder",Uv="choose-agent",Fv="create-agent",vt=`

`,Lv=/\[\[([^\][]+)\]\]/g,qv=/\[([^\]]+)\]\(([^()]+)\)/g,Zv=`=begin-chatgpt-md-comment${vt}`,Vv="=end-chatgpt-md-comment",Gv=3,Lc=6,Hv="English",Bv=4,ms="YYYYMMDDhhmmss",Jv="Failed to fetch",qc="__chatgpt_plugin",bo=`<hr class="${qc}">`,Rr="role::",Xr="assistant",Wv="developer";var zt="user",_n=6e3,Kv=6e3,Yv=9e3,fs="You're chatting with a user in Obsidian, a knowledge management system where they organize notes in interconnected Markdown files. This conversation appears as a chat within their active document.\n\nBe helpful and concise. Use proper Markdown: ```language for code blocks, `inline` for code/filenames. Support [[Internal Links]] and [external links](url). Consider this chat is part of their personal knowledge base.\n\nWhen appropriate, end with an open question to keep the conversation helpful and make contextual offers based on their last message.",Xv=`You are an expert AI agent architect. Your job is to create a well-designed AI agent configuration based on a user's description of what they want the agent to do.

You MUST respond with ONLY valid JSON (no markdown, no explanation, no code fences). The JSON must have exactly these three fields:

{
  "name": "Short Agent Name",
  "temperature": 0.7,
  "prompt": "The comprehensive system prompt for the agent..."
}

## Field Guidelines

### name
- 2-4 words, descriptive and concise
- Use title case (e.g., "Code Review Expert", "Creative Writing Coach")
- Should clearly convey the agent's purpose at a glance

### temperature (0 to 2)
Choose based on the agent's purpose:
- 0.0-0.3: Factual, precise, deterministic tasks (code review, data analysis, math, legal)
- 0.4-0.7: Balanced tasks (general assistance, tutoring, summarization, Q&A)
- 0.8-1.2: Creative tasks (writing, brainstorming, storytelling, ideation)
- 1.3-2.0: Highly experimental/random output (only for very specific creative needs)

### prompt
Create a comprehensive system prompt that includes:

1. **Role Definition**: Who the agent is, their expertise, and professional background
2. **Core Capabilities**: What the agent can do, listed clearly
3. **Behavioral Guidelines**: How the agent should communicate (tone, style, formality level)
4. **Constraints & Boundaries**: What the agent should NOT do or topics to avoid
5. **Response Format**: How responses should be structured (use of headers, lists, code blocks, etc.)
6. **Context Awareness**: Remind the agent they operate within Obsidian, a knowledge management system with Markdown notes
7. **Interaction Patterns**: How to handle follow-up questions, clarifications, and edge cases

The prompt should be thorough (200-500 words), well-structured, and immediately usable without modification. Use clear language and avoid vague instructions.`,Qv="\u26A0\uFE0F **Response was truncated due to token limit.** Please increase the `max_tokens` setting in ChatGPT MD plugin settings to get the complete response.",ey="\u26A0\uFE0F *Note: Some alternative responses were truncated due to token limit. Consider increasing `max_tokens` in settings for fuller responses.*",ty="Response was truncated due to token limit",ry="\u26A0\uFE0F Title Inference Error";function gs(e){if(!e||!e.trim().startsWith("---"))return e;let t=e.split(`
`),r=-1;for(let o=1;o<t.length;o++)if(t[o].trim()==="---"){r=o;break}return r===-1?e:t.slice(r+1).join(`
`).trim()}function hs(e){let r=e.replace(/^---\n/,"").replace(/\n---$/,"").split(`
`),o={},n=null,i=[];for(let s=0;s<r.length;s++){let l=r[s].trim();if(!l)continue;if(n!==null)if(l.startsWith("-")){let c=l.substring(1).trim();(c.startsWith("'")&&c.endsWith("'")||c.startsWith('"')&&c.endsWith('"'))&&(c=c.substring(1,c.length-1)),i.push(c);continue}else o[n]=i,n=null,i=[];let d=l.indexOf(":");if(d===-1)continue;let u=l.substring(0,d).trim(),m=l.substring(d+1).trim();if(m===""&&s+1<r.length&&r[s+1].trim().startsWith("-")){n=u,i=[];continue}m.startsWith("[")&&m.endsWith("]")?o[u]=m.slice(1,-1).split(",").map(c=>{let p=c.trim();return p.startsWith("'")&&p.endsWith("'")||p.startsWith('"')&&p.endsWith('"')?p.slice(1,-1):p}):m==="true"?o[u]=!0:m==="false"?o[u]=!1:m==="null"?o[u]=null:isNaN(Number(m))?o[u]=m:o[u]=Number(m)}return n!==null&&(o[n]=i),o}function Zc(e){return`---
${Object.entries(e).map(([r,o])=>o==null?`${r}:`:typeof o=="string"?`${r}: "${o}"`:Array.isArray(o)?`${r}: [${o.map(n=>`"${n}"`).join(", ")}]`:`${r}: ${o}`).join(`
`)}
---
`}function Vc(e){let t="=begin-chatgpt-md-comment",r="=end-chatgpt-md-comment",o=e.indexOf(t);if(o===-1)return e;let n=e.indexOf(r,o);return n===-1?e:e.substring(0,o)+e.substring(n+r.length)}function ny(e){let t=[{regex:Lv,fullMatchIndex:0,titleIndex:1},{regex:qv,fullMatchIndex:0,titleIndex:2}],r=[],o=new Set;for(let{regex:n,fullMatchIndex:i,titleIndex:s}of t)for(let l of e.matchAll(n)){let d=l[i],u=l[s];u&&u.includes("|")&&(u=u.split("|")[0].trim()),u&&!o.has(u)&&!u.startsWith("http://")&&!u.startsWith("https://")&&(r.push({link:d,title:u}),o.add(u))}return r}function oy(e){return e?e.split(bo):[]}var iE=e=>{let t=e.trim().toLowerCase(),o=[zt,Xr,Wv].find(n=>t.includes(n));if(o)return o;throw new Error(`Failed to extract role from input: "${e}"`)},ay=e=>{try{if(!e.includes(Rr))return{role:zt,content:e};let[t,...r]=e.split(Rr)[1].split(`
`);return{role:iE(t),content:r.join(`
`).trim()}}catch(t){throw new Error(`Failed to extract role and message: ${t}`)}},Qr=e=>e===0?"":e>Lc?"#".repeat(Lc)+" ":"#".repeat(e)+" ",Mr=(e,t,r)=>`${vt}${bo}${vt}${e}${Rr}${t}${r?`<span style="font-size: small;"> (${r})</span>`:""}${vt}`,iy=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var xo=class{constructor(t,r){this.fileService=t;this.notificationService=r}findLinksInMessage(t){return ny(t)}splitMessages(t){return oy(t)}removeYAMLFrontMatter(t){return gs(t)}removeCommentsFromMessages(t){return Vc(t)}extractRoleAndMessage(t){return ay(t)}cleanMessagesFromNote(t){return this.splitMessages(this.removeYAMLFrontMatter(t.getValue())).map(o=>this.removeCommentsFromMessages(o))}async getMessagesFromEditor(t,r){let o=this.cleanMessagesFromNote(t);o=await Promise.all(o.map(async i=>{let s=this.findLinksInMessage(i);for(let l of s)try{let d=await this.fileService.getLinkedNoteContent(l.title);if(d){let u=new RegExp(`${vt}${bo}${vt}#+ ${Rr}(?:${zt}|${Xr}).*$`,"gm");d=d==null?void 0:d.replace(u,""),d=this.removeYAMLFrontMatter(d)||null,i=i.replace(new RegExp(iy(l.link),"g"),`${vt}${l.title}${vt}${d}${vt}`)}}catch(d){}return i}));let n=o.map(i=>this.extractRoleAndMessage(i));return{messages:o,messagesWithRole:n}}addSystemCommandsToMessages(t,r){return!r||r.length===0?t:[...r.map(n=>({role:"system",content:n})),...t]}formatMessage(t,r,o){let n=Qr(r);return`${Mr(n,t.role,o)}${t.content}`}appendMessage(t,r,o){let n=Qr(o),i=Mr(n,Xr),s=Mr(n,zt);t.replaceRange(`${i}${r}${s}`,t.getCursor())}processResponse(t,r,o){r.mode==="streaming"?r.wasAborted||this.processStreamingResponse(t,o):this.processStandardResponse(t,r,o)}processStreamingResponse(t,r){let o=Qr(r.headingLevel),n=Mr(o,zt),i=t.getCursor();t.replaceRange(n,i);let s=t.offsetToPos(t.posToOffset(i)+n.length);t.setCursor(s)}processStandardResponse(t,r,o){let n,i;typeof r=="object"&&r!==null?(n=r.fullString||JSON.stringify(r.text||r)||"[No response]",i=r.model):n=String(r||"[No response]");let s=Qr(o.headingLevel),l=Mr(s,Xr,i),d=Mr(s,zt),u=t.getCursor(),m=`${l}${n}${d}`;t.replaceRange(m,u);let c=t.offsetToPos(t.posToOffset(u)+m.length);t.setCursor(c)}};var en=require("obsidian");var bn=require("obsidian"),vs=class extends bn.SuggestModal{constructor(t,r,o){super(t),this.settings=r,this.titleDate=o}getFilesInChatFolder(){let t=this.app.vault.getAbstractFileByPath(this.settings.chatTemplateFolder);if(t!=null)return t.children;throw new bn.Notice(`Error getting folder: ${this.settings.chatTemplateFolder}`),new Error(`Error getting folder: ${this.settings.chatTemplateFolder}`)}getSuggestions(t){let r=this.getFilesInChatFolder();return t==""?r.map(o=>({title:o.basename,file:o})).sort((o,n)=>o.title.localeCompare(n.title)):r.filter(o=>o.basename.toLowerCase().includes(t.toLowerCase())).map(o=>({title:o.basename,file:o})).sort((o,n)=>o.title.localeCompare(n.title))}renderSuggestion(t,r){r.createEl("div",{text:t.title})}async onChooseSuggestion(t,r){new bn.Notice(`Selected ${t.title}`);let o=await this.app.vault.read(t.file),n=o;!/^---\n[\s\S]*?\n---/.test(o)&&this.settings.defaultChatFrontmatter&&(n=this.settings.defaultChatFrontmatter+`

`+o);let s=`${this.titleDate} ${t.title}`,l=(0,bn.normalizePath)(`${this.settings.chatFolder}/${s}.md`),d=1;for(;await this.app.vault.adapter.exists(l);)l=(0,bn.normalizePath)(`${this.settings.chatFolder}/${s} (${d}).md`),d++;try{let u=await this.app.vault.create(l,n);await this.app.workspace.openLinkText(u.basename,"",!0)}catch(u){}}};var wo=class{constructor(t,r,o){this.app=t;this.fileService=r;this.editorService=o}async createNewChatFromTemplate(t,r){try{if(!t.chatFolder||t.chatFolder.trim()===""){new en.Notice("[ChatGPT MD] No chat folder value found. Please set one in settings.");return}if(!t.chatTemplateFolder||t.chatTemplateFolder.trim()===""){new en.Notice("[ChatGPT MD] No chat template folder value found. Please set one in settings.");return}if(!await this.fileService.ensureFolderExists(t.chatFolder,Fc)||!await this.fileService.ensureFolderExists(t.chatTemplateFolder,zv))return;new vs(this.app,t,r).open()}catch(o){new en.Notice("[ChatGPT MD] Error in Create new chat from template, check console")}}async createNewChatWithHighlightedText(t,r){try{let o=t.getSelection();if(!r.chatFolder||r.chatFolder.trim()===""){new en.Notice("[ChatGPT MD] No chat folder value found. Please set one in settings.");return}if(!await this.fileService.ensureFolderExists(r.chatFolder,Fc))return;let i=`${this.fileService.formatDate(new Date,r.dateFormat)}.md`,s=`${r.chatFolder}/${i}`,l="";r.defaultChatFrontmatter&&(l=r.defaultChatFrontmatter+`

`),o&&(l+=o);let d=await this.fileService.createNewFile(s,l);await this.app.workspace.openLinkText(d.basename,"",!0,{state:{mode:"source"}});let u=this.app.workspace.getActiveViewOfType(en.MarkdownView);if(!u){new en.Notice("No active markdown editor found.");return}u.editor.focus(),this.editorService.moveCursorToEnd(u.editor)}catch(o){new en.Notice("[ChatGPT MD] Error in Create new chat with highlighted text, check console")}}};var So=class{constructor(t){this.app=t}async readFrontmatter(t){try{let r=this.app.metadataCache.getFileCache(t);return r!=null&&r.frontmatter?{...r.frontmatter}:null}catch(r){return null}}async writeFrontmatter(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{Object.keys(o).forEach(n=>{delete o[n]}),Object.assign(o,r)})}catch(o){throw new Error(`Failed to write frontmatter: ${o.message}`)}}async updateFrontmatterField(t,r,o){try{await this.app.fileManager.processFrontMatter(t,n=>{n[r]=o})}catch(n){throw new Error(`Failed to update frontmatter field '${r}': ${n.message}`)}}async mergeFrontmatter(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{Object.assign(o,r)})}catch(o){throw new Error(`Failed to merge frontmatter: ${o.message}`)}}hasFrontmatter(t){try{let r=this.app.metadataCache.getFileCache(t);return!!(r!=null&&r.frontmatter&&Object.keys(r.frontmatter).length>0)}catch(r){return!1}}async removeFrontmatterField(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{delete o[r]})}catch(o){throw new Error(`Failed to remove frontmatter field '${r}': ${o.message}`)}}async removeFrontmatterFields(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{r.forEach(n=>{delete o[n]})})}catch(o){throw new Error(`Failed to remove frontmatter fields: ${o.message}`)}}async clearFrontmatter(t){try{await this.app.fileManager.processFrontMatter(t,r=>{Object.keys(r).forEach(o=>{delete r[o]})})}catch(r){throw new Error(`Failed to clear frontmatter: ${r.message}`)}}async getFrontmatterField(t,r,o){try{let n=await this.readFrontmatter(t);return!n||!(r in n)?o:n[r]}catch(n){return o}}async hasFrontmatterField(t,r){try{let o=await this.readFrontmatter(t);return!!(o&&r in o)}catch(o){return!1}}};var dy=require("obsidian");var sy=require("obsidian"),Ut=class{showNotification(t,r=5e3){new sy.Notice(t,r)}formatChatMessage(t,r=!1){return r?`I am sorry. ${t}`:t}showSuccess(t){this.showNotification(`\u2705 ${t}`,3e3)}showWarning(t){this.showNotification(`\u26A0\uFE0F ${t}`,5e3)}showError(t){this.showNotification(`\u274C ${t}`,7e3)}};function ly(e,t,r){let o=`${vt}<hr class="${qc}">${vt}${Qr(r)}${Rr}${t}${vt}`,n=e.getCursor();e.replaceRange(o,n),e.setCursor(n.line+o.split(`
`).length-1,0)}function uy(e){try{let r={line:e.lastLine()+1,ch:0};e.setCursor(r)}catch(t){throw new Error("Error moving cursor to end of file"+t)}}function cy(e,t,r){let o=e.getCursor(),n=`${t}${vt}${r}`;e.replaceRange(n,o),e.setCursor({line:o.line+1,ch:o.ch})}var ys=class{constructor(t,r,o,n,i){this.app=t;this.fileService=r||new _o(t),this.frontmatterManager=new So(t);let s=new Ut;if(this.messageService=o||new xo(this.fileService,s),!i)throw new Error("SettingsService must be provided as it includes frontmatter operations");this.settingsService=i,this.templateService=n||new wo(t,this.fileService,this)}async writeInferredTitle(t,r){return this.fileService.writeInferredTitle(t,r)}async ensureFolderExists(t,r){return this.fileService.ensureFolderExists(t,r)}getDate(t,r){return this.fileService.formatDate(t,r)}addHorizontalRule(t,r,o){ly(t,r,o)}async clearChat(t){let r=await this.preserveFrontmatter();t.setValue(r),this.positionCursorAfterClear(t,r)}async preserveFrontmatter(){if(!this.app||!this.frontmatterManager)return"";let t=this.app.workspace.getActiveViewOfType(dy.MarkdownView);if(!(t!=null&&t.file))return"";try{let r=await this.frontmatterManager.readFrontmatter(t.file);return!r||Object.keys(r).length===0?"":this.formatFrontmatter(r)}catch(r){return""}}formatFrontmatter(t){let r=Object.entries(t).filter(([o])=>o!=="position").map(([o,n])=>typeof n=="string"?`${o}: "${n}"`:`${o}: ${n}`);return r.length>0?`---
${r.join(`
`)}
---

`:""}positionCursorAfterClear(t,r){r?t.setCursor({line:t.lastLine()+1,ch:0}):t.setCursor({line:0,ch:0})}moveCursorToEnd(t){uy(t)}addCommentBlock(t,r,o){cy(t,r,o)}async getMessagesFromEditor(t,r){return this.messageService.getMessagesFromEditor(t,r)}async createNewChatFromTemplate(t,r){return this.templateService.createNewChatFromTemplate(t,r)}async createNewChatWithHighlightedText(t,r){return this.templateService.createNewChatWithHighlightedText(t,r)}async getFrontmatter(t,r,o){return await this.settingsService.getFrontmatter(t)}processResponse(t,r,o){this.messageService.processResponse(t,r,o)}async setModel(t,r){await this.settingsService.updateFrontmatterField(t,"model",r)}};var tn={API:{AUTH_FAILED:"Authentication failed. Please check your API key in settings.",NETWORK_ERROR:"Network error. Please check your connection and try again.",RATE_LIMIT:"Rate limit exceeded. Please wait and try again.",INVALID_MODEL:"Invalid model selected. Please choose a different model.",TIMEOUT:"Request timed out. Please try again.",INVALID_RESPONSE:"Invalid response from API. Please try again.",CONNECTION_REFUSED:"Connection refused. Please check the API URL in settings."},VAULT:{FILE_NOT_FOUND:e=>`File not found: ${e}`,FOLDER_NOT_FOUND:e=>`Folder not found: ${e}`,READ_ERROR:e=>`Error reading file: ${e}`,WRITE_ERROR:e=>`Error writing to file: ${e}`},TOOL:{EXECUTION_FAILED:e=>`Failed to execute tool: ${e}`,APPROVAL_CANCELLED:"Tool execution cancelled by user",INVALID_PARAMS:e=>`Invalid parameters for tool: ${e}`,NOT_SUPPORTED:e=>`Tool ${e} is not supported by this model`},VALIDATION:{REQUIRED_FIELD:e=>`${e} is required`,INVALID_URL:e=>`Invalid URL: ${e}`,INVALID_FORMAT:(e,t)=>`Invalid ${e} format. Expected: ${t}`,EMPTY_CONTENT:"Content cannot be empty"},SETTINGS:{MISSING_API_KEY:e=>`Missing API key for ${e}. Please add it in settings.`,INVALID_FOLDER:e=>`Invalid folder path: ${e}`,MISSING_MODEL:"No model selected. Please choose a model in settings or note frontmatter."}};function py(e){switch(e){case 400:return"Bad request. Please check your input and try again.";case 401:return tn.API.AUTH_FAILED;case 403:return"Access forbidden. Please check your API key and permissions.";case 404:return"Resource not found. Please check the URL or model name.";case 429:return tn.API.RATE_LIMIT;case 500:case 502:case 503:return"Server error. Please try again later.";case 504:return"Gateway timeout. The request took too long. Please try again.";default:return`API error (${e}). Please try again.`}}function sE(e){var t;return typeof e=="string"?e:e instanceof Error||e!=null&&e.message?e.message:(t=e==null?void 0:e.error)!=null&&t.message?e.error.message:e!=null&&e.error?typeof e.error=="string"?e.error:JSON.stringify(e.error):"An unexpected error occurred. Please try again."}function my(e,t){let r=sE(e),o=t?`[${t}]`:"[Error]";return e instanceof Error&&e.stack?`${o} ${r}
${e.stack}`:`${o} ${r}`}var Nr=class{constructor(t){this.notificationService=t}handleApiError(t,r,o={showNotification:!0,logToConsole:!0,returnForChat:!1}){var c,p,f,v,g,y,S;let n=`[ChatGPT MD] ${r}`,i=((c=o.context)==null?void 0:c.model)||"",s=((p=o.context)==null?void 0:p.url)||"",l=this.formatContextInfo(i,s),d="",u="";t instanceof Object?t.name==="AbortError"?d="Request was cancelled":t.message===Jv?d=tn.API.NETWORK_ERROR:t.status===401||((f=t.error)==null?void 0:f.status)===401?d=tn.API.AUTH_FAILED:t.status===404||((v=t.error)==null?void 0:v.status)===404?d=tn.API.INVALID_MODEL:t.status===429||((g=t.error)==null?void 0:g.status)===429?d=tn.API.RATE_LIMIT:t.status&&t.status>=400?d=py(t.status||((y=t.error)==null?void 0:y.status)):(S=t.error)!=null&&S.message?d=t.error.message:t.message?d=t.message:d="An unexpected error occurred":d=typeof t=="string"?t:"An unexpected error occurred";let m=`${n}: ${d}${l?` - ${l}`:""}`;if(o.logToConsole&&(u=my(t,r)),o.showNotification&&this.notificationService.showNotification(m,5e3),o.returnForChat)return`I am sorry, I could not answer your request because of an error, here is what went wrong-

${d}

Model- ${i}, URL- ${s}`;throw new Error(m)}formatContextInfo(t,r){let o=[];return t&&o.push(`Model: ${t}`),r&&o.push(`URL: ${r}`),o.length>0?o.join(", "):""}handleUrlError(t,r,o){let n=tn.API.CONNECTION_REFUSED,i=`[ChatGPT MD] ${n} (${t})`;return this.notificationService.showNotification(i),`I am sorry, I could not answer your request because of an error, here is what went wrong-

${n}

Please check your API URL settings.`}handleModelError(t,r){let o=tn.SETTINGS.MISSING_MODEL,n=`[ChatGPT MD] ${o}`;return this.notificationService.showNotification(n),`I am sorry, there was an error with the model configuration. ${o}`}handleValidationError(t,r){let o=`[ChatGPT MD] Validation Error: ${t}`;throw this.notificationService.showNotification(o),new Error(o)}};var Hc=require("obsidian");function fy(e,t){if(typeof e!="string")throw new Error(`${t} must be a string`);if(e.trim().length===0)throw new Error(`${t} cannot be empty`)}function gy(e,t){if(!e||typeof e!="string")throw new Error(`${t} API key is required`);if(e.trim().length===0)throw new Error(`${t} API key cannot be empty`);if(e.length<10)throw new Error(`${t} API key appears to be invalid (too short)`)}function hy(e){if(typeof e!="string")throw new Error("URL must be a string");if(e.trim().length===0)throw new Error("URL cannot be empty");try{new URL(e)}catch(t){throw new Error(`Invalid URL format: ${e}`)}}function ur(e){return!!e&&e.trim()!==""}var xn=class{constructor(t){this.notificationService=t||new Ut}getApiKey(t,r){switch(r){case rt:return t.apiKey;case Ve:return t.openrouterApiKey;case st:return t.anthropicApiKey;case lt:return t.geminiApiKey;case mt:return t.zaiApiKey;case it:return"";case ut:return"";default:return""}}validateApiKey(t,r){if(!(r===it||r===ut))try{gy(t,r)}catch(o){let n=`${r} API key is missing or invalid. Please add your ${r} API key in the settings or set your default model in the settings if you use Ollama or LM Studio.`;throw this.notificationService.showError(n),new Error(n)}}createAuthHeaders(t,r){let o={"Content-Type":"application/json"};switch(r){case rt:o.Authorization=`Bearer ${t}`;break;case Ve:o.Authorization=`Bearer ${t}`,o["HTTP-Referer"]="https://github.com/bramses/chatgpt-md",o["X-Title"]="Obsidian ChatGPT MD Plugin";break;case st:o["x-api-key"]=t,o["anthropic-version"]="2023-06-01";break;case lt:o["x-goog-api-key"]=t;break;case mt:o.Authorization=`Bearer ${t}`;break;case it:break;case ut:break}return o}};var _s,bs,Gc;try{let e=globalThis.require,t=e("http"),r=e("https"),o=e("url");_s=t.request,bs=r.request,Gc=o.URL}catch(e){_s=null,bs=null,Gc=globalThis.URL}async function vy(e){return _s&&bs?lE(e):uE(e)}async function lE(e){return new Promise((t,r)=>{let o=new Gc(e.url),n=o.protocol==="https:",i=n?bs:_s,s={hostname:o.hostname==="localhost"?"127.0.0.1":o.hostname,port:o.port||(n?443:80),path:o.pathname+o.search,method:e.method||"GET",headers:{"Content-Type":"application/json",...e.headers}},l=i(s,d=>{let u=new Headers;Object.entries(d.headers).forEach(([v,g])=>{g&&u.set(v,Array.isArray(g)?g.join(", "):String(g))});let m=d.statusCode||0,c=m>=200&&m<300,p=new ReadableStream({start(v){d.on("data",g=>{v.enqueue(new Uint8Array(g))}),d.on("end",()=>{v.close()}),d.on("error",g=>{v.error(g)})}}),f={ok:c,status:m,statusText:d.statusMessage||"",headers:u,body:p,json:async()=>{let v=p.getReader(),g=[];try{for(;;){let{done:k,value:w}=await v.read();if(k)break;g.push(w)}let y=g.reduce((k,w)=>k+w.length,0),S=new Uint8Array(y),b=0;for(let k of g)S.set(k,b),b+=k.length;let _=new TextDecoder().decode(S);return JSON.parse(_)}finally{v.releaseLock()}},text:async()=>{let v=p.getReader(),g=[];try{for(;;){let{done:_,value:k}=await v.read();if(_)break;g.push(k)}let y=g.reduce((_,k)=>_+k.length,0),S=new Uint8Array(y),b=0;for(let _ of g)S.set(_,b),b+=_.length;return new TextDecoder().decode(S)}finally{v.releaseLock()}},clone:()=>{throw new Error("Response cloning not implemented for requestStream")}};t(f)});e.signal&&e.signal.addEventListener("abort",()=>{l.destroy(),r(new Error("Request aborted"))}),l.on("error",d=>{r(d)}),e.body&&l.write(e.body),l.end()})}async function uE(e){let t={...e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]?{"Content-Type":"application/json"}:{},...e.headers},r={method:e.method||"GET",headers:t,signal:e.signal};return e.body&&(r.body=e.body),await fetch(e.url,r)}function _y(e,t,r){let o=Mr(t,Xr,r),n=e.getCursor();e.replaceRange(o,n);let i=e.posToOffset(n),s=e.offsetToPos(i+o.length);return e.setCursor(s),{initialCursor:n,newCursor:s}}function yy(e){var o,n;if(!e||e.length===0)return null;let t=e.filter(i=>i.finish_reason==="stop"),r=e.filter(i=>i.finish_reason==="length");if(t.length>0){let i=((o=t[0].message)==null?void 0:o.content)||"";return r.length>0?i+`

`+ey:i}return r.length>0?Qv:((n=e[0].message)==null?void 0:n.content)||""}function cE(e){return e.content&&Array.isArray(e.content)?e.content.filter(t=>t.type==="text").map(t=>t.text).join(""):e.content||JSON.stringify(e)}function dE(e){if(e.candidates&&e.candidates.length>0){let t=e.candidates[0];if(t.content&&t.content.parts&&t.content.parts.length>0)return t.content.parts.filter(r=>r.text).map(r=>r.text).join("")}return e.text||JSON.stringify(e)}function pE(e){return e.message&&e.message.content?e.message.content:e.response?e.response:JSON.stringify(e)}function by(e,t){switch(t){case rt:case Ve:case ut:let r=yy(e.choices);return r!==null?r:"";case st:return cE(e);case lt:return dE(e);case it:return pE(e);default:let o=yy(e==null?void 0:e.choices);return o!==null?o:(e==null?void 0:e.response)||JSON.stringify(e)}}var ko=class{constructor(t,r,o){this.abortController=null;this.wasStreamingAborted=!1;this.notificationService=r||new Ut,this.errorService=t||new Nr(this.notificationService),this.apiAuthService=o||new xn}async makeNonStreamingRequest(t,r,o,n){try{hy(t),fy(n,"Service type");let s=(await(0,Hc.requestUrl)({url:t,method:"POST",headers:o,contentType:"application/json",body:JSON.stringify(r),throw:!1})).json;return s!=null&&s.error?this.errorService.handleApiError({error:s.error},n,{returnForChat:!0,showNotification:!0,context:{model:r.model,url:t}}):by(s,n)}catch(i){return this.errorService.handleApiError(i,n,{returnForChat:!0,showNotification:!0,context:{model:r.model,url:t}})}}async makeGetRequest(t,r,o){try{let n=await(0,Hc.requestUrl)({url:t,method:"GET",headers:r,throw:!1});if(n.status!==200)throw new Error(`Failed to fetch data from ${t}: ${n.status}`);return n.json}catch(n){throw n}}async handleHttpError(t,r,o,n){let i;try{i=await t.json()}catch(l){i={status:t.status,statusText:t.statusText}}let s=this.errorService.handleApiError(i,r,{returnForChat:!1,showNotification:!0,context:{model:o.model,url:n,status:t.status}});return new Error(s)}handleRequestError(t,r,o,n){return this.errorService.handleApiError(t,r,{returnForChat:!1,showNotification:!0,context:{model:o.model,url:n}})}setAbortController(t){this.abortController=t,this.wasStreamingAborted=!1}stopStreaming(){this.abortController&&(this.wasStreamingAborted=!0,this.abortController.abort(),this.abortController=null)}wasAborted(){return this.wasStreamingAborted}resetAbortedFlag(){this.wasStreamingAborted=!1}createFetchAdapter(){return async(t,r)=>{let n={url:typeof t=="string"?t:t instanceof URL?t.toString():t.url,method:(r==null?void 0:r.method)||"GET",headers:r!=null&&r.headers?typeof r.headers=="object"&&"forEach"in r.headers?this.convertHeadersToRecord(r.headers):r.headers:{},body:r!=null&&r.body?typeof r.body=="string"?r.body:JSON.stringify(r.body):void 0,signal:(r==null?void 0:r.signal)||void 0};return vy(n)}}convertHeadersToRecord(t){let r={};return t.forEach((o,n)=>{r[n]=o}),r}};var xy=50;function Bc(e,t,r,o){if(t.length===0)return r;if(o)e.replaceSelection(t);else{e.replaceRange(t,r);let i=e.posToOffset(r)+t.length,s=e.offsetToPos(i);return e.setCursor(s),s}return r}function wy(e,t,r){let n=e.posToOffset(r)+t.length;return e.offsetToPos(n)}var ws=class ws{constructor(t,r,o=!1,n=xy){this.flushTimer=null;this.bufferedText="";this.editor=t,this.currentCursor=r,this.setAtCursor=o,this.flushInterval=n}startBuffering(){this.flushTimer||(this.flushTimer=setInterval(()=>this.flush(),this.flushInterval))}appendText(t){this.bufferedText+=t}flush(){if(this.bufferedText.length===0)return;if(this.bufferedText.length>ws.MAX_BUFFER_SIZE){this.forceFlush();return}let t=this.bufferedText.lastIndexOf(`
`);if(t===-1)return;let r=this.bufferedText.substring(0,t+1);this.bufferedText=this.bufferedText.substring(t+1),this.currentCursor=Bc(this.editor,r,this.currentCursor,this.setAtCursor)}stopBuffering(){this.flushTimer&&(clearInterval(this.flushTimer),this.flushTimer=null),this.forceFlush()}forceFlush(){this.bufferedText.length!==0&&(this.currentCursor=Bc(this.editor,this.bufferedText,this.currentCursor,this.setAtCursor),this.bufferedText="")}getCursor(){return this.currentCursor}setCursor(t){this.currentCursor=t}updateCursorAfterInsert(t,r){this.currentCursor=wy(this.editor,t,r)}getBufferedText(){return this.bufferedText}reset(t){this.bufferedText="",this.currentCursor=t}};ws.MAX_BUFFER_SIZE=1e4;var xs=ws;function mE(e){let t=e.split("@");return t.length===2?{fullId:e,provider:t[0],modelId:t[1]}:{fullId:`openai@${e}`,provider:"openai",modelId:e}}function Sy(e){let t=mE(e).modelId;return t.includes("/")&&(t=t.split("/")[1]),t}function Ss(e,t){if(!t||typeof t!="string")return!1;let r=Sy(e);return t.split(/[,\n]/).map(n=>n.trim()).filter(n=>n.length>0&&!n.startsWith("#")).some(n=>{if(n.endsWith("*"))return r.startsWith(n.slice(0,-1));if(r===n)return!0;if(r.startsWith(n)){let i=r.slice(n.length);return/^-\d{8}$/.test(i)||/^-\d{4}-\d{2}-\d{2}$/.test(i)}return!1})}function ky(){return`# OpenAI (36 patterns)
codex-mini-latest
gpt-3.5-turbo
gpt-3.5-turbo-0125
gpt-3.5-turbo-1106
gpt-4
gpt-4-0125-preview
gpt-4-0613
gpt-4-1106-preview
gpt-4-turbo
gpt-4-turbo-preview
gpt-4.1
gpt-4.1-mini
gpt-4.1-nano
gpt-4o
gpt-4o-mini
gpt-5
gpt-5-chat-latest
gpt-5-codex
gpt-5-mini
gpt-5-nano
gpt-5-pro
gpt-5.1
gpt-5.1-chat-latest
gpt-5.1-codex
gpt-5.1-codex-max
gpt-5.1-codex-mini
gpt-5.2
gpt-5.2-chat-latest
gpt-5.2-codex
gpt-5.2-pro
o1
o1-pro
o3
o3-mini
o3-pro
o4-mini

# Anthropic (9 patterns)
claude-3-5-haiku
claude-3-7-sonnet
claude-3-haiku
claude-haiku-4-5
claude-opus-4
claude-opus-4-1
claude-opus-4-5
claude-sonnet-4
claude-sonnet-4-5

# Gemini (7 patterns)
gemini-2.5-flash
gemini-2.5-flash-lite-preview-09-2025
gemini-2.5-flash-preview-09-2025
gemini-3-flash-preview
gemini-flash-latest
gemini-flash-lite-latest
gemini-robotics-er-1.5-preview

# OpenRouter (109 patterns)
ai21/jamba-mini-1.7
alibaba/tongyi-deepresearch-30b-a3b
allenai/olmo-3.1-32b-instruct
amazon/nova-lite-v1
amazon/nova-pro-v1
anthropic/claude-3-haiku
anthropic/claude-3.5-haiku
arcee-ai/trinity-large-preview:free
bytedance-seed/seed-1.6
bytedance-seed/seed-1.6-flash
cohere/command-r-08-2024
cohere/command-r-plus-08-2024
deepcogito/cogito-v2-preview-llama-109b-moe
deepcogito/cogito-v2-preview-llama-405b
deepcogito/cogito-v2-preview-llama-70b
deepseek/deepseek-chat
deepseek/deepseek-chat-v3-0324
deepseek/deepseek-chat-v3.1
deepseek/deepseek-r1
deepseek/deepseek-r1-0528
deepseek/deepseek-v3.1-terminus
deepseek/deepseek-v3.1-terminus:exacto
deepseek/deepseek-v3.2
deepseek/deepseek-v3.2-exp
google/gemini-2.0-flash-lite-001
inception/mercury
inception/mercury-coder
kwaipilot/kat-coder-pro
meta-llama/llama-3.1-405b-instruct
meta-llama/llama-3.1-70b-instruct
meta-llama/llama-4-maverick
meta-llama/llama-4-scout
minimax/minimax-m1
minimax/minimax-m2
minimax/minimax-m2.1
mistralai/codestral-2508
mistralai/devstral-2512
mistralai/devstral-small
mistralai/ministral-14b-2512
mistralai/ministral-3b
mistralai/ministral-3b-2512
mistralai/ministral-8b
mistralai/ministral-8b-2512
mistralai/mistral-large-2512
mistralai/mistral-nemo
mistralai/mistral-saba
mistralai/mistral-small-24b-instruct-2501
mistralai/mistral-small-creative
mistralai/mistral-tiny
mistralai/pixtral-12b
mistralai/voxtral-small-24b-2507
moonshotai/kimi-k2-0905
moonshotai/kimi-k2-0905:exacto
nex-agi/deepseek-v3.1-nex-n1
nvidia/llama-3.1-nemotron-70b-instruct
nvidia/llama-3.3-nemotron-super-49b-v1.5
nvidia/nemotron-3-nano-30b-a3b
nvidia/nemotron-3-nano-30b-a3b:free
nvidia/nemotron-nano-12b-v2-vl:free
nvidia/nemotron-nano-9b-v2
nvidia/nemotron-nano-9b-v2:free
openai/gpt-3.5-turbo
openai/gpt-3.5-turbo-0613
openai/gpt-3.5-turbo-16k
openai/gpt-4.1-mini
openai/gpt-4.1-nano
openai/gpt-4o
openai/gpt-4o-mini
openai/gpt-5-nano
openai/gpt-oss-120b
openai/gpt-oss-120b:exacto
openai/gpt-oss-20b
openai/gpt-oss-safeguard-20b
openrouter/auto
prime-intellect/intellect-3
qwen/qwen-2.5-72b-instruct
qwen/qwen-2.5-7b-instruct
qwen/qwen-max
qwen/qwen-plus
qwen/qwen-vl-max
qwen/qwen3-14b
qwen/qwen3-235b-a22b
qwen/qwen3-235b-a22b-thinking-2507
qwen/qwen3-30b-a3b
qwen/qwen3-30b-a3b-instruct-2507
qwen/qwen3-30b-a3b-thinking-2507
qwen/qwen3-32b
qwen/qwen3-8b
qwen/qwen3-coder
qwen/qwen3-coder-30b-a3b-instruct
qwen/qwen3-coder-flash
qwen/qwen3-coder:exacto
qwen/qwen3-next-80b-a3b-instruct
qwen/qwen3-next-80b-a3b-thinking
qwen/qwen3-vl-235b-a22b-instruct
qwen/qwen3-vl-30b-a3b-instruct
qwen/qwen3-vl-30b-a3b-thinking
qwen/qwen3-vl-8b-instruct
qwen/qwq-32b
stepfun-ai/step3
tngtech/deepseek-r1t2-chimera
tngtech/tng-r1t-chimera
tngtech/tng-r1t-chimera:free
upstage/solar-pro-3:free
x-ai/grok-3-mini
x-ai/grok-3-mini-beta
x-ai/grok-4-fast
x-ai/grok-4.1-fast
x-ai/grok-code-fast-1
xiaomi/mimo-v2-flash
z-ai/glm-4-32b
z-ai/glm-4.5
z-ai/glm-4.5-air
z-ai/glm-4.5-air:free
z-ai/glm-4.5v
z-ai/glm-4.6
z-ai/glm-4.6:exacto
z-ai/glm-4.6v
z-ai/glm-4.7
z-ai/glm-4.7-flash

# Z.AI (GLM Models)
glm-4
glm-4.7
glm-4.7-flash`}var Qy="vercel.ai.error",fE=Symbol.for(Qy),Iy,Ty,oe=class e_ extends(Ty=Error,Iy=fE,Ty){constructor({name:t,message:r,cause:o}){super(r),this[Iy]=!0,this.name=t,this.cause=o}static isInstance(t){return e_.hasMarker(t,Qy)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}},t_="AI_APICallError",r_=`vercel.ai.error.${t_}`,gE=Symbol.for(r_),$y,Ey,Ye=class extends(Ey=oe,$y=gE,Ey){constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:s,isRetryable:l=o!=null&&(o===408||o===409||o===429||o>=500),data:d}){super({name:t_,message:e,cause:s}),this[$y]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=l,this.data=d}static isInstance(e){return oe.hasMarker(e,r_)}},n_="AI_EmptyResponseBodyError",o_=`vercel.ai.error.${n_}`,hE=Symbol.for(o_),Cy,Ay,a_=class extends(Ay=oe,Cy=hE,Ay){constructor({message:e="Empty response body"}={}){super({name:n_,message:e}),this[Cy]=!0}static isInstance(e){return oe.hasMarker(e,o_)}};function fr(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var i_="AI_InvalidArgumentError",s_=`vercel.ai.error.${i_}`,vE=Symbol.for(s_),Py,Oy,Io=class extends(Oy=oe,Py=vE,Oy){constructor({message:e,cause:t,argument:r}){super({name:i_,message:e,cause:t}),this[Py]=!0,this.argument=r}static isInstance(e){return oe.hasMarker(e,s_)}},l_="AI_InvalidPromptError",u_=`vercel.ai.error.${l_}`,yE=Symbol.for(u_),Ry,My,gr=class extends(My=oe,Ry=yE,My){constructor({prompt:e,message:t,cause:r}){super({name:l_,message:`Invalid prompt: ${t}`,cause:r}),this[Ry]=!0,this.prompt=e}static isInstance(e){return oe.hasMarker(e,u_)}},c_="AI_InvalidResponseDataError",d_=`vercel.ai.error.${c_}`,_E=Symbol.for(d_),Ny,jy,Gn=class extends(jy=oe,Ny=_E,jy){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:c_,message:t}),this[Ny]=!0,this.data=e}static isInstance(e){return oe.hasMarker(e,d_)}},p_="AI_JSONParseError",m_=`vercel.ai.error.${p_}`,bE=Symbol.for(m_),Dy,zy,La=class extends(zy=oe,Dy=bE,zy){constructor({text:e,cause:t}){super({name:p_,message:`JSON parsing failed: Text: ${e}.
Error message: ${fr(t)}`,cause:t}),this[Dy]=!0,this.text=e}static isInstance(e){return oe.hasMarker(e,m_)}},f_="AI_LoadAPIKeyError",g_=`vercel.ai.error.${f_}`,xE=Symbol.for(g_),Uy,Fy,qa=class extends(Fy=oe,Uy=xE,Fy){constructor({message:e}){super({name:f_,message:e}),this[Uy]=!0}static isInstance(e){return oe.hasMarker(e,g_)}},h_="AI_LoadSettingError",v_=`vercel.ai.error.${h_}`,wE=Symbol.for(v_),Ly,qy,FL=class extends(qy=oe,Ly=wE,qy){constructor({message:e}){super({name:h_,message:e}),this[Ly]=!0}static isInstance(e){return oe.hasMarker(e,v_)}},y_="AI_NoContentGeneratedError",__=`vercel.ai.error.${y_}`,SE=Symbol.for(__),Zy,Vy,LL=class extends(Vy=oe,Zy=SE,Vy){constructor({message:e="No content generated."}={}){super({name:y_,message:e}),this[Zy]=!0}static isInstance(e){return oe.hasMarker(e,__)}},b_="AI_NoSuchModelError",x_=`vercel.ai.error.${b_}`,kE=Symbol.for(x_),Gy,Hy,Wc=class extends(Hy=oe,Gy=kE,Hy){constructor({errorName:e=b_,modelId:t,modelType:r,message:o=`No such ${r}: ${t}`}){super({name:e,message:o}),this[Gy]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return oe.hasMarker(e,x_)}},w_="AI_TooManyEmbeddingValuesForCallError",S_=`vercel.ai.error.${w_}`,IE=Symbol.for(S_),By,Jy,To=class extends(Jy=oe,By=IE,Jy){constructor(e){super({name:w_,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[By]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return oe.hasMarker(e,S_)}},k_="AI_TypeValidationError",I_=`vercel.ai.error.${k_}`,TE=Symbol.for(I_),Wy,Ky,hr=class Jc extends(Ky=oe,Wy=TE,Ky){constructor({value:t,cause:r,context:o}){let n="Type validation failed";if(o!=null&&o.field&&(n+=` for ${o.field}`),o!=null&&o.entityName||o!=null&&o.entityId){n+=" (";let i=[];o.entityName&&i.push(o.entityName),o.entityId&&i.push(`id: "${o.entityId}"`),n+=i.join(", "),n+=")"}super({name:k_,message:`${n}: Value: ${JSON.stringify(t)}.
Error message: ${fr(r)}`,cause:r}),this[Wy]=!0,this.value=t,this.context=o}static isInstance(t){return oe.hasMarker(t,I_)}static wrap({value:t,cause:r,context:o}){var n,i,s;return Jc.isInstance(r)&&r.value===t&&((n=r.context)==null?void 0:n.field)===(o==null?void 0:o.field)&&((i=r.context)==null?void 0:i.entityName)===(o==null?void 0:o.entityName)&&((s=r.context)==null?void 0:s.entityId)===(o==null?void 0:o.entityId)?r:new Jc({value:t,cause:r,context:o})}},T_="AI_UnsupportedFunctionalityError",$_=`vercel.ai.error.${T_}`,$E=Symbol.for($_),Yy,Xy,Re=class extends(Xy=oe,Yy=$E,Xy){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:T_,message:t}),this[Yy]=!0,this.functionality=e}static isInstance(e){return oe.hasMarker(e,$_)}};var a={};Or(a,{$brand:()=>ks,$input:()=>gm,$output:()=>fm,NEVER:()=>Kc,TimePrecision:()=>_m,ZodAny:()=>ug,ZodArray:()=>mg,ZodBase64:()=>Kl,ZodBase64URL:()=>Yl,ZodBigInt:()=>ta,ZodBigIntFormat:()=>eu,ZodBoolean:()=>ea,ZodCIDRv4:()=>Jl,ZodCIDRv6:()=>Wl,ZodCUID:()=>Ll,ZodCUID2:()=>ql,ZodCatch:()=>Ng,ZodCodec:()=>lu,ZodCustom:()=>_i,ZodCustomStringFormat:()=>Xo,ZodDate:()=>fi,ZodDefault:()=>Cg,ZodDiscriminatedUnion:()=>gg,ZodE164:()=>Xl,ZodEmail:()=>zl,ZodEmoji:()=>Ul,ZodEnum:()=>Ko,ZodError:()=>tP,ZodExactOptional:()=>Tg,ZodFile:()=>kg,ZodFirstPartyTypeKind:()=>Bg,ZodFunction:()=>Vg,ZodGUID:()=>ui,ZodIPv4:()=>Hl,ZodIPv6:()=>Bl,ZodISODate:()=>Ol,ZodISODateTime:()=>Pl,ZodISODuration:()=>Ml,ZodISOTime:()=>Rl,ZodIntersection:()=>hg,ZodIssueCode:()=>nP,ZodJWT:()=>Ql,ZodKSUID:()=>Gl,ZodLazy:()=>Lg,ZodLiteral:()=>Sg,ZodMAC:()=>rg,ZodMap:()=>xg,ZodNaN:()=>Dg,ZodNanoID:()=>Fl,ZodNever:()=>dg,ZodNonOptional:()=>iu,ZodNull:()=>sg,ZodNullable:()=>Eg,ZodNumber:()=>Qo,ZodNumberFormat:()=>ro,ZodObject:()=>hi,ZodOptional:()=>au,ZodPipe:()=>su,ZodPrefault:()=>Pg,ZodPromise:()=>Zg,ZodReadonly:()=>zg,ZodRealError:()=>Kt,ZodRecord:()=>yi,ZodSet:()=>wg,ZodString:()=>Yo,ZodStringFormat:()=>Qe,ZodSuccess:()=>Mg,ZodSymbol:()=>ag,ZodTemplateLiteral:()=>Fg,ZodTransform:()=>Ig,ZodTuple:()=>yg,ZodType:()=>Te,ZodULID:()=>Zl,ZodURL:()=>mi,ZodUUID:()=>Fr,ZodUndefined:()=>ig,ZodUnion:()=>vi,ZodUnknown:()=>cg,ZodVoid:()=>pg,ZodXID:()=>Vl,ZodXor:()=>fg,_ZodString:()=>Dl,_default:()=>Ag,_function:()=>iw,any:()=>zx,array:()=>gi,base64:()=>xx,base64url:()=>wx,bigint:()=>Rx,boolean:()=>og,catch:()=>jg,check:()=>sw,cidrv4:()=>_x,cidrv6:()=>bx,clone:()=>Ft,codec:()=>nw,coerce:()=>uu,config:()=>ft,core:()=>Ur,cuid:()=>dx,cuid2:()=>px,custom:()=>lw,date:()=>Fx,decode:()=>Wf,decodeAsync:()=>Yf,describe:()=>uw,discriminatedUnion:()=>Hx,e164:()=>Sx,email:()=>tx,emoji:()=>ux,encode:()=>Jf,encodeAsync:()=>Kf,endsWith:()=>Lo,enum:()=>nu,exactOptional:()=>$g,file:()=>Qx,flattenError:()=>Ya,float32:()=>Cx,float64:()=>Ax,formatError:()=>Xa,fromJSONSchema:()=>hw,function:()=>iw,getErrorMap:()=>aP,globalRegistry:()=>Et,gt:()=>Dr,gte:()=>Lt,guid:()=>rx,hash:()=>Ex,hex:()=>$x,hostname:()=>Tx,httpUrl:()=>lx,includes:()=>Uo,instanceof:()=>dw,int:()=>jl,int32:()=>Px,int64:()=>Mx,intersection:()=>vg,ipv4:()=>hx,ipv6:()=>yx,iso:()=>Qn,json:()=>mw,jwt:()=>kx,keyof:()=>Lx,ksuid:()=>gx,lazy:()=>qg,length:()=>Xn,literal:()=>Xx,locales:()=>Wn,looseObject:()=>Vx,looseRecord:()=>Jx,lowercase:()=>Do,lt:()=>jr,lte:()=>tr,mac:()=>vx,map:()=>Wx,maxLength:()=>Yn,maxSize:()=>En,meta:()=>cw,mime:()=>qo,minLength:()=>nn,minSize:()=>zr,multipleOf:()=>$n,nan:()=>rw,nanoid:()=>cx,nativeEnum:()=>Yx,negative:()=>wl,never:()=>tu,nonnegative:()=>kl,nonoptional:()=>Rg,nonpositive:()=>Sl,normalize:()=>Zo,null:()=>lg,nullable:()=>di,nullish:()=>ew,number:()=>ng,object:()=>qx,optional:()=>ci,overwrite:()=>yr,parse:()=>Gf,parseAsync:()=>Hf,partialRecord:()=>Bx,pipe:()=>pi,positive:()=>xl,prefault:()=>Og,preprocess:()=>fw,prettifyError:()=>ld,promise:()=>aw,property:()=>Il,readonly:()=>Ug,record:()=>bg,refine:()=>Gg,regex:()=>jo,regexes:()=>er,registry:()=>el,safeDecode:()=>Qf,safeDecodeAsync:()=>tg,safeEncode:()=>Xf,safeEncodeAsync:()=>eg,safeParse:()=>Bf,safeParseAsync:()=>eo,set:()=>Kx,setErrorMap:()=>oP,size:()=>Kn,slugify:()=>Bo,startsWith:()=>Fo,strictObject:()=>Zx,string:()=>Nl,stringFormat:()=>Ix,stringbool:()=>pw,success:()=>tw,superRefine:()=>Hg,symbol:()=>jx,templateLiteral:()=>ow,toJSONSchema:()=>On,toLowerCase:()=>Go,toUpperCase:()=>Ho,transform:()=>ou,treeifyError:()=>sd,trim:()=>Vo,tuple:()=>_g,uint32:()=>Ox,uint64:()=>Nx,ulid:()=>mx,undefined:()=>Dx,union:()=>ru,unknown:()=>to,uppercase:()=>zo,url:()=>sx,util:()=>Y,uuid:()=>nx,uuidv4:()=>ox,uuidv6:()=>ax,uuidv7:()=>ix,void:()=>Ux,xid:()=>fx,xor:()=>Gx});var Ur={};Or(Ur,{$ZodAny:()=>jp,$ZodArray:()=>Lp,$ZodAsyncError:()=>vr,$ZodBase64:()=>Tp,$ZodBase64URL:()=>$p,$ZodBigInt:()=>Bs,$ZodBigIntFormat:()=>Op,$ZodBoolean:()=>ri,$ZodCIDRv4:()=>Sp,$ZodCIDRv6:()=>kp,$ZodCUID:()=>dp,$ZodCUID2:()=>pp,$ZodCatch:()=>am,$ZodCheck:()=>nt,$ZodCheckBigIntFormat:()=>Ld,$ZodCheckEndsWith:()=>Qd,$ZodCheckGreaterThan:()=>Fs,$ZodCheckIncludes:()=>Yd,$ZodCheckLengthEquals:()=>Bd,$ZodCheckLessThan:()=>Us,$ZodCheckLowerCase:()=>Wd,$ZodCheckMaxLength:()=>Gd,$ZodCheckMaxSize:()=>qd,$ZodCheckMimeType:()=>tp,$ZodCheckMinLength:()=>Hd,$ZodCheckMinSize:()=>Zd,$ZodCheckMultipleOf:()=>Ud,$ZodCheckNumberFormat:()=>Fd,$ZodCheckOverwrite:()=>rp,$ZodCheckProperty:()=>ep,$ZodCheckRegex:()=>Jd,$ZodCheckSizeEquals:()=>Vd,$ZodCheckStartsWith:()=>Xd,$ZodCheckStringFormat:()=>Mo,$ZodCheckUpperCase:()=>Kd,$ZodCodec:()=>oi,$ZodCustom:()=>mm,$ZodCustomStringFormat:()=>Ap,$ZodDate:()=>Fp,$ZodDefault:()=>tm,$ZodDiscriminatedUnion:()=>Vp,$ZodE164:()=>Ep,$ZodEmail:()=>sp,$ZodEmoji:()=>up,$ZodEncodeError:()=>wn,$ZodEnum:()=>Wp,$ZodError:()=>Ka,$ZodExactOptional:()=>Qp,$ZodFile:()=>Yp,$ZodFunction:()=>cm,$ZodGUID:()=>ap,$ZodIPv4:()=>bp,$ZodIPv6:()=>xp,$ZodISODate:()=>vp,$ZodISODateTime:()=>hp,$ZodISODuration:()=>_p,$ZodISOTime:()=>yp,$ZodIntersection:()=>Gp,$ZodJWT:()=>Cp,$ZodKSUID:()=>gp,$ZodLazy:()=>pm,$ZodLiteral:()=>Kp,$ZodMAC:()=>wp,$ZodMap:()=>Bp,$ZodNaN:()=>im,$ZodNanoID:()=>cp,$ZodNever:()=>zp,$ZodNonOptional:()=>nm,$ZodNull:()=>Np,$ZodNullable:()=>em,$ZodNumber:()=>Hs,$ZodNumberFormat:()=>Pp,$ZodObject:()=>eb,$ZodObjectJIT:()=>qp,$ZodOptional:()=>Ws,$ZodPipe:()=>sm,$ZodPrefault:()=>rm,$ZodPromise:()=>dm,$ZodReadonly:()=>lm,$ZodRealError:()=>Wt,$ZodRecord:()=>Hp,$ZodRegistry:()=>Qs,$ZodSet:()=>Jp,$ZodString:()=>Jn,$ZodStringFormat:()=>Xe,$ZodSuccess:()=>om,$ZodSymbol:()=>Rp,$ZodTemplateLiteral:()=>um,$ZodTransform:()=>Xp,$ZodTuple:()=>Js,$ZodType:()=>Se,$ZodULID:()=>mp,$ZodURL:()=>lp,$ZodUUID:()=>ip,$ZodUndefined:()=>Mp,$ZodUnion:()=>ni,$ZodUnknown:()=>Dp,$ZodVoid:()=>Up,$ZodXID:()=>fp,$ZodXor:()=>Zp,$brand:()=>ks,$constructor:()=>$,$input:()=>gm,$output:()=>fm,Doc:()=>ti,JSONSchema:()=>Ff,JSONSchemaGenerator:()=>Cl,NEVER:()=>Kc,TimePrecision:()=>_m,_any:()=>Fm,_array:()=>Bm,_base64:()=>vl,_base64url:()=>yl,_bigint:()=>Rm,_boolean:()=>Pm,_catch:()=>BA,_check:()=>Qb,_cidrv4:()=>gl,_cidrv6:()=>hl,_coercedBigint:()=>Mm,_coercedBoolean:()=>Om,_coercedDate:()=>Gm,_coercedNumber:()=>Im,_coercedString:()=>vm,_cuid:()=>ll,_cuid2:()=>ul,_custom:()=>Wm,_date:()=>Vm,_decode:()=>As,_decodeAsync:()=>Os,_default:()=>VA,_discriminatedUnion:()=>OA,_e164:()=>_l,_email:()=>tl,_emoji:()=>il,_encode:()=>Cs,_encodeAsync:()=>Ps,_endsWith:()=>Lo,_enum:()=>zA,_file:()=>Jm,_float32:()=>$m,_float64:()=>Em,_gt:()=>Dr,_gte:()=>Lt,_guid:()=>ii,_includes:()=>Uo,_int:()=>Tm,_int32:()=>Cm,_int64:()=>Nm,_intersection:()=>RA,_ipv4:()=>ml,_ipv6:()=>fl,_isoDate:()=>xm,_isoDateTime:()=>bm,_isoDuration:()=>Sm,_isoTime:()=>wm,_jwt:()=>bl,_ksuid:()=>pl,_lazy:()=>YA,_length:()=>Xn,_literal:()=>FA,_lowercase:()=>Do,_lt:()=>jr,_lte:()=>tr,_mac:()=>ym,_map:()=>jA,_max:()=>tr,_maxLength:()=>Yn,_maxSize:()=>En,_mime:()=>qo,_min:()=>Lt,_minLength:()=>nn,_minSize:()=>zr,_multipleOf:()=>$n,_nan:()=>Hm,_nanoid:()=>sl,_nativeEnum:()=>UA,_negative:()=>wl,_never:()=>qm,_nonnegative:()=>kl,_nonoptional:()=>GA,_nonpositive:()=>Sl,_normalize:()=>Zo,_null:()=>Um,_nullable:()=>ZA,_number:()=>km,_optional:()=>qA,_overwrite:()=>yr,_parse:()=>Ao,_parseAsync:()=>Po,_pipe:()=>JA,_positive:()=>xl,_promise:()=>XA,_property:()=>Il,_readonly:()=>WA,_record:()=>NA,_refine:()=>Km,_regex:()=>jo,_safeDecode:()=>Ms,_safeDecodeAsync:()=>js,_safeEncode:()=>Rs,_safeEncodeAsync:()=>Ns,_safeParse:()=>Oo,_safeParseAsync:()=>Ro,_set:()=>DA,_size:()=>Kn,_slugify:()=>Bo,_startsWith:()=>Fo,_string:()=>hm,_stringFormat:()=>Jo,_stringbool:()=>ef,_success:()=>HA,_superRefine:()=>Ym,_symbol:()=>Dm,_templateLiteral:()=>KA,_toLowerCase:()=>Go,_toUpperCase:()=>Ho,_transform:()=>LA,_trim:()=>Vo,_tuple:()=>MA,_uint32:()=>Am,_uint64:()=>jm,_ulid:()=>cl,_undefined:()=>zm,_union:()=>AA,_unknown:()=>Lm,_uppercase:()=>zo,_url:()=>si,_uuid:()=>rl,_uuidv4:()=>nl,_uuidv6:()=>ol,_uuidv7:()=>al,_void:()=>Zm,_xid:()=>dl,_xor:()=>PA,clone:()=>Ft,config:()=>ft,createStandardJSONSchemaMethod:()=>Wo,createToJSONSchemaMethod:()=>tf,decode:()=>tC,decodeAsync:()=>nC,describe:()=>Xm,encode:()=>eC,encodeAsync:()=>rC,extractDefs:()=>An,finalize:()=>Pn,flattenError:()=>Ya,formatError:()=>Xa,globalConfig:()=>Za,globalRegistry:()=>Et,initializeContext:()=>Cn,isValidBase64:()=>Ip,isValidBase64URL:()=>K_,isValidJWT:()=>Y_,locales:()=>Wn,meta:()=>Qm,parse:()=>$s,parseAsync:()=>Es,prettifyError:()=>ld,process:()=>Ge,regexes:()=>er,registry:()=>el,safeDecode:()=>aC,safeDecodeAsync:()=>sC,safeEncode:()=>oC,safeEncodeAsync:()=>iC,safeParse:()=>ud,safeParseAsync:()=>cd,toDotPath:()=>O_,toJSONSchema:()=>On,treeifyError:()=>sd,util:()=>Y,version:()=>np});var Kc=Object.freeze({status:"aborted"});function $(e,t,r){var l;function o(d,u){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:u,constr:s,traits:new Set},enumerable:!1}),d._zod.traits.has(e))return;d._zod.traits.add(e),t(d,u);let m=s.prototype,c=Object.keys(m);for(let p=0;p<c.length;p++){let f=c[p];f in d||(d[f]=m[f].bind(d))}}let n=(l=r==null?void 0:r.Parent)!=null?l:Object;class i extends n{}Object.defineProperty(i,"name",{value:e});function s(d){var c;var u;let m=r!=null&&r.Parent?new i:this;o(m,d),(c=(u=m._zod).deferred)!=null||(u.deferred=[]);for(let p of m._zod.deferred)p();return m}return Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:d=>{var u,m;return r!=null&&r.Parent&&d instanceof r.Parent?!0:(m=(u=d==null?void 0:d._zod)==null?void 0:u.traits)==null?void 0:m.has(e)}}),Object.defineProperty(s,"name",{value:e}),s}var ks=Symbol("zod_brand"),vr=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},wn=class extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}},Za={};function ft(e){return e&&Object.assign(Za,e),Za}var Y={};Or(Y,{BIGINT_FORMAT_RANGES:()=>id,Class:()=>Xc,NUMBER_FORMAT_RANGES:()=>ad,aborted:()=>Tn,allowsEval:()=>td,assert:()=>OE,assertEqual:()=>EE,assertIs:()=>AE,assertNever:()=>PE,assertNotEqual:()=>CE,assignProp:()=>kn,base64ToUint8Array:()=>C_,base64urlToUint8Array:()=>WE,cached:()=>Eo,captureStackTrace:()=>Ts,cleanEnum:()=>JE,cleanRegex:()=>Ha,clone:()=>Ft,cloneDef:()=>ME,createTransparentProxy:()=>FE,defineLazy:()=>Ce,esc:()=>Is,escapeRegex:()=>cr,extend:()=>ZE,finalizeIssue:()=>Jt,floatSafeRemainder:()=>Qc,getElementAtPath:()=>NE,getEnumValues:()=>Ga,getLengthableOrigin:()=>Wa,getParsedType:()=>UE,getSizableOrigin:()=>Ja,hexToUint8Array:()=>YE,isObject:()=>Hn,isPlainObject:()=>In,issue:()=>Co,joinValues:()=>N,jsonStringifyReplacer:()=>$o,merge:()=>GE,mergeDefs:()=>rn,normalizeParams:()=>X,nullish:()=>Sn,numKeys:()=>zE,objectClone:()=>RE,omit:()=>qE,optionalKeys:()=>od,parsedType:()=>K,partial:()=>HE,pick:()=>LE,prefixIssues:()=>Qt,primitiveTypes:()=>nd,promiseAllObject:()=>jE,propertyKeyTypes:()=>Ba,randomString:()=>DE,required:()=>BE,safeExtend:()=>VE,shallowClone:()=>rd,slugify:()=>ed,stringifyPrimitive:()=>J,uint8ArrayToBase64:()=>A_,uint8ArrayToBase64url:()=>KE,uint8ArrayToHex:()=>XE,unwrapMessage:()=>Va});function EE(e){return e}function CE(e){return e}function AE(e){}function PE(e){throw new Error("Unexpected value in exhaustive check")}function OE(e){}function Ga(e){let t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,n])=>t.indexOf(+o)===-1).map(([o,n])=>n)}function N(e,t="|"){return e.map(r=>J(r)).join(t)}function $o(e,t){return typeof t=="bigint"?t.toString():t}function Eo(e){return{get value(){{let r=e();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function Sn(e){return e==null}function Ha(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Qc(e,t){let r=(e.toString().split(".")[1]||"").length,o=t.toString(),n=(o.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(o)){let d=o.match(/\d?e-(\d?)/);d!=null&&d[1]&&(n=Number.parseInt(d[1]))}let i=r>n?r:n,s=Number.parseInt(e.toFixed(i).replace(".","")),l=Number.parseInt(t.toFixed(i).replace(".",""));return s%l/10**i}var E_=Symbol("evaluating");function Ce(e,t,r){let o;Object.defineProperty(e,t,{get(){if(o!==E_)return o===void 0&&(o=E_,o=r()),o},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function RE(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function kn(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function rn(...e){let t={};for(let r of e){let o=Object.getOwnPropertyDescriptors(r);Object.assign(t,o)}return Object.defineProperties({},t)}function ME(e){return rn(e._zod.def)}function NE(e,t){return t?t.reduce((r,o)=>r==null?void 0:r[o],e):e}function jE(e){let t=Object.keys(e),r=t.map(o=>e[o]);return Promise.all(r).then(o=>{let n={};for(let i=0;i<t.length;i++)n[t[i]]=o[i];return n})}function DE(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let o=0;o<e;o++)r+=t[Math.floor(Math.random()*t.length)];return r}function Is(e){return JSON.stringify(e)}function ed(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var Ts="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Hn(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var td=Eo(()=>{var e;if(typeof navigator!="undefined"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{let t=Function;return new t(""),!0}catch(t){return!1}});function In(e){if(Hn(e)===!1)return!1;let t=e.constructor;if(t===void 0||typeof t!="function")return!0;let r=t.prototype;return!(Hn(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function rd(e){return In(e)?{...e}:Array.isArray(e)?[...e]:e}function zE(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var UE=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map!="undefined"&&e instanceof Map?"map":typeof Set!="undefined"&&e instanceof Set?"set":typeof Date!="undefined"&&e instanceof Date?"date":typeof File!="undefined"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Ba=new Set(["string","number","symbol"]),nd=new Set(["string","number","bigint","boolean","symbol","undefined"]);function cr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ft(e,t,r){let o=new e._zod.constr(t!=null?t:e._zod.def);return(!t||r!=null&&r.parent)&&(o._zod.parent=e),o}function X(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function FE(e){let t;return new Proxy({},{get(r,o,n){return t!=null||(t=e()),Reflect.get(t,o,n)},set(r,o,n,i){return t!=null||(t=e()),Reflect.set(t,o,n,i)},has(r,o){return t!=null||(t=e()),Reflect.has(t,o)},deleteProperty(r,o){return t!=null||(t=e()),Reflect.deleteProperty(t,o)},ownKeys(r){return t!=null||(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(r,o){return t!=null||(t=e()),Reflect.getOwnPropertyDescriptor(t,o)},defineProperty(r,o,n){return t!=null||(t=e()),Reflect.defineProperty(t,o,n)}})}function J(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function od(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}var ad={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},id={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function LE(e,t){let r=e._zod.def,o=r.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");let i=rn(e._zod.def,{get shape(){let s={};for(let l in t){if(!(l in r.shape))throw new Error(`Unrecognized key: "${l}"`);t[l]&&(s[l]=r.shape[l])}return kn(this,"shape",s),s},checks:[]});return Ft(e,i)}function qE(e,t){let r=e._zod.def,o=r.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");let i=rn(e._zod.def,{get shape(){let s={...e._zod.def.shape};for(let l in t){if(!(l in r.shape))throw new Error(`Unrecognized key: "${l}"`);t[l]&&delete s[l]}return kn(this,"shape",s),s},checks:[]});return Ft(e,i)}function ZE(e,t){if(!In(t))throw new Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0){let i=e._zod.def.shape;for(let s in t)if(Object.getOwnPropertyDescriptor(i,s)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let n=rn(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t};return kn(this,"shape",i),i}});return Ft(e,n)}function VE(e,t){if(!In(t))throw new Error("Invalid input to safeExtend: expected a plain object");let r=rn(e._zod.def,{get shape(){let o={...e._zod.def.shape,...t};return kn(this,"shape",o),o}});return Ft(e,r)}function GE(e,t){let r=rn(e._zod.def,{get shape(){let o={...e._zod.def.shape,...t._zod.def.shape};return kn(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return Ft(e,r)}function HE(e,t,r){let n=t._zod.def.checks;if(n&&n.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");let s=rn(t._zod.def,{get shape(){let l=t._zod.def.shape,d={...l};if(r)for(let u in r){if(!(u in l))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(d[u]=e?new e({type:"optional",innerType:l[u]}):l[u])}else for(let u in l)d[u]=e?new e({type:"optional",innerType:l[u]}):l[u];return kn(this,"shape",d),d},checks:[]});return Ft(t,s)}function BE(e,t,r){let o=rn(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let s in r){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(i[s]=new e({type:"nonoptional",innerType:n[s]}))}else for(let s in n)i[s]=new e({type:"nonoptional",innerType:n[s]});return kn(this,"shape",i),i}});return Ft(t,o)}function Tn(e,t=0){var r;if(e.aborted===!0)return!0;for(let o=t;o<e.issues.length;o++)if(((r=e.issues[o])==null?void 0:r.continue)!==!0)return!0;return!1}function Qt(e,t){return t.map(r=>{var n;var o;return(n=(o=r).path)!=null||(o.path=[]),r.path.unshift(e),r})}function Va(e){return typeof e=="string"?e:e==null?void 0:e.message}function Jt(e,t,r){var n,i,s,l,d,u,m,c,p,f,v;let o={...e,path:(n=e.path)!=null?n:[]};if(!e.message){let g=(v=(f=(c=(u=Va((l=(s=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:s.error)==null?void 0:l.call(s,e)))!=null?u:Va((d=t==null?void 0:t.error)==null?void 0:d.call(t,e)))!=null?c:Va((m=r.customError)==null?void 0:m.call(r,e)))!=null?f:Va((p=r.localeError)==null?void 0:p.call(r,e)))!=null?v:"Invalid input";o.message=g}return delete o.inst,delete o.continue,t!=null&&t.reportInput||delete o.input,o}function Ja(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Wa(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function K(e){let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":{if(e===null)return"null";if(Array.isArray(e))return"array";let r=e;if(r&&Object.getPrototypeOf(r)!==Object.prototype&&"constructor"in r&&r.constructor)return r.constructor.name}}return t}function Co(...e){let[t,r,o]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:o}:{...t}}function JE(e){return Object.entries(e).filter(([t,r])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function C_(e){let t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}function A_(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function WE(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return C_(t+r)}function KE(e){return A_(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function YE(e){let t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=Number.parseInt(t.slice(o,o+2),16);return r}function XE(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}var Xc=class{constructor(...t){}};var P_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,$o,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Ka=$("$ZodError",P_),Wt=$("$ZodError",P_,{Parent:Error});function Ya(e,t=r=>r.message){let r={},o=[];for(let n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):o.push(t(n));return{formErrors:o,fieldErrors:r}}function Xa(e,t=r=>r.message){let r={_errors:[]},o=n=>{for(let i of n.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(s=>o({issues:s}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let s=r,l=0;for(;l<i.path.length;){let d=i.path[l];l===i.path.length-1?(s[d]=s[d]||{_errors:[]},s[d]._errors.push(t(i))):s[d]=s[d]||{_errors:[]},s=s[d],l++}}};return o(e),r}function sd(e,t=r=>r.message){let r={errors:[]},o=(n,i=[])=>{var d,u,m,c;var s,l;for(let p of n.issues)if(p.code==="invalid_union"&&p.errors.length)p.errors.map(f=>o({issues:f},p.path));else if(p.code==="invalid_key")o({issues:p.issues},p.path);else if(p.code==="invalid_element")o({issues:p.issues},p.path);else{let f=[...i,...p.path];if(f.length===0){r.errors.push(t(p));continue}let v=r,g=0;for(;g<f.length;){let y=f[g],S=g===f.length-1;typeof y=="string"?((d=v.properties)!=null||(v.properties={}),(u=(s=v.properties)[y])!=null||(s[y]={errors:[]}),v=v.properties[y]):((m=v.items)!=null||(v.items=[]),(c=(l=v.items)[y])!=null||(l[y]={errors:[]}),v=v.items[y]),S&&v.errors.push(t(p)),g++}}};return o(e),r}function O_(e){let t=[],r=e.map(o=>typeof o=="object"?o.key:o);for(let o of r)typeof o=="number"?t.push(`[${o}]`):typeof o=="symbol"?t.push(`[${JSON.stringify(String(o))}]`):/[^\w$]/.test(o)?t.push(`[${JSON.stringify(o)}]`):(t.length&&t.push("."),t.push(o));return t.join("")}function ld(e){var o;let t=[],r=[...e.issues].sort((n,i)=>{var s,l;return((s=n.path)!=null?s:[]).length-((l=i.path)!=null?l:[]).length});for(let n of r)t.push(`\u2716 ${n.message}`),(o=n.path)!=null&&o.length&&t.push(`  \u2192 at ${O_(n.path)}`);return t.join(`
`)}var Ao=e=>(t,r,o,n)=>{var l;let i=o?Object.assign(o,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise)throw new vr;if(s.issues.length){let d=new((l=n==null?void 0:n.Err)!=null?l:e)(s.issues.map(u=>Jt(u,i,ft())));throw Ts(d,n==null?void 0:n.callee),d}return s.value},$s=Ao(Wt),Po=e=>async(t,r,o,n)=>{var l;let i=o?Object.assign(o,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){let d=new((l=n==null?void 0:n.Err)!=null?l:e)(s.issues.map(u=>Jt(u,i,ft())));throw Ts(d,n==null?void 0:n.callee),d}return s.value},Es=Po(Wt),Oo=e=>(t,r,o)=>{let n=o?{...o,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},n);if(i instanceof Promise)throw new vr;return i.issues.length?{success:!1,error:new(e!=null?e:Ka)(i.issues.map(s=>Jt(s,n,ft())))}:{success:!0,data:i.value}},ud=Oo(Wt),Ro=e=>async(t,r,o)=>{let n=o?Object.assign(o,{async:!0}):{async:!0},i=t._zod.run({value:r,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(s=>Jt(s,n,ft())))}:{success:!0,data:i.value}},cd=Ro(Wt),Cs=e=>(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ao(e)(t,r,n)},eC=Cs(Wt),As=e=>(t,r,o)=>Ao(e)(t,r,o),tC=As(Wt),Ps=e=>async(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Po(e)(t,r,n)},rC=Ps(Wt),Os=e=>async(t,r,o)=>Po(e)(t,r,o),nC=Os(Wt),Rs=e=>(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Oo(e)(t,r,n)},oC=Rs(Wt),Ms=e=>(t,r,o)=>Oo(e)(t,r,o),aC=Ms(Wt),Ns=e=>async(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ro(e)(t,r,n)},iC=Ns(Wt),js=e=>async(t,r,o)=>Ro(e)(t,r,o),sC=js(Wt);var er={};Or(er,{base64:()=>Td,base64url:()=>Ds,bigint:()=>Od,boolean:()=>Md,browserEmail:()=>gC,cidrv4:()=>kd,cidrv6:()=>Id,cuid:()=>dd,cuid2:()=>pd,date:()=>Ed,datetime:()=>Ad,domain:()=>yC,duration:()=>vd,e164:()=>$d,email:()=>_d,emoji:()=>bd,extendedDuration:()=>lC,guid:()=>yd,hex:()=>_C,hostname:()=>vC,html5Email:()=>pC,idnEmail:()=>fC,integer:()=>Rd,ipv4:()=>xd,ipv6:()=>wd,ksuid:()=>gd,lowercase:()=>Dd,mac:()=>Sd,md5_base64:()=>xC,md5_base64url:()=>wC,md5_hex:()=>bC,nanoid:()=>hd,null:()=>Nd,number:()=>zs,rfc5322Email:()=>mC,sha1_base64:()=>kC,sha1_base64url:()=>IC,sha1_hex:()=>SC,sha256_base64:()=>$C,sha256_base64url:()=>EC,sha256_hex:()=>TC,sha384_base64:()=>AC,sha384_base64url:()=>PC,sha384_hex:()=>CC,sha512_base64:()=>RC,sha512_base64url:()=>MC,sha512_hex:()=>OC,string:()=>Pd,time:()=>Cd,ulid:()=>md,undefined:()=>jd,unicodeEmail:()=>R_,uppercase:()=>zd,uuid:()=>Bn,uuid4:()=>uC,uuid6:()=>cC,uuid7:()=>dC,xid:()=>fd});var dd=/^[cC][^\s-]{8,}$/,pd=/^[0-9a-z]+$/,md=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,fd=/^[0-9a-vA-V]{20}$/,gd=/^[A-Za-z0-9]{27}$/,hd=/^[a-zA-Z0-9_-]{21}$/,vd=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,lC=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yd=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Bn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,uC=Bn(4),cC=Bn(6),dC=Bn(7),_d=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,pC=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,mC=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,R_=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,fC=R_,gC=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function bd(){return new RegExp(hC,"u")}var xd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Sd=e=>{let t=cr(e!=null?e:":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},kd=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Id=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Td=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ds=/^[A-Za-z0-9_-]*$/,vC=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,yC=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,$d=/^\+[1-9]\d{6,14}$/,M_="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ed=new RegExp(`^${M_}$`);function N_(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Cd(e){return new RegExp(`^${N_(e)}$`)}function Ad(e){let t=N_({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let o=`${t}(?:${r.join("|")})`;return new RegExp(`^${M_}T(?:${o})$`)}var Pd=e=>{var r,o;let t=e?`[\\s\\S]{${(r=e==null?void 0:e.minimum)!=null?r:0},${(o=e==null?void 0:e.maximum)!=null?o:""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Od=/^-?\d+n?$/,Rd=/^-?\d+$/,zs=/^-?\d+(?:\.\d+)?$/,Md=/^(?:true|false)$/i,Nd=/^null$/i;var jd=/^undefined$/i;var Dd=/^[^A-Z]*$/,zd=/^[^a-z]*$/,_C=/^[0-9a-fA-F]*$/;function Qa(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function ei(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var bC=/^[0-9a-fA-F]{32}$/,xC=Qa(22,"=="),wC=ei(22),SC=/^[0-9a-fA-F]{40}$/,kC=Qa(27,"="),IC=ei(27),TC=/^[0-9a-fA-F]{64}$/,$C=Qa(43,"="),EC=ei(43),CC=/^[0-9a-fA-F]{96}$/,AC=Qa(64,""),PC=ei(64),OC=/^[0-9a-fA-F]{128}$/,RC=Qa(86,"=="),MC=ei(86);var nt=$("$ZodCheck",(e,t)=>{var o,n;var r;(o=e._zod)!=null||(e._zod={}),e._zod.def=t,(n=(r=e._zod).onattach)!=null||(r.onattach=[])}),D_={number:"number",bigint:"bigint",object:"date"},Us=$("$ZodCheckLessThan",(e,t)=>{nt.init(e,t);let r=D_[typeof t.value];e._zod.onattach.push(o=>{var s;let n=o._zod.bag,i=(s=t.inclusive?n.maximum:n.exclusiveMaximum)!=null?s:Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Fs=$("$ZodCheckGreaterThan",(e,t)=>{nt.init(e,t);let r=D_[typeof t.value];e._zod.onattach.push(o=>{var s;let n=o._zod.bag,i=(s=t.inclusive?n.minimum:n.exclusiveMinimum)!=null?s:Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ud=$("$ZodCheckMultipleOf",(e,t)=>{nt.init(e,t),e._zod.onattach.push(r=>{var n;var o;(n=(o=r._zod.bag).multipleOf)!=null||(o.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Qc(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Fd=$("$ZodCheckNumberFormat",(e,t)=>{var s;nt.init(e,t),t.format=t.format||"float64";let r=(s=t.format)==null?void 0:s.includes("int"),o=r?"int":"number",[n,i]=ad[t.format];e._zod.onattach.push(l=>{let d=l._zod.bag;d.format=t.format,d.minimum=n,d.maximum=i,r&&(d.pattern=Rd)}),e._zod.check=l=>{let d=l.value;if(r){if(!Number.isInteger(d)){l.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?l.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!t.abort}):l.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!t.abort});return}}d<n&&l.issues.push({origin:"number",input:d,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),d>i&&l.issues.push({origin:"number",input:d,code:"too_big",maximum:i,inclusive:!0,inst:e,continue:!t.abort})}}),Ld=$("$ZodCheckBigIntFormat",(e,t)=>{nt.init(e,t);let[r,o]=id[t.format];e._zod.onattach.push(n=>{let i=n._zod.bag;i.format=t.format,i.minimum=r,i.maximum=o}),e._zod.check=n=>{let i=n.value;i<r&&n.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),i>o&&n.issues.push({origin:"bigint",input:i,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),qd=$("$ZodCheckMaxSize",(e,t)=>{var o;var r;nt.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!Sn(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.maximum)!=null?s:Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;i.size<=t.maximum||n.issues.push({origin:Ja(i),code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Zd=$("$ZodCheckMinSize",(e,t)=>{var o;var r;nt.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!Sn(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.minimum)!=null?s:Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;i.size>=t.minimum||n.issues.push({origin:Ja(i),code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Vd=$("$ZodCheckSizeEquals",(e,t)=>{var o;var r;nt.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!Sn(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=t.size,i.maximum=t.size,i.size=t.size}),e._zod.check=n=>{let i=n.value,s=i.size;if(s===t.size)return;let l=s>t.size;n.issues.push({origin:Ja(i),...l?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Gd=$("$ZodCheckMaxLength",(e,t)=>{var o;var r;nt.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!Sn(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.maximum)!=null?s:Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;if(i.length<=t.maximum)return;let l=Wa(i);n.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Hd=$("$ZodCheckMinLength",(e,t)=>{var o;var r;nt.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!Sn(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.minimum)!=null?s:Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;if(i.length>=t.minimum)return;let l=Wa(i);n.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Bd=$("$ZodCheckLengthEquals",(e,t)=>{var o;var r;nt.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!Sn(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=n=>{let i=n.value,s=i.length;if(s===t.length)return;let l=Wa(i),d=s>t.length;n.issues.push({origin:l,...d?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Mo=$("$ZodCheckStringFormat",(e,t)=>{var n,i;var r,o;nt.init(e,t),e._zod.onattach.push(s=>{var d;let l=s._zod.bag;l.format=t.format,t.pattern&&((d=l.patterns)!=null||(l.patterns=new Set),l.patterns.add(t.pattern))}),t.pattern?(n=(r=e._zod).check)!=null||(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=(o=e._zod).check)!=null||(o.check=()=>{})}),Jd=$("$ZodCheckRegex",(e,t)=>{Mo.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Wd=$("$ZodCheckLowerCase",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Dd),Mo.init(e,t)}),Kd=$("$ZodCheckUpperCase",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=zd),Mo.init(e,t)}),Yd=$("$ZodCheckIncludes",(e,t)=>{nt.init(e,t);let r=cr(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=o,e._zod.onattach.push(n=>{var s;let i=n._zod.bag;(s=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(o)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Xd=$("$ZodCheckStartsWith",(e,t)=>{var o;nt.init(e,t);let r=new RegExp(`^${cr(t.prefix)}.*`);(o=t.pattern)!=null||(t.pattern=r),e._zod.onattach.push(n=>{var s;let i=n._zod.bag;(s=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Qd=$("$ZodCheckEndsWith",(e,t)=>{var o;nt.init(e,t);let r=new RegExp(`.*${cr(t.suffix)}$`);(o=t.pattern)!=null||(t.pattern=r),e._zod.onattach.push(n=>{var s;let i=n._zod.bag;(s=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}});function j_(e,t,r){e.issues.length&&t.issues.push(...Qt(r,e.issues))}var ep=$("$ZodCheckProperty",(e,t)=>{nt.init(e,t),e._zod.check=r=>{let o=t.schema._zod.run({value:r.value[t.property],issues:[]},{});if(o instanceof Promise)return o.then(n=>j_(n,r,t.property));j_(o,r,t.property)}}),tp=$("$ZodCheckMimeType",(e,t)=>{nt.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(o=>{o._zod.bag.mime=t.mime}),e._zod.check=o=>{r.has(o.value.type)||o.issues.push({code:"invalid_value",values:t.mime,input:o.value.type,inst:e,continue:!t.abort})}}),rp=$("$ZodCheckOverwrite",(e,t)=>{nt.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});var ti=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let o=t.split(`
`).filter(s=>s),n=Math.min(...o.map(s=>s.length-s.trimStart().length)),i=o.map(s=>s.slice(n)).map(s=>" ".repeat(this.indent*2)+s);for(let s of i)this.content.push(s)}compile(){var i;let t=Function,r=this==null?void 0:this.args,n=[...((i=this==null?void 0:this.content)!=null?i:[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}};var np={major:4,minor:3,patch:6};var Se=$("$ZodType",(e,t)=>{var n,i,s;var r;e!=null||(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=np;let o=[...(n=e._zod.def.checks)!=null?n:[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(let l of o)for(let d of l._zod.onattach)d(e);if(o.length===0)(i=(r=e._zod).deferred)!=null||(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{let l=(u,m,c)=>{let p=Tn(u),f;for(let v of m){if(v._zod.def.when){if(!v._zod.def.when(u))continue}else if(p)continue;let g=u.issues.length,y=v._zod.check(u);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new vr;if(f||y instanceof Promise)f=(f!=null?f:Promise.resolve()).then(async()=>{await y,u.issues.length!==g&&(p||(p=Tn(u,g)))});else{if(u.issues.length===g)continue;p||(p=Tn(u,g))}}return f?f.then(()=>u):u},d=(u,m,c)=>{if(Tn(u))return u.aborted=!0,u;let p=l(m,o,c);if(p instanceof Promise){if(c.async===!1)throw new vr;return p.then(f=>e._zod.parse(f,c))}return e._zod.parse(p,c)};e._zod.run=(u,m)=>{if(m.skipChecks)return e._zod.parse(u,m);if(m.direction==="backward"){let p=e._zod.parse({value:u.value,issues:[]},{...m,skipChecks:!0});return p instanceof Promise?p.then(f=>d(f,u,m)):d(p,u,m)}let c=e._zod.parse(u,m);if(c instanceof Promise){if(m.async===!1)throw new vr;return c.then(p=>l(p,o,m))}return l(c,o,m)}}Ce(e,"~standard",()=>({validate:l=>{var d;try{let u=ud(e,l);return u.success?{value:u.data}:{issues:(d=u.error)==null?void 0:d.issues}}catch(u){return cd(e,l).then(m=>{var c;return m.success?{value:m.data}:{issues:(c=m.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}))}),Jn=$("$ZodString",(e,t)=>{var r,o,n;Se.init(e,t),e._zod.pattern=(n=[...(o=(r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)!=null?o:[]].pop())!=null?n:Pd(e._zod.bag),e._zod.parse=(i,s)=>{if(t.coerce)try{i.value=String(i.value)}catch(l){}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),Xe=$("$ZodStringFormat",(e,t)=>{Mo.init(e,t),Jn.init(e,t)}),ap=$("$ZodGUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=yd),Xe.init(e,t)}),ip=$("$ZodUUID",(e,t)=>{var r,o;if(t.version){let i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);(r=t.pattern)!=null||(t.pattern=Bn(i))}else(o=t.pattern)!=null||(t.pattern=Bn());Xe.init(e,t)}),sp=$("$ZodEmail",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=_d),Xe.init(e,t)}),lp=$("$ZodURL",(e,t)=>{Xe.init(e,t),e._zod.check=r=>{try{let o=r.value.trim(),n=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=n.href:r.value=o;return}catch(o){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),up=$("$ZodEmoji",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=bd()),Xe.init(e,t)}),cp=$("$ZodNanoID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=hd),Xe.init(e,t)}),dp=$("$ZodCUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=dd),Xe.init(e,t)}),pp=$("$ZodCUID2",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=pd),Xe.init(e,t)}),mp=$("$ZodULID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=md),Xe.init(e,t)}),fp=$("$ZodXID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=fd),Xe.init(e,t)}),gp=$("$ZodKSUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=gd),Xe.init(e,t)}),hp=$("$ZodISODateTime",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ad(t)),Xe.init(e,t)}),vp=$("$ZodISODate",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ed),Xe.init(e,t)}),yp=$("$ZodISOTime",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Cd(t)),Xe.init(e,t)}),_p=$("$ZodISODuration",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=vd),Xe.init(e,t)}),bp=$("$ZodIPv4",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=xd),Xe.init(e,t),e._zod.bag.format="ipv4"}),xp=$("$ZodIPv6",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=wd),Xe.init(e,t),e._zod.bag.format="ipv6",e._zod.check=o=>{try{new URL(`http://[${o.value}]`)}catch(n){o.issues.push({code:"invalid_format",format:"ipv6",input:o.value,inst:e,continue:!t.abort})}}}),wp=$("$ZodMAC",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Sd(t.delimiter)),Xe.init(e,t),e._zod.bag.format="mac"}),Sp=$("$ZodCIDRv4",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=kd),Xe.init(e,t)}),kp=$("$ZodCIDRv6",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Id),Xe.init(e,t),e._zod.check=o=>{let n=o.value.split("/");try{if(n.length!==2)throw new Error;let[i,s]=n;if(!s)throw new Error;let l=Number(s);if(`${l}`!==s)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${i}]`)}catch(i){o.issues.push({code:"invalid_format",format:"cidrv6",input:o.value,inst:e,continue:!t.abort})}}});function Ip(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch(t){return!1}}var Tp=$("$ZodBase64",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Td),Xe.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=o=>{Ip(o.value)||o.issues.push({code:"invalid_format",format:"base64",input:o.value,inst:e,continue:!t.abort})}});function K_(e){if(!Ds.test(e))return!1;let t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Ip(r)}var $p=$("$ZodBase64URL",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ds),Xe.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=o=>{K_(o.value)||o.issues.push({code:"invalid_format",format:"base64url",input:o.value,inst:e,continue:!t.abort})}}),Ep=$("$ZodE164",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=$d),Xe.init(e,t)});function Y_(e,t=null){try{let r=e.split(".");if(r.length!==3)return!1;let[o]=r;if(!o)return!1;let n=JSON.parse(atob(o));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch(r){return!1}}var Cp=$("$ZodJWT",(e,t)=>{Xe.init(e,t),e._zod.check=r=>{Y_(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Ap=$("$ZodCustomStringFormat",(e,t)=>{Xe.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),Hs=$("$ZodNumber",(e,t)=>{var r;Se.init(e,t),e._zod.pattern=(r=e._zod.bag.pattern)!=null?r:zs,e._zod.parse=(o,n)=>{if(t.coerce)try{o.value=Number(o.value)}catch(l){}let i=o.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return o;let s=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return o.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...s?{received:s}:{}}),o}}),Pp=$("$ZodNumberFormat",(e,t)=>{Fd.init(e,t),Hs.init(e,t)}),ri=$("$ZodBoolean",(e,t)=>{Se.init(e,t),e._zod.pattern=Md,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=!!r.value}catch(i){}let n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),r}}),Bs=$("$ZodBigInt",(e,t)=>{Se.init(e,t),e._zod.pattern=Od,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(n){}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),Op=$("$ZodBigIntFormat",(e,t)=>{Ld.init(e,t),Bs.init(e,t)}),Rp=$("$ZodSymbol",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),r}}),Mp=$("$ZodUndefined",(e,t)=>{Se.init(e,t),e._zod.pattern=jd,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="undefined"||r.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),r}}),Np=$("$ZodNull",(e,t)=>{Se.init(e,t),e._zod.pattern=Nd,e._zod.values=new Set([null]),e._zod.parse=(r,o)=>{let n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),r}}),jp=$("$ZodAny",(e,t)=>{Se.init(e,t),e._zod.parse=r=>r}),Dp=$("$ZodUnknown",(e,t)=>{Se.init(e,t),e._zod.parse=r=>r}),zp=$("$ZodNever",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),Up=$("$ZodVoid",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="undefined"||r.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),r}}),Fp=$("$ZodDate",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(l){}let n=r.value,i=n instanceof Date;return i&&!Number.isNaN(n.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:n,...i?{received:"Invalid Date"}:{},inst:e}),r}});function U_(e,t,r){e.issues.length&&t.issues.push(...Qt(r,e.issues)),t.value[r]=e.value}var Lp=$("$ZodArray",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);let i=[];for(let s=0;s<n.length;s++){let l=n[s],d=t.element._zod.run({value:l,issues:[]},o);d instanceof Promise?i.push(d.then(u=>U_(u,r,s))):U_(d,r,s)}return i.length?Promise.all(i).then(()=>r):r}});function Gs(e,t,r,o,n){if(e.issues.length){if(n&&!(r in o))return;t.issues.push(...Qt(r,e.issues))}e.value===void 0?r in o&&(t.value[r]=void 0):t.value[r]=e.value}function X_(e){var o,n,i,s;let t=Object.keys(e.shape);for(let l of t)if(!((s=(i=(n=(o=e.shape)==null?void 0:o[l])==null?void 0:n._zod)==null?void 0:i.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);let r=od(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function Q_(e,t,r,o,n,i){let s=[],l=n.keySet,d=n.catchall._zod,u=d.def.type,m=d.optout==="optional";for(let c in t){if(l.has(c))continue;if(u==="never"){s.push(c);continue}let p=d.run({value:t[c],issues:[]},o);p instanceof Promise?e.push(p.then(f=>Gs(f,r,c,t,m))):Gs(p,r,c,t,m)}return s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}var eb=$("$ZodObject",(e,t)=>{Se.init(e,t);let r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){let l=t.shape;Object.defineProperty(t,"shape",{get:()=>{let d={...l};return Object.defineProperty(t,"shape",{value:d}),d}})}let o=Eo(()=>X_(t));Ce(e._zod,"propValues",()=>{var u;let l=t.shape,d={};for(let m in l){let c=l[m]._zod;if(c.values){(u=d[m])!=null||(d[m]=new Set);for(let p of c.values)d[m].add(p)}}return d});let n=Hn,i=t.catchall,s;e._zod.parse=(l,d)=>{s!=null||(s=o.value);let u=l.value;if(!n(u))return l.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),l;l.value={};let m=[],c=s.shape;for(let p of s.keys){let f=c[p],v=f._zod.optout==="optional",g=f._zod.run({value:u[p],issues:[]},d);g instanceof Promise?m.push(g.then(y=>Gs(y,l,p,u,v))):Gs(g,l,p,u,v)}return i?Q_(m,u,l,d,o.value,e):m.length?Promise.all(m).then(()=>l):l}}),qp=$("$ZodObjectJIT",(e,t)=>{eb.init(e,t);let r=e._zod.parse,o=Eo(()=>X_(t)),n=p=>{var _;let f=new ti(["shape","payload","ctx"]),v=o.value,g=k=>{let w=Is(k);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};f.write("const input = payload.value;");let y=Object.create(null),S=0;for(let k of v.keys)y[k]=`key_${S++}`;f.write("const newResult = {};");for(let k of v.keys){let w=y[k],h=Is(k),I=p[k],j=((_=I==null?void 0:I._zod)==null?void 0:_.optout)==="optional";f.write(`const ${w} = ${g(k)};`),j?f.write(`
        if (${w}.issues.length) {
          if (${h} in input) {
            payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${h}, ...iss.path] : [${h}]
            })));
          }
        }
        
        if (${w}.value === undefined) {
          if (${h} in input) {
            newResult[${h}] = undefined;
          }
        } else {
          newResult[${h}] = ${w}.value;
        }
        
      `):f.write(`
        if (${w}.issues.length) {
          payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${h}, ...iss.path] : [${h}]
          })));
        }
        
        if (${w}.value === undefined) {
          if (${h} in input) {
            newResult[${h}] = undefined;
          }
        } else {
          newResult[${h}] = ${w}.value;
        }
        
      `)}f.write("payload.value = newResult;"),f.write("return payload;");let b=f.compile();return(k,w)=>b(p,k,w)},i,s=Hn,l=!Za.jitless,u=l&&td.value,m=t.catchall,c;e._zod.parse=(p,f)=>{c!=null||(c=o.value);let v=p.value;return s(v)?l&&u&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=n(t.shape)),p=i(p,f),m?Q_([],v,p,f,c,e):p):r(p,f):(p.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),p)}});function F_(e,t,r,o){for(let i of e)if(i.issues.length===0)return t.value=i.value,t;let n=e.filter(i=>!Tn(i));return n.length===1?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(s=>Jt(s,o,ft())))}),t)}var ni=$("$ZodUnion",(e,t)=>{Se.init(e,t),Ce(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),Ce(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),Ce(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),Ce(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){let n=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${n.map(i=>Ha(i.source)).join("|")})$`)}});let r=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(n,i)=>{if(r)return o(n,i);let s=!1,l=[];for(let d of t.options){let u=d._zod.run({value:n.value,issues:[]},i);if(u instanceof Promise)l.push(u),s=!0;else{if(u.issues.length===0)return u;l.push(u)}}return s?Promise.all(l).then(d=>F_(d,n,e,i)):F_(l,n,e,i)}});function L_(e,t,r,o){let n=e.filter(i=>i.issues.length===0);return n.length===1?(t.value=n[0].value,t):(n.length===0?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(s=>Jt(s,o,ft())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t)}var Zp=$("$ZodXor",(e,t)=>{ni.init(e,t),t.inclusive=!1;let r=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(n,i)=>{if(r)return o(n,i);let s=!1,l=[];for(let d of t.options){let u=d._zod.run({value:n.value,issues:[]},i);u instanceof Promise?(l.push(u),s=!0):l.push(u)}return s?Promise.all(l).then(d=>L_(d,n,e,i)):L_(l,n,e,i)}}),Vp=$("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,ni.init(e,t);let r=e._zod.parse;Ce(e._zod,"propValues",()=>{let n={};for(let i of t.options){let s=i._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let[l,d]of Object.entries(s)){n[l]||(n[l]=new Set);for(let u of d)n[l].add(u)}}return n});let o=Eo(()=>{var s;let n=t.options,i=new Map;for(let l of n){let d=(s=l._zod.propValues)==null?void 0:s[t.discriminator];if(!d||d.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(l)}"`);for(let u of d){if(i.has(u))throw new Error(`Duplicate discriminator value "${String(u)}"`);i.set(u,l)}}return i});e._zod.parse=(n,i)=>{let s=n.value;if(!Hn(s))return n.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),n;let l=o.value.get(s==null?void 0:s[t.discriminator]);return l?l._zod.run(n,i):t.unionFallback?r(n,i):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),n)}}),Gp=$("$ZodIntersection",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value,i=t.left._zod.run({value:n,issues:[]},o),s=t.right._zod.run({value:n,issues:[]},o);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([d,u])=>q_(r,d,u)):q_(r,i,s)}});function op(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(In(e)&&In(t)){let r=Object.keys(t),o=Object.keys(e).filter(i=>r.indexOf(i)!==-1),n={...e,...t};for(let i of o){let s=op(e[i],t[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};n[i]=s.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let o=0;o<e.length;o++){let n=e[o],i=t[o],s=op(n,i);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function q_(e,t,r){let o=new Map,n;for(let l of t.issues)if(l.code==="unrecognized_keys"){n!=null||(n=l);for(let d of l.keys)o.has(d)||o.set(d,{}),o.get(d).l=!0}else e.issues.push(l);for(let l of r.issues)if(l.code==="unrecognized_keys")for(let d of l.keys)o.has(d)||o.set(d,{}),o.get(d).r=!0;else e.issues.push(l);let i=[...o].filter(([,l])=>l.l&&l.r).map(([l])=>l);if(i.length&&n&&e.issues.push({...n,keys:i}),Tn(e))return e;let s=op(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}var Js=$("$ZodTuple",(e,t)=>{Se.init(e,t);let r=t.items;e._zod.parse=(o,n)=>{let i=o.value;if(!Array.isArray(i))return o.issues.push({input:i,inst:e,expected:"tuple",code:"invalid_type"}),o;o.value=[];let s=[],l=[...r].reverse().findIndex(m=>m._zod.optin!=="optional"),d=l===-1?0:r.length-l;if(!t.rest){let m=i.length>r.length,c=i.length<d-1;if(m||c)return o.issues.push({...m?{code:"too_big",maximum:r.length,inclusive:!0}:{code:"too_small",minimum:r.length},input:i,inst:e,origin:"array"}),o}let u=-1;for(let m of r){if(u++,u>=i.length&&u>=d)continue;let c=m._zod.run({value:i[u],issues:[]},n);c instanceof Promise?s.push(c.then(p=>Ls(p,o,u))):Ls(c,o,u)}if(t.rest){let m=i.slice(r.length);for(let c of m){u++;let p=t.rest._zod.run({value:c,issues:[]},n);p instanceof Promise?s.push(p.then(f=>Ls(f,o,u))):Ls(p,o,u)}}return s.length?Promise.all(s).then(()=>o):o}});function Ls(e,t,r){e.issues.length&&t.issues.push(...Qt(r,e.issues)),t.value[r]=e.value}var Hp=$("$ZodRecord",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!In(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),r;let i=[],s=t.keyType._zod.values;if(s){r.value={};let l=new Set;for(let u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){l.add(typeof u=="number"?u.toString():u);let m=t.valueType._zod.run({value:n[u],issues:[]},o);m instanceof Promise?i.push(m.then(c=>{c.issues.length&&r.issues.push(...Qt(u,c.issues)),r.value[u]=c.value})):(m.issues.length&&r.issues.push(...Qt(u,m.issues)),r.value[u]=m.value)}let d;for(let u in n)l.has(u)||(d=d!=null?d:[],d.push(u));d&&d.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:d})}else{r.value={};for(let l of Reflect.ownKeys(n)){if(l==="__proto__")continue;let d=t.keyType._zod.run({value:l,issues:[]},o);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof l=="string"&&zs.test(l)&&d.issues.length){let c=t.keyType._zod.run({value:Number(l),issues:[]},o);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");c.issues.length===0&&(d=c)}if(d.issues.length){t.mode==="loose"?r.value[l]=n[l]:r.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(c=>Jt(c,o,ft())),input:l,path:[l],inst:e});continue}let m=t.valueType._zod.run({value:n[l],issues:[]},o);m instanceof Promise?i.push(m.then(c=>{c.issues.length&&r.issues.push(...Qt(l,c.issues)),r.value[d.value]=c.value})):(m.issues.length&&r.issues.push(...Qt(l,m.issues)),r.value[d.value]=m.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Bp=$("$ZodMap",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!(n instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:n,inst:e}),r;let i=[];r.value=new Map;for(let[s,l]of n){let d=t.keyType._zod.run({value:s,issues:[]},o),u=t.valueType._zod.run({value:l,issues:[]},o);d instanceof Promise||u instanceof Promise?i.push(Promise.all([d,u]).then(([m,c])=>{Z_(m,c,r,s,n,e,o)})):Z_(d,u,r,s,n,e,o)}return i.length?Promise.all(i).then(()=>r):r}});function Z_(e,t,r,o,n,i,s){e.issues.length&&(Ba.has(typeof o)?r.issues.push(...Qt(o,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:n,inst:i,issues:e.issues.map(l=>Jt(l,s,ft()))})),t.issues.length&&(Ba.has(typeof o)?r.issues.push(...Qt(o,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:n,inst:i,key:o,issues:t.issues.map(l=>Jt(l,s,ft()))})),r.value.set(e.value,t.value)}var Jp=$("$ZodSet",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!(n instanceof Set))return r.issues.push({input:n,inst:e,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let s of n){let l=t.valueType._zod.run({value:s,issues:[]},o);l instanceof Promise?i.push(l.then(d=>V_(d,r))):V_(l,r)}return i.length?Promise.all(i).then(()=>r):r}});function V_(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}var Wp=$("$ZodEnum",(e,t)=>{Se.init(e,t);let r=Ga(t.entries),o=new Set(r);e._zod.values=o,e._zod.pattern=new RegExp(`^(${r.filter(n=>Ba.has(typeof n)).map(n=>typeof n=="string"?cr(n):n.toString()).join("|")})$`),e._zod.parse=(n,i)=>{let s=n.value;return o.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:e}),n}}),Kp=$("$ZodLiteral",(e,t)=>{if(Se.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(o=>typeof o=="string"?cr(o):o?cr(o.toString()):String(o)).join("|")})$`),e._zod.parse=(o,n)=>{let i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),o}}),Yp=$("$ZodFile",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return n instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),r}}),Xp=$("$ZodTransform",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new wn(e.constructor.name);let n=t.transform(r.value,r);if(o.async)return(n instanceof Promise?n:Promise.resolve(n)).then(s=>(r.value=s,r));if(n instanceof Promise)throw new vr;return r.value=n,r}});function G_(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}var Ws=$("$ZodOptional",(e,t)=>{Se.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Ce(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Ce(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ha(r.source)})?$`):void 0}),e._zod.parse=(r,o)=>{if(t.innerType._zod.optin==="optional"){let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>G_(i,r.value)):G_(n,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,o)}}),Qp=$("$ZodExactOptional",(e,t)=>{Ws.init(e,t),Ce(e._zod,"values",()=>t.innerType._zod.values),Ce(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,o)=>t.innerType._zod.run(r,o)}),em=$("$ZodNullable",(e,t)=>{Se.init(e,t),Ce(e._zod,"optin",()=>t.innerType._zod.optin),Ce(e._zod,"optout",()=>t.innerType._zod.optout),Ce(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ha(r.source)}|null)$`):void 0}),Ce(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,o)=>r.value===null?r:t.innerType._zod.run(r,o)}),tm=$("$ZodDefault",(e,t)=>{Se.init(e,t),e._zod.optin="optional",Ce(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);if(r.value===void 0)return r.value=t.defaultValue,r;let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>H_(i,t)):H_(n,t)}});function H_(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var rm=$("$ZodPrefault",(e,t)=>{Se.init(e,t),e._zod.optin="optional",Ce(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>(o.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,o))}),nm=$("$ZodNonOptional",(e,t)=>{Se.init(e,t),Ce(e._zod,"values",()=>{let r=t.innerType._zod.values;return r?new Set([...r].filter(o=>o!==void 0)):void 0}),e._zod.parse=(r,o)=>{let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>B_(i,e)):B_(n,e)}});function B_(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var om=$("$ZodSuccess",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new wn("ZodSuccess");let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>(r.value=i.issues.length===0,r)):(r.value=n.issues.length===0,r)}}),am=$("$ZodCatch",(e,t)=>{Se.init(e,t),Ce(e._zod,"optin",()=>t.innerType._zod.optin),Ce(e._zod,"optout",()=>t.innerType._zod.optout),Ce(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(s=>Jt(s,o,ft()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=t.catchValue({...r,error:{issues:n.issues.map(i=>Jt(i,o,ft()))},input:r.value}),r.issues=[]),r)}}),im=$("$ZodNaN",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:e,expected:"nan",code:"invalid_type"}),r)}),sm=$("$ZodPipe",(e,t)=>{Se.init(e,t),Ce(e._zod,"values",()=>t.in._zod.values),Ce(e._zod,"optin",()=>t.in._zod.optin),Ce(e._zod,"optout",()=>t.out._zod.optout),Ce(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,o)=>{if(o.direction==="backward"){let i=t.out._zod.run(r,o);return i instanceof Promise?i.then(s=>qs(s,t.in,o)):qs(i,t.in,o)}let n=t.in._zod.run(r,o);return n instanceof Promise?n.then(i=>qs(i,t.out,o)):qs(n,t.out,o)}});function qs(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}var oi=$("$ZodCodec",(e,t)=>{Se.init(e,t),Ce(e._zod,"values",()=>t.in._zod.values),Ce(e._zod,"optin",()=>t.in._zod.optin),Ce(e._zod,"optout",()=>t.out._zod.optout),Ce(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,o)=>{if((o.direction||"forward")==="forward"){let i=t.in._zod.run(r,o);return i instanceof Promise?i.then(s=>Zs(s,t,o)):Zs(i,t,o)}else{let i=t.out._zod.run(r,o);return i instanceof Promise?i.then(s=>Zs(s,t,o)):Zs(i,t,o)}}});function Zs(e,t,r){if(e.issues.length)return e.aborted=!0,e;if((r.direction||"forward")==="forward"){let n=t.transform(e.value,e);return n instanceof Promise?n.then(i=>Vs(e,i,t.out,r)):Vs(e,n,t.out,r)}else{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(i=>Vs(e,i,t.in,r)):Vs(e,n,t.in,r)}}function Vs(e,t,r,o){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},o)}var lm=$("$ZodReadonly",(e,t)=>{Se.init(e,t),Ce(e._zod,"propValues",()=>t.innerType._zod.propValues),Ce(e._zod,"values",()=>t.innerType._zod.values),Ce(e._zod,"optin",()=>{var r,o;return(o=(r=t.innerType)==null?void 0:r._zod)==null?void 0:o.optin}),Ce(e._zod,"optout",()=>{var r,o;return(o=(r=t.innerType)==null?void 0:r._zod)==null?void 0:o.optout}),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(J_):J_(n)}});function J_(e){return e.value=Object.freeze(e.value),e}var um=$("$ZodTemplateLiteral",(e,t)=>{Se.init(e,t);let r=[];for(let o of t.parts)if(typeof o=="object"&&o!==null){if(!o._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...o._zod.traits].shift()}`);let n=o._zod.pattern instanceof RegExp?o._zod.pattern.source:o._zod.pattern;if(!n)throw new Error(`Invalid template literal part: ${o._zod.traits}`);let i=n.startsWith("^")?1:0,s=n.endsWith("$")?n.length-1:n.length;r.push(n.slice(i,s))}else if(o===null||nd.has(typeof o))r.push(cr(`${o}`));else throw new Error(`Invalid template literal part: ${o}`);e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(o,n)=>{var i;return typeof o.value!="string"?(o.issues.push({input:o.value,inst:e,expected:"string",code:"invalid_type"}),o):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(o.value)||o.issues.push({input:o.value,inst:e,code:"invalid_format",format:(i=t.format)!=null?i:"template_literal",pattern:e._zod.pattern.source}),o)}}),cm=$("$ZodFunction",(e,t)=>(Se.init(e,t),e._def=t,e._zod.def=t,e.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...o){let n=e._def.input?$s(e._def.input,o):o,i=Reflect.apply(r,this,n);return e._def.output?$s(e._def.output,i):i}},e.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...o){let n=e._def.input?await Es(e._def.input,o):o,i=await Reflect.apply(r,this,n);return e._def.output?await Es(e._def.output,i):i}},e._zod.parse=(r,o)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:e}),r):(e._def.output&&e._def.output._zod.def.type==="promise"?r.value=e.implementAsync(r.value):r.value=e.implement(r.value),r),e.input=(...r)=>{let o=e.constructor;return Array.isArray(r[0])?new o({type:"function",input:new Js({type:"tuple",items:r[0],rest:r[1]}),output:e._def.output}):new o({type:"function",input:r[0],output:e._def.output})},e.output=r=>{let o=e.constructor;return new o({type:"function",input:e._def.input,output:r})},e)),dm=$("$ZodPromise",(e,t)=>{Se.init(e,t),e._zod.parse=(r,o)=>Promise.resolve(r.value).then(n=>t.innerType._zod.run({value:n,issues:[]},o))}),pm=$("$ZodLazy",(e,t)=>{Se.init(e,t),Ce(e._zod,"innerType",()=>t.getter()),Ce(e._zod,"pattern",()=>{var r,o;return(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.pattern}),Ce(e._zod,"propValues",()=>{var r,o;return(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.propValues}),Ce(e._zod,"optin",()=>{var r,o,n;return(n=(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.optin)!=null?n:void 0}),Ce(e._zod,"optout",()=>{var r,o,n;return(n=(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.optout)!=null?n:void 0}),e._zod.parse=(r,o)=>e._zod.innerType._zod.run(r,o)}),mm=$("$ZodCustom",(e,t)=>{nt.init(e,t),Se.init(e,t),e._zod.parse=(r,o)=>r,e._zod.check=r=>{let o=r.value,n=t.fn(o);if(n instanceof Promise)return n.then(i=>W_(i,r,o,e));W_(n,r,o,e)}});function W_(e,t,r,o){var n;if(!e){let i={code:"custom",input:r,inst:o,path:[...(n=o._zod.def.path)!=null?n:[]],continue:!o._zod.def.abort};o._zod.def.params&&(i.params=o._zod.def.params),t.issues.push(Co(i))}}var Wn={};Or(Wn,{ar:()=>tb,az:()=>rb,be:()=>ob,bg:()=>ab,ca:()=>ib,cs:()=>sb,da:()=>lb,de:()=>ub,en:()=>Ks,eo:()=>cb,es:()=>db,fa:()=>pb,fi:()=>mb,fr:()=>fb,frCA:()=>gb,he:()=>hb,hu:()=>vb,hy:()=>_b,id:()=>bb,is:()=>xb,it:()=>wb,ja:()=>Sb,ka:()=>kb,kh:()=>Ib,km:()=>Ys,ko:()=>Tb,lt:()=>Eb,mk:()=>Cb,ms:()=>Ab,nl:()=>Pb,no:()=>Ob,ota:()=>Rb,pl:()=>Nb,ps:()=>Mb,pt:()=>jb,ru:()=>zb,sl:()=>Ub,sv:()=>Fb,ta:()=>Lb,th:()=>qb,tr:()=>Zb,ua:()=>Vb,uk:()=>Xs,ur:()=>Gb,uz:()=>Hb,vi:()=>Bb,yo:()=>Kb,zhCN:()=>Jb,zhTW:()=>Wb});var jC=()=>{let e={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 instanceof ${n.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${f}`:`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${c}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${f}`}case"invalid_value":return n.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${J(n.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${(l=n.origin)!=null?l:"\u0627\u0644\u0642\u064A\u0645\u0629"} ${c} ${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${(u=n.origin)!=null?u:"\u0627\u0644\u0642\u064A\u0645\u0629"} ${c} ${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${c} ${n.minimum.toString()} ${p.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${c} ${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${n.prefix}"`:c.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${c.suffix}"`:c.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${c.includes}"`:c.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${c.pattern}`:`${(m=r[c.format])!=null?m:n.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${n.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${n.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${n.keys.length>1?"\u0629":""}: ${N(n.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function tb(){return{localeError:jC()}}var DC=()=>{let e={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n instanceof ${n.expected}, daxil olan ${f}`:`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${c}, daxil olan ${f}`}case"invalid_value":return n.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${J(n.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${(l=n.origin)!=null?l:"d\u0259y\u0259r"} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${(u=n.origin)!=null?u:"d\u0259y\u0259r"} ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${c}${n.minimum.toString()} ${p.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${c.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:c.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${c.suffix}" il\u0259 bitm\u0259lidir`:c.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${c.includes}" daxil olmal\u0131d\u0131r`:c.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${c.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${n.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${n.keys.length>1?"lar":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${n.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function rb(){return{localeError:DC()}}function nb(e,t,r,o){let n=Math.abs(e),i=n%10,s=n%100;return s>=11&&s<=19?o:i===1?t:i>=2&&i<=4?r:o}var zC=()=>{let e={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"},o={nan:"NaN",number:"\u043B\u0456\u043A",array:"\u043C\u0430\u0441\u0456\u045E"};return n=>{var i,s,l,d,u;switch(n.code){case"invalid_type":{let m=(i=o[n.expected])!=null?i:n.expected,c=K(n.input),p=(s=o[c])!=null?s:c;return/^[A-Z]/.test(n.expected)?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F instanceof ${n.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${p}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${m}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${p}`}case"invalid_value":return n.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${J(n.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${N(n.values,"|")}`;case"too_big":{let m=n.inclusive?"<=":"<",c=t(n.origin);if(c){let p=Number(n.maximum),f=nb(p,c.unit.one,c.unit.few,c.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${(l=n.origin)!=null?l:"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${c.verb} ${m}${n.maximum.toString()} ${f}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${(d=n.origin)!=null?d:"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${m}${n.maximum.toString()}`}case"too_small":{let m=n.inclusive?">=":">",c=t(n.origin);if(c){let p=Number(n.minimum),f=nb(p,c.unit.one,c.unit.few,c.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${c.verb} ${m}${n.minimum.toString()} ${f}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${m}${n.minimum.toString()}`}case"invalid_format":{let m=n;return m.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${m.prefix}"`:m.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${m.suffix}"`:m.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${m.includes}"`:m.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${m.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${(u=r[m.format])!=null?u:n.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${n.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${n.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function ob(){return{localeError:zC()}}var UC=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"},o={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D instanceof ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${f}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${c}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${f}`}case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${J(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${(l=n.origin)!=null?l:"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${(u=n.origin)!=null?u:"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${c}${n.minimum.toString()} ${p.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;if(c.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${c.prefix}"`;if(c.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${c.suffix}"`;if(c.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${c.includes}"`;if(c.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${c.pattern}`;let p="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return c.format==="emoji"&&(p="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="datetime"&&(p="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="date"&&(p="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),c.format==="time"&&(p="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="duration"&&(p="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${p} ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function ab(){return{localeError:UC()}}var FC=()=>{let e={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Tipus inv\xE0lid: s'esperava instanceof ${n.expected}, s'ha rebut ${f}`:`Tipus inv\xE0lid: s'esperava ${c}, s'ha rebut ${f}`}case"invalid_value":return n.values.length===1?`Valor inv\xE0lid: s'esperava ${J(n.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${N(n.values," o ")}`;case"too_big":{let c=n.inclusive?"com a m\xE0xim":"menys de",p=t(n.origin);return p?`Massa gran: s'esperava que ${(l=n.origin)!=null?l:"el valor"} contingu\xE9s ${c} ${n.maximum.toString()} ${(d=p.unit)!=null?d:"elements"}`:`Massa gran: s'esperava que ${(u=n.origin)!=null?u:"el valor"} fos ${c} ${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?"com a m\xEDnim":"m\xE9s de",p=t(n.origin);return p?`Massa petit: s'esperava que ${n.origin} contingu\xE9s ${c} ${n.minimum.toString()} ${p.unit}`:`Massa petit: s'esperava que ${n.origin} fos ${c} ${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${c.prefix}"`:c.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${c.suffix}"`:c.format==="includes"?`Format inv\xE0lid: ha d'incloure "${c.includes}"`:c.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${c.pattern}`:`Format inv\xE0lid per a ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${n.divisor}`;case"unrecognized_keys":return`Clau${n.keys.length>1?"s":""} no reconeguda${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${n.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${n.origin}`;default:return"Entrada inv\xE0lida"}}};function ib(){return{localeError:FC()}}var LC=()=>{let e={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"},o={nan:"NaN",number:"\u010D\xEDslo",string:"\u0159et\u011Bzec",function:"funkce",array:"pole"};return n=>{var i,s,l,d,u,m,c,p,f;switch(n.code){case"invalid_type":{let v=(i=o[n.expected])!=null?i:n.expected,g=K(n.input),y=(s=o[g])!=null?s:g;return/^[A-Z]/.test(n.expected)?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no instanceof ${n.expected}, obdr\u017Eeno ${y}`:`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${v}, obdr\u017Eeno ${y}`}case"invalid_value":return n.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${J(n.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${N(n.values,"|")}`;case"too_big":{let v=n.inclusive?"<=":"<",g=t(n.origin);return g?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${(l=n.origin)!=null?l:"hodnota"} mus\xED m\xEDt ${v}${n.maximum.toString()} ${(d=g.unit)!=null?d:"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${(u=n.origin)!=null?u:"hodnota"} mus\xED b\xFDt ${v}${n.maximum.toString()}`}case"too_small":{let v=n.inclusive?">=":">",g=t(n.origin);return g?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${(m=n.origin)!=null?m:"hodnota"} mus\xED m\xEDt ${v}${n.minimum.toString()} ${(c=g.unit)!=null?c:"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${(p=n.origin)!=null?p:"hodnota"} mus\xED b\xFDt ${v}${n.minimum.toString()}`}case"invalid_format":{let v=n;return v.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${v.prefix}"`:v.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${v.suffix}"`:v.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${v.includes}"`:v.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${v.pattern}`:`Neplatn\xFD form\xE1t ${(f=r[v.format])!=null?f:n.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${n.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${N(n.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${n.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${n.origin}`;default:return"Neplatn\xFD vstup"}}};function sb(){return{localeError:LC()}}var qC=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},o={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Ugyldigt input: forventede instanceof ${n.expected}, fik ${f}`:`Ugyldigt input: forventede ${c}, fik ${f}`}case"invalid_value":return n.values.length===1?`Ugyldig v\xE6rdi: forventede ${J(n.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin),f=(l=o[n.origin])!=null?l:n.origin;return p?`For stor: forventede ${f!=null?f:"value"} ${p.verb} ${c} ${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementer"}`:`For stor: forventede ${f!=null?f:"value"} havde ${c} ${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin),f=(u=o[n.origin])!=null?u:n.origin;return p?`For lille: forventede ${f} ${p.verb} ${c} ${n.minimum.toString()} ${p.unit}`:`For lille: forventede ${f} havde ${c} ${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Ugyldig streng: skal starte med "${c.prefix}"`:c.format==="ends_with"?`Ugyldig streng: skal ende med "${c.suffix}"`:c.format==="includes"?`Ugyldig streng: skal indeholde "${c.includes}"`:c.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${c.pattern}`:`Ugyldig ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${n.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${n.origin}`;default:return"Ugyldigt input"}}};function lb(){return{localeError:qC()}}var ZC=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},o={nan:"NaN",number:"Zahl",array:"Array"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Ung\xFCltige Eingabe: erwartet instanceof ${n.expected}, erhalten ${f}`:`Ung\xFCltige Eingabe: erwartet ${c}, erhalten ${f}`}case"invalid_value":return n.values.length===1?`Ung\xFCltige Eingabe: erwartet ${J(n.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Zu gro\xDF: erwartet, dass ${(l=n.origin)!=null?l:"Wert"} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${(u=n.origin)!=null?u:"Wert"} ${c}${n.maximum.toString()} ist`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Zu klein: erwartet, dass ${n.origin} ${c}${n.minimum.toString()} ${p.unit} hat`:`Zu klein: erwartet, dass ${n.origin} ${c}${n.minimum.toString()} ist`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Ung\xFCltiger String: muss mit "${c.prefix}" beginnen`:c.format==="ends_with"?`Ung\xFCltiger String: muss mit "${c.suffix}" enden`:c.format==="includes"?`Ung\xFCltiger String: muss "${c.includes}" enthalten`:c.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${c.pattern} entsprechen`:`Ung\xFCltig: ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${n.divisor} sein`;case"unrecognized_keys":return`${n.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${n.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${n.origin}`;default:return"Ung\xFCltige Eingabe"}}};function ub(){return{localeError:ZC()}}var VC=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return`Invalid input: expected ${c}, received ${f}`}case"invalid_value":return n.values.length===1?`Invalid input: expected ${J(n.values[0])}`:`Invalid option: expected one of ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Too big: expected ${(l=n.origin)!=null?l:"value"} to have ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elements"}`:`Too big: expected ${(u=n.origin)!=null?u:"value"} to be ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Too small: expected ${n.origin} to have ${c}${n.minimum.toString()} ${p.unit}`:`Too small: expected ${n.origin} to be ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Invalid string: must start with "${c.prefix}"`:c.format==="ends_with"?`Invalid string: must end with "${c.suffix}"`:c.format==="includes"?`Invalid string: must include "${c.includes}"`:c.format==="regex"?`Invalid string: must match pattern ${c.pattern}`:`Invalid ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}};function Ks(){return{localeError:VC()}}var GC=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},o={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Nevalida enigo: atendi\u011Dis instanceof ${n.expected}, ricevi\u011Dis ${f}`:`Nevalida enigo: atendi\u011Dis ${c}, ricevi\u011Dis ${f}`}case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${J(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Tro granda: atendi\u011Dis ke ${(l=n.origin)!=null?l:"valoro"} havu ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementojn"}`:`Tro granda: atendi\u011Dis ke ${(u=n.origin)!=null?u:"valoro"} havu ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${c}${n.minimum.toString()} ${p.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${c.prefix}"`:c.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${c.suffix}"`:c.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${c.includes}"`:c.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${c.pattern}`:`Nevalida ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}};function cb(){return{localeError:GC()}}var HC=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},o={nan:"NaN",string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};return n=>{var i,s,l,d,u,m,c,p;switch(n.code){case"invalid_type":{let f=(i=o[n.expected])!=null?i:n.expected,v=K(n.input),g=(s=o[v])!=null?s:v;return/^[A-Z]/.test(n.expected)?`Entrada inv\xE1lida: se esperaba instanceof ${n.expected}, recibido ${g}`:`Entrada inv\xE1lida: se esperaba ${f}, recibido ${g}`}case"invalid_value":return n.values.length===1?`Entrada inv\xE1lida: se esperaba ${J(n.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${N(n.values,"|")}`;case"too_big":{let f=n.inclusive?"<=":"<",v=t(n.origin),g=(l=o[n.origin])!=null?l:n.origin;return v?`Demasiado grande: se esperaba que ${g!=null?g:"valor"} tuviera ${f}${n.maximum.toString()} ${(d=v.unit)!=null?d:"elementos"}`:`Demasiado grande: se esperaba que ${g!=null?g:"valor"} fuera ${f}${n.maximum.toString()}`}case"too_small":{let f=n.inclusive?">=":">",v=t(n.origin),g=(u=o[n.origin])!=null?u:n.origin;return v?`Demasiado peque\xF1o: se esperaba que ${g} tuviera ${f}${n.minimum.toString()} ${v.unit}`:`Demasiado peque\xF1o: se esperaba que ${g} fuera ${f}${n.minimum.toString()}`}case"invalid_format":{let f=n;return f.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${f.prefix}"`:f.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${f.suffix}"`:f.format==="includes"?`Cadena inv\xE1lida: debe incluir "${f.includes}"`:f.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${f.pattern}`:`Inv\xE1lido ${(m=r[f.format])!=null?m:n.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${n.divisor}`;case"unrecognized_keys":return`Llave${n.keys.length>1?"s":""} desconocida${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${(c=o[n.origin])!=null?c:n.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${(p=o[n.origin])!=null?p:n.origin}`;default:return"Entrada inv\xE1lida"}}};function db(){return{localeError:HC()}}var BC=()=>{let e={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"},o={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0622\u0631\u0627\u06CC\u0647"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A instanceof ${n.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${f} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`:`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${c} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${f} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`}case"invalid_value":return n.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${J(n.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${N(n.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${(l=n.origin)!=null?l:"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${(u=n.origin)!=null?u:"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${c}${n.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${c}${n.minimum.toString()} ${p.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${c}${n.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${c.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:c.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${c.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:c.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${c.includes}" \u0628\u0627\u0634\u062F`:c.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${c.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${(m=r[c.format])!=null?m:n.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${n.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${n.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${N(n.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${n.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${n.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function pb(){return{localeError:BC()}}var JC=()=>{let e={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},o={nan:"NaN"};return n=>{var i,s,l;switch(n.code){case"invalid_type":{let d=(i=o[n.expected])!=null?i:n.expected,u=K(n.input),m=(s=o[u])!=null?s:u;return/^[A-Z]/.test(n.expected)?`Virheellinen tyyppi: odotettiin instanceof ${n.expected}, oli ${m}`:`Virheellinen tyyppi: odotettiin ${d}, oli ${m}`}case"invalid_value":return n.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${J(n.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${N(n.values,"|")}`;case"too_big":{let d=n.inclusive?"<=":"<",u=t(n.origin);return u?`Liian suuri: ${u.subject} t\xE4ytyy olla ${d}${n.maximum.toString()} ${u.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${d}${n.maximum.toString()}`}case"too_small":{let d=n.inclusive?">=":">",u=t(n.origin);return u?`Liian pieni: ${u.subject} t\xE4ytyy olla ${d}${n.minimum.toString()} ${u.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${d}${n.minimum.toString()}`}case"invalid_format":{let d=n;return d.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${d.prefix}"`:d.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${d.suffix}"`:d.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${d.includes}"`:d.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${d.pattern}`:`Virheellinen ${(l=r[d.format])!=null?l:n.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${n.divisor} monikerta`;case"unrecognized_keys":return`${n.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${N(n.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function mb(){return{localeError:JC()}}var WC=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},o={nan:"NaN",number:"nombre",array:"tableau"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Entr\xE9e invalide : instanceof ${n.expected} attendu, ${f} re\xE7u`:`Entr\xE9e invalide : ${c} attendu, ${f} re\xE7u`}case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : ${J(n.values[0])} attendu`:`Option invalide : une valeur parmi ${N(n.values,"|")} attendue`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Trop grand : ${(l=n.origin)!=null?l:"valeur"} doit ${p.verb} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\xE9l\xE9ment(s)"}`:`Trop grand : ${(u=n.origin)!=null?u:"valeur"} doit \xEAtre ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Trop petit : ${n.origin} doit ${p.verb} ${c}${n.minimum.toString()} ${p.unit}`:`Trop petit : ${n.origin} doit \xEAtre ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${c.prefix}"`:c.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${c.suffix}"`:c.format==="includes"?`Cha\xEEne invalide : doit inclure "${c.includes}"`:c.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${c.pattern}`:`${(m=r[c.format])!=null?m:n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${N(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function fb(){return{localeError:WC()}}var KC=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},o={nan:"NaN"};return n=>{var i,s,l,d,u;switch(n.code){case"invalid_type":{let m=(i=o[n.expected])!=null?i:n.expected,c=K(n.input),p=(s=o[c])!=null?s:c;return/^[A-Z]/.test(n.expected)?`Entr\xE9e invalide : attendu instanceof ${n.expected}, re\xE7u ${p}`:`Entr\xE9e invalide : attendu ${m}, re\xE7u ${p}`}case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : attendu ${J(n.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${N(n.values,"|")}`;case"too_big":{let m=n.inclusive?"\u2264":"<",c=t(n.origin);return c?`Trop grand : attendu que ${(l=n.origin)!=null?l:"la valeur"} ait ${m}${n.maximum.toString()} ${c.unit}`:`Trop grand : attendu que ${(d=n.origin)!=null?d:"la valeur"} soit ${m}${n.maximum.toString()}`}case"too_small":{let m=n.inclusive?"\u2265":">",c=t(n.origin);return c?`Trop petit : attendu que ${n.origin} ait ${m}${n.minimum.toString()} ${c.unit}`:`Trop petit : attendu que ${n.origin} soit ${m}${n.minimum.toString()}`}case"invalid_format":{let m=n;return m.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${m.prefix}"`:m.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${m.suffix}"`:m.format==="includes"?`Cha\xEEne invalide : doit inclure "${m.includes}"`:m.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${m.pattern}`:`${(u=r[m.format])!=null?u:n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${N(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function gb(){return{localeError:KC()}}var YC=()=>{let e={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},t={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=u=>u?e[u]:void 0,o=u=>{let m=r(u);return m?m.label:u!=null?u:e.unknown.label},n=u=>`\u05D4${o(u)}`,i=u=>{var p;let m=r(u);return((p=m==null?void 0:m.gender)!=null?p:"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA"},s=u=>{var m;return u&&(m=t[u])!=null?m:null},l={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}},d={nan:"NaN"};return u=>{var m,c,p,f,v,g,y,S,b,_,k,w,h,I,j,U,F,Z,L,M,q;switch(u.code){case"invalid_type":{let C=u.expected,E=(m=d[C!=null?C:""])!=null?m:o(C),te=K(u.input),P=(f=(p=d[te])!=null?p:(c=e[te])==null?void 0:c.label)!=null?f:te;return/^[A-Z]/.test(u.expected)?`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA instanceof ${u.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${P}`:`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${E}, \u05D4\u05EA\u05E7\u05D1\u05DC ${P}`}case"invalid_value":{if(u.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${J(u.values[0])}`;let C=u.values.map(P=>J(P));if(u.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${C[0]} \u05D0\u05D5 ${C[1]}`;let E=C[C.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${C.slice(0,-1).join(", ")} \u05D0\u05D5 ${E}`}case"too_big":{let C=s(u.origin),E=n((v=u.origin)!=null?v:"value");if(u.origin==="string")return`${(g=C==null?void 0:C.longLabel)!=null?g:"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${E} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.maximum.toString()} ${(y=C==null?void 0:C.unit)!=null?y:""} ${u.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(u.origin==="number"){let se=u.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${u.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${E} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${se}`}if(u.origin==="array"||u.origin==="set"){let se=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",ee=u.inclusive?`${u.maximum} ${(S=C==null?void 0:C.unit)!=null?S:""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${u.maximum} ${(b=C==null?void 0:C.unit)!=null?b:""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${E} ${se} \u05DC\u05D4\u05DB\u05D9\u05DC ${ee}`.trim()}let te=u.inclusive?"<=":"<",P=i((_=u.origin)!=null?_:"value");return C!=null&&C.unit?`${C.longLabel} \u05DE\u05D3\u05D9: ${E} ${P} ${te}${u.maximum.toString()} ${C.unit}`:`${(k=C==null?void 0:C.longLabel)!=null?k:"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${E} ${P} ${te}${u.maximum.toString()}`}case"too_small":{let C=s(u.origin),E=n((w=u.origin)!=null?w:"value");if(u.origin==="string")return`${(h=C==null?void 0:C.shortLabel)!=null?h:"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${E} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.minimum.toString()} ${(I=C==null?void 0:C.unit)!=null?I:""} ${u.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(u.origin==="number"){let se=u.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${u.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${E} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${se}`}if(u.origin==="array"||u.origin==="set"){let se=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(u.minimum===1&&u.inclusive){let he=(u.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${E} ${se} \u05DC\u05D4\u05DB\u05D9\u05DC ${he}`}let ee=u.inclusive?`${u.minimum} ${(j=C==null?void 0:C.unit)!=null?j:""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${u.minimum} ${(U=C==null?void 0:C.unit)!=null?U:""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${E} ${se} \u05DC\u05D4\u05DB\u05D9\u05DC ${ee}`.trim()}let te=u.inclusive?">=":">",P=i((F=u.origin)!=null?F:"value");return C!=null&&C.unit?`${C.shortLabel} \u05DE\u05D3\u05D9: ${E} ${P} ${te}${u.minimum.toString()} ${C.unit}`:`${(Z=C==null?void 0:C.shortLabel)!=null?Z:"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${E} ${P} ${te}${u.minimum.toString()}`}case"invalid_format":{let C=u;if(C.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${C.prefix}"`;if(C.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${C.suffix}"`;if(C.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${C.includes}"`;if(C.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${C.pattern}`;let E=l[C.format],te=(L=E==null?void 0:E.label)!=null?L:C.format,se=((M=E==null?void 0:E.gender)!=null?M:"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${te} \u05DC\u05D0 ${se}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${u.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${u.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${u.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${N(u.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${n((q=u.origin)!=null?q:"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function hb(){return{localeError:YC()}}var XC=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"},o={nan:"NaN",number:"sz\xE1m",array:"t\xF6mb"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k instanceof ${n.expected}, a kapott \xE9rt\xE9k ${f}`:`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${c}, a kapott \xE9rt\xE9k ${f}`}case"invalid_value":return n.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${J(n.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`T\xFAl nagy: ${(l=n.origin)!=null?l:"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${(u=n.origin)!=null?u:"\xE9rt\xE9k"} t\xFAl nagy: ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} m\xE9rete t\xFAl kicsi ${c}${n.minimum.toString()} ${p.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} t\xFAl kicsi ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\xC9rv\xE9nytelen string: "${c.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:c.format==="ends_with"?`\xC9rv\xE9nytelen string: "${c.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:c.format==="includes"?`\xC9rv\xE9nytelen string: "${c.includes}" \xE9rt\xE9ket kell tartalmaznia`:c.format==="regex"?`\xC9rv\xE9nytelen string: ${c.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${n.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${n.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${n.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function vb(){return{localeError:XC()}}function yb(e,t,r){return Math.abs(e)===1?t:r}function No(e){if(!e)return"";let t=["\u0561","\u0565","\u0568","\u056B","\u0578","\u0578\u0582","\u0585"],r=e[e.length-1];return e+(t.includes(r)?"\u0576":"\u0568")}var QC=()=>{let e={string:{unit:{one:"\u0576\u0577\u0561\u0576",many:"\u0576\u0577\u0561\u0576\u0576\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},file:{unit:{one:"\u0562\u0561\u0575\u0569",many:"\u0562\u0561\u0575\u0569\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},array:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},set:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0574\u0578\u0582\u057F\u0584",email:"\u0567\u056C. \u0570\u0561\u057D\u0581\u0565",url:"URL",emoji:"\u0567\u0574\u0578\u057B\u056B",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E \u0587 \u056A\u0561\u0574",date:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E",time:"ISO \u056A\u0561\u0574",duration:"ISO \u057F\u0587\u0578\u0572\u0578\u0582\u0569\u0575\u0578\u0582\u0576",ipv4:"IPv4 \u0570\u0561\u057D\u0581\u0565",ipv6:"IPv6 \u0570\u0561\u057D\u0581\u0565",cidrv4:"IPv4 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",cidrv6:"IPv6 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",base64:"base64 \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",base64url:"base64url \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",json_string:"JSON \u057F\u0578\u0572",e164:"E.164 \u0570\u0561\u0574\u0561\u0580",jwt:"JWT",template_literal:"\u0574\u0578\u0582\u057F\u0584"},o={nan:"NaN",number:"\u0569\u056B\u057E",array:"\u0566\u0561\u0576\u0563\u057E\u0561\u056E"};return n=>{var i,s,l,d,u;switch(n.code){case"invalid_type":{let m=(i=o[n.expected])!=null?i:n.expected,c=K(n.input),p=(s=o[c])!=null?s:c;return/^[A-Z]/.test(n.expected)?`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 instanceof ${n.expected}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${p}`:`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${m}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${p}`}case"invalid_value":return n.values.length===1?`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${J(n.values[1])}`:`\u054D\u056D\u0561\u056C \u057F\u0561\u0580\u0562\u0565\u0580\u0561\u056F\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 \u0570\u0565\u057F\u0587\u0575\u0561\u056C\u0576\u0565\u0580\u056B\u0581 \u0574\u0565\u056F\u0568\u055D ${N(n.values,"|")}`;case"too_big":{let m=n.inclusive?"<=":"<",c=t(n.origin);if(c){let p=Number(n.maximum),f=yb(p,c.unit.one,c.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${No((l=n.origin)!=null?l:"\u0561\u0580\u056A\u0565\u0584")} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${m}${n.maximum.toString()} ${f}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${No((d=n.origin)!=null?d:"\u0561\u0580\u056A\u0565\u0584")} \u056C\u056B\u0576\u056B ${m}${n.maximum.toString()}`}case"too_small":{let m=n.inclusive?">=":">",c=t(n.origin);if(c){let p=Number(n.minimum),f=yb(p,c.unit.one,c.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${No(n.origin)} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${m}${n.minimum.toString()} ${f}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${No(n.origin)} \u056C\u056B\u0576\u056B ${m}${n.minimum.toString()}`}case"invalid_format":{let m=n;return m.format==="starts_with"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057D\u056F\u057D\u057E\u056B "${m.prefix}"-\u0578\u057E`:m.format==="ends_with"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0561\u057E\u0561\u0580\u057F\u057E\u056B "${m.suffix}"-\u0578\u057E`:m.format==="includes"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057A\u0561\u0580\u0578\u0582\u0576\u0561\u056F\u056B "${m.includes}"`:m.format==="regex"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0570\u0561\u0574\u0561\u057A\u0561\u057F\u0561\u057D\u056D\u0561\u0576\u056B ${m.pattern} \u0571\u0587\u0561\u0579\u0561\u0583\u056B\u0576`:`\u054D\u056D\u0561\u056C ${(u=r[m.format])!=null?u:n.format}`}case"not_multiple_of":return`\u054D\u056D\u0561\u056C \u0569\u056B\u057E\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0562\u0561\u0566\u0574\u0561\u057A\u0561\u057F\u056B\u056F \u056C\u056B\u0576\u056B ${n.divisor}-\u056B`;case"unrecognized_keys":return`\u0549\u0573\u0561\u0576\u0561\u0579\u057E\u0561\u056E \u0562\u0561\u0576\u0561\u056C\u056B${n.keys.length>1?"\u0576\u0565\u0580":""}. ${N(n.keys,", ")}`;case"invalid_key":return`\u054D\u056D\u0561\u056C \u0562\u0561\u0576\u0561\u056C\u056B ${No(n.origin)}-\u0578\u0582\u0574`;case"invalid_union":return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574";case"invalid_element":return`\u054D\u056D\u0561\u056C \u0561\u0580\u056A\u0565\u0584 ${No(n.origin)}-\u0578\u0582\u0574`;default:return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574"}}};function _b(){return{localeError:QC()}}var eA=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Input tidak valid: diharapkan instanceof ${n.expected}, diterima ${f}`:`Input tidak valid: diharapkan ${c}, diterima ${f}`}case"invalid_value":return n.values.length===1?`Input tidak valid: diharapkan ${J(n.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Terlalu besar: diharapkan ${(l=n.origin)!=null?l:"value"} memiliki ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elemen"}`:`Terlalu besar: diharapkan ${(u=n.origin)!=null?u:"value"} menjadi ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Terlalu kecil: diharapkan ${n.origin} memiliki ${c}${n.minimum.toString()} ${p.unit}`:`Terlalu kecil: diharapkan ${n.origin} menjadi ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`String tidak valid: harus dimulai dengan "${c.prefix}"`:c.format==="ends_with"?`String tidak valid: harus berakhir dengan "${c.suffix}"`:c.format==="includes"?`String tidak valid: harus menyertakan "${c.includes}"`:c.format==="regex"?`String tidak valid: harus sesuai pola ${c.pattern}`:`${(m=r[c.format])!=null?m:n.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${n.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${n.origin}`;default:return"Input tidak valid"}}};function bb(){return{localeError:eA()}}var tA=()=>{let e={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"},o={nan:"NaN",number:"n\xFAmer",array:"fylki"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Rangt gildi: \xDE\xFA sl\xF3st inn ${f} \xFEar sem \xE1 a\xF0 vera instanceof ${n.expected}`:`Rangt gildi: \xDE\xFA sl\xF3st inn ${f} \xFEar sem \xE1 a\xF0 vera ${c}`}case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${J(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${(l=n.origin)!=null?l:"gildi"} hafi ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${(u=n.origin)!=null?u:"gildi"} s\xE9 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${c}${n.minimum.toString()} ${p.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${c.prefix}"`:c.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${c.suffix}"`:c.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${c.includes}"`:c.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${c.pattern}`:`Rangt ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${N(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}};function xb(){return{localeError:tA()}}var rA=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},o={nan:"NaN",number:"numero",array:"vettore"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Input non valido: atteso instanceof ${n.expected}, ricevuto ${f}`:`Input non valido: atteso ${c}, ricevuto ${f}`}case"invalid_value":return n.values.length===1?`Input non valido: atteso ${J(n.values[0])}`:`Opzione non valida: atteso uno tra ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Troppo grande: ${(l=n.origin)!=null?l:"valore"} deve avere ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementi"}`:`Troppo grande: ${(u=n.origin)!=null?u:"valore"} deve essere ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Troppo piccolo: ${n.origin} deve avere ${c}${n.minimum.toString()} ${p.unit}`:`Troppo piccolo: ${n.origin} deve essere ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Stringa non valida: deve iniziare con "${c.prefix}"`:c.format==="ends_with"?`Stringa non valida: deve terminare con "${c.suffix}"`:c.format==="includes"?`Stringa non valida: deve includere "${c.includes}"`:c.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${c.pattern}`:`Invalid ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${n.divisor}`;case"unrecognized_keys":return`Chiav${n.keys.length>1?"i":"e"} non riconosciut${n.keys.length>1?"e":"a"}: ${N(n.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${n.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${n.origin}`;default:return"Input non valido"}}};function wb(){return{localeError:rA()}}var nA=()=>{let e={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"},o={nan:"NaN",number:"\u6570\u5024",array:"\u914D\u5217"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u7121\u52B9\u306A\u5165\u529B: instanceof ${n.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${f}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u5165\u529B: ${c}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${f}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`}case"invalid_value":return n.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${J(n.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${N(n.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let c=n.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",p=t(n.origin);return p?`\u5927\u304D\u3059\u304E\u308B\u5024: ${(l=n.origin)!=null?l:"\u5024"}\u306F${n.maximum.toString()}${(d=p.unit)!=null?d:"\u8981\u7D20"}${c}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${(u=n.origin)!=null?u:"\u5024"}\u306F${n.maximum.toString()}${c}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let c=n.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",p=t(n.origin);return p?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${p.unit}${c}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${c}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${c.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:c.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${c.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:c.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${c.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:c.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${c.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${n.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${n.keys.length>1?"\u7FA4":""}: ${N(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function Sb(){return{localeError:nA()}}var oA=()=>{let e={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"},o={nan:"NaN",number:"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8",string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0",array:"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8"};return n=>{var i,s,l,d,u;switch(n.code){case"invalid_type":{let m=(i=o[n.expected])!=null?i:n.expected,c=K(n.input),p=(s=o[c])!=null?s:c;return/^[A-Z]/.test(n.expected)?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 instanceof ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${p}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${m}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${p}`}case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${J(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${N(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let m=n.inclusive?"<=":"<",c=t(n.origin);return c?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${(l=n.origin)!=null?l:"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${c.verb} ${m}${n.maximum.toString()} ${c.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${(d=n.origin)!=null?d:"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${m}${n.maximum.toString()}`}case"too_small":{let m=n.inclusive?">=":">",c=t(n.origin);return c?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${c.verb} ${m}${n.minimum.toString()} ${c.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${m}${n.minimum.toString()}`}case"invalid_format":{let m=n;return m.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${m.prefix}"-\u10D8\u10D7`:m.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${m.suffix}"-\u10D8\u10D7`:m.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${m.includes}"-\u10E1`:m.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${m.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${(u=r[m.format])!=null?u:n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function kb(){return{localeError:oA()}}var aA=()=>{let e={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"},o={nan:"NaN",number:"\u179B\u17C1\u1781",array:"\u17A2\u17B6\u179A\u17C1 (Array)",null:"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A instanceof ${n.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${f}`:`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${c} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${f}`}case"invalid_value":return n.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${J(n.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${(l=n.origin)!=null?l:"\u178F\u1798\u17D2\u179B\u17C3"} ${c} ${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${(u=n.origin)!=null?u:"\u178F\u1798\u17D2\u179B\u17C3"} ${c} ${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${c} ${n.minimum.toString()} ${p.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${c} ${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${c.prefix}"`:c.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${c.suffix}"`:c.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${c.includes}"`:c.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${c.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${n.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${N(n.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function Ys(){return{localeError:aA()}}function Ib(){return Ys()}var iA=()=>{let e={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m,c,p,f;switch(n.code){case"invalid_type":{let v=(i=o[n.expected])!=null?i:n.expected,g=K(n.input),y=(s=o[g])!=null?s:g;return/^[A-Z]/.test(n.expected)?`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 instanceof ${n.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${y}\uC785\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${v}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${y}\uC785\uB2C8\uB2E4`}case"invalid_value":return n.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${J(n.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${N(n.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let v=n.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",g=v==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",y=t(n.origin),S=(l=y==null?void 0:y.unit)!=null?l:"\uC694\uC18C";return y?`${(d=n.origin)!=null?d:"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()}${S} ${v}${g}`:`${(u=n.origin)!=null?u:"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()} ${v}${g}`}case"too_small":{let v=n.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",g=v==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",y=t(n.origin),S=(m=y==null?void 0:y.unit)!=null?m:"\uC694\uC18C";return y?`${(c=n.origin)!=null?c:"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()}${S} ${v}${g}`:`${(p=n.origin)!=null?p:"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()} ${v}${g}`}case"invalid_format":{let v=n;return v.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${v.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:v.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${v.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:v.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${v.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:v.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${v.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${(f=r[v.format])!=null?f:n.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${n.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${N(n.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${n.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${n.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function Tb(){return{localeError:iA()}}var ai=e=>e.charAt(0).toUpperCase()+e.slice(1);function $b(e){let t=Math.abs(e),r=t%10,o=t%100;return o>=11&&o<=19||r===0?"many":r===1?"one":"few"}var sA=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function t(n,i,s,l){var u;let d=(u=e[n])!=null?u:null;return d===null?d:{unit:d.unit[i],verb:d.verb[l][s?"inclusive":"notInclusive"]}}let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"},o={nan:"NaN",number:"skai\u010Dius",bigint:"sveikasis skai\u010Dius",string:"eilut\u0117",boolean:"login\u0117 reik\u0161m\u0117",undefined:"neapibr\u0117\u017Eta reik\u0161m\u0117",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin\u0117 reik\u0161m\u0117"};return n=>{var i,s,l,d,u,m,c,p,f,v,g,y,S,b,_;switch(n.code){case"invalid_type":{let k=(i=o[n.expected])!=null?i:n.expected,w=K(n.input),h=(s=o[w])!=null?s:w;return/^[A-Z]/.test(n.expected)?`Gautas tipas ${h}, o tik\u0117tasi - instanceof ${n.expected}`:`Gautas tipas ${h}, o tik\u0117tasi - ${k}`}case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${J(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${N(n.values,"|")} pasirinkim\u0173`;case"too_big":{let k=(l=o[n.origin])!=null?l:n.origin,w=t(n.origin,$b(Number(n.maximum)),(d=n.inclusive)!=null?d:!1,"smaller");if(w!=null&&w.verb)return`${ai((u=k!=null?k:n.origin)!=null?u:"reik\u0161m\u0117")} ${w.verb} ${n.maximum.toString()} ${(m=w.unit)!=null?m:"element\u0173"}`;let h=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${ai((c=k!=null?k:n.origin)!=null?c:"reik\u0161m\u0117")} turi b\u016Bti ${h} ${n.maximum.toString()} ${w==null?void 0:w.unit}`}case"too_small":{let k=(p=o[n.origin])!=null?p:n.origin,w=t(n.origin,$b(Number(n.minimum)),(f=n.inclusive)!=null?f:!1,"bigger");if(w!=null&&w.verb)return`${ai((v=k!=null?k:n.origin)!=null?v:"reik\u0161m\u0117")} ${w.verb} ${n.minimum.toString()} ${(g=w.unit)!=null?g:"element\u0173"}`;let h=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${ai((y=k!=null?k:n.origin)!=null?y:"reik\u0161m\u0117")} turi b\u016Bti ${h} ${n.minimum.toString()} ${w==null?void 0:w.unit}`}case"invalid_format":{let k=n;return k.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${k.prefix}"`:k.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${k.suffix}"`:k.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${k.includes}"`:k.format==="regex"?`Eilut\u0117 privalo atitikti ${k.pattern}`:`Neteisingas ${(S=r[k.format])!=null?S:n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${N(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let k=(b=o[n.origin])!=null?b:n.origin;return`${ai((_=k!=null?k:n.origin)!=null?_:"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function Eb(){return{localeError:sA()}}var lA=()=>{let e={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"},o={nan:"NaN",number:"\u0431\u0440\u043E\u0458",array:"\u043D\u0438\u0437\u0430"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 instanceof ${n.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${f}`:`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${c}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${f}`}case"invalid_value":return n.values.length===1?`Invalid input: expected ${J(n.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${(l=n.origin)!=null?l:"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${(u=n.origin)!=null?u:"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0438\u043C\u0430 ${c}${n.minimum.toString()} ${p.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${c.prefix}"`:c.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${c.suffix}"`:c.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${c.includes}"`:c.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${c.pattern}`:`Invalid ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${n.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${n.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function Cb(){return{localeError:lA()}}var uA=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},o={nan:"NaN",number:"nombor"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Input tidak sah: dijangka instanceof ${n.expected}, diterima ${f}`:`Input tidak sah: dijangka ${c}, diterima ${f}`}case"invalid_value":return n.values.length===1?`Input tidak sah: dijangka ${J(n.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Terlalu besar: dijangka ${(l=n.origin)!=null?l:"nilai"} ${p.verb} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elemen"}`:`Terlalu besar: dijangka ${(u=n.origin)!=null?u:"nilai"} adalah ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Terlalu kecil: dijangka ${n.origin} ${p.verb} ${c}${n.minimum.toString()} ${p.unit}`:`Terlalu kecil: dijangka ${n.origin} adalah ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`String tidak sah: mesti bermula dengan "${c.prefix}"`:c.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${c.suffix}"`:c.format==="includes"?`String tidak sah: mesti mengandungi "${c.includes}"`:c.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${c.pattern}`:`${(m=r[c.format])!=null?m:n.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${N(n.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${n.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${n.origin}`;default:return"Input tidak sah"}}};function Ab(){return{localeError:uA()}}var cA=()=>{let e={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},o={nan:"NaN",number:"getal"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Ongeldige invoer: verwacht instanceof ${n.expected}, ontving ${f}`:`Ongeldige invoer: verwacht ${c}, ontving ${f}`}case"invalid_value":return n.values.length===1?`Ongeldige invoer: verwacht ${J(n.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin),f=n.origin==="date"?"laat":n.origin==="string"?"lang":"groot";return p?`Te ${f}: verwacht dat ${(l=n.origin)!=null?l:"waarde"} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementen"} ${p.verb}`:`Te ${f}: verwacht dat ${(u=n.origin)!=null?u:"waarde"} ${c}${n.maximum.toString()} is`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin),f=n.origin==="date"?"vroeg":n.origin==="string"?"kort":"klein";return p?`Te ${f}: verwacht dat ${n.origin} ${c}${n.minimum.toString()} ${p.unit} ${p.verb}`:`Te ${f}: verwacht dat ${n.origin} ${c}${n.minimum.toString()} is`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Ongeldige tekst: moet met "${c.prefix}" beginnen`:c.format==="ends_with"?`Ongeldige tekst: moet op "${c.suffix}" eindigen`:c.format==="includes"?`Ongeldige tekst: moet "${c.includes}" bevatten`:c.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${c.pattern}`:`Ongeldig: ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${n.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${n.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${n.origin}`;default:return"Ongeldige invoer"}}};function Pb(){return{localeError:cA()}}var dA=()=>{let e={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},o={nan:"NaN",number:"tall",array:"liste"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Ugyldig input: forventet instanceof ${n.expected}, fikk ${f}`:`Ugyldig input: forventet ${c}, fikk ${f}`}case"invalid_value":return n.values.length===1?`Ugyldig verdi: forventet ${J(n.values[0])}`:`Ugyldig valg: forventet en av ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`For stor(t): forventet ${(l=n.origin)!=null?l:"value"} til \xE5 ha ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementer"}`:`For stor(t): forventet ${(u=n.origin)!=null?u:"value"} til \xE5 ha ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`For lite(n): forventet ${n.origin} til \xE5 ha ${c}${n.minimum.toString()} ${p.unit}`:`For lite(n): forventet ${n.origin} til \xE5 ha ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${c.prefix}"`:c.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${c.suffix}"`:c.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${c.includes}"`:c.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${c.pattern}`:`Ugyldig ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${n.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${n.origin}`;default:return"Ugyldig input"}}};function Ob(){return{localeError:dA()}}var pA=()=>{let e={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"},o={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`F\xE2sit giren: umulan instanceof ${n.expected}, al\u0131nan ${f}`:`F\xE2sit giren: umulan ${c}, al\u0131nan ${f}`}case"invalid_value":return n.values.length===1?`F\xE2sit giren: umulan ${J(n.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Fazla b\xFCy\xFCk: ${(l=n.origin)!=null?l:"value"}, ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${(u=n.origin)!=null?u:"value"}, ${c}${n.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${c}${n.minimum.toString()} ${p.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${c}${n.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let c=n;return c.format==="starts_with"?`F\xE2sit metin: "${c.prefix}" ile ba\u015Flamal\u0131.`:c.format==="ends_with"?`F\xE2sit metin: "${c.suffix}" ile bitmeli.`:c.format==="includes"?`F\xE2sit metin: "${c.includes}" ihtiv\xE2 etmeli.`:c.format==="regex"?`F\xE2sit metin: ${c.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${n.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${n.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function Rb(){return{localeError:pA()}}var mA=()=>{let e={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"},o={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0627\u0631\u06D0"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F instanceof ${n.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${f} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`:`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${c} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${f} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`}case"invalid_value":return n.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${J(n.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${N(n.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${(l=n.origin)!=null?l:"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${(u=n.origin)!=null?u:"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${c}${n.maximum.toString()} \u0648\u064A`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${c}${n.minimum.toString()} ${p.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${c}${n.minimum.toString()} \u0648\u064A`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${c.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:c.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${c.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:c.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${c.includes}" \u0648\u0644\u0631\u064A`:c.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${c.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${(m=r[c.format])!=null?m:n.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${n.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${n.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${n.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${n.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function Mb(){return{localeError:mA()}}var fA=()=>{let e={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"},o={nan:"NaN",number:"liczba",array:"tablica"};return n=>{var i,s,l,d,u,m,c,p,f;switch(n.code){case"invalid_type":{let v=(i=o[n.expected])!=null?i:n.expected,g=K(n.input),y=(s=o[g])!=null?s:g;return/^[A-Z]/.test(n.expected)?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano instanceof ${n.expected}, otrzymano ${y}`:`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${v}, otrzymano ${y}`}case"invalid_value":return n.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${J(n.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${N(n.values,"|")}`;case"too_big":{let v=n.inclusive?"<=":"<",g=t(n.origin);return g?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${(l=n.origin)!=null?l:"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${v}${n.maximum.toString()} ${(d=g.unit)!=null?d:"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${(u=n.origin)!=null?u:"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${v}${n.maximum.toString()}`}case"too_small":{let v=n.inclusive?">=":">",g=t(n.origin);return g?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${(m=n.origin)!=null?m:"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${v}${n.minimum.toString()} ${(c=g.unit)!=null?c:"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${(p=n.origin)!=null?p:"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${v}${n.minimum.toString()}`}case"invalid_format":{let v=n;return v.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${v.prefix}"`:v.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${v.suffix}"`:v.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${v.includes}"`:v.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${v.pattern}`:`Nieprawid\u0142ow(y/a/e) ${(f=r[v.format])!=null?f:n.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${n.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${n.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${n.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function Nb(){return{localeError:fA()}}var gA=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},o={nan:"NaN",number:"n\xFAmero",null:"nulo"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Tipo inv\xE1lido: esperado instanceof ${n.expected}, recebido ${f}`:`Tipo inv\xE1lido: esperado ${c}, recebido ${f}`}case"invalid_value":return n.values.length===1?`Entrada inv\xE1lida: esperado ${J(n.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Muito grande: esperado que ${(l=n.origin)!=null?l:"valor"} tivesse ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementos"}`:`Muito grande: esperado que ${(u=n.origin)!=null?u:"valor"} fosse ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Muito pequeno: esperado que ${n.origin} tivesse ${c}${n.minimum.toString()} ${p.unit}`:`Muito pequeno: esperado que ${n.origin} fosse ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${c.prefix}"`:c.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${c.suffix}"`:c.format==="includes"?`Texto inv\xE1lido: deve incluir "${c.includes}"`:c.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${c.pattern}`:`${(m=r[c.format])!=null?m:n.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${n.divisor}`;case"unrecognized_keys":return`Chave${n.keys.length>1?"s":""} desconhecida${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${n.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${n.origin}`;default:return"Campo inv\xE1lido"}}};function jb(){return{localeError:gA()}}function Db(e,t,r,o){let n=Math.abs(e),i=n%10,s=n%100;return s>=11&&s<=19?o:i===1?t:i>=2&&i<=4?r:o}var hA=()=>{let e={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"},o={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0441\u0438\u0432"};return n=>{var i,s,l,d,u;switch(n.code){case"invalid_type":{let m=(i=o[n.expected])!=null?i:n.expected,c=K(n.input),p=(s=o[c])!=null?s:c;return/^[A-Z]/.test(n.expected)?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C instanceof ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${p}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${m}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${p}`}case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${J(n.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${N(n.values,"|")}`;case"too_big":{let m=n.inclusive?"<=":"<",c=t(n.origin);if(c){let p=Number(n.maximum),f=Db(p,c.unit.one,c.unit.few,c.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${(l=n.origin)!=null?l:"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${m}${n.maximum.toString()} ${f}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${(d=n.origin)!=null?d:"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${m}${n.maximum.toString()}`}case"too_small":{let m=n.inclusive?">=":">",c=t(n.origin);if(c){let p=Number(n.minimum),f=Db(p,c.unit.one,c.unit.few,c.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${m}${n.minimum.toString()} ${f}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 ${m}${n.minimum.toString()}`}case"invalid_format":{let m=n;return m.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${m.prefix}"`:m.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${m.suffix}"`:m.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${m.includes}"`:m.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${m.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${(u=r[m.format])!=null?u:n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${n.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0438":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function zb(){return{localeError:hA()}}var vA=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"},o={nan:"NaN",number:"\u0161tevilo",array:"tabela"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Neveljaven vnos: pri\u010Dakovano instanceof ${n.expected}, prejeto ${f}`:`Neveljaven vnos: pri\u010Dakovano ${c}, prejeto ${f}`}case"invalid_value":return n.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${J(n.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Preveliko: pri\u010Dakovano, da bo ${(l=n.origin)!=null?l:"vrednost"} imelo ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${(u=n.origin)!=null?u:"vrednost"} ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Premajhno: pri\u010Dakovano, da bo ${n.origin} imelo ${c}${n.minimum.toString()} ${p.unit}`:`Premajhno: pri\u010Dakovano, da bo ${n.origin} ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${c.prefix}"`:c.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${c.suffix}"`:c.format==="includes"?`Neveljaven niz: mora vsebovati "${c.includes}"`:c.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${c.pattern}`:`Neveljaven ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${n.divisor}`;case"unrecognized_keys":return`Neprepoznan${n.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${N(n.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${n.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${n.origin}`;default:return"Neveljaven vnos"}}};function Ub(){return{localeError:vA()}}var yA=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},o={nan:"NaN",number:"antal",array:"lista"};return n=>{var i,s,l,d,u,m,c,p,f,v;switch(n.code){case"invalid_type":{let g=(i=o[n.expected])!=null?i:n.expected,y=K(n.input),S=(s=o[y])!=null?s:y;return/^[A-Z]/.test(n.expected)?`Ogiltig inmatning: f\xF6rv\xE4ntat instanceof ${n.expected}, fick ${S}`:`Ogiltig inmatning: f\xF6rv\xE4ntat ${g}, fick ${S}`}case"invalid_value":return n.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${J(n.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${N(n.values,"|")}`;case"too_big":{let g=n.inclusive?"<=":"<",y=t(n.origin);return y?`F\xF6r stor(t): f\xF6rv\xE4ntade ${(l=n.origin)!=null?l:"v\xE4rdet"} att ha ${g}${n.maximum.toString()} ${(d=y.unit)!=null?d:"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${(u=n.origin)!=null?u:"v\xE4rdet"} att ha ${g}${n.maximum.toString()}`}case"too_small":{let g=n.inclusive?">=":">",y=t(n.origin);return y?`F\xF6r lite(t): f\xF6rv\xE4ntade ${(m=n.origin)!=null?m:"v\xE4rdet"} att ha ${g}${n.minimum.toString()} ${y.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${(c=n.origin)!=null?c:"v\xE4rdet"} att ha ${g}${n.minimum.toString()}`}case"invalid_format":{let g=n;return g.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${g.prefix}"`:g.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${g.suffix}"`:g.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${g.includes}"`:g.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${g.pattern}"`:`Ogiltig(t) ${(p=r[g.format])!=null?p:n.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${(f=n.origin)!=null?f:"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${(v=n.origin)!=null?v:"v\xE4rdet"}`;default:return"Ogiltig input"}}};function Fb(){return{localeError:yA()}}var _A=()=>{let e={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"},o={nan:"NaN",number:"\u0B8E\u0BA3\u0BCD",array:"\u0B85\u0BA3\u0BBF",null:"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 instanceof ${n.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${f}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${c}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${f}`}case"invalid_value":return n.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${J(n.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${N(n.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${(l=n.origin)!=null?l:"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${(u=n.origin)!=null?u:"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${c}${n.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${c}${n.minimum.toString()} ${p.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${c}${n.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${c.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:c.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${c.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:c.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${c.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:c.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${c.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${n.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${n.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function Lb(){return{localeError:_A()}}var bA=()=>{let e={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"},o={nan:"NaN",number:"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02",array:"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)",null:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 instanceof ${n.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${f}`:`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${c} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${f}`}case"invalid_value":return n.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${J(n.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",p=t(n.origin);return p?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${(l=n.origin)!=null?l:"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${c} ${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${(u=n.origin)!=null?u:"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${c} ${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",p=t(n.origin);return p?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${c} ${n.minimum.toString()} ${p.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${c} ${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${c.prefix}"`:c.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${c.suffix}"`:c.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${c.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:c.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${c.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${n.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${N(n.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function qb(){return{localeError:bA()}}var xA=()=>{let e={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`Ge\xE7ersiz de\u011Fer: beklenen instanceof ${n.expected}, al\u0131nan ${f}`:`Ge\xE7ersiz de\u011Fer: beklenen ${c}, al\u0131nan ${f}`}case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${J(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\xC7ok b\xFCy\xFCk: beklenen ${(l=n.origin)!=null?l:"de\u011Fer"} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${(u=n.origin)!=null?u:"de\u011Fer"} ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${c}${n.minimum.toString()} ${p.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Ge\xE7ersiz metin: "${c.prefix}" ile ba\u015Flamal\u0131`:c.format==="ends_with"?`Ge\xE7ersiz metin: "${c.suffix}" ile bitmeli`:c.format==="includes"?`Ge\xE7ersiz metin: "${c.includes}" i\xE7ermeli`:c.format==="regex"?`Ge\xE7ersiz metin: ${c.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function Zb(){return{localeError:xA()}}var wA=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"},o={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F instanceof ${n.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${f}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${c}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${f}`}case"invalid_value":return n.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${J(n.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${(l=n.origin)!=null?l:"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${p.verb} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${(u=n.origin)!=null?u:"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} ${p.verb} ${c}${n.minimum.toString()} ${p.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} \u0431\u0443\u0434\u0435 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${c.prefix}"`:c.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${c.suffix}"`:c.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${c.includes}"`:c.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${c.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0456":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${n.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function Xs(){return{localeError:wA()}}function Vb(){return Xs()}var SA=()=>{let e={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"},o={nan:"NaN",number:"\u0646\u0645\u0628\u0631",array:"\u0622\u0631\u06D2",null:"\u0646\u0644"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: instanceof ${n.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${f} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`:`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${c} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${f} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`}case"invalid_value":return n.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${J(n.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${N(n.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${(l=n.origin)!=null?l:"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${(u=n.origin)!=null?u:"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${c}${n.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u06D2 ${c}${n.minimum.toString()} ${p.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u0627 ${c}${n.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${c.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:c.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${c.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:c.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${c.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:c.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${c.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${n.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${n.keys.length>1?"\u0632":""}: ${N(n.keys,"\u060C ")}`;case"invalid_key":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function Gb(){return{localeError:SA()}}var kA=()=>{let e={string:{unit:"belgi",verb:"bo\u2018lishi kerak"},file:{unit:"bayt",verb:"bo\u2018lishi kerak"},array:{unit:"element",verb:"bo\u2018lishi kerak"},set:{unit:"element",verb:"bo\u2018lishi kerak"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},o={nan:"NaN",number:"raqam",array:"massiv"};return n=>{var i,s,l,d,u;switch(n.code){case"invalid_type":{let m=(i=o[n.expected])!=null?i:n.expected,c=K(n.input),p=(s=o[c])!=null?s:c;return/^[A-Z]/.test(n.expected)?`Noto\u2018g\u2018ri kirish: kutilgan instanceof ${n.expected}, qabul qilingan ${p}`:`Noto\u2018g\u2018ri kirish: kutilgan ${m}, qabul qilingan ${p}`}case"invalid_value":return n.values.length===1?`Noto\u2018g\u2018ri kirish: kutilgan ${J(n.values[0])}`:`Noto\u2018g\u2018ri variant: quyidagilardan biri kutilgan ${N(n.values,"|")}`;case"too_big":{let m=n.inclusive?"<=":"<",c=t(n.origin);return c?`Juda katta: kutilgan ${(l=n.origin)!=null?l:"qiymat"} ${m}${n.maximum.toString()} ${c.unit} ${c.verb}`:`Juda katta: kutilgan ${(d=n.origin)!=null?d:"qiymat"} ${m}${n.maximum.toString()}`}case"too_small":{let m=n.inclusive?">=":">",c=t(n.origin);return c?`Juda kichik: kutilgan ${n.origin} ${m}${n.minimum.toString()} ${c.unit} ${c.verb}`:`Juda kichik: kutilgan ${n.origin} ${m}${n.minimum.toString()}`}case"invalid_format":{let m=n;return m.format==="starts_with"?`Noto\u2018g\u2018ri satr: "${m.prefix}" bilan boshlanishi kerak`:m.format==="ends_with"?`Noto\u2018g\u2018ri satr: "${m.suffix}" bilan tugashi kerak`:m.format==="includes"?`Noto\u2018g\u2018ri satr: "${m.includes}" ni o\u2018z ichiga olishi kerak`:m.format==="regex"?`Noto\u2018g\u2018ri satr: ${m.pattern} shabloniga mos kelishi kerak`:`Noto\u2018g\u2018ri ${(u=r[m.format])!=null?u:n.format}`}case"not_multiple_of":return`Noto\u2018g\u2018ri raqam: ${n.divisor} ning karralisi bo\u2018lishi kerak`;case"unrecognized_keys":return`Noma\u2019lum kalit${n.keys.length>1?"lar":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} dagi kalit noto\u2018g\u2018ri`;case"invalid_union":return"Noto\u2018g\u2018ri kirish";case"invalid_element":return`${n.origin} da noto\u2018g\u2018ri qiymat`;default:return"Noto\u2018g\u2018ri kirish"}}};function Hb(){return{localeError:kA()}}var IA=()=>{let e={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"},o={nan:"NaN",number:"s\u1ED1",array:"m\u1EA3ng"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i instanceof ${n.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${f}`:`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${c}, nh\u1EADn \u0111\u01B0\u1EE3c ${f}`}case"invalid_value":return n.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${J(n.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${(l=n.origin)!=null?l:"gi\xE1 tr\u1ECB"} ${p.verb} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${(u=n.origin)!=null?u:"gi\xE1 tr\u1ECB"} ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${p.verb} ${c}${n.minimum.toString()} ${p.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${c.prefix}"`:c.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${c.suffix}"`:c.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${c.includes}"`:c.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${c.pattern}`:`${(m=r[c.format])!=null?m:n.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${n.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${N(n.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function Bb(){return{localeError:IA()}}var TA=()=>{let e={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"},o={nan:"NaN",number:"\u6570\u5B57",array:"\u6570\u7EC4",null:"\u7A7A\u503C(null)"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B instanceof ${n.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${f}`:`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${c}\uFF0C\u5B9E\u9645\u63A5\u6536 ${f}`}case"invalid_value":return n.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${J(n.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${(l=n.origin)!=null?l:"\u503C"} ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${(u=n.origin)!=null?u:"\u503C"} ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${c}${n.minimum.toString()} ${p.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${c.prefix}" \u5F00\u5934`:c.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${c.suffix}" \u7ED3\u5C3E`:c.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${c.includes}"`:c.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${c.pattern}`:`\u65E0\u6548${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${n.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${n.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function Jb(){return{localeError:TA()}}var $A=()=>{let e={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"},o={nan:"NaN"};return n=>{var i,s,l,d,u,m;switch(n.code){case"invalid_type":{let c=(i=o[n.expected])!=null?i:n.expected,p=K(n.input),f=(s=o[p])!=null?s:p;return/^[A-Z]/.test(n.expected)?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA instanceof ${n.expected}\uFF0C\u4F46\u6536\u5230 ${f}`:`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${c}\uFF0C\u4F46\u6536\u5230 ${f}`}case"invalid_value":return n.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${J(n.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",p=t(n.origin);return p?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${(l=n.origin)!=null?l:"\u503C"} \u61C9\u70BA ${c}${n.maximum.toString()} ${(d=p.unit)!=null?d:"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${(u=n.origin)!=null?u:"\u503C"} \u61C9\u70BA ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",p=t(n.origin);return p?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${c}${n.minimum.toString()} ${p.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${c.prefix}" \u958B\u982D`:c.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${c.suffix}" \u7D50\u5C3E`:c.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${c.includes}"`:c.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${c.pattern}`:`\u7121\u6548\u7684 ${(m=r[c.format])!=null?m:n.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${n.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${n.keys.length>1?"\u5011":""}\uFF1A${N(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function Wb(){return{localeError:$A()}}var EA=()=>{let e={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function t(n){var i;return(i=e[n])!=null?i:null}let r={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"},o={nan:"NaN",number:"n\u1ECD\u0301mb\xE0",array:"akop\u1ECD"};return n=>{var i,s,l,d;switch(n.code){case"invalid_type":{let u=(i=o[n.expected])!=null?i:n.expected,m=K(n.input),c=(s=o[m])!=null?s:m;return/^[A-Z]/.test(n.expected)?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi instanceof ${n.expected}, \xE0m\u1ECD\u0300 a r\xED ${c}`:`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${u}, \xE0m\u1ECD\u0300 a r\xED ${c}`}case"invalid_value":return n.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${J(n.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${N(n.values,"|")}`;case"too_big":{let u=n.inclusive?"<=":"<",m=t(n.origin);return m?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${(l=n.origin)!=null?l:"iye"} ${m.verb} ${u}${n.maximum} ${m.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${u}${n.maximum}`}case"too_small":{let u=n.inclusive?">=":">",m=t(n.origin);return m?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin} ${m.verb} ${u}${n.minimum} ${m.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${u}${n.minimum}`}case"invalid_format":{let u=n;return u.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${u.prefix}"`:u.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${u.suffix}"`:u.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${u.includes}"`:u.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${u.pattern}`:`A\u1E63\xEC\u1E63e: ${(d=r[u.format])!=null?d:n.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${n.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${N(n.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function Kb(){return{localeError:EA()}}var Yb,fm=Symbol("ZodOutput"),gm=Symbol("ZodInput"),Qs=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){let o=r[0];return this._map.set(t,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){let r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){var o;let r=t._zod.parent;if(r){let n={...(o=this.get(r))!=null?o:{}};delete n.id;let i={...n,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};function el(){return new Qs}var Xb;(Xb=(Yb=globalThis).__zod_globalRegistry)!=null||(Yb.__zod_globalRegistry=el());var Et=globalThis.__zod_globalRegistry;function hm(e,t){return new e({type:"string",...X(t)})}function vm(e,t){return new e({type:"string",coerce:!0,...X(t)})}function tl(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...X(t)})}function ii(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...X(t)})}function rl(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...X(t)})}function nl(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...X(t)})}function ol(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...X(t)})}function al(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...X(t)})}function si(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...X(t)})}function il(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...X(t)})}function sl(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...X(t)})}function ll(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...X(t)})}function ul(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...X(t)})}function cl(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...X(t)})}function dl(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...X(t)})}function pl(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...X(t)})}function ml(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...X(t)})}function fl(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...X(t)})}function ym(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...X(t)})}function gl(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...X(t)})}function hl(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...X(t)})}function vl(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...X(t)})}function yl(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...X(t)})}function _l(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...X(t)})}function bl(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...X(t)})}var _m={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function bm(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...X(t)})}function xm(e,t){return new e({type:"string",format:"date",check:"string_format",...X(t)})}function wm(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...X(t)})}function Sm(e,t){return new e({type:"string",format:"duration",check:"string_format",...X(t)})}function km(e,t){return new e({type:"number",checks:[],...X(t)})}function Im(e,t){return new e({type:"number",coerce:!0,checks:[],...X(t)})}function Tm(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...X(t)})}function $m(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...X(t)})}function Em(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...X(t)})}function Cm(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...X(t)})}function Am(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...X(t)})}function Pm(e,t){return new e({type:"boolean",...X(t)})}function Om(e,t){return new e({type:"boolean",coerce:!0,...X(t)})}function Rm(e,t){return new e({type:"bigint",...X(t)})}function Mm(e,t){return new e({type:"bigint",coerce:!0,...X(t)})}function Nm(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...X(t)})}function jm(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...X(t)})}function Dm(e,t){return new e({type:"symbol",...X(t)})}function zm(e,t){return new e({type:"undefined",...X(t)})}function Um(e,t){return new e({type:"null",...X(t)})}function Fm(e){return new e({type:"any"})}function Lm(e){return new e({type:"unknown"})}function qm(e,t){return new e({type:"never",...X(t)})}function Zm(e,t){return new e({type:"void",...X(t)})}function Vm(e,t){return new e({type:"date",...X(t)})}function Gm(e,t){return new e({type:"date",coerce:!0,...X(t)})}function Hm(e,t){return new e({type:"nan",...X(t)})}function jr(e,t){return new Us({check:"less_than",...X(t),value:e,inclusive:!1})}function tr(e,t){return new Us({check:"less_than",...X(t),value:e,inclusive:!0})}function Dr(e,t){return new Fs({check:"greater_than",...X(t),value:e,inclusive:!1})}function Lt(e,t){return new Fs({check:"greater_than",...X(t),value:e,inclusive:!0})}function xl(e){return Dr(0,e)}function wl(e){return jr(0,e)}function Sl(e){return tr(0,e)}function kl(e){return Lt(0,e)}function $n(e,t){return new Ud({check:"multiple_of",...X(t),value:e})}function En(e,t){return new qd({check:"max_size",...X(t),maximum:e})}function zr(e,t){return new Zd({check:"min_size",...X(t),minimum:e})}function Kn(e,t){return new Vd({check:"size_equals",...X(t),size:e})}function Yn(e,t){return new Gd({check:"max_length",...X(t),maximum:e})}function nn(e,t){return new Hd({check:"min_length",...X(t),minimum:e})}function Xn(e,t){return new Bd({check:"length_equals",...X(t),length:e})}function jo(e,t){return new Jd({check:"string_format",format:"regex",...X(t),pattern:e})}function Do(e){return new Wd({check:"string_format",format:"lowercase",...X(e)})}function zo(e){return new Kd({check:"string_format",format:"uppercase",...X(e)})}function Uo(e,t){return new Yd({check:"string_format",format:"includes",...X(t),includes:e})}function Fo(e,t){return new Xd({check:"string_format",format:"starts_with",...X(t),prefix:e})}function Lo(e,t){return new Qd({check:"string_format",format:"ends_with",...X(t),suffix:e})}function Il(e,t,r){return new ep({check:"property",property:e,schema:t,...X(r)})}function qo(e,t){return new tp({check:"mime_type",mime:e,...X(t)})}function yr(e){return new rp({check:"overwrite",tx:e})}function Zo(e){return yr(t=>t.normalize(e))}function Vo(){return yr(e=>e.trim())}function Go(){return yr(e=>e.toLowerCase())}function Ho(){return yr(e=>e.toUpperCase())}function Bo(){return yr(e=>ed(e))}function Bm(e,t,r){return new e({type:"array",element:t,...X(r)})}function AA(e,t,r){return new e({type:"union",options:t,...X(r)})}function PA(e,t,r){return new e({type:"union",options:t,inclusive:!1,...X(r)})}function OA(e,t,r,o){return new e({type:"union",options:r,discriminator:t,...X(o)})}function RA(e,t,r){return new e({type:"intersection",left:t,right:r})}function MA(e,t,r,o){let n=r instanceof Se,i=n?o:r,s=n?r:null;return new e({type:"tuple",items:t,rest:s,...X(i)})}function NA(e,t,r,o){return new e({type:"record",keyType:t,valueType:r,...X(o)})}function jA(e,t,r,o){return new e({type:"map",keyType:t,valueType:r,...X(o)})}function DA(e,t,r){return new e({type:"set",valueType:t,...X(r)})}function zA(e,t,r){let o=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new e({type:"enum",entries:o,...X(r)})}function UA(e,t,r){return new e({type:"enum",entries:t,...X(r)})}function FA(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...X(r)})}function Jm(e,t){return new e({type:"file",...X(t)})}function LA(e,t){return new e({type:"transform",transform:t})}function qA(e,t){return new e({type:"optional",innerType:t})}function ZA(e,t){return new e({type:"nullable",innerType:t})}function VA(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return typeof r=="function"?r():rd(r)}})}function GA(e,t,r){return new e({type:"nonoptional",innerType:t,...X(r)})}function HA(e,t){return new e({type:"success",innerType:t})}function BA(e,t,r){return new e({type:"catch",innerType:t,catchValue:typeof r=="function"?r:()=>r})}function JA(e,t,r){return new e({type:"pipe",in:t,out:r})}function WA(e,t){return new e({type:"readonly",innerType:t})}function KA(e,t,r){return new e({type:"template_literal",parts:t,...X(r)})}function YA(e,t){return new e({type:"lazy",getter:t})}function XA(e,t){return new e({type:"promise",innerType:t})}function Wm(e,t,r){var i;let o=X(r);return(i=o.abort)!=null||(o.abort=!0),new e({type:"custom",check:"custom",fn:t,...o})}function Km(e,t,r){return new e({type:"custom",check:"custom",fn:t,...X(r)})}function Ym(e){let t=Qb(r=>(r.addIssue=o=>{var n,i,s,l;if(typeof o=="string")r.issues.push(Co(o,r.value,t._zod.def));else{let d=o;d.fatal&&(d.continue=!1),(n=d.code)!=null||(d.code="custom"),(i=d.input)!=null||(d.input=r.value),(s=d.inst)!=null||(d.inst=t),(l=d.continue)!=null||(d.continue=!t._zod.def.abort),r.issues.push(Co(d))}},e(r.value,r)));return t}function Qb(e,t){let r=new nt({check:"custom",...X(t)});return r._zod.check=e,r}function Xm(e){let t=new nt({check:"describe"});return t._zod.onattach=[r=>{var n;let o=(n=Et.get(r))!=null?n:{};Et.add(r,{...o,description:e})}],t._zod.check=()=>{},t}function Qm(e){let t=new nt({check:"meta"});return t._zod.onattach=[r=>{var n;let o=(n=Et.get(r))!=null?n:{};Et.add(r,{...o,...e})}],t._zod.check=()=>{},t}function ef(e,t){var f,v,g,y,S;let r=X(t),o=(f=r.truthy)!=null?f:["true","1","yes","on","y","enabled"],n=(v=r.falsy)!=null?v:["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(o=o.map(b=>typeof b=="string"?b.toLowerCase():b),n=n.map(b=>typeof b=="string"?b.toLowerCase():b));let i=new Set(o),s=new Set(n),l=(g=e.Codec)!=null?g:oi,d=(y=e.Boolean)!=null?y:ri,u=(S=e.String)!=null?S:Jn,m=new u({type:"string",error:r.error}),c=new d({type:"boolean",error:r.error}),p=new l({type:"pipe",in:m,out:c,transform:((b,_)=>{let k=b;return r.case!=="sensitive"&&(k=k.toLowerCase()),i.has(k)?!0:s.has(k)?!1:(_.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...s],input:_.value,inst:p,continue:!1}),{})}),reverseTransform:((b,_)=>b===!0?o[0]||"true":n[0]||"false"),error:r.error});return p}function Jo(e,t,r,o={}){let n=X(o),i={...X(o),check:"string_format",type:"string",format:t,fn:typeof r=="function"?r:l=>r.test(l),...n};return r instanceof RegExp&&(i.pattern=r),new e(i)}function Cn(e){var r,o,n,i,s,l,d,u,m;let t=(r=e==null?void 0:e.target)!=null?r:"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:(o=e.processors)!=null?o:{},metadataRegistry:(n=e==null?void 0:e.metadata)!=null?n:Et,target:t,unrepresentable:(i=e==null?void 0:e.unrepresentable)!=null?i:"throw",override:(s=e==null?void 0:e.override)!=null?s:(()=>{}),io:(l=e==null?void 0:e.io)!=null?l:"output",counter:0,seen:new Map,cycles:(d=e==null?void 0:e.cycles)!=null?d:"ref",reused:(u=e==null?void 0:e.reused)!=null?u:"inline",external:(m=e==null?void 0:e.external)!=null?m:void 0}}function Ge(e,t,r={path:[],schemaPath:[]}){var m,c,p;var o;let n=e._zod.def,i=t.seen.get(e);if(i)return i.count++,r.schemaPath.includes(e)&&(i.cycle=r.path),i.schema;let s={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,s);let l=(c=(m=e._zod).toJSONSchema)==null?void 0:c.call(m);if(l)s.schema=l;else{let f={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,s.schema,f);else{let g=s.schema,y=t.processors[n.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${n.type}`);y(e,t,g,f)}let v=e._zod.parent;v&&(s.ref||(s.ref=v),Ge(v,t,f),t.seen.get(v).isParent=!0)}let d=t.metadataRegistry.get(e);return d&&Object.assign(s.schema,d),t.io==="input"&&qt(e)&&(delete s.schema.examples,delete s.schema.default),t.io==="input"&&s.schema._prefault&&((p=(o=s.schema).default)!=null||(o.default=s.schema._prefault)),delete s.schema._prefault,t.seen.get(e).schema}function An(e,t){var s,l,d,u;let r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=new Map;for(let m of e.seen.entries()){let c=(s=e.metadataRegistry.get(m[0]))==null?void 0:s.id;if(c){let p=o.get(c);if(p&&p!==m[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(c,m[0])}}let n=m=>{var g,y,S,b,_;let c=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){let k=(g=e.external.registry.get(m[0]))==null?void 0:g.id,w=(y=e.external.uri)!=null?y:(I=>I);if(k)return{ref:w(k)};let h=(b=(S=m[1].defId)!=null?S:m[1].schema.id)!=null?b:`schema${e.counter++}`;return m[1].defId=h,{defId:h,ref:`${w("__shared")}#/${c}/${h}`}}if(m[1]===r)return{ref:"#"};let f=`#/${c}/`,v=(_=m[1].schema.id)!=null?_:`__schema${e.counter++}`;return{defId:v,ref:f+v}},i=m=>{if(m[1].schema.$ref)return;let c=m[1],{ref:p,defId:f}=n(m);c.def={...c.schema},f&&(c.defId=f);let v=c.schema;for(let g in v)delete v[g];v.$ref=p};if(e.cycles==="throw")for(let m of e.seen.entries()){let c=m[1];if(c.cycle)throw new Error(`Cycle detected: #/${(l=c.cycle)==null?void 0:l.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let m of e.seen.entries()){let c=m[1];if(t===m[0]){i(m);continue}if(e.external){let f=(d=e.external.registry.get(m[0]))==null?void 0:d.id;if(t!==m[0]&&f){i(m);continue}}if((u=e.metadataRegistry.get(m[0]))==null?void 0:u.id){i(m);continue}if(c.cycle){i(m);continue}if(c.count>1&&e.reused==="ref"){i(m);continue}}}function Pn(e,t){var s,l,d,u,m;let r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=c=>{var S,b,_;let p=e.seen.get(c);if(p.ref===null)return;let f=(S=p.def)!=null?S:p.schema,v={...f},g=p.ref;if(p.ref=null,g){o(g);let k=e.seen.get(g),w=k.schema;if(w.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(f.allOf=(b=f.allOf)!=null?b:[],f.allOf.push(w)):Object.assign(f,w),Object.assign(f,v),c._zod.parent===g)for(let I in f)I==="$ref"||I==="allOf"||I in v||delete f[I];if(w.$ref&&k.def)for(let I in f)I==="$ref"||I==="allOf"||I in k.def&&JSON.stringify(f[I])===JSON.stringify(k.def[I])&&delete f[I]}let y=c._zod.parent;if(y&&y!==g){o(y);let k=e.seen.get(y);if(k!=null&&k.schema.$ref&&(f.$ref=k.schema.$ref,k.def))for(let w in f)w==="$ref"||w==="allOf"||w in k.def&&JSON.stringify(f[w])===JSON.stringify(k.def[w])&&delete f[w]}e.override({zodSchema:c,jsonSchema:f,path:(_=p.path)!=null?_:[]})};for(let c of[...e.seen.entries()].reverse())o(c[0]);let n={};if(e.target==="draft-2020-12"?n.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?n.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?n.$schema="http://json-schema.org/draft-04/schema#":e.target,(s=e.external)!=null&&s.uri){let c=(l=e.external.registry.get(t))==null?void 0:l.id;if(!c)throw new Error("Schema is missing an `id` property");n.$id=e.external.uri(c)}Object.assign(n,(d=r.def)!=null?d:r.schema);let i=(m=(u=e.external)==null?void 0:u.defs)!=null?m:{};for(let c of e.seen.entries()){let p=c[1];p.def&&p.defId&&(i[p.defId]=p.def)}e.external||Object.keys(i).length>0&&(e.target==="draft-2020-12"?n.$defs=i:n.definitions=i);try{let c=JSON.parse(JSON.stringify(n));return Object.defineProperty(c,"~standard",{value:{...t["~standard"],jsonSchema:{input:Wo(t,"input",e.processors),output:Wo(t,"output",e.processors)}},enumerable:!1,writable:!1}),c}catch(c){throw new Error("Error converting schema to JSON.")}}function qt(e,t){let r=t!=null?t:{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return qt(o.element,r);if(o.type==="set")return qt(o.valueType,r);if(o.type==="lazy")return qt(o.getter(),r);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return qt(o.innerType,r);if(o.type==="intersection")return qt(o.left,r)||qt(o.right,r);if(o.type==="record"||o.type==="map")return qt(o.keyType,r)||qt(o.valueType,r);if(o.type==="pipe")return qt(o.in,r)||qt(o.out,r);if(o.type==="object"){for(let n in o.shape)if(qt(o.shape[n],r))return!0;return!1}if(o.type==="union"){for(let n of o.options)if(qt(n,r))return!0;return!1}if(o.type==="tuple"){for(let n of o.items)if(qt(n,r))return!0;return!!(o.rest&&qt(o.rest,r))}return!1}var tf=(e,t={})=>r=>{let o=Cn({...r,processors:t});return Ge(e,o),An(o,e),Pn(o,e)},Wo=(e,t,r={})=>o=>{let{libraryOptions:n,target:i}=o!=null?o:{},s=Cn({...n!=null?n:{},target:i,io:t,processors:r});return Ge(e,s),An(s,e),Pn(s,e)};var QA={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},rf=(e,t,r,o)=>{var m;let n=r;n.type="string";let{minimum:i,maximum:s,format:l,patterns:d,contentEncoding:u}=e._zod.bag;if(typeof i=="number"&&(n.minLength=i),typeof s=="number"&&(n.maxLength=s),l&&(n.format=(m=QA[l])!=null?m:l,n.format===""&&delete n.format,l==="time"&&delete n.format),u&&(n.contentEncoding=u),d&&d.size>0){let c=[...d];c.length===1?n.pattern=c[0].source:c.length>1&&(n.allOf=[...c.map(p=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},nf=(e,t,r,o)=>{let n=r,{minimum:i,maximum:s,format:l,multipleOf:d,exclusiveMaximum:u,exclusiveMinimum:m}=e._zod.bag;typeof l=="string"&&l.includes("int")?n.type="integer":n.type="number",typeof m=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(n.minimum=m,n.exclusiveMinimum=!0):n.exclusiveMinimum=m),typeof i=="number"&&(n.minimum=i,typeof m=="number"&&t.target!=="draft-04"&&(m>=i?delete n.minimum:delete n.exclusiveMinimum)),typeof u=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(n.maximum=u,n.exclusiveMaximum=!0):n.exclusiveMaximum=u),typeof s=="number"&&(n.maximum=s,typeof u=="number"&&t.target!=="draft-04"&&(u<=s?delete n.maximum:delete n.exclusiveMaximum)),typeof d=="number"&&(n.multipleOf=d)},of=(e,t,r,o)=>{r.type="boolean"},af=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},sf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},lf=(e,t,r,o)=>{t.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},uf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},cf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},df=(e,t,r,o)=>{r.not={}},pf=(e,t,r,o)=>{},mf=(e,t,r,o)=>{},ff=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},gf=(e,t,r,o)=>{let n=e._zod.def,i=Ga(n.entries);i.every(s=>typeof s=="number")&&(r.type="number"),i.every(s=>typeof s=="string")&&(r.type="string"),r.enum=i},hf=(e,t,r,o)=>{let n=e._zod.def,i=[];for(let s of n.values)if(s===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof s=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");i.push(Number(s))}else i.push(s);if(i.length!==0)if(i.length===1){let s=i[0];r.type=s===null?"null":typeof s,t.target==="draft-04"||t.target==="openapi-3.0"?r.enum=[s]:r.const=s}else i.every(s=>typeof s=="number")&&(r.type="number"),i.every(s=>typeof s=="string")&&(r.type="string"),i.every(s=>typeof s=="boolean")&&(r.type="boolean"),i.every(s=>s===null)&&(r.type="null"),r.enum=i},vf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},yf=(e,t,r,o)=>{let n=r,i=e._zod.pattern;if(!i)throw new Error("Pattern not found in template literal");n.type="string",n.pattern=i.source},_f=(e,t,r,o)=>{let n=r,i={type:"string",format:"binary",contentEncoding:"binary"},{minimum:s,maximum:l,mime:d}=e._zod.bag;s!==void 0&&(i.minLength=s),l!==void 0&&(i.maxLength=l),d?d.length===1?(i.contentMediaType=d[0],Object.assign(n,i)):(Object.assign(n,i),n.anyOf=d.map(u=>({contentMediaType:u}))):Object.assign(n,i)},bf=(e,t,r,o)=>{r.type="boolean"},xf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},wf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},Sf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},kf=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},If=(e,t,r,o)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},Tf=(e,t,r,o)=>{let n=r,i=e._zod.def,{minimum:s,maximum:l}=e._zod.bag;typeof s=="number"&&(n.minItems=s),typeof l=="number"&&(n.maxItems=l),n.type="array",n.items=Ge(i.element,t,{...o,path:[...o.path,"items"]})},$f=(e,t,r,o)=>{var u;let n=r,i=e._zod.def;n.type="object",n.properties={};let s=i.shape;for(let m in s)n.properties[m]=Ge(s[m],t,{...o,path:[...o.path,"properties",m]});let l=new Set(Object.keys(s)),d=new Set([...l].filter(m=>{let c=i.shape[m]._zod;return t.io==="input"?c.optin===void 0:c.optout===void 0}));d.size>0&&(n.required=Array.from(d)),((u=i.catchall)==null?void 0:u._zod.def.type)==="never"?n.additionalProperties=!1:i.catchall?i.catchall&&(n.additionalProperties=Ge(i.catchall,t,{...o,path:[...o.path,"additionalProperties"]})):t.io==="output"&&(n.additionalProperties=!1)},$l=(e,t,r,o)=>{let n=e._zod.def,i=n.inclusive===!1,s=n.options.map((l,d)=>Ge(l,t,{...o,path:[...o.path,i?"oneOf":"anyOf",d]}));i?r.oneOf=s:r.anyOf=s},Ef=(e,t,r,o)=>{let n=e._zod.def,i=Ge(n.left,t,{...o,path:[...o.path,"allOf",0]}),s=Ge(n.right,t,{...o,path:[...o.path,"allOf",1]}),l=u=>"allOf"in u&&Object.keys(u).length===1,d=[...l(i)?i.allOf:[i],...l(s)?s.allOf:[s]];r.allOf=d},Cf=(e,t,r,o)=>{let n=r,i=e._zod.def;n.type="array";let s=t.target==="draft-2020-12"?"prefixItems":"items",l=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",d=i.items.map((p,f)=>Ge(p,t,{...o,path:[...o.path,s,f]})),u=i.rest?Ge(i.rest,t,{...o,path:[...o.path,l,...t.target==="openapi-3.0"?[i.items.length]:[]]}):null;t.target==="draft-2020-12"?(n.prefixItems=d,u&&(n.items=u)):t.target==="openapi-3.0"?(n.items={anyOf:d},u&&n.items.anyOf.push(u),n.minItems=d.length,u||(n.maxItems=d.length)):(n.items=d,u&&(n.additionalItems=u));let{minimum:m,maximum:c}=e._zod.bag;typeof m=="number"&&(n.minItems=m),typeof c=="number"&&(n.maxItems=c)},Af=(e,t,r,o)=>{let n=r,i=e._zod.def;n.type="object";let s=i.keyType,l=s._zod.bag,d=l==null?void 0:l.patterns;if(i.mode==="loose"&&d&&d.size>0){let m=Ge(i.valueType,t,{...o,path:[...o.path,"patternProperties","*"]});n.patternProperties={};for(let c of d)n.patternProperties[c.source]=m}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(n.propertyNames=Ge(i.keyType,t,{...o,path:[...o.path,"propertyNames"]})),n.additionalProperties=Ge(i.valueType,t,{...o,path:[...o.path,"additionalProperties"]});let u=s._zod.values;if(u){let m=[...u].filter(c=>typeof c=="string"||typeof c=="number");m.length>0&&(n.required=m)}},Pf=(e,t,r,o)=>{let n=e._zod.def,i=Ge(n.innerType,t,o),s=t.seen.get(e);t.target==="openapi-3.0"?(s.ref=n.innerType,r.nullable=!0):r.anyOf=[i,{type:"null"}]},Of=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType},Rf=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType,r.default=JSON.parse(JSON.stringify(n.defaultValue))},Mf=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(n.defaultValue)))},Nf=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType;let s;try{s=n.catchValue(void 0)}catch(l){throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=s},jf=(e,t,r,o)=>{let n=e._zod.def,i=t.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;Ge(i,t,o);let s=t.seen.get(e);s.ref=i},Df=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType,r.readOnly=!0},zf=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType},El=(e,t,r,o)=>{let n=e._zod.def;Ge(n.innerType,t,o);let i=t.seen.get(e);i.ref=n.innerType},Uf=(e,t,r,o)=>{let n=e._zod.innerType;Ge(n,t,o);let i=t.seen.get(e);i.ref=n},Tl={string:rf,number:nf,boolean:of,bigint:af,symbol:sf,null:lf,undefined:uf,void:cf,never:df,any:pf,unknown:mf,date:ff,enum:gf,literal:hf,nan:vf,template_literal:yf,file:_f,success:bf,custom:xf,function:wf,transform:Sf,map:kf,set:If,array:Tf,object:$f,union:$l,intersection:Ef,tuple:Cf,record:Af,nullable:Pf,nonoptional:Of,default:Rf,prefault:Mf,catch:Nf,pipe:jf,readonly:Df,promise:zf,optional:El,lazy:Uf};function On(e,t){if("_idmap"in e){let o=e,n=Cn({...t,processors:Tl}),i={};for(let d of o._idmap.entries()){let[u,m]=d;Ge(m,n)}let s={},l={registry:o,uri:t==null?void 0:t.uri,defs:i};n.external=l;for(let d of o._idmap.entries()){let[u,m]=d;An(n,m),s[u]=Pn(n,m)}if(Object.keys(i).length>0){let d=n.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[d]:i}}return{schemas:s}}let r=Cn({...t,processors:Tl});return Ge(e,r),An(r,e),Pn(r,e)}var Cl=class{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(t){this.ctx.counter=t}get seen(){return this.ctx.seen}constructor(t){var o;let r=(o=t==null?void 0:t.target)!=null?o:"draft-2020-12";r==="draft-4"&&(r="draft-04"),r==="draft-7"&&(r="draft-07"),this.ctx=Cn({processors:Tl,target:r,...(t==null?void 0:t.metadata)&&{metadata:t.metadata},...(t==null?void 0:t.unrepresentable)&&{unrepresentable:t.unrepresentable},...(t==null?void 0:t.override)&&{override:t.override},...(t==null?void 0:t.io)&&{io:t.io}})}process(t,r={path:[],schemaPath:[]}){return Ge(t,this.ctx,r)}emit(t,r){r&&(r.cycles&&(this.ctx.cycles=r.cycles),r.reused&&(this.ctx.reused=r.reused),r.external&&(this.ctx.external=r.external)),An(this.ctx,t);let o=Pn(this.ctx,t),{"~standard":n,...i}=o;return i}};var Ff={};var li={};Or(li,{ZodAny:()=>ug,ZodArray:()=>mg,ZodBase64:()=>Kl,ZodBase64URL:()=>Yl,ZodBigInt:()=>ta,ZodBigIntFormat:()=>eu,ZodBoolean:()=>ea,ZodCIDRv4:()=>Jl,ZodCIDRv6:()=>Wl,ZodCUID:()=>Ll,ZodCUID2:()=>ql,ZodCatch:()=>Ng,ZodCodec:()=>lu,ZodCustom:()=>_i,ZodCustomStringFormat:()=>Xo,ZodDate:()=>fi,ZodDefault:()=>Cg,ZodDiscriminatedUnion:()=>gg,ZodE164:()=>Xl,ZodEmail:()=>zl,ZodEmoji:()=>Ul,ZodEnum:()=>Ko,ZodExactOptional:()=>Tg,ZodFile:()=>kg,ZodFunction:()=>Vg,ZodGUID:()=>ui,ZodIPv4:()=>Hl,ZodIPv6:()=>Bl,ZodIntersection:()=>hg,ZodJWT:()=>Ql,ZodKSUID:()=>Gl,ZodLazy:()=>Lg,ZodLiteral:()=>Sg,ZodMAC:()=>rg,ZodMap:()=>xg,ZodNaN:()=>Dg,ZodNanoID:()=>Fl,ZodNever:()=>dg,ZodNonOptional:()=>iu,ZodNull:()=>sg,ZodNullable:()=>Eg,ZodNumber:()=>Qo,ZodNumberFormat:()=>ro,ZodObject:()=>hi,ZodOptional:()=>au,ZodPipe:()=>su,ZodPrefault:()=>Pg,ZodPromise:()=>Zg,ZodReadonly:()=>zg,ZodRecord:()=>yi,ZodSet:()=>wg,ZodString:()=>Yo,ZodStringFormat:()=>Qe,ZodSuccess:()=>Mg,ZodSymbol:()=>ag,ZodTemplateLiteral:()=>Fg,ZodTransform:()=>Ig,ZodTuple:()=>yg,ZodType:()=>Te,ZodULID:()=>Zl,ZodURL:()=>mi,ZodUUID:()=>Fr,ZodUndefined:()=>ig,ZodUnion:()=>vi,ZodUnknown:()=>cg,ZodVoid:()=>pg,ZodXID:()=>Vl,ZodXor:()=>fg,_ZodString:()=>Dl,_default:()=>Ag,_function:()=>iw,any:()=>zx,array:()=>gi,base64:()=>xx,base64url:()=>wx,bigint:()=>Rx,boolean:()=>og,catch:()=>jg,check:()=>sw,cidrv4:()=>_x,cidrv6:()=>bx,codec:()=>nw,cuid:()=>dx,cuid2:()=>px,custom:()=>lw,date:()=>Fx,describe:()=>uw,discriminatedUnion:()=>Hx,e164:()=>Sx,email:()=>tx,emoji:()=>ux,enum:()=>nu,exactOptional:()=>$g,file:()=>Qx,float32:()=>Cx,float64:()=>Ax,function:()=>iw,guid:()=>rx,hash:()=>Ex,hex:()=>$x,hostname:()=>Tx,httpUrl:()=>lx,instanceof:()=>dw,int:()=>jl,int32:()=>Px,int64:()=>Mx,intersection:()=>vg,ipv4:()=>hx,ipv6:()=>yx,json:()=>mw,jwt:()=>kx,keyof:()=>Lx,ksuid:()=>gx,lazy:()=>qg,literal:()=>Xx,looseObject:()=>Vx,looseRecord:()=>Jx,mac:()=>vx,map:()=>Wx,meta:()=>cw,nan:()=>rw,nanoid:()=>cx,nativeEnum:()=>Yx,never:()=>tu,nonoptional:()=>Rg,null:()=>lg,nullable:()=>di,nullish:()=>ew,number:()=>ng,object:()=>qx,optional:()=>ci,partialRecord:()=>Bx,pipe:()=>pi,prefault:()=>Og,preprocess:()=>fw,promise:()=>aw,readonly:()=>Ug,record:()=>bg,refine:()=>Gg,set:()=>Kx,strictObject:()=>Zx,string:()=>Nl,stringFormat:()=>Ix,stringbool:()=>pw,success:()=>tw,superRefine:()=>Hg,symbol:()=>jx,templateLiteral:()=>ow,transform:()=>ou,tuple:()=>_g,uint32:()=>Ox,uint64:()=>Nx,ulid:()=>mx,undefined:()=>Dx,union:()=>ru,unknown:()=>to,url:()=>sx,uuid:()=>nx,uuidv4:()=>ox,uuidv6:()=>ax,uuidv7:()=>ix,void:()=>Ux,xid:()=>fx,xor:()=>Gx});var Al={};Or(Al,{endsWith:()=>Lo,gt:()=>Dr,gte:()=>Lt,includes:()=>Uo,length:()=>Xn,lowercase:()=>Do,lt:()=>jr,lte:()=>tr,maxLength:()=>Yn,maxSize:()=>En,mime:()=>qo,minLength:()=>nn,minSize:()=>zr,multipleOf:()=>$n,negative:()=>wl,nonnegative:()=>kl,nonpositive:()=>Sl,normalize:()=>Zo,overwrite:()=>yr,positive:()=>xl,property:()=>Il,regex:()=>jo,size:()=>Kn,slugify:()=>Bo,startsWith:()=>Fo,toLowerCase:()=>Go,toUpperCase:()=>Ho,trim:()=>Vo,uppercase:()=>zo});var Qn={};Or(Qn,{ZodISODate:()=>Ol,ZodISODateTime:()=>Pl,ZodISODuration:()=>Ml,ZodISOTime:()=>Rl,date:()=>qf,datetime:()=>Lf,duration:()=>Vf,time:()=>Zf});var Pl=$("ZodISODateTime",(e,t)=>{hp.init(e,t),Qe.init(e,t)});function Lf(e){return bm(Pl,e)}var Ol=$("ZodISODate",(e,t)=>{vp.init(e,t),Qe.init(e,t)});function qf(e){return xm(Ol,e)}var Rl=$("ZodISOTime",(e,t)=>{yp.init(e,t),Qe.init(e,t)});function Zf(e){return wm(Rl,e)}var Ml=$("ZodISODuration",(e,t)=>{_p.init(e,t),Qe.init(e,t)});function Vf(e){return Sm(Ml,e)}var ex=(e,t)=>{Ka.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Xa(e,r)},flatten:{value:r=>Ya(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,$o,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,$o,2)}},isEmpty:{get(){return e.issues.length===0}}})},tP=$("ZodError",ex),Kt=$("ZodError",ex,{Parent:Error});var Gf=Ao(Kt),Hf=Po(Kt),Bf=Oo(Kt),eo=Ro(Kt),Jf=Cs(Kt),Wf=As(Kt),Kf=Ps(Kt),Yf=Os(Kt),Xf=Rs(Kt),Qf=Ms(Kt),eg=Ns(Kt),tg=js(Kt);var Te=$("ZodType",(e,t)=>(Se.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:Wo(e,"input"),output:Wo(e,"output")}}),e.toJSONSchema=tf(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>{var o;return e.clone(Y.mergeDefs(t,{checks:[...(o=t.checks)!=null?o:[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),{parent:!0})},e.with=e.check,e.clone=(r,o)=>Ft(e,r,o),e.brand=()=>e,e.register=((r,o)=>(r.add(e,o),e)),e.parse=(r,o)=>Gf(e,r,o,{callee:e.parse}),e.safeParse=(r,o)=>Bf(e,r,o),e.parseAsync=async(r,o)=>Hf(e,r,o,{callee:e.parseAsync}),e.safeParseAsync=async(r,o)=>eo(e,r,o),e.spa=e.safeParseAsync,e.encode=(r,o)=>Jf(e,r,o),e.decode=(r,o)=>Wf(e,r,o),e.encodeAsync=async(r,o)=>Kf(e,r,o),e.decodeAsync=async(r,o)=>Yf(e,r,o),e.safeEncode=(r,o)=>Xf(e,r,o),e.safeDecode=(r,o)=>Qf(e,r,o),e.safeEncodeAsync=async(r,o)=>eg(e,r,o),e.safeDecodeAsync=async(r,o)=>tg(e,r,o),e.refine=(r,o)=>e.check(Gg(r,o)),e.superRefine=r=>e.check(Hg(r)),e.overwrite=r=>e.check(yr(r)),e.optional=()=>ci(e),e.exactOptional=()=>$g(e),e.nullable=()=>di(e),e.nullish=()=>ci(di(e)),e.nonoptional=r=>Rg(e,r),e.array=()=>gi(e),e.or=r=>ru([e,r]),e.and=r=>vg(e,r),e.transform=r=>pi(e,ou(r)),e.default=r=>Ag(e,r),e.prefault=r=>Og(e,r),e.catch=r=>jg(e,r),e.pipe=r=>pi(e,r),e.readonly=()=>Ug(e),e.describe=r=>{let o=e.clone();return Et.add(o,{description:r}),o},Object.defineProperty(e,"description",{get(){var r;return(r=Et.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Et.get(e);let o=e.clone();return Et.add(o,r[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),Dl=$("_ZodString",(e,t)=>{var o,n,i;Jn.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(s,l,d)=>rf(e,s,l,d);let r=e._zod.bag;e.format=(o=r.format)!=null?o:null,e.minLength=(n=r.minimum)!=null?n:null,e.maxLength=(i=r.maximum)!=null?i:null,e.regex=(...s)=>e.check(jo(...s)),e.includes=(...s)=>e.check(Uo(...s)),e.startsWith=(...s)=>e.check(Fo(...s)),e.endsWith=(...s)=>e.check(Lo(...s)),e.min=(...s)=>e.check(nn(...s)),e.max=(...s)=>e.check(Yn(...s)),e.length=(...s)=>e.check(Xn(...s)),e.nonempty=(...s)=>e.check(nn(1,...s)),e.lowercase=s=>e.check(Do(s)),e.uppercase=s=>e.check(zo(s)),e.trim=()=>e.check(Vo()),e.normalize=(...s)=>e.check(Zo(...s)),e.toLowerCase=()=>e.check(Go()),e.toUpperCase=()=>e.check(Ho()),e.slugify=()=>e.check(Bo())}),Yo=$("ZodString",(e,t)=>{Jn.init(e,t),Dl.init(e,t),e.email=r=>e.check(tl(zl,r)),e.url=r=>e.check(si(mi,r)),e.jwt=r=>e.check(bl(Ql,r)),e.emoji=r=>e.check(il(Ul,r)),e.guid=r=>e.check(ii(ui,r)),e.uuid=r=>e.check(rl(Fr,r)),e.uuidv4=r=>e.check(nl(Fr,r)),e.uuidv6=r=>e.check(ol(Fr,r)),e.uuidv7=r=>e.check(al(Fr,r)),e.nanoid=r=>e.check(sl(Fl,r)),e.guid=r=>e.check(ii(ui,r)),e.cuid=r=>e.check(ll(Ll,r)),e.cuid2=r=>e.check(ul(ql,r)),e.ulid=r=>e.check(cl(Zl,r)),e.base64=r=>e.check(vl(Kl,r)),e.base64url=r=>e.check(yl(Yl,r)),e.xid=r=>e.check(dl(Vl,r)),e.ksuid=r=>e.check(pl(Gl,r)),e.ipv4=r=>e.check(ml(Hl,r)),e.ipv6=r=>e.check(fl(Bl,r)),e.cidrv4=r=>e.check(gl(Jl,r)),e.cidrv6=r=>e.check(hl(Wl,r)),e.e164=r=>e.check(_l(Xl,r)),e.datetime=r=>e.check(Lf(r)),e.date=r=>e.check(qf(r)),e.time=r=>e.check(Zf(r)),e.duration=r=>e.check(Vf(r))});function Nl(e){return hm(Yo,e)}var Qe=$("ZodStringFormat",(e,t)=>{Xe.init(e,t),Dl.init(e,t)}),zl=$("ZodEmail",(e,t)=>{sp.init(e,t),Qe.init(e,t)});function tx(e){return tl(zl,e)}var ui=$("ZodGUID",(e,t)=>{ap.init(e,t),Qe.init(e,t)});function rx(e){return ii(ui,e)}var Fr=$("ZodUUID",(e,t)=>{ip.init(e,t),Qe.init(e,t)});function nx(e){return rl(Fr,e)}function ox(e){return nl(Fr,e)}function ax(e){return ol(Fr,e)}function ix(e){return al(Fr,e)}var mi=$("ZodURL",(e,t)=>{lp.init(e,t),Qe.init(e,t)});function sx(e){return si(mi,e)}function lx(e){return si(mi,{protocol:/^https?$/,hostname:er.domain,...Y.normalizeParams(e)})}var Ul=$("ZodEmoji",(e,t)=>{up.init(e,t),Qe.init(e,t)});function ux(e){return il(Ul,e)}var Fl=$("ZodNanoID",(e,t)=>{cp.init(e,t),Qe.init(e,t)});function cx(e){return sl(Fl,e)}var Ll=$("ZodCUID",(e,t)=>{dp.init(e,t),Qe.init(e,t)});function dx(e){return ll(Ll,e)}var ql=$("ZodCUID2",(e,t)=>{pp.init(e,t),Qe.init(e,t)});function px(e){return ul(ql,e)}var Zl=$("ZodULID",(e,t)=>{mp.init(e,t),Qe.init(e,t)});function mx(e){return cl(Zl,e)}var Vl=$("ZodXID",(e,t)=>{fp.init(e,t),Qe.init(e,t)});function fx(e){return dl(Vl,e)}var Gl=$("ZodKSUID",(e,t)=>{gp.init(e,t),Qe.init(e,t)});function gx(e){return pl(Gl,e)}var Hl=$("ZodIPv4",(e,t)=>{bp.init(e,t),Qe.init(e,t)});function hx(e){return ml(Hl,e)}var rg=$("ZodMAC",(e,t)=>{wp.init(e,t),Qe.init(e,t)});function vx(e){return ym(rg,e)}var Bl=$("ZodIPv6",(e,t)=>{xp.init(e,t),Qe.init(e,t)});function yx(e){return fl(Bl,e)}var Jl=$("ZodCIDRv4",(e,t)=>{Sp.init(e,t),Qe.init(e,t)});function _x(e){return gl(Jl,e)}var Wl=$("ZodCIDRv6",(e,t)=>{kp.init(e,t),Qe.init(e,t)});function bx(e){return hl(Wl,e)}var Kl=$("ZodBase64",(e,t)=>{Tp.init(e,t),Qe.init(e,t)});function xx(e){return vl(Kl,e)}var Yl=$("ZodBase64URL",(e,t)=>{$p.init(e,t),Qe.init(e,t)});function wx(e){return yl(Yl,e)}var Xl=$("ZodE164",(e,t)=>{Ep.init(e,t),Qe.init(e,t)});function Sx(e){return _l(Xl,e)}var Ql=$("ZodJWT",(e,t)=>{Cp.init(e,t),Qe.init(e,t)});function kx(e){return bl(Ql,e)}var Xo=$("ZodCustomStringFormat",(e,t)=>{Ap.init(e,t),Qe.init(e,t)});function Ix(e,t,r={}){return Jo(Xo,e,t,r)}function Tx(e){return Jo(Xo,"hostname",er.hostname,e)}function $x(e){return Jo(Xo,"hex",er.hex,e)}function Ex(e,t){var i;let r=(i=t==null?void 0:t.enc)!=null?i:"hex",o=`${e}_${r}`,n=er[o];if(!n)throw new Error(`Unrecognized hash format: ${o}`);return Jo(Xo,o,n,t)}var Qo=$("ZodNumber",(e,t)=>{var o,n,i,s,l,d,u,m,c;Hs.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(p,f,v)=>nf(e,p,f,v),e.gt=(p,f)=>e.check(Dr(p,f)),e.gte=(p,f)=>e.check(Lt(p,f)),e.min=(p,f)=>e.check(Lt(p,f)),e.lt=(p,f)=>e.check(jr(p,f)),e.lte=(p,f)=>e.check(tr(p,f)),e.max=(p,f)=>e.check(tr(p,f)),e.int=p=>e.check(jl(p)),e.safe=p=>e.check(jl(p)),e.positive=p=>e.check(Dr(0,p)),e.nonnegative=p=>e.check(Lt(0,p)),e.negative=p=>e.check(jr(0,p)),e.nonpositive=p=>e.check(tr(0,p)),e.multipleOf=(p,f)=>e.check($n(p,f)),e.step=(p,f)=>e.check($n(p,f)),e.finite=()=>e;let r=e._zod.bag;e.minValue=(i=Math.max((o=r.minimum)!=null?o:Number.NEGATIVE_INFINITY,(n=r.exclusiveMinimum)!=null?n:Number.NEGATIVE_INFINITY))!=null?i:null,e.maxValue=(d=Math.min((s=r.maximum)!=null?s:Number.POSITIVE_INFINITY,(l=r.exclusiveMaximum)!=null?l:Number.POSITIVE_INFINITY))!=null?d:null,e.isInt=((u=r.format)!=null?u:"").includes("int")||Number.isSafeInteger((m=r.multipleOf)!=null?m:.5),e.isFinite=!0,e.format=(c=r.format)!=null?c:null});function ng(e){return km(Qo,e)}var ro=$("ZodNumberFormat",(e,t)=>{Pp.init(e,t),Qo.init(e,t)});function jl(e){return Tm(ro,e)}function Cx(e){return $m(ro,e)}function Ax(e){return Em(ro,e)}function Px(e){return Cm(ro,e)}function Ox(e){return Am(ro,e)}var ea=$("ZodBoolean",(e,t)=>{ri.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>of(e,r,o,n)});function og(e){return Pm(ea,e)}var ta=$("ZodBigInt",(e,t)=>{var o,n,i;Bs.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(s,l,d)=>af(e,s,l,d),e.gte=(s,l)=>e.check(Lt(s,l)),e.min=(s,l)=>e.check(Lt(s,l)),e.gt=(s,l)=>e.check(Dr(s,l)),e.gte=(s,l)=>e.check(Lt(s,l)),e.min=(s,l)=>e.check(Lt(s,l)),e.lt=(s,l)=>e.check(jr(s,l)),e.lte=(s,l)=>e.check(tr(s,l)),e.max=(s,l)=>e.check(tr(s,l)),e.positive=s=>e.check(Dr(BigInt(0),s)),e.negative=s=>e.check(jr(BigInt(0),s)),e.nonpositive=s=>e.check(tr(BigInt(0),s)),e.nonnegative=s=>e.check(Lt(BigInt(0),s)),e.multipleOf=(s,l)=>e.check($n(s,l));let r=e._zod.bag;e.minValue=(o=r.minimum)!=null?o:null,e.maxValue=(n=r.maximum)!=null?n:null,e.format=(i=r.format)!=null?i:null});function Rx(e){return Rm(ta,e)}var eu=$("ZodBigIntFormat",(e,t)=>{Op.init(e,t),ta.init(e,t)});function Mx(e){return Nm(eu,e)}function Nx(e){return jm(eu,e)}var ag=$("ZodSymbol",(e,t)=>{Rp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>sf(e,r,o,n)});function jx(e){return Dm(ag,e)}var ig=$("ZodUndefined",(e,t)=>{Mp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>uf(e,r,o,n)});function Dx(e){return zm(ig,e)}var sg=$("ZodNull",(e,t)=>{Np.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>lf(e,r,o,n)});function lg(e){return Um(sg,e)}var ug=$("ZodAny",(e,t)=>{jp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>pf(e,r,o,n)});function zx(){return Fm(ug)}var cg=$("ZodUnknown",(e,t)=>{Dp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>mf(e,r,o,n)});function to(){return Lm(cg)}var dg=$("ZodNever",(e,t)=>{zp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>df(e,r,o,n)});function tu(e){return qm(dg,e)}var pg=$("ZodVoid",(e,t)=>{Up.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>cf(e,r,o,n)});function Ux(e){return Zm(pg,e)}var fi=$("ZodDate",(e,t)=>{Fp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(o,n,i)=>ff(e,o,n,i),e.min=(o,n)=>e.check(Lt(o,n)),e.max=(o,n)=>e.check(tr(o,n));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function Fx(e){return Vm(fi,e)}var mg=$("ZodArray",(e,t)=>{Lp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Tf(e,r,o,n),e.element=t.element,e.min=(r,o)=>e.check(nn(r,o)),e.nonempty=r=>e.check(nn(1,r)),e.max=(r,o)=>e.check(Yn(r,o)),e.length=(r,o)=>e.check(Xn(r,o)),e.unwrap=()=>e.element});function gi(e,t){return Bm(mg,e,t)}function Lx(e){let t=e._zod.def.shape;return nu(Object.keys(t))}var hi=$("ZodObject",(e,t)=>{qp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>$f(e,r,o,n),Y.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>nu(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:to()}),e.loose=()=>e.clone({...e._zod.def,catchall:to()}),e.strict=()=>e.clone({...e._zod.def,catchall:tu()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Y.extend(e,r),e.safeExtend=r=>Y.safeExtend(e,r),e.merge=r=>Y.merge(e,r),e.pick=r=>Y.pick(e,r),e.omit=r=>Y.omit(e,r),e.partial=(...r)=>Y.partial(au,e,r[0]),e.required=(...r)=>Y.required(iu,e,r[0])});function qx(e,t){let r={type:"object",shape:e!=null?e:{},...Y.normalizeParams(t)};return new hi(r)}function Zx(e,t){return new hi({type:"object",shape:e,catchall:tu(),...Y.normalizeParams(t)})}function Vx(e,t){return new hi({type:"object",shape:e,catchall:to(),...Y.normalizeParams(t)})}var vi=$("ZodUnion",(e,t)=>{ni.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>$l(e,r,o,n),e.options=t.options});function ru(e,t){return new vi({type:"union",options:e,...Y.normalizeParams(t)})}var fg=$("ZodXor",(e,t)=>{vi.init(e,t),Zp.init(e,t),e._zod.processJSONSchema=(r,o,n)=>$l(e,r,o,n),e.options=t.options});function Gx(e,t){return new fg({type:"union",options:e,inclusive:!1,...Y.normalizeParams(t)})}var gg=$("ZodDiscriminatedUnion",(e,t)=>{vi.init(e,t),Vp.init(e,t)});function Hx(e,t,r){return new gg({type:"union",options:t,discriminator:e,...Y.normalizeParams(r)})}var hg=$("ZodIntersection",(e,t)=>{Gp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Ef(e,r,o,n)});function vg(e,t){return new hg({type:"intersection",left:e,right:t})}var yg=$("ZodTuple",(e,t)=>{Js.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Cf(e,r,o,n),e.rest=r=>e.clone({...e._zod.def,rest:r})});function _g(e,t,r){let o=t instanceof Se,n=o?r:t,i=o?t:null;return new yg({type:"tuple",items:e,rest:i,...Y.normalizeParams(n)})}var yi=$("ZodRecord",(e,t)=>{Hp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Af(e,r,o,n),e.keyType=t.keyType,e.valueType=t.valueType});function bg(e,t,r){return new yi({type:"record",keyType:e,valueType:t,...Y.normalizeParams(r)})}function Bx(e,t,r){let o=Ft(e);return o._zod.values=void 0,new yi({type:"record",keyType:o,valueType:t,...Y.normalizeParams(r)})}function Jx(e,t,r){return new yi({type:"record",keyType:e,valueType:t,mode:"loose",...Y.normalizeParams(r)})}var xg=$("ZodMap",(e,t)=>{Bp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>kf(e,r,o,n),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...r)=>e.check(zr(...r)),e.nonempty=r=>e.check(zr(1,r)),e.max=(...r)=>e.check(En(...r)),e.size=(...r)=>e.check(Kn(...r))});function Wx(e,t,r){return new xg({type:"map",keyType:e,valueType:t,...Y.normalizeParams(r)})}var wg=$("ZodSet",(e,t)=>{Jp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>If(e,r,o,n),e.min=(...r)=>e.check(zr(...r)),e.nonempty=r=>e.check(zr(1,r)),e.max=(...r)=>e.check(En(...r)),e.size=(...r)=>e.check(Kn(...r))});function Kx(e,t){return new wg({type:"set",valueType:e,...Y.normalizeParams(t)})}var Ko=$("ZodEnum",(e,t)=>{Wp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(o,n,i)=>gf(e,o,n,i),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(o,n)=>{let i={};for(let s of o)if(r.has(s))i[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ko({...t,checks:[],...Y.normalizeParams(n),entries:i})},e.exclude=(o,n)=>{let i={...t.entries};for(let s of o)if(r.has(s))delete i[s];else throw new Error(`Key ${s} not found in enum`);return new Ko({...t,checks:[],...Y.normalizeParams(n),entries:i})}});function nu(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Ko({type:"enum",entries:r,...Y.normalizeParams(t)})}function Yx(e,t){return new Ko({type:"enum",entries:e,...Y.normalizeParams(t)})}var Sg=$("ZodLiteral",(e,t)=>{Kp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>hf(e,r,o,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Xx(e,t){return new Sg({type:"literal",values:Array.isArray(e)?e:[e],...Y.normalizeParams(t)})}var kg=$("ZodFile",(e,t)=>{Yp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>_f(e,r,o,n),e.min=(r,o)=>e.check(zr(r,o)),e.max=(r,o)=>e.check(En(r,o)),e.mime=(r,o)=>e.check(qo(Array.isArray(r)?r:[r],o))});function Qx(e){return Jm(kg,e)}var Ig=$("ZodTransform",(e,t)=>{Xp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Sf(e,r,o,n),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new wn(e.constructor.name);r.addIssue=i=>{var s,l,d;if(typeof i=="string")r.issues.push(Y.issue(i,r.value,t));else{let u=i;u.fatal&&(u.continue=!1),(s=u.code)!=null||(u.code="custom"),(l=u.input)!=null||(u.input=r.value),(d=u.inst)!=null||(u.inst=e),r.issues.push(Y.issue(u))}};let n=t.transform(r.value,r);return n instanceof Promise?n.then(i=>(r.value=i,r)):(r.value=n,r)}});function ou(e){return new Ig({type:"transform",transform:e})}var au=$("ZodOptional",(e,t)=>{Ws.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>El(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function ci(e){return new au({type:"optional",innerType:e})}var Tg=$("ZodExactOptional",(e,t)=>{Qp.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>El(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function $g(e){return new Tg({type:"optional",innerType:e})}var Eg=$("ZodNullable",(e,t)=>{em.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Pf(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function di(e){return new Eg({type:"nullable",innerType:e})}function ew(e){return ci(di(e))}var Cg=$("ZodDefault",(e,t)=>{tm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Rf(e,r,o,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ag(e,t){return new Cg({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Y.shallowClone(t)}})}var Pg=$("ZodPrefault",(e,t)=>{rm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Mf(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function Og(e,t){return new Pg({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Y.shallowClone(t)}})}var iu=$("ZodNonOptional",(e,t)=>{nm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Of(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function Rg(e,t){return new iu({type:"nonoptional",innerType:e,...Y.normalizeParams(t)})}var Mg=$("ZodSuccess",(e,t)=>{om.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>bf(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function tw(e){return new Mg({type:"success",innerType:e})}var Ng=$("ZodCatch",(e,t)=>{am.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Nf(e,r,o,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function jg(e,t){return new Ng({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var Dg=$("ZodNaN",(e,t)=>{im.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>vf(e,r,o,n)});function rw(e){return Hm(Dg,e)}var su=$("ZodPipe",(e,t)=>{sm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>jf(e,r,o,n),e.in=t.in,e.out=t.out});function pi(e,t){return new su({type:"pipe",in:e,out:t})}var lu=$("ZodCodec",(e,t)=>{su.init(e,t),oi.init(e,t)});function nw(e,t,r){return new lu({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}var zg=$("ZodReadonly",(e,t)=>{lm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Df(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function Ug(e){return new zg({type:"readonly",innerType:e})}var Fg=$("ZodTemplateLiteral",(e,t)=>{um.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>yf(e,r,o,n)});function ow(e,t){return new Fg({type:"template_literal",parts:e,...Y.normalizeParams(t)})}var Lg=$("ZodLazy",(e,t)=>{pm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>Uf(e,r,o,n),e.unwrap=()=>e._zod.def.getter()});function qg(e){return new Lg({type:"lazy",getter:e})}var Zg=$("ZodPromise",(e,t)=>{dm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>zf(e,r,o,n),e.unwrap=()=>e._zod.def.innerType});function aw(e){return new Zg({type:"promise",innerType:e})}var Vg=$("ZodFunction",(e,t)=>{cm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>wf(e,r,o,n)});function iw(e){var t,r;return new Vg({type:"function",input:Array.isArray(e==null?void 0:e.input)?_g(e==null?void 0:e.input):(t=e==null?void 0:e.input)!=null?t:gi(to()),output:(r=e==null?void 0:e.output)!=null?r:to()})}var _i=$("ZodCustom",(e,t)=>{mm.init(e,t),Te.init(e,t),e._zod.processJSONSchema=(r,o,n)=>xf(e,r,o,n)});function sw(e){let t=new nt({check:"custom"});return t._zod.check=e,t}function lw(e,t){return Wm(_i,e!=null?e:(()=>!0),t)}function Gg(e,t={}){return Km(_i,e,t)}function Hg(e){return Ym(e)}var uw=Xm,cw=Qm;function dw(e,t={}){let r=new _i({type:"custom",check:"custom",fn:o=>o instanceof e,abort:!0,...Y.normalizeParams(t)});return r._zod.bag.Class=e,r._zod.check=o=>{var n;o.value instanceof e||o.issues.push({code:"invalid_type",expected:e.name,input:o.value,inst:r,path:[...(n=r._zod.def.path)!=null?n:[]]})},r}var pw=(...e)=>ef({Codec:lu,Boolean:ea,String:Yo},...e);function mw(e){let t=qg(()=>ru([Nl(e),ng(),og(),lg(),gi(t),bg(Nl(),t)]));return t}function fw(e,t){return pi(ou(e),t)}var nP={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function oP(e){ft({customError:e})}function aP(){return ft().customError}var Bg;Bg||(Bg={});var ae={...li,...Al,iso:Qn},iP=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function sP(e,t){let r=e.$schema;return r==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":r==="http://json-schema.org/draft-07/schema#"?"draft-7":r==="http://json-schema.org/draft-04/schema#"?"draft-4":t!=null?t:"draft-2020-12"}function lP(e,t){if(!e.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");let r=e.slice(1).split("/").filter(Boolean);if(r.length===0)return t.rootSchema;let o=t.version==="draft-2020-12"?"$defs":"definitions";if(r[0]===o){let n=r[1];if(!n||!t.defs[n])throw new Error(`Reference not found: ${e}`);return t.defs[n]}throw new Error(`Reference not found: ${e}`)}function gw(e,t){if(e.not!==void 0){if(typeof e.not=="object"&&Object.keys(e.not).length===0)return ae.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(e.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(e.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(e.if!==void 0||e.then!==void 0||e.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(e.dependentSchemas!==void 0||e.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){let n=e.$ref;if(t.refs.has(n))return t.refs.get(n);if(t.processing.has(n))return ae.lazy(()=>{if(!t.refs.has(n))throw new Error(`Circular reference not resolved: ${n}`);return t.refs.get(n)});t.processing.add(n);let i=lP(n,t),s=Ot(i,t);return t.refs.set(n,s),t.processing.delete(n),s}if(e.enum!==void 0){let n=e.enum;if(t.version==="openapi-3.0"&&e.nullable===!0&&n.length===1&&n[0]===null)return ae.null();if(n.length===0)return ae.never();if(n.length===1)return ae.literal(n[0]);if(n.every(s=>typeof s=="string"))return ae.enum(n);let i=n.map(s=>ae.literal(s));return i.length<2?i[0]:ae.union([i[0],i[1],...i.slice(2)])}if(e.const!==void 0)return ae.literal(e.const);let r=e.type;if(Array.isArray(r)){let n=r.map(i=>{let s={...e,type:i};return gw(s,t)});return n.length===0?ae.never():n.length===1?n[0]:ae.union(n)}if(!r)return ae.any();let o;switch(r){case"string":{let n=ae.string();if(e.format){let i=e.format;i==="email"?n=n.check(ae.email()):i==="uri"||i==="uri-reference"?n=n.check(ae.url()):i==="uuid"||i==="guid"?n=n.check(ae.uuid()):i==="date-time"?n=n.check(ae.iso.datetime()):i==="date"?n=n.check(ae.iso.date()):i==="time"?n=n.check(ae.iso.time()):i==="duration"?n=n.check(ae.iso.duration()):i==="ipv4"?n=n.check(ae.ipv4()):i==="ipv6"?n=n.check(ae.ipv6()):i==="mac"?n=n.check(ae.mac()):i==="cidr"?n=n.check(ae.cidrv4()):i==="cidr-v6"?n=n.check(ae.cidrv6()):i==="base64"?n=n.check(ae.base64()):i==="base64url"?n=n.check(ae.base64url()):i==="e164"?n=n.check(ae.e164()):i==="jwt"?n=n.check(ae.jwt()):i==="emoji"?n=n.check(ae.emoji()):i==="nanoid"?n=n.check(ae.nanoid()):i==="cuid"?n=n.check(ae.cuid()):i==="cuid2"?n=n.check(ae.cuid2()):i==="ulid"?n=n.check(ae.ulid()):i==="xid"?n=n.check(ae.xid()):i==="ksuid"&&(n=n.check(ae.ksuid()))}typeof e.minLength=="number"&&(n=n.min(e.minLength)),typeof e.maxLength=="number"&&(n=n.max(e.maxLength)),e.pattern&&(n=n.regex(new RegExp(e.pattern))),o=n;break}case"number":case"integer":{let n=r==="integer"?ae.number().int():ae.number();typeof e.minimum=="number"&&(n=n.min(e.minimum)),typeof e.maximum=="number"&&(n=n.max(e.maximum)),typeof e.exclusiveMinimum=="number"?n=n.gt(e.exclusiveMinimum):e.exclusiveMinimum===!0&&typeof e.minimum=="number"&&(n=n.gt(e.minimum)),typeof e.exclusiveMaximum=="number"?n=n.lt(e.exclusiveMaximum):e.exclusiveMaximum===!0&&typeof e.maximum=="number"&&(n=n.lt(e.maximum)),typeof e.multipleOf=="number"&&(n=n.multipleOf(e.multipleOf)),o=n;break}case"boolean":{o=ae.boolean();break}case"null":{o=ae.null();break}case"object":{let n={},i=e.properties||{},s=new Set(e.required||[]);for(let[d,u]of Object.entries(i)){let m=Ot(u,t);n[d]=s.has(d)?m:m.optional()}if(e.propertyNames){let d=Ot(e.propertyNames,t),u=e.additionalProperties&&typeof e.additionalProperties=="object"?Ot(e.additionalProperties,t):ae.any();if(Object.keys(n).length===0){o=ae.record(d,u);break}let m=ae.object(n).passthrough(),c=ae.looseRecord(d,u);o=ae.intersection(m,c);break}if(e.patternProperties){let d=e.patternProperties,u=Object.keys(d),m=[];for(let p of u){let f=Ot(d[p],t),v=ae.string().regex(new RegExp(p));m.push(ae.looseRecord(v,f))}let c=[];if(Object.keys(n).length>0&&c.push(ae.object(n).passthrough()),c.push(...m),c.length===0)o=ae.object({}).passthrough();else if(c.length===1)o=c[0];else{let p=ae.intersection(c[0],c[1]);for(let f=2;f<c.length;f++)p=ae.intersection(p,c[f]);o=p}break}let l=ae.object(n);e.additionalProperties===!1?o=l.strict():typeof e.additionalProperties=="object"?o=l.catchall(Ot(e.additionalProperties,t)):o=l.passthrough();break}case"array":{let n=e.prefixItems,i=e.items;if(n&&Array.isArray(n)){let s=n.map(d=>Ot(d,t)),l=i&&typeof i=="object"&&!Array.isArray(i)?Ot(i,t):void 0;l?o=ae.tuple(s).rest(l):o=ae.tuple(s),typeof e.minItems=="number"&&(o=o.check(ae.minLength(e.minItems))),typeof e.maxItems=="number"&&(o=o.check(ae.maxLength(e.maxItems)))}else if(Array.isArray(i)){let s=i.map(d=>Ot(d,t)),l=e.additionalItems&&typeof e.additionalItems=="object"?Ot(e.additionalItems,t):void 0;l?o=ae.tuple(s).rest(l):o=ae.tuple(s),typeof e.minItems=="number"&&(o=o.check(ae.minLength(e.minItems))),typeof e.maxItems=="number"&&(o=o.check(ae.maxLength(e.maxItems)))}else if(i!==void 0){let s=Ot(i,t),l=ae.array(s);typeof e.minItems=="number"&&(l=l.min(e.minItems)),typeof e.maxItems=="number"&&(l=l.max(e.maxItems)),o=l}else o=ae.array(ae.any());break}default:throw new Error(`Unsupported type: ${r}`)}return e.description&&(o=o.describe(e.description)),e.default!==void 0&&(o=o.default(e.default)),o}function Ot(e,t){if(typeof e=="boolean")return e?ae.any():ae.never();let r=gw(e,t),o=e.type||e.enum!==void 0||e.const!==void 0;if(e.anyOf&&Array.isArray(e.anyOf)){let l=e.anyOf.map(u=>Ot(u,t)),d=ae.union(l);r=o?ae.intersection(r,d):d}if(e.oneOf&&Array.isArray(e.oneOf)){let l=e.oneOf.map(u=>Ot(u,t)),d=ae.xor(l);r=o?ae.intersection(r,d):d}if(e.allOf&&Array.isArray(e.allOf))if(e.allOf.length===0)r=o?r:ae.any();else{let l=o?r:Ot(e.allOf[0],t),d=o?0:1;for(let u=d;u<e.allOf.length;u++)l=ae.intersection(l,Ot(e.allOf[u],t));r=l}e.nullable===!0&&t.version==="openapi-3.0"&&(r=ae.nullable(r)),e.readOnly===!0&&(r=ae.readonly(r));let n={},i=["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"];for(let l of i)l in e&&(n[l]=e[l]);let s=["contentEncoding","contentMediaType","contentSchema"];for(let l of s)l in e&&(n[l]=e[l]);for(let l of Object.keys(e))iP.has(l)||(n[l]=e[l]);return Object.keys(n).length>0&&t.registry.add(r,n),r}function hw(e,t){var i;if(typeof e=="boolean")return e?ae.any():ae.never();let r=sP(e,t==null?void 0:t.defaultTarget),o=e.$defs||e.definitions||{},n={version:r,defs:o,refs:new Map,processing:new Set,rootSchema:e,registry:(i=t==null?void 0:t.registry)!=null?i:Et};return Ot(e,n)}var uu={};Or(uu,{bigint:()=>pP,boolean:()=>dP,date:()=>mP,number:()=>cP,string:()=>uP});function uP(e){return vm(Yo,e)}function cP(e){return Im(Qo,e)}function dP(e){return Om(ea,e)}function pP(e){return Mm(ta,e)}function mP(e){return Gm(fi,e)}ft(Ks());var Ne;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{let i={};for(let s of n)i[s]=s;return i},e.getValidEnumValues=n=>{let i=e.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),s={};for(let l of i)s[l]=n[l];return e.objectValues(s)},e.objectValues=n=>e.objectKeys(n).map(function(i){return n[i]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.push(s);return i},e.find=(n,i)=>{for(let s of n)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=o,e.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Ne||(Ne={}));var yw;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(yw||(yw={}));var ce=Ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),on=e=>{switch(typeof e){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return Number.isNaN(e)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(e)?ce.array:e===null?ce.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ce.promise:typeof Map!="undefined"&&e instanceof Map?ce.map:typeof Set!="undefined"&&e instanceof Set?ce.set:typeof Date!="undefined"&&e instanceof Date?ce.date:ce.object;default:return ce.unknown}};var W=Ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var rr=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(i){return i.message},o={_errors:[]},n=i=>{for(let s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(n);else if(s.code==="invalid_return_type")n(s.returnTypeError);else if(s.code==="invalid_arguments")n(s.argumentsError);else if(s.path.length===0)o._errors.push(r(s));else{let l=o,d=0;for(;d<s.path.length;){let u=s.path[d];d===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(s))):l[u]=l[u]||{_errors:[]},l=l[u],d++}}};return n(this),o}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r=Object.create(null),o=[];for(let n of this.issues)if(n.path.length>0){let i=n.path[0];r[i]=r[i]||[],r[i].push(t(n))}else o.push(t(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};rr.create=e=>new rr(e);var fP=(e,t)=>{let r;switch(e.code){case W.invalid_type:e.received===ce.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case W.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Ne.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ne.joinValues(e.keys,", ")}`;break;case W.invalid_union:r="Invalid input";break;case W.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ne.joinValues(e.options)}`;break;case W.invalid_enum_value:r=`Invalid enum value. Expected ${Ne.joinValues(e.options)}, received '${e.received}'`;break;case W.invalid_arguments:r="Invalid function arguments";break;case W.invalid_return_type:r="Invalid function return type";break;case W.invalid_date:r="Invalid date";break;case W.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Ne.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case W.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case W.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case W.custom:r="Invalid input";break;case W.invalid_intersection_types:r="Intersection results could not be merged";break;case W.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case W.not_finite:r="Number must be finite";break;default:r=t.defaultError,Ne.assertNever(e)}return{message:r}},Rn=fP;var gP=Rn;function bi(){return gP}var cu=e=>{let{data:t,path:r,errorMaps:o,issueData:n}=e,i=[...r,...n.path||[]],s={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let l="",d=o.filter(u=>!!u).slice().reverse();for(let u of d)l=u(s,{data:t,defaultError:l}).message;return{...n,path:i,message:l}};function ie(e,t){let r=bi(),o=cu({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Rn?void 0:Rn].filter(n=>!!n)});e.common.issues.push(o)}var Rt=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let o=[];for(let n of r){if(n.status==="aborted")return xe;n.status==="dirty"&&t.dirty(),o.push(n.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,r){let o=[];for(let n of r){let i=await n.key,s=await n.value;o.push({key:i,value:s})}return e.mergeObjectSync(t,o)}static mergeObjectSync(t,r){let o={};for(let n of r){let{key:i,value:s}=n;if(i.status==="aborted"||s.status==="aborted")return xe;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value!="undefined"||n.alwaysSet)&&(o[i.value]=s.value)}return{status:t.value,value:o}}},xe=Object.freeze({status:"aborted"}),ra=e=>({status:"dirty",value:e}),Zt=e=>({status:"valid",value:e}),Jg=e=>e.status==="aborted",Wg=e=>e.status==="dirty",no=e=>e.status==="valid",xi=e=>typeof Promise!="undefined"&&e instanceof Promise;var me;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(me||(me={}));var dr=class{constructor(t,r,o,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},_w=(e,t)=>{if(no(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new rr(e.common.issues);return this._error=r,this._error}}};function $e(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:o,description:n}=e;if(t&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(s,l)=>{var u,m;let{message:d}=e;return s.code==="invalid_enum_value"?{message:d!=null?d:l.defaultError}:typeof l.data=="undefined"?{message:(u=d!=null?d:o)!=null?u:l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:(m=d!=null?d:r)!=null?m:l.defaultError}},description:n}}var Pe=class{get description(){return this._def.description}_getType(t){return on(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:on(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Rt,ctx:{common:t.parent.common,data:t.data,parsedType:on(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(xi(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let o=this.safeParse(t,r);if(o.success)return o.data;throw o.error}safeParse(t,r){var i;let o={common:{issues:[],async:(i=r==null?void 0:r.async)!=null?i:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:on(t)},n=this._parseSync({data:t,path:o.path,parent:o});return _w(o,n)}"~validate"(t){var o,n;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:on(t)};if(!this["~standard"].async)try{let i=this._parseSync({data:t,path:[],parent:r});return no(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(n=(o=i==null?void 0:i.message)==null?void 0:o.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>no(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){let o=await this.safeParseAsync(t,r);if(o.success)return o.data;throw o.error}async safeParseAsync(t,r){let o={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:on(t)},n=this._parse({data:t,path:o.path,parent:o}),i=await(xi(n)?n:Promise.resolve(n));return _w(o,i)}refine(t,r){let o=n=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let s=t(n),l=()=>i.addIssue({code:W.custom,...o(n)});return typeof Promise!="undefined"&&s instanceof Promise?s.then(d=>d?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(t,r){return this._refinement((o,n)=>t(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(t){return new br({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return _r.create(this,this._def)}nullable(){return ln.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Nn.create(this)}promise(){return oo.create(this,this._def)}or(t){return sa.create([this,t],this._def)}and(t){return la.create(this,t,this._def)}transform(t){return new br({...$e(this._def),schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new ma({...$e(this._def),innerType:this,defaultValue:r,typeName:z.ZodDefault})}brand(){return new du({typeName:z.ZodBranded,type:this,...$e(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new fa({...$e(this._def),innerType:this,catchValue:r,typeName:z.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return pu.create(this,t)}readonly(){return ga.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},hP=/^c[^\s-]{8,}$/i,vP=/^[0-9a-z]+$/,yP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_P=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,bP=/^[a-z0-9_-]{21}$/i,xP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,SP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Kg,IP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$P=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,EP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,CP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",PP=new RegExp(`^${bw}$`);function xw(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function OP(e){return new RegExp(`^${xw(e)}$`)}function RP(e){let t=`${bw}T${xw(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function MP(e,t){return!!((t==="v4"||!t)&&IP.test(e)||(t==="v6"||!t)&&$P.test(e))}function NP(e,t){if(!xP.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let o=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(o));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)}catch(r){return!1}}function jP(e,t){return!!((t==="v4"||!t)&&TP.test(e)||(t==="v6"||!t)&&EP.test(e))}var oa=class e extends Pe{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ce.string){let i=this._getOrReturnCtx(t);return ie(i,{code:W.invalid_type,expected:ce.string,received:i.parsedType}),xe}let o=new Rt,n;for(let i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),ie(n,{code:W.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),ie(n,{code:W.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let s=t.data.length>i.value,l=t.data.length<i.value;(s||l)&&(n=this._getOrReturnCtx(t,n),s?ie(n,{code:W.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ie(n,{code:W.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")SP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"email",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")Kg||(Kg=new RegExp(kP,"u")),Kg.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"emoji",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")_P.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"uuid",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="nanoid")bP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"nanoid",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")hP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"cuid",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")vP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"cuid2",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")yP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"ulid",code:W.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(t.data)}catch(s){n=this._getOrReturnCtx(t,n),ie(n,{validation:"url",code:W.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"regex",code:W.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),ie(n,{code:W.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),ie(n,{code:W.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),ie(n,{code:W.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?RP(i).test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{code:W.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="date"?PP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{code:W.invalid_string,validation:"date",message:i.message}),o.dirty()):i.kind==="time"?OP(i).test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{code:W.invalid_string,validation:"time",message:i.message}),o.dirty()):i.kind==="duration"?wP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"duration",code:W.invalid_string,message:i.message}),o.dirty()):i.kind==="ip"?MP(t.data,i.version)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"ip",code:W.invalid_string,message:i.message}),o.dirty()):i.kind==="jwt"?NP(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"jwt",code:W.invalid_string,message:i.message}),o.dirty()):i.kind==="cidr"?jP(t.data,i.version)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"cidr",code:W.invalid_string,message:i.message}),o.dirty()):i.kind==="base64"?CP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"base64",code:W.invalid_string,message:i.message}),o.dirty()):i.kind==="base64url"?AP.test(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{validation:"base64url",code:W.invalid_string,message:i.message}),o.dirty()):Ne.assertNever(i);return{status:o.value,value:t.data}}_regex(t,r,o){return this.refinement(n=>t.test(n),{validation:r,code:W.invalid_string,...me.errToObj(o)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...me.errToObj(t)})}url(t){return this._addCheck({kind:"url",...me.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...me.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...me.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...me.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...me.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...me.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...me.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...me.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...me.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...me.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...me.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...me.errToObj(t)})}datetime(t){var r,o;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!=null?r:!1,local:(o=t==null?void 0:t.local)!=null?o:!1,...me.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision,...me.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...me.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...me.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...me.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...me.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...me.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...me.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...me.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...me.errToObj(r)})}nonempty(t){return this.min(1,me.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};oa.create=e=>{var t;return new oa({checks:[],typeName:z.ZodString,coerce:(t=e==null?void 0:e.coerce)!=null?t:!1,...$e(e)})};function DP(e,t){let r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,n=r>o?r:o,i=Number.parseInt(e.toFixed(n).replace(".","")),s=Number.parseInt(t.toFixed(n).replace(".",""));return i%s/10**n}var wi=class e extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ce.number){let i=this._getOrReturnCtx(t);return ie(i,{code:W.invalid_type,expected:ce.number,received:i.parsedType}),xe}let o,n=new Rt;for(let i of this._def.checks)i.kind==="int"?Ne.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),ie(o,{code:W.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(o=this._getOrReturnCtx(t,o),ie(o,{code:W.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(o=this._getOrReturnCtx(t,o),ie(o,{code:W.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?DP(t.data,i.value)!==0&&(o=this._getOrReturnCtx(t,o),ie(o,{code:W.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),ie(o,{code:W.not_finite,message:i.message}),n.dirty()):Ne.assertNever(i);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,me.toString(r))}gt(t,r){return this.setLimit("min",t,!1,me.toString(r))}lte(t,r){return this.setLimit("max",t,!0,me.toString(r))}lt(t,r){return this.setLimit("max",t,!1,me.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:me.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:me.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:me.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ne.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(r)&&Number.isFinite(t)}};wi.create=e=>new wi({checks:[],typeName:z.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...$e(e)});var Si=class e extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(i){return this._getInvalidInput(t)}if(this._getType(t)!==ce.bigint)return this._getInvalidInput(t);let o,n=new Rt;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(o=this._getOrReturnCtx(t,o),ie(o,{code:W.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(o=this._getOrReturnCtx(t,o),ie(o,{code:W.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),ie(o,{code:W.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Ne.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return ie(r,{code:W.invalid_type,expected:ce.bigint,received:r.parsedType}),xe}gte(t,r){return this.setLimit("min",t,!0,me.toString(r))}gt(t,r){return this.setLimit("min",t,!1,me.toString(r))}lte(t,r){return this.setLimit("max",t,!0,me.toString(r))}lt(t,r){return this.setLimit("max",t,!1,me.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:me.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Si.create=e=>{var t;return new Si({checks:[],typeName:z.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!=null?t:!1,...$e(e)})};var ki=class extends Pe{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ce.boolean){let o=this._getOrReturnCtx(t);return ie(o,{code:W.invalid_type,expected:ce.boolean,received:o.parsedType}),xe}return Zt(t.data)}};ki.create=e=>new ki({typeName:z.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...$e(e)});var Ii=class e extends Pe{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ce.date){let i=this._getOrReturnCtx(t);return ie(i,{code:W.invalid_type,expected:ce.date,received:i.parsedType}),xe}if(Number.isNaN(t.data.getTime())){let i=this._getOrReturnCtx(t);return ie(i,{code:W.invalid_date}),xe}let o=new Rt,n;for(let i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),ie(n,{code:W.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),ie(n,{code:W.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):Ne.assertNever(i);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:me.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:me.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Ii.create=e=>new Ii({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:z.ZodDate,...$e(e)});var Ti=class extends Pe{_parse(t){if(this._getType(t)!==ce.symbol){let o=this._getOrReturnCtx(t);return ie(o,{code:W.invalid_type,expected:ce.symbol,received:o.parsedType}),xe}return Zt(t.data)}};Ti.create=e=>new Ti({typeName:z.ZodSymbol,...$e(e)});var aa=class extends Pe{_parse(t){if(this._getType(t)!==ce.undefined){let o=this._getOrReturnCtx(t);return ie(o,{code:W.invalid_type,expected:ce.undefined,received:o.parsedType}),xe}return Zt(t.data)}};aa.create=e=>new aa({typeName:z.ZodUndefined,...$e(e)});var ia=class extends Pe{_parse(t){if(this._getType(t)!==ce.null){let o=this._getOrReturnCtx(t);return ie(o,{code:W.invalid_type,expected:ce.null,received:o.parsedType}),xe}return Zt(t.data)}};ia.create=e=>new ia({typeName:z.ZodNull,...$e(e)});var $i=class extends Pe{constructor(){super(...arguments),this._any=!0}_parse(t){return Zt(t.data)}};$i.create=e=>new $i({typeName:z.ZodAny,...$e(e)});var Mn=class extends Pe{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Zt(t.data)}};Mn.create=e=>new Mn({typeName:z.ZodUnknown,...$e(e)});var Lr=class extends Pe{_parse(t){let r=this._getOrReturnCtx(t);return ie(r,{code:W.invalid_type,expected:ce.never,received:r.parsedType}),xe}};Lr.create=e=>new Lr({typeName:z.ZodNever,...$e(e)});var Ei=class extends Pe{_parse(t){if(this._getType(t)!==ce.undefined){let o=this._getOrReturnCtx(t);return ie(o,{code:W.invalid_type,expected:ce.void,received:o.parsedType}),xe}return Zt(t.data)}};Ei.create=e=>new Ei({typeName:z.ZodVoid,...$e(e)});var Nn=class e extends Pe{_parse(t){let{ctx:r,status:o}=this._processInputParams(t),n=this._def;if(r.parsedType!==ce.array)return ie(r,{code:W.invalid_type,expected:ce.array,received:r.parsedType}),xe;if(n.exactLength!==null){let s=r.data.length>n.exactLength.value,l=r.data.length<n.exactLength.value;(s||l)&&(ie(r,{code:s?W.too_big:W.too_small,minimum:l?n.exactLength.value:void 0,maximum:s?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(ie(r,{code:W.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(ie(r,{code:W.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>n.type._parseAsync(new dr(r,s,r.path,l)))).then(s=>Rt.mergeArray(o,s));let i=[...r.data].map((s,l)=>n.type._parseSync(new dr(r,s,r.path,l)));return Rt.mergeArray(o,i)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:me.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:me.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:me.toString(r)}})}nonempty(t){return this.min(1,t)}};Nn.create=(e,t)=>new Nn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray,...$e(t)});function na(e){if(e instanceof nr){let t={};for(let r in e.shape){let o=e.shape[r];t[r]=_r.create(na(o))}return new nr({...e._def,shape:()=>t})}else return e instanceof Nn?new Nn({...e._def,type:na(e.element)}):e instanceof _r?_r.create(na(e.unwrap())):e instanceof ln?ln.create(na(e.unwrap())):e instanceof sn?sn.create(e.items.map(t=>na(t))):e}var nr=class e extends Pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=Ne.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ce.object){let u=this._getOrReturnCtx(t);return ie(u,{code:W.invalid_type,expected:ce.object,received:u.parsedType}),xe}let{status:o,ctx:n}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Lr&&this._def.unknownKeys==="strip"))for(let u in n.data)s.includes(u)||l.push(u);let d=[];for(let u of s){let m=i[u],c=n.data[u];d.push({key:{status:"valid",value:u},value:m._parse(new dr(n,c,n.path,u)),alwaysSet:u in n.data})}if(this._def.catchall instanceof Lr){let u=this._def.unknownKeys;if(u==="passthrough")for(let m of l)d.push({key:{status:"valid",value:m},value:{status:"valid",value:n.data[m]}});else if(u==="strict")l.length>0&&(ie(n,{code:W.unrecognized_keys,keys:l}),o.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let m of l){let c=n.data[m];d.push({key:{status:"valid",value:m},value:u._parse(new dr(n,c,n.path,m)),alwaysSet:m in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let u=[];for(let m of d){let c=await m.key,p=await m.value;u.push({key:c,value:p,alwaysSet:m.alwaysSet})}return u}).then(u=>Rt.mergeObjectSync(o,u)):Rt.mergeObjectSync(o,d)}get shape(){return this._def.shape()}strict(t){return me.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,o)=>{var i,s,l,d;let n=(l=(s=(i=this._def).errorMap)==null?void 0:s.call(i,r,o).message)!=null?l:o.defaultError;return r.code==="unrecognized_keys"?{message:(d=me.errToObj(t).message)!=null?d:n}:{message:n}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:z.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let o of Ne.objectKeys(t))t[o]&&this.shape[o]&&(r[o]=this.shape[o]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let o of Ne.objectKeys(this.shape))t[o]||(r[o]=this.shape[o]);return new e({...this._def,shape:()=>r})}deepPartial(){return na(this)}partial(t){let r={};for(let o of Ne.objectKeys(this.shape)){let n=this.shape[o];t&&!t[o]?r[o]=n:r[o]=n.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let o of Ne.objectKeys(this.shape))if(t&&!t[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof _r;)i=i._def.innerType;r[o]=i}return new e({...this._def,shape:()=>r})}keyof(){return ww(Ne.objectKeys(this.shape))}};nr.create=(e,t)=>new nr({shape:()=>e,unknownKeys:"strip",catchall:Lr.create(),typeName:z.ZodObject,...$e(t)});nr.strictCreate=(e,t)=>new nr({shape:()=>e,unknownKeys:"strict",catchall:Lr.create(),typeName:z.ZodObject,...$e(t)});nr.lazycreate=(e,t)=>new nr({shape:e,unknownKeys:"strip",catchall:Lr.create(),typeName:z.ZodObject,...$e(t)});var sa=class extends Pe{_parse(t){let{ctx:r}=this._processInputParams(t),o=this._def.options;function n(i){for(let l of i)if(l.result.status==="valid")return l.result;for(let l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=i.map(l=>new rr(l.ctx.common.issues));return ie(r,{code:W.invalid_union,unionErrors:s}),xe}if(r.common.async)return Promise.all(o.map(async i=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(n);{let i,s=[];for(let d of o){let u={...r,common:{...r.common,issues:[]},parent:null},m=d._parseSync({data:r.data,path:r.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let l=s.map(d=>new rr(d));return ie(r,{code:W.invalid_union,unionErrors:l}),xe}}get options(){return this._def.options}};sa.create=(e,t)=>new sa({options:e,typeName:z.ZodUnion,...$e(t)});var an=e=>e instanceof ua?an(e.schema):e instanceof br?an(e.innerType()):e instanceof ca?[e.value]:e instanceof da?e.options:e instanceof pa?Ne.objectValues(e.enum):e instanceof ma?an(e._def.innerType):e instanceof aa?[void 0]:e instanceof ia?[null]:e instanceof _r?[void 0,...an(e.unwrap())]:e instanceof ln?[null,...an(e.unwrap())]:e instanceof du||e instanceof ga?an(e.unwrap()):e instanceof fa?an(e._def.innerType):[],Yg=class e extends Pe{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ce.object)return ie(r,{code:W.invalid_type,expected:ce.object,received:r.parsedType}),xe;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ie(r,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,o){let n=new Map;for(let i of r){let s=an(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let l of s){if(n.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);n.set(l,i)}}return new e({typeName:z.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...$e(o)})}};function Xg(e,t){let r=on(e),o=on(t);if(e===t)return{valid:!0,data:e};if(r===ce.object&&o===ce.object){let n=Ne.objectKeys(t),i=Ne.objectKeys(e).filter(l=>n.indexOf(l)!==-1),s={...e,...t};for(let l of i){let d=Xg(e[l],t[l]);if(!d.valid)return{valid:!1};s[l]=d.data}return{valid:!0,data:s}}else if(r===ce.array&&o===ce.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let i=0;i<e.length;i++){let s=e[i],l=t[i],d=Xg(s,l);if(!d.valid)return{valid:!1};n.push(d.data)}return{valid:!0,data:n}}else return r===ce.date&&o===ce.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var la=class extends Pe{_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=(i,s)=>{if(Jg(i)||Jg(s))return xe;let l=Xg(i.value,s.value);return l.valid?((Wg(i)||Wg(s))&&r.dirty(),{status:r.value,value:l.data}):(ie(o,{code:W.invalid_intersection_types}),xe)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,s])=>n(i,s)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};la.create=(e,t,r)=>new la({left:e,right:t,typeName:z.ZodIntersection,...$e(r)});var sn=class e extends Pe{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ce.array)return ie(o,{code:W.invalid_type,expected:ce.array,received:o.parsedType}),xe;if(o.data.length<this._def.items.length)return ie(o,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&o.data.length>this._def.items.length&&(ie(o,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((s,l)=>{let d=this._def.items[l]||this._def.rest;return d?d._parse(new dr(o,s,o.path,l)):null}).filter(s=>!!s);return o.common.async?Promise.all(i).then(s=>Rt.mergeArray(r,s)):Rt.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};sn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sn({items:e,typeName:z.ZodTuple,rest:null,...$e(t)})};var Qg=class e extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ce.object)return ie(o,{code:W.invalid_type,expected:ce.object,received:o.parsedType}),xe;let n=[],i=this._def.keyType,s=this._def.valueType;for(let l in o.data)n.push({key:i._parse(new dr(o,l,o.path,l)),value:s._parse(new dr(o,o.data[l],o.path,l)),alwaysSet:l in o.data});return o.common.async?Rt.mergeObjectAsync(r,n):Rt.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,o){return r instanceof Pe?new e({keyType:t,valueType:r,typeName:z.ZodRecord,...$e(o)}):new e({keyType:oa.create(),valueType:t,typeName:z.ZodRecord,...$e(r)})}},Ci=class extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ce.map)return ie(o,{code:W.invalid_type,expected:ce.map,received:o.parsedType}),xe;let n=this._def.keyType,i=this._def.valueType,s=[...o.data.entries()].map(([l,d],u)=>({key:n._parse(new dr(o,l,o.path,[u,"key"])),value:i._parse(new dr(o,d,o.path,[u,"value"]))}));if(o.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let d of s){let u=await d.key,m=await d.value;if(u.status==="aborted"||m.status==="aborted")return xe;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let d of s){let u=d.key,m=d.value;if(u.status==="aborted"||m.status==="aborted")return xe;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}}}};Ci.create=(e,t,r)=>new Ci({valueType:t,keyType:e,typeName:z.ZodMap,...$e(r)});var Ai=class e extends Pe{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ce.set)return ie(o,{code:W.invalid_type,expected:ce.set,received:o.parsedType}),xe;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(ie(o,{code:W.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(ie(o,{code:W.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function s(d){let u=new Set;for(let m of d){if(m.status==="aborted")return xe;m.status==="dirty"&&r.dirty(),u.add(m.value)}return{status:r.value,value:u}}let l=[...o.data.values()].map((d,u)=>i._parse(new dr(o,d,o.path,u)));return o.common.async?Promise.all(l).then(d=>s(d)):s(l)}min(t,r){return new e({...this._def,minSize:{value:t,message:me.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:me.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Ai.create=(e,t)=>new Ai({valueType:e,minSize:null,maxSize:null,typeName:z.ZodSet,...$e(t)});var eh=class e extends Pe{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ce.function)return ie(r,{code:W.invalid_type,expected:ce.function,received:r.parsedType}),xe;function o(l,d){return cu({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bi(),Rn].filter(u=>!!u),issueData:{code:W.invalid_arguments,argumentsError:d}})}function n(l,d){return cu({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bi(),Rn].filter(u=>!!u),issueData:{code:W.invalid_return_type,returnTypeError:d}})}let i={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof oo){let l=this;return Zt(async function(...d){let u=new rr([]),m=await l._def.args.parseAsync(d,i).catch(f=>{throw u.addIssue(o(d,f)),u}),c=await Reflect.apply(s,this,m);return await l._def.returns._def.type.parseAsync(c,i).catch(f=>{throw u.addIssue(n(c,f)),u})})}else{let l=this;return Zt(function(...d){let u=l._def.args.safeParse(d,i);if(!u.success)throw new rr([o(d,u.error)]);let m=Reflect.apply(s,this,u.data),c=l._def.returns.safeParse(m,i);if(!c.success)throw new rr([n(m,c.error)]);return c.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:sn.create(t).rest(Mn.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,o){return new e({args:t||sn.create([]).rest(Mn.create()),returns:r||Mn.create(),typeName:z.ZodFunction,...$e(o)})}},ua=class extends Pe{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ua.create=(e,t)=>new ua({getter:e,typeName:z.ZodLazy,...$e(t)});var ca=class extends Pe{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return ie(r,{received:r.data,code:W.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:t.data}}get value(){return this._def.value}};ca.create=(e,t)=>new ca({value:e,typeName:z.ZodLiteral,...$e(t)});function ww(e,t){return new da({values:e,typeName:z.ZodEnum,...$e(t)})}var da=class e extends Pe{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),o=this._def.values;return ie(r,{expected:Ne.joinValues(o),received:r.parsedType,code:W.invalid_type}),xe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),o=this._def.values;return ie(r,{received:r.data,code:W.invalid_enum_value,options:o}),xe}return Zt(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(o=>!t.includes(o)),{...this._def,...r})}};da.create=ww;var pa=class extends Pe{_parse(t){let r=Ne.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==ce.string&&o.parsedType!==ce.number){let n=Ne.objectValues(r);return ie(o,{expected:Ne.joinValues(n),received:o.parsedType,code:W.invalid_type}),xe}if(this._cache||(this._cache=new Set(Ne.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let n=Ne.objectValues(r);return ie(o,{received:o.data,code:W.invalid_enum_value,options:n}),xe}return Zt(t.data)}get enum(){return this._def.values}};pa.create=(e,t)=>new pa({values:e,typeName:z.ZodNativeEnum,...$e(t)});var oo=class extends Pe{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ce.promise&&r.common.async===!1)return ie(r,{code:W.invalid_type,expected:ce.promise,received:r.parsedType}),xe;let o=r.parsedType===ce.promise?r.data:Promise.resolve(r.data);return Zt(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};oo.create=(e,t)=>new oo({type:e,typeName:z.ZodPromise,...$e(t)});var br=class extends Pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=this._def.effect||null,i={addIssue:s=>{ie(o,s),s.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let s=n.transform(o.data,i);if(o.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return xe;let d=await this._def.schema._parseAsync({data:l,path:o.path,parent:o});return d.status==="aborted"?xe:d.status==="dirty"?ra(d.value):r.value==="dirty"?ra(d.value):d});{if(r.value==="aborted")return xe;let l=this._def.schema._parseSync({data:s,path:o.path,parent:o});return l.status==="aborted"?xe:l.status==="dirty"?ra(l.value):r.value==="dirty"?ra(l.value):l}}if(n.type==="refinement"){let s=l=>{let d=n.refinement(l,i);if(o.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(o.common.async===!1){let l=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(l=>l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(n.type==="transform")if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!no(s))return xe;let l=n.transform(s.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>no(s)?Promise.resolve(n.transform(s.value,i)).then(l=>({status:r.value,value:l})):xe);Ne.assertNever(n)}};br.create=(e,t,r)=>new br({schema:e,typeName:z.ZodEffects,effect:t,...$e(r)});br.createWithPreprocess=(e,t,r)=>new br({schema:t,effect:{type:"preprocess",transform:e},typeName:z.ZodEffects,...$e(r)});var _r=class extends Pe{_parse(t){return this._getType(t)===ce.undefined?Zt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};_r.create=(e,t)=>new _r({innerType:e,typeName:z.ZodOptional,...$e(t)});var ln=class extends Pe{_parse(t){return this._getType(t)===ce.null?Zt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ln.create=(e,t)=>new ln({innerType:e,typeName:z.ZodNullable,...$e(t)});var ma=class extends Pe{_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return r.parsedType===ce.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ma.create=(e,t)=>new ma({innerType:e,typeName:z.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...$e(t)});var fa=class extends Pe{_parse(t){let{ctx:r}=this._processInputParams(t),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return xi(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rr(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new rr(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};fa.create=(e,t)=>new fa({innerType:e,typeName:z.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...$e(t)});var Pi=class extends Pe{_parse(t){if(this._getType(t)!==ce.nan){let o=this._getOrReturnCtx(t);return ie(o,{code:W.invalid_type,expected:ce.nan,received:o.parsedType}),xe}return{status:"valid",value:t.data}}};Pi.create=e=>new Pi({typeName:z.ZodNaN,...$e(e)});var du=class extends Pe{_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},pu=class e extends Pe{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?xe:i.status==="dirty"?(r.dirty(),ra(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?xe:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(t,r){return new e({in:t,out:r,typeName:z.ZodPipeline})}},ga=class extends Pe{_parse(t){let r=this._def.innerType._parse(t),o=n=>(no(n)&&(n.value=Object.freeze(n.value)),n);return xi(r)?r.then(n=>o(n)):o(r)}unwrap(){return this._def.innerType}};ga.create=(e,t)=>new ga({innerType:e,typeName:z.ZodReadonly,...$e(t)});var cV={object:nr.lazycreate},z;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(z||(z={}));var dV=oa.create,pV=wi.create,mV=Pi.create,fV=Si.create,gV=ki.create,hV=Ii.create,vV=Ti.create,yV=aa.create,_V=ia.create,bV=$i.create,xV=Mn.create,wV=Lr.create,SV=Ei.create,kV=Nn.create,IV=nr.create,TV=nr.strictCreate,$V=sa.create,EV=Yg.create,CV=la.create,AV=sn.create,PV=Qg.create,OV=Ci.create,RV=Ai.create,MV=eh.create,NV=ua.create,jV=ca.create,DV=da.create,zV=pa.create,UV=oo.create,FV=br.create,LV=_r.create,qV=ln.create,ZV=br.createWithPreprocess,VV=pu.create;var mu=class extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function th(e){}function Sw(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=th,onError:r=th,onRetry:o=th,onComment:n}=e,i="",s=!0,l,d="",u="";function m(g){let y=s?g.replace(/^\xEF\xBB\xBF/,""):g,[S,b]=UP(`${i}${y}`);for(let _ of S)c(_);i=b,s=!1}function c(g){if(g===""){f();return}if(g.startsWith(":")){n&&n(g.slice(g.startsWith(": ")?2:1));return}let y=g.indexOf(":");if(y!==-1){let S=g.slice(0,y),b=g[y+1]===" "?2:1,_=g.slice(y+b);p(S,_,g);return}p(g,"",g)}function p(g,y,S){switch(g){case"event":u=y;break;case"data":d=`${d}${y}
`;break;case"id":l=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?o(parseInt(y,10)):r(new mu(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:S}));break;default:r(new mu(`Unknown field "${g.length>20?`${g.slice(0,20)}\u2026`:g}"`,{type:"unknown-field",field:g,value:y,line:S}));break}}function f(){d.length>0&&t({id:l,event:u||void 0,data:d.endsWith(`
`)?d.slice(0,-1):d}),l=void 0,d="",u=""}function v(g={}){i&&g.consume&&c(i),s=!0,l=void 0,d="",u="",i=""}return{feed:m,reset:v}}function UP(e){let t=[],r="",o=0;for(;o<e.length;){let n=e.indexOf("\r",o),i=e.indexOf(`
`,o),s=-1;if(n!==-1&&i!==-1?s=Math.min(n,i):n!==-1?n===e.length-1?s=-1:s=n:i!==-1&&(s=i),s===-1){r=e.slice(o);break}else{let l=e.slice(o,s);t.push(l),o=s+1,e[o-1]==="\r"&&e[o]===`
`&&o++}}return[t,r]}var fu=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:o}={}){let n;super({start(i){n=Sw({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:r,onComment:o})},transform(i){n.feed(i)}})}};function _e(...e){return e.reduce((t,r)=>({...t,...r!=null?r:{}}),{})}function gu({tools:e=[],providerToolNames:t}){let r={},o={};for(let n of e)if(n.type==="provider"&&n.id in t){let i=t[n.id];r[n.name]=i,o[i]=n.name}return{toProviderToolName:n=>{var i;return(i=r[n])!=null?i:n},toCustomToolName:n=>{var i;return(i=o[n])!=null?i:n}}}async function hu(e,t){if(e==null)return Promise.resolve();let r=t==null?void 0:t.abortSignal;return new Promise((o,n)=>{if(r!=null&&r.aborted){n(kw());return}let i=setTimeout(()=>{s(),o()},e),s=()=>{clearTimeout(i),r==null||r.removeEventListener("abort",l)},l=()=>{s(),n(kw())};r==null||r.addEventListener("abort",l)})}function kw(){return new DOMException("Delay was aborted","AbortError")}var so=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function ha(e){return Object.fromEntries([...e.headers])}var{btoa:FP,atob:LP}=globalThis;function ar(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=LP(t);return Uint8Array.from(r,o=>o.codePointAt(0))}function pr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return FP(t)}function kt(e){return e instanceof Uint8Array?pr(e):e}function vu(e,t={}){let{useArrayBrackets:r=!0}=t,o=new FormData;for(let[n,i]of Object.entries(e))if(i!=null){if(Array.isArray(i)){if(i.length===1){o.append(n,i[0]);continue}let s=r?`${n}[]`:n;for(let l of i)o.append(s,l);continue}o.append(n,i)}return o}var Aw="AI_DownloadError",Pw=`vercel.ai.error.${Aw}`,qP=Symbol.for(Pw),Iw,Tw,io=class extends(Tw=oe,Iw=qP,Tw){constructor({url:e,statusCode:t,statusText:r,cause:o,message:n=o==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${o}`}){super({name:Aw,message:n,cause:o}),this[Iw]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return oe.hasMarker(e,Pw)}};async function Oi(e){try{let t=await fetch(e);if(!t.ok)throw new io({url:e,statusCode:t.status,statusText:t.statusText});return await t.blob()}catch(t){throw io.isInstance(t)?t:new io({url:e,cause:t})}}var qr=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=()=>{let i=r.length,s=new Array(t);for(let l=0;l<t;l++)s[l]=r[Math.random()*i|0];return s.join("")};if(e==null)return n;if(r.includes(o))throw new Io({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},Fe=qr();function va(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function un(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var ZP=["fetch failed","failed to fetch"],VP=["ConnectionRefused","ConnectionClosed","FailedToOpenSocket","ECONNRESET","ECONNREFUSED","ETIMEDOUT","EPIPE"];function GP(e){if(!(e instanceof Error))return!1;let t=e.code;return!!(typeof t=="string"&&VP.includes(t))}function Ow({error:e,url:t,requestBodyValues:r}){if(un(e))return e;if(e instanceof TypeError&&ZP.includes(e.message.toLowerCase())){let o=e.cause;if(o!=null)return new Ye({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r,isRetryable:!0})}return GP(e)?new Ye({message:`Cannot connect to API: ${e.message}`,cause:e,url:t,requestBodyValues:r,isRetryable:!0}):e}function yu(e=globalThis){var t,r,o;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(o=(r=e.process)==null?void 0:r.versions)!=null&&o.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function HP(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((r,o)=>{t[o.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(let[r,o]of e)o!=null&&(t[r.toLowerCase()]=o)}return t}function Ct(e,...t){let r=new Headers(HP(e)),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var Rw="4.0.14",BP=()=>globalThis.fetch,Ri=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:o,abortSignal:n,fetch:i=BP()})=>{try{let s=await i(e,{method:"GET",headers:Ct(t,`ai-sdk/provider-utils/${Rw}`,yu()),signal:n}),l=ha(s);if(!s.ok){let d;try{d=await o({response:s,url:e,requestBodyValues:{}})}catch(u){throw un(u)||Ye.isInstance(u)?u:new Ye({message:"Failed to process error response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:{}})}throw d.value}try{return await r({response:s,url:e,requestBodyValues:{}})}catch(d){throw d instanceof Error&&(un(d)||Ye.isInstance(d))?d:new Ye({message:"Failed to process successful response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:{}})}}catch(s){throw Ow({error:s,url:e,requestBodyValues:{}})}};function _u(e){return e!=null}function Mw({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([o,n])=>{let i=o.toLowerCase();return i==="*"||i==="*/*"?{mediaTypePrefix:"",regexes:n}:{mediaTypePrefix:i.replace(/\*/,""),regexes:n}}).filter(({mediaTypePrefix:o})=>e.startsWith(o)).flatMap(({regexes:o})=>o).some(o=>o.test(t))}function ya({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:o}){if(typeof e=="string")return e;if(e!=null)throw new qa({message:`${o} API key must be a string.`});if(typeof process=="undefined")throw new qa({message:`${o} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new qa({message:`${o} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new qa({message:`${o} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function cn({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process=="undefined")&&(e=process.env[t],!(e==null||typeof e!="string")))return e}function Nw(e){var t;let[r,o=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[o])!=null?t:o}var JP=/"__proto__"\s*:/,WP=/"constructor"\s*:/;function $w(e){let t=JSON.parse(e);return t===null||typeof t!="object"||JP.test(e)===!1&&WP.test(e)===!1?t:KP(t)}function KP(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}function ih(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(r){return $w(e)}try{return $w(e)}finally{Error.stackTraceLimit=t}}function sh(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;let{properties:r}=e;if(r!=null)for(let o of Object.keys(r))r[o]=ao(r[o])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(ao):ao(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(ao)),e.allOf!=null&&(e.allOf=e.allOf.map(ao)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(ao));let{definitions:t}=e;if(t!=null)for(let r of Object.keys(t))t[r]=ao(t[r]);return e}function ao(e){return typeof e=="boolean"?e:sh(e)}var YP=Symbol("Let zodToJsonSchema decide on which parser to use"),Ew={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},XP=e=>typeof e=="string"?{...Ew,name:e}:{...Ew,...e};function or(){return{}}function QP(e,t){var r,o,n;let i={type:"array"};return(r=e.type)!=null&&r._def&&((n=(o=e.type)==null?void 0:o._def)==null?void 0:n.typeName)!==z.ZodAny&&(i.items=Be(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function eO(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function tO(){return{type:"boolean"}}function jw(e,t){return Be(e.type._def,t)}var rO=(e,t)=>Be(e.innerType._def,t);function Dw(e,t,r){let o=r!=null?r:t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>Dw(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return nO(e)}}var nO=e=>{let t={type:"integer",format:"unix-time"};for(let r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function oO(e,t){return{...Be(e.innerType._def,t),default:e.defaultValue()}}function aO(e,t){return t.effectStrategy==="input"?Be(e.schema._def,t):or()}function iO(e){return{type:"string",enum:Array.from(e.values)}}var sO=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function lO(e,t){let r=[Be(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Be(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),o=[];return r.forEach(n=>{if(sO(n))o.push(...n.allOf);else{let i=n;if("additionalProperties"in n&&n.additionalProperties===!1){let{additionalProperties:s,...l}=n;i=l}o.push(i)}}),o.length?{allOf:o}:void 0}function uO(e){let t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var rh=void 0,xr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(rh===void 0&&(rh=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),rh),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function zw(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"email":switch(t.emailStrategy){case"format:email":wr(r,"email",o.message,t);break;case"format:idn-email":wr(r,"idn-email",o.message,t);break;case"pattern:zod":Vt(r,xr.email,o.message,t);break}break;case"url":wr(r,"uri",o.message,t);break;case"uuid":wr(r,"uuid",o.message,t);break;case"regex":Vt(r,o.regex,o.message,t);break;case"cuid":Vt(r,xr.cuid,o.message,t);break;case"cuid2":Vt(r,xr.cuid2,o.message,t);break;case"startsWith":Vt(r,RegExp(`^${nh(o.value,t)}`),o.message,t);break;case"endsWith":Vt(r,RegExp(`${nh(o.value,t)}$`),o.message,t);break;case"datetime":wr(r,"date-time",o.message,t);break;case"date":wr(r,"date",o.message,t);break;case"time":wr(r,"time",o.message,t);break;case"duration":wr(r,"duration",o.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"includes":{Vt(r,RegExp(nh(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&wr(r,"ipv4",o.message,t),o.version!=="v4"&&wr(r,"ipv6",o.message,t);break}case"base64url":Vt(r,xr.base64url,o.message,t);break;case"jwt":Vt(r,xr.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&Vt(r,xr.ipv4Cidr,o.message,t),o.version!=="v4"&&Vt(r,xr.ipv6Cidr,o.message,t);break}case"emoji":Vt(r,xr.emoji(),o.message,t);break;case"ulid":{Vt(r,xr.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{wr(r,"binary",o.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Vt(r,xr.base64,o.message,t);break}}break}case"nanoid":Vt(r,xr.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function nh(e,t){return t.patternStrategy==="escape"?dO(e):e}var cO=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function dO(e){let t="";for(let r=0;r<e.length;r++)cO.has(e[r])||(t+="\\"),t+=e[r];return t}function wr(e,t,r,o){var n;e.format||(n=e.anyOf)!=null&&n.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&o.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function Vt(e,t,r,o){var n;e.pattern||(n=e.allOf)!=null&&n.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Cw(t,o),...r&&o.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=Cw(t,o)}function Cw(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let o={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=o.i?e.source.toLowerCase():e.source,i="",s=!1,l=!1,d=!1;for(let u=0;u<n.length;u++){if(s){i+=n[u],s=!1;continue}if(o.i){if(l){if(n[u].match(/[a-z]/)){d?(i+=n[u],i+=`${n[u-2]}-${n[u]}`.toUpperCase(),d=!1):n[u+1]==="-"&&((r=n[u+2])!=null&&r.match(/[a-z]/))?(i+=n[u],d=!0):i+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){i+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(o.m){if(n[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(o.s&&n[u]==="."){i+=l?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}i+=n[u],n[u]==="\\"?s=!0:l&&n[u]==="]"?l=!1:!l&&n[u]==="["&&(l=!0)}try{new RegExp(i)}catch(u){return e.source}return i}function Uw(e,t){var r,o,n,i,s,l;let d={type:"object",additionalProperties:(r=Be(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((o=e.keyType)==null?void 0:o._def.typeName)===z.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){let{type:u,...m}=zw(e.keyType._def,t);return{...d,propertyNames:m}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===z.ZodEnum)return{...d,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===z.ZodBranded&&e.keyType._def.type._def.typeName===z.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){let{type:u,...m}=jw(e.keyType._def,t);return{...d,propertyNames:m}}}return d}function pO(e,t){if(t.mapStrategy==="record")return Uw(e,t);let r=Be(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||or(),o=Be(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||or();return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}function mO(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}function fO(){return{not:or()}}function gO(){return{type:"null"}}var oh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function hO(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in oh&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let s=oh[i._def.typeName];return s&&!n.includes(s)?[...n,s]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...n,s];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];default:return n}},[]);if(o.length===r.length){let n=o.filter((i,s,l)=>l.indexOf(i)===s);return{type:n.length>1?n:n[0],enum:r.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return vO(e,t)}var vO=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>Be(o._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0};function yO(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[oh[e.innerType._def.typeName],"null"]};let r=Be(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function _O(e){let t={type:"number"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function bO(e,t){let r={type:"object",properties:{}},o=[],n=e.shape();for(let s in n){let l=n[s];if(l===void 0||l._def===void 0)continue;let d=wO(l),u=Be(l._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});u!==void 0&&(r.properties[s]=u,d||o.push(s))}o.length&&(r.required=o);let i=xO(e,t);return i!==void 0&&(r.additionalProperties=i),r}function xO(e,t){if(e.catchall._def.typeName!=="ZodNever")return Be(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function wO(e){try{return e.isOptional()}catch(t){return!0}}var SO=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Be(e.innerType._def,t);let o=Be(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return o?{anyOf:[{not:or()},o]}:or()},kO=(e,t)=>{if(t.pipeStrategy==="input")return Be(e.in._def,t);if(t.pipeStrategy==="output")return Be(e.out._def,t);let r=Be(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=Be(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(n=>n!==void 0)}};function IO(e,t){return Be(e.type._def,t)}function TO(e,t){let o={type:"array",uniqueItems:!0,items:Be(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(o.minItems=e.minSize.value),e.maxSize&&(o.maxItems=e.maxSize.value),o}function $O(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>Be(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:Be(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>Be(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[])}}function EO(){return{not:or()}}function CO(){return or()}var AO=(e,t)=>Be(e.innerType._def,t),PO=(e,t,r)=>{switch(t){case z.ZodString:return zw(e,r);case z.ZodNumber:return _O(e);case z.ZodObject:return bO(e,r);case z.ZodBigInt:return eO(e);case z.ZodBoolean:return tO();case z.ZodDate:return Dw(e,r);case z.ZodUndefined:return EO();case z.ZodNull:return gO();case z.ZodArray:return QP(e,r);case z.ZodUnion:case z.ZodDiscriminatedUnion:return hO(e,r);case z.ZodIntersection:return lO(e,r);case z.ZodTuple:return $O(e,r);case z.ZodRecord:return Uw(e,r);case z.ZodLiteral:return uO(e);case z.ZodEnum:return iO(e);case z.ZodNativeEnum:return mO(e);case z.ZodNullable:return yO(e,r);case z.ZodOptional:return SO(e,r);case z.ZodMap:return pO(e,r);case z.ZodSet:return TO(e,r);case z.ZodLazy:return()=>e.getter()._def;case z.ZodPromise:return IO(e,r);case z.ZodNaN:case z.ZodNever:return fO();case z.ZodEffects:return aO(e,r);case z.ZodAny:return or();case z.ZodUnknown:return CO();case z.ZodDefault:return oO(e,r);case z.ZodBranded:return jw(e,r);case z.ZodReadonly:return AO(e,r);case z.ZodCatch:return rO(e,r);case z.ZodPipeline:return kO(e,r);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(o=>{})(t)}},OO=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function Be(e,t,r=!1){var o;let n=t.seen.get(e);if(t.override){let d=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(d!==YP)return d}if(n&&!r){let d=RO(n,t);if(d!==void 0)return d}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=PO(e,e.typeName,t),l=typeof s=="function"?Be(s(),t):s;if(l&&MO(e,t,l),t.postProcess){let d=t.postProcess(l,e,t);return i.jsonSchema=l,d}return i.jsonSchema=l,l}var RO=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:OO(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)||t.$refStrategy==="seen"?or():void 0}},MO=(e,t,r)=>(e.description&&(r.description=e.description),r),NO=e=>{let t=XP(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))}},jO=(e,t)=>{var r;let o=NO(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[m,c])=>{var p;return{...u,[m]:(p=Be(c._def,{...o,currentPath:[...o.basePath,o.definitionPath,m]},!0))!=null?p:or()}},{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=(r=Be(e._def,i===void 0?o:{...o,currentPath:[...o.basePath,o.definitionPath,i]},!1))!=null?r:or(),l=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;l!==void 0&&(s.title=l);let d=i===void 0?n?{...s,[o.definitionPath]:n}:s:{$ref:[...o.$refStrategy==="relative"?[]:o.basePath,o.definitionPath,i].join("/"),[o.definitionPath]:{...n,[i]:s}};return d.$schema="http://json-schema.org/draft-07/schema#",d},ah=Symbol.for("vercel.ai.schema");function O(e){let t;return()=>(t==null&&(t=e()),t)}function Mi(e,{validate:t}={}){return{[ah]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function DO(e){return typeof e=="object"&&e!==null&&ah in e&&e[ah]===!0&&"jsonSchema"in e&&"validate"in e}function Zr(e){return e==null?Mi({properties:{},additionalProperties:!1}):DO(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?A(e):zO(e):e()}function zO(e){return Mi(()=>sh(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{let r=await e["~standard"].validate(t);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new hr({value:t,cause:r.issues})}}})}function UO(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Mi(()=>jO(e,{$refStrategy:o?"root":"none"}),{validate:async n=>{let i=await e.safeParseAsync(n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function FO(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Mi(()=>sh(On(e,{target:"draft-7",io:"input",reused:o?"ref":"inline"})),{validate:async n=>{let i=await eo(e,n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function LO(e){return"_zod"in e}function A(e,t){return LO(e)?FO(e,t):UO(e,t)}async function Je({value:e,schema:t,context:r}){let o=await Mt({value:e,schema:t,context:r});if(!o.success)throw hr.wrap({value:e,cause:o.error,context:r});return o.value}async function Mt({value:e,schema:t,context:r}){let o=Zr(t);try{if(o.validate==null)return{success:!0,value:e,rawValue:e};let n=await o.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:hr.wrap({value:e,cause:n.error,context:r}),rawValue:e}}catch(n){return{success:!1,error:hr.wrap({value:e,cause:n,context:r}),rawValue:e}}}async function qO({text:e,schema:t}){try{let r=ih(e);return t==null?r:Je({value:r,schema:t})}catch(r){throw La.isInstance(r)||hr.isInstance(r)?r:new La({text:e,cause:r})}}async function Yt({text:e,schema:t}){try{let r=ih(e);return t==null?{success:!0,value:r,rawValue:r}:await Mt({value:r,schema:t})}catch(r){return{success:!1,error:La.isInstance(r)?r:new La({text:e,cause:r}),rawValue:void 0}}}function _a(e){try{return ih(e),!0}catch(t){return!1}}function Fw({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new fu).pipeThrough(new TransformStream({async transform({data:r},o){r!=="[DONE]"&&o.enqueue(await Yt({text:r,schema:t}))}}))}async function Ee({provider:e,providerOptions:t,schema:r}){if((t==null?void 0:t[e])==null)return;let o=await Mt({value:t[e],schema:r});if(!o.success)throw new Io({argument:"providerOptions",message:`invalid ${e} provider options`,cause:o.error});return o.value}var ZO=()=>globalThis.fetch,we=async({url:e,headers:t,body:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>Lw({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s}),ba=async({url:e,headers:t,formData:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>Lw({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s}),Lw=async({url:e,headers:t={},body:r,successfulResponseHandler:o,failedResponseHandler:n,abortSignal:i,fetch:s=ZO()})=>{try{let l=await s(e,{method:"POST",headers:Ct(t,`ai-sdk/provider-utils/${Rw}`,yu()),body:r.content,signal:i}),d=ha(l);if(!l.ok){let u;try{u=await n({response:l,url:e,requestBodyValues:r.values})}catch(m){throw un(m)||Ye.isInstance(m)?m:new Ye({message:"Failed to process error response",cause:m,statusCode:l.status,url:e,responseHeaders:d,requestBodyValues:r.values})}throw u.value}try{return await o({response:l,url:e,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&(un(u)||Ye.isInstance(u))?u:new Ye({message:"Failed to process successful response",cause:u,statusCode:l.status,url:e,responseHeaders:d,requestBodyValues:r.values})}}catch(l){throw Ow({error:l,url:e,requestBodyValues:r.values})}};function Le({id:e,inputSchema:t}){return({execute:r,outputSchema:o,needsApproval:n,toModelOutput:i,onInputStart:s,onInputDelta:l,onInputAvailable:d,...u})=>({type:"provider",id:e,args:u,inputSchema:t,outputSchema:o,execute:r,needsApproval:n,toModelOutput:i,onInputStart:s,onInputDelta:l,onInputAvailable:d})}function je({id:e,inputSchema:t,outputSchema:r,supportsDeferredResults:o}){return({execute:n,needsApproval:i,toModelOutput:s,onInputStart:l,onInputDelta:d,onInputAvailable:u,...m})=>({type:"provider",id:e,args:m,inputSchema:t,outputSchema:r,execute:n,needsApproval:i,toModelOutput:s,onInputStart:l,onInputDelta:d,onInputAvailable:u,supportsDeferredResults:o})}async function ze(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ot=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:o,url:n,requestBodyValues:i})=>{let s=await o.text(),l=ha(o);if(s.trim()==="")return{responseHeaders:l,value:new Ye({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:l,responseBody:s,isRetryable:r==null?void 0:r(o)})};try{let d=await qO({text:s,schema:e});return{responseHeaders:l,value:new Ye({message:t(d),url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:l,responseBody:s,data:d,isRetryable:r==null?void 0:r(o,d)})}}catch(d){return{responseHeaders:l,value:new Ye({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:l,responseBody:s,isRetryable:r==null?void 0:r(o)})}}},Nt=e=>async({response:t})=>{let r=ha(t);if(t.body==null)throw new a_({});return{responseHeaders:r,value:Fw({stream:t.body,schema:e})}},ke=e=>async({response:t,url:r,requestBodyValues:o})=>{let n=await t.text(),i=await Yt({text:n,schema:e}),s=ha(t);if(!i.success)throw new Ye({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:n,url:r,requestBodyValues:o});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},qw=()=>async({response:e,url:t,requestBodyValues:r})=>{let o=ha(e);if(!e.body)throw new Ye({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:o,responseBody:void 0});try{let n=await e.arrayBuffer();return{responseHeaders:o,value:new Uint8Array(n)}}catch(n){throw new Ye({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:o,responseBody:void 0,cause:n})}};function Vr(e){return e==null?void 0:e.replace(/\/$/,"")}function VO(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*Zw({execute:e,input:t,options:r}){let o=e(t,r);if(VO(o)){let n;for await(let i of o)n=i,yield{type:"preliminary",output:i};yield{type:"final",output:n}}else yield{type:"final",output:await o}}var ch=a.object({error:a.object({message:a.string(),type:a.string().nullish(),param:a.any().nullish(),code:a.union([a.string(),a.number()]).nullish()})}),Sr=ot({errorSchema:ch,errorToMessage:e=>e.error.message});function aS(e){let t=e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),r=e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini"),o=e.startsWith("o1")||e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("codex-mini")||e.startsWith("computer-use-preview")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),n=e.startsWith("gpt-5.1")||e.startsWith("gpt-5.2");return{supportsFlexProcessing:t,supportsPriorityProcessing:r,isReasoningModel:o,systemMessageMode:o?"developer":"system",supportsNonReasoningParameters:n}}function Vw(e){var t,r,o,n,i,s;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let l=(t=e.prompt_tokens)!=null?t:0,d=(r=e.completion_tokens)!=null?r:0,u=(n=(o=e.prompt_tokens_details)==null?void 0:o.cached_tokens)!=null?n:0,m=(s=(i=e.completion_tokens_details)==null?void 0:i.reasoning_tokens)!=null?s:0;return{inputTokens:{total:l,noCache:l-u,cacheRead:u,cacheWrite:void 0},outputTokens:{total:d,text:d-m,reasoning:m},raw:e}}function GO({prompt:e,systemMessageMode:t="system"}){var r;let o=[],n=[];for(let{role:i,content:s}of e)switch(i){case"system":{switch(t){case"system":{o.push({role:"system",content:s});break}case"developer":{o.push({role:"developer",content:s});break}case"remove":{n.push({type:"other",message:"system messages are removed for this model"});break}default:{let l=t;throw new Error(`Unsupported system message mode: ${l}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){o.push({role:"user",content:s[0].text});break}o.push({role:"user",content:s.map((l,d)=>{var u,m,c;switch(l.type){case"text":return{type:"text",text:l.text};case"file":if(l.mediaType.startsWith("image/")){let p=l.mediaType==="image/*"?"image/jpeg":l.mediaType;return{type:"image_url",image_url:{url:l.data instanceof URL?l.data.toString():`data:${p};base64,${kt(l.data)}`,detail:(m=(u=l.providerOptions)==null?void 0:u.openai)==null?void 0:m.imageDetail}}}else if(l.mediaType.startsWith("audio/")){if(l.data instanceof URL)throw new Re({functionality:"audio file parts with URLs"});switch(l.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:kt(l.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:kt(l.data),format:"mp3"}};default:throw new Re({functionality:`audio content parts with media type ${l.mediaType}`})}}else if(l.mediaType==="application/pdf"){if(l.data instanceof URL)throw new Re({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof l.data=="string"&&l.data.startsWith("file-")?{file_id:l.data}:{filename:(c=l.filename)!=null?c:`part-${d}.pdf`,file_data:`data:application/pdf;base64,${kt(l.data)}`}}}else throw new Re({functionality:`file part media type ${l.mediaType}`})}})});break}case"assistant":{let l="",d=[];for(let u of s)switch(u.type){case"text":{l+=u.text;break}case"tool-call":{d.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.input)}});break}}o.push({role:"assistant",content:l,tool_calls:d.length>0?d:void 0});break}case"tool":{for(let l of s){if(l.type==="tool-approval-response")continue;let d=l.output,u;switch(d.type){case"text":case"error-text":u=d.value;break;case"execution-denied":u=(r=d.reason)!=null?r:"Tool execution denied.";break;case"content":case"json":case"error-json":u=JSON.stringify(d.value);break}o.push({role:"tool",tool_call_id:l.toolCallId,content:u})}break}default:{let l=i;throw new Error(`Unsupported role: ${l}`)}}return{messages:o,warnings:n}}function lh({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r?new Date(r*1e3):void 0}}function Gw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var HO=O(()=>A(a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({message:a.object({role:a.literal("assistant").nullish(),content:a.string().nullish(),tool_calls:a.array(a.object({id:a.string().nullish(),type:a.literal("function"),function:a.object({name:a.string(),arguments:a.string()})})).nullish(),annotations:a.array(a.object({type:a.literal("url_citation"),url_citation:a.object({start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()})})).nullish()}),index:a.number(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish()}).nullish(),finish_reason:a.string().nullish()})),usage:a.object({prompt_tokens:a.number().nullish(),completion_tokens:a.number().nullish(),total_tokens:a.number().nullish(),prompt_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),completion_tokens_details:a.object({reasoning_tokens:a.number().nullish(),accepted_prediction_tokens:a.number().nullish(),rejected_prediction_tokens:a.number().nullish()}).nullish()}).nullish()}))),BO=O(()=>A(a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({delta:a.object({role:a.enum(["assistant"]).nullish(),content:a.string().nullish(),tool_calls:a.array(a.object({index:a.number(),id:a.string().nullish(),type:a.literal("function").nullish(),function:a.object({name:a.string().nullish(),arguments:a.string().nullish()})})).nullish(),annotations:a.array(a.object({type:a.literal("url_citation"),url_citation:a.object({start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()})})).nullish()}).nullish(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish()}).nullish(),finish_reason:a.string().nullish(),index:a.number()})),usage:a.object({prompt_tokens:a.number().nullish(),completion_tokens:a.number().nullish(),total_tokens:a.number().nullish(),prompt_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),completion_tokens_details:a.object({reasoning_tokens:a.number().nullish(),accepted_prediction_tokens:a.number().nullish(),rejected_prediction_tokens:a.number().nullish()}).nullish()}).nullish()}),ch]))),JO=O(()=>A(a.object({logitBias:a.record(a.coerce.number(),a.number()).optional(),logprobs:a.union([a.boolean(),a.number()]).optional(),parallelToolCalls:a.boolean().optional(),user:a.string().optional(),reasoningEffort:a.enum(["none","minimal","low","medium","high","xhigh"]).optional(),maxCompletionTokens:a.number().optional(),store:a.boolean().optional(),metadata:a.record(a.string().max(64),a.string().max(512)).optional(),prediction:a.record(a.string(),a.any()).optional(),serviceTier:a.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:a.boolean().optional(),textVerbosity:a.enum(["low","medium","high"]).optional(),promptCacheKey:a.string().optional(),promptCacheRetention:a.enum(["in_memory","24h"]).optional(),safetyIdentifier:a.string().optional(),systemMessageMode:a.enum(["system","developer","remove"]).optional(),forceReasoning:a.boolean().optional()})));function WO({tools:e,toolChoice:t}){e=e!=null&&e.length?e:void 0;let r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let o=[];for(let i of e)i.type==="function"?o.push({type:"function",function:{name:i.name,description:i.description,parameters:i.inputSchema,...i.strict!=null?{strict:i.strict}:{}}}):r.push({type:"unsupported",feature:`tool type: ${i.type}`});if(t==null)return{tools:o,toolChoice:void 0,toolWarnings:r};let n=t.type;switch(n){case"auto":case"none":case"required":return{tools:o,toolChoice:n,toolWarnings:r};case"tool":return{tools:o,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:r};default:{let i=n;throw new Re({functionality:`tool choice type: ${i}`})}}}var KO=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:l,responseFormat:d,seed:u,tools:m,toolChoice:c,providerOptions:p}){var f,v,g,y,S;let b=[],_=(f=await Ee({provider:"openai",providerOptions:p,schema:JO}))!=null?f:{},k=aS(this.modelId),w=(v=_.forceReasoning)!=null?v:k.isReasoningModel;n!=null&&b.push({type:"unsupported",feature:"topK"});let{messages:h,warnings:I}=GO({prompt:e,systemMessageMode:(g=_.systemMessageMode)!=null?g:w?"developer":k.systemMessageMode});b.push(...I);let j=(y=_.strictJsonSchema)!=null?y:!0,U={model:this.modelId,logit_bias:_.logitBias,logprobs:_.logprobs===!0||typeof _.logprobs=="number"?!0:void 0,top_logprobs:typeof _.logprobs=="number"?_.logprobs:typeof _.logprobs=="boolean"&&_.logprobs?0:void 0,user:_.user,parallel_tool_calls:_.parallelToolCalls,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,response_format:(d==null?void 0:d.type)==="json"?d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,strict:j,name:(S=d.name)!=null?S:"response",description:d.description}}:{type:"json_object"}:void 0,stop:l,seed:u,verbosity:_.textVerbosity,max_completion_tokens:_.maxCompletionTokens,store:_.store,metadata:_.metadata,prediction:_.prediction,reasoning_effort:_.reasoningEffort,service_tier:_.serviceTier,prompt_cache_key:_.promptCacheKey,prompt_cache_retention:_.promptCacheRetention,safety_identifier:_.safetyIdentifier,messages:h};w?((_.reasoningEffort!=="none"||!k.supportsNonReasoningParameters)&&(U.temperature!=null&&(U.temperature=void 0,b.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),U.top_p!=null&&(U.top_p=void 0,b.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"})),U.logprobs!=null&&(U.logprobs=void 0,b.push({type:"other",message:"logprobs is not supported for reasoning models"}))),U.frequency_penalty!=null&&(U.frequency_penalty=void 0,b.push({type:"unsupported",feature:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),U.presence_penalty!=null&&(U.presence_penalty=void 0,b.push({type:"unsupported",feature:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),U.logit_bias!=null&&(U.logit_bias=void 0,b.push({type:"other",message:"logitBias is not supported for reasoning models"})),U.top_logprobs!=null&&(U.top_logprobs=void 0,b.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),U.max_tokens!=null&&(U.max_completion_tokens==null&&(U.max_completion_tokens=U.max_tokens),U.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&U.temperature!=null&&(U.temperature=void 0,b.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),_.serviceTier==="flex"&&!k.supportsFlexProcessing&&(b.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),U.service_tier=void 0),_.serviceTier==="priority"&&!k.supportsPriorityProcessing&&(b.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),U.service_tier=void 0);let{tools:F,toolChoice:Z,toolWarnings:L}=WO({tools:m,toolChoice:c});return{args:{...U,tools:F,tool_choice:Z},warnings:[...b,...L]}}async doGenerate(e){var t,r,o,n,i,s,l;let{args:d,warnings:u}=await this.getArgs(e),{responseHeaders:m,value:c,rawValue:p}=await we({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:d,failedResponseHandler:Sr,successfulResponseHandler:ke(HO),abortSignal:e.abortSignal,fetch:this.config.fetch}),f=c.choices[0],v=[],g=f.message.content;g!=null&&g.length>0&&v.push({type:"text",text:g});for(let _ of(t=f.message.tool_calls)!=null?t:[])v.push({type:"tool-call",toolCallId:(r=_.id)!=null?r:Fe(),toolName:_.function.name,input:_.function.arguments});for(let _ of(o=f.message.annotations)!=null?o:[])v.push({type:"source",sourceType:"url",id:Fe(),url:_.url_citation.url,title:_.url_citation.title});let y=(n=c.usage)==null?void 0:n.completion_tokens_details,S=(i=c.usage)==null?void 0:i.prompt_tokens_details,b={openai:{}};return(y==null?void 0:y.accepted_prediction_tokens)!=null&&(b.openai.acceptedPredictionTokens=y==null?void 0:y.accepted_prediction_tokens),(y==null?void 0:y.rejected_prediction_tokens)!=null&&(b.openai.rejectedPredictionTokens=y==null?void 0:y.rejected_prediction_tokens),((s=f.logprobs)==null?void 0:s.content)!=null&&(b.openai.logprobs=f.logprobs.content),{content:v,finishReason:{unified:Gw(f.finish_reason),raw:(l=f.finish_reason)!=null?l:void 0},usage:Vw(c.usage),request:{body:d},response:{...lh(c),headers:m,body:p},warnings:u,providerMetadata:b}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:n,value:i}=await we({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:o,failedResponseHandler:Sr,successfulResponseHandler:Nt(BO),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=[],l={unified:"other",raw:void 0},d,u=!1,m=!1,c={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,f){var v,g,y,S,b,_,k,w,h,I,j,U,F,Z,L,M,q;if(e.includeRawChunks&&f.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){l={unified:"error",raw:void 0},f.enqueue({type:"error",error:p.error});return}let C=p.value;if("error"in C){l={unified:"error",raw:void 0},f.enqueue({type:"error",error:C.error});return}if(!u){let P=lh(C);Object.values(P).some(Boolean)&&(u=!0,f.enqueue({type:"response-metadata",...lh(C)}))}C.usage!=null&&(d=C.usage,((v=C.usage.completion_tokens_details)==null?void 0:v.accepted_prediction_tokens)!=null&&(c.openai.acceptedPredictionTokens=(g=C.usage.completion_tokens_details)==null?void 0:g.accepted_prediction_tokens),((y=C.usage.completion_tokens_details)==null?void 0:y.rejected_prediction_tokens)!=null&&(c.openai.rejectedPredictionTokens=(S=C.usage.completion_tokens_details)==null?void 0:S.rejected_prediction_tokens));let E=C.choices[0];if((E==null?void 0:E.finish_reason)!=null&&(l={unified:Gw(E.finish_reason),raw:E.finish_reason}),((b=E==null?void 0:E.logprobs)==null?void 0:b.content)!=null&&(c.openai.logprobs=E.logprobs.content),(E==null?void 0:E.delta)==null)return;let te=E.delta;if(te.content!=null&&(m||(f.enqueue({type:"text-start",id:"0"}),m=!0),f.enqueue({type:"text-delta",id:"0",delta:te.content})),te.tool_calls!=null)for(let P of te.tool_calls){let se=P.index;if(s[se]==null){if(P.type!=="function")throw new Gn({data:P,message:"Expected 'function' type."});if(P.id==null)throw new Gn({data:P,message:"Expected 'id' to be a string."});if(((_=P.function)==null?void 0:_.name)==null)throw new Gn({data:P,message:"Expected 'function.name' to be a string."});f.enqueue({type:"tool-input-start",id:P.id,toolName:P.function.name}),s[se]={id:P.id,type:"function",function:{name:P.function.name,arguments:(k=P.function.arguments)!=null?k:""},hasFinished:!1};let he=s[se];((w=he.function)==null?void 0:w.name)!=null&&((h=he.function)==null?void 0:h.arguments)!=null&&(he.function.arguments.length>0&&f.enqueue({type:"tool-input-delta",id:he.id,delta:he.function.arguments}),_a(he.function.arguments)&&(f.enqueue({type:"tool-input-end",id:he.id}),f.enqueue({type:"tool-call",toolCallId:(I=he.id)!=null?I:Fe(),toolName:he.function.name,input:he.function.arguments}),he.hasFinished=!0));continue}let ee=s[se];ee.hasFinished||(((j=P.function)==null?void 0:j.arguments)!=null&&(ee.function.arguments+=(F=(U=P.function)==null?void 0:U.arguments)!=null?F:""),f.enqueue({type:"tool-input-delta",id:ee.id,delta:(Z=P.function.arguments)!=null?Z:""}),((L=ee.function)==null?void 0:L.name)!=null&&((M=ee.function)==null?void 0:M.arguments)!=null&&_a(ee.function.arguments)&&(f.enqueue({type:"tool-input-end",id:ee.id}),f.enqueue({type:"tool-call",toolCallId:(q=ee.id)!=null?q:Fe(),toolName:ee.function.name,input:ee.function.arguments}),ee.hasFinished=!0))}if(te.annotations!=null)for(let P of te.annotations)f.enqueue({type:"source",sourceType:"url",id:Fe(),url:P.url_citation.url,title:P.url_citation.title})},flush(p){m&&p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:l,usage:Vw(d),...c!=null?{providerMetadata:c}:{}})}})),request:{body:o},response:{headers:n}}}};function Hw(e){var t,r,o,n;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let i=(t=e.prompt_tokens)!=null?t:0,s=(r=e.completion_tokens)!=null?r:0;return{inputTokens:{total:(o=e.prompt_tokens)!=null?o:void 0,noCache:i,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:(n=e.completion_tokens)!=null?n:void 0,text:s,reasoning:void 0},raw:e}}function YO({prompt:e,user:t="user",assistant:r="assistant"}){let o="";e[0].role==="system"&&(o+=`${e[0].content}

`,e=e.slice(1));for(let{role:n,content:i}of e)switch(n){case"system":throw new gr({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let s=i.map(l=>{if(l.type==="text")return l.text}).filter(Boolean).join("");o+=`${t}:
${s}

`;break}case"assistant":{let s=i.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Re({functionality:"tool-call messages"})}}).join("");o+=`${r}:
${s}

`;break}case"tool":throw new Re({functionality:"tool messages"});default:{let s=n;throw new Error(`Unsupported role: ${s}`)}}return o+=`${r}:
`,{prompt:o,stopSequences:[`
${t}:`]}}function Bw({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function Jw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var XO=O(()=>A(a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string(),logprobs:a.object({tokens:a.array(a.string()),token_logprobs:a.array(a.number()),top_logprobs:a.array(a.record(a.string(),a.number())).nullish()}).nullish()})),usage:a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}).nullish()}))),QO=O(()=>A(a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string().nullish(),index:a.number(),logprobs:a.object({tokens:a.array(a.string()),token_logprobs:a.array(a.number()),top_logprobs:a.array(a.record(a.string(),a.number())).nullish()}).nullish()})),usage:a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}).nullish()}),ch]))),Ww=O(()=>A(a.object({echo:a.boolean().optional(),logitBias:a.record(a.string(),a.number()).optional(),suffix:a.string().optional(),user:a.string().optional(),logprobs:a.union([a.boolean(),a.number()]).optional()}))),eR=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={},this.modelId=e,this.config=t}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:l,responseFormat:d,tools:u,toolChoice:m,seed:c,providerOptions:p}){let f=[],v={...await Ee({provider:"openai",providerOptions:p,schema:Ww}),...await Ee({provider:this.providerOptionsName,providerOptions:p,schema:Ww})};n!=null&&f.push({type:"unsupported",feature:"topK"}),u!=null&&u.length&&f.push({type:"unsupported",feature:"tools"}),m!=null&&f.push({type:"unsupported",feature:"toolChoice"}),d!=null&&d.type!=="text"&&f.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});let{prompt:g,stopSequences:y}=YO({prompt:e}),S=[...y!=null?y:[],...l!=null?l:[]];return{args:{model:this.modelId,echo:v.echo,logit_bias:v.logitBias,logprobs:(v==null?void 0:v.logprobs)===!0?0:(v==null?void 0:v.logprobs)===!1||v==null?void 0:v.logprobs,suffix:v.suffix,user:v.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,seed:c,prompt:g,stop:S.length>0?S:void 0},warnings:f}}async doGenerate(e){var t;let{args:r,warnings:o}=await this.getArgs(e),{responseHeaders:n,value:i,rawValue:s}=await we({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:r,failedResponseHandler:Sr,successfulResponseHandler:ke(XO),abortSignal:e.abortSignal,fetch:this.config.fetch}),l=i.choices[0],d={openai:{}};return l.logprobs!=null&&(d.openai.logprobs=l.logprobs),{content:[{type:"text",text:l.text}],usage:Hw(i.usage),finishReason:{unified:Jw(l.finish_reason),raw:(t=l.finish_reason)!=null?t:void 0},request:{body:r},response:{...Bw(i),headers:n,body:s},providerMetadata:d,warnings:o}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:n,value:i}=await we({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:o,failedResponseHandler:Sr,successfulResponseHandler:Nt(QO),abortSignal:e.abortSignal,fetch:this.config.fetch}),s={unified:"other",raw:void 0},l={openai:{}},d,u=!0;return{stream:i.pipeThrough(new TransformStream({start(m){m.enqueue({type:"stream-start",warnings:r})},transform(m,c){if(e.includeRawChunks&&c.enqueue({type:"raw",rawValue:m.rawValue}),!m.success){s={unified:"error",raw:void 0},c.enqueue({type:"error",error:m.error});return}let p=m.value;if("error"in p){s={unified:"error",raw:void 0},c.enqueue({type:"error",error:p.error});return}u&&(u=!1,c.enqueue({type:"response-metadata",...Bw(p)}),c.enqueue({type:"text-start",id:"0"})),p.usage!=null&&(d=p.usage);let f=p.choices[0];(f==null?void 0:f.finish_reason)!=null&&(s={unified:Jw(f.finish_reason),raw:f.finish_reason}),(f==null?void 0:f.logprobs)!=null&&(l.openai.logprobs=f.logprobs),(f==null?void 0:f.text)!=null&&f.text.length>0&&c.enqueue({type:"text-delta",id:"0",delta:f.text})},flush(m){u||m.enqueue({type:"text-end",id:"0"}),m.enqueue({type:"finish",finishReason:s,providerMetadata:l,usage:Hw(d)})}})),request:{body:o},response:{headers:n}}}},tR=O(()=>A(a.object({dimensions:a.number().optional(),user:a.string().optional()}))),rR=O(()=>A(a.object({data:a.array(a.object({embedding:a.array(a.number())})),usage:a.object({prompt_tokens:a.number()}).nullish()}))),nR=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n;if(e.length>this.maxEmbeddingsPerCall)throw new To({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let i=(n=await Ee({provider:"openai",providerOptions:o,schema:tR}))!=null?n:{},{responseHeaders:s,value:l,rawValue:d}=await we({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:_e(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:Sr,successfulResponseHandler:ke(rR),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:l.data.map(u=>u.embedding),usage:l.usage?{tokens:l.usage.prompt_tokens}:void 0,response:{headers:s,body:d}}}},Kw=O(()=>A(a.object({created:a.number().nullish(),data:a.array(a.object({b64_json:a.string(),revised_prompt:a.string().nullish()})),background:a.string().nullish(),output_format:a.string().nullish(),size:a.string().nullish(),quality:a.string().nullish(),usage:a.object({input_tokens:a.number().nullish(),output_tokens:a.number().nullish(),total_tokens:a.number().nullish(),input_tokens_details:a.object({image_tokens:a.number().nullish(),text_tokens:a.number().nullish()}).nullish()}).nullish()}))),oR={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10,"gpt-image-1.5":10},aR=["gpt-image-1-mini","gpt-image-1.5","gpt-image-1"];function iR(e){return aR.some(t=>e.startsWith(t))}var sR=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return(e=oR[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:e,files:t,mask:r,n:o,size:n,aspectRatio:i,seed:s,providerOptions:l,headers:d,abortSignal:u}){var m,c,p,f,v,g,y,S,b,_,k;let w=[];i!=null&&w.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&w.push({type:"unsupported",feature:"seed"});let h=(p=(c=(m=this.config._internal)==null?void 0:m.currentDate)==null?void 0:c.call(m))!=null?p:new Date;if(t!=null){let{value:U,responseHeaders:F}=await ba({url:this.config.url({path:"/images/edits",modelId:this.modelId}),headers:_e(this.config.headers(),d),formData:vu({model:this.modelId,prompt:e,image:await Promise.all(t.map(Z=>Z.type==="file"?new Blob([Z.data instanceof Uint8Array?new Blob([Z.data],{type:Z.mediaType}):new Blob([ar(Z.data)],{type:Z.mediaType})],{type:Z.mediaType}):Oi(Z.url))),mask:r!=null?await lR(r):void 0,n:o,size:n,...(f=l.openai)!=null?f:{}}),failedResponseHandler:Sr,successfulResponseHandler:ke(Kw),abortSignal:u,fetch:this.config.fetch});return{images:U.data.map(Z=>Z.b64_json),warnings:w,usage:U.usage!=null?{inputTokens:(v=U.usage.input_tokens)!=null?v:void 0,outputTokens:(g=U.usage.output_tokens)!=null?g:void 0,totalTokens:(y=U.usage.total_tokens)!=null?y:void 0}:void 0,response:{timestamp:h,modelId:this.modelId,headers:F},providerMetadata:{openai:{images:U.data.map(Z=>{var L,M,q,C,E;return{...Z.revised_prompt?{revisedPrompt:Z.revised_prompt}:{},created:(L=U.created)!=null?L:void 0,size:(M=U.size)!=null?M:void 0,quality:(q=U.quality)!=null?q:void 0,background:(C=U.background)!=null?C:void 0,outputFormat:(E=U.output_format)!=null?E:void 0}})}}}}let{value:I,responseHeaders:j}=await we({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:_e(this.config.headers(),d),body:{model:this.modelId,prompt:e,n:o,size:n,...(S=l.openai)!=null?S:{},...iR(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Sr,successfulResponseHandler:ke(Kw),abortSignal:u,fetch:this.config.fetch});return{images:I.data.map(U=>U.b64_json),warnings:w,usage:I.usage!=null?{inputTokens:(b=I.usage.input_tokens)!=null?b:void 0,outputTokens:(_=I.usage.output_tokens)!=null?_:void 0,totalTokens:(k=I.usage.total_tokens)!=null?k:void 0}:void 0,response:{timestamp:h,modelId:this.modelId,headers:j},providerMetadata:{openai:{images:I.data.map(U=>{var F,Z,L,M,q;return{...U.revised_prompt?{revisedPrompt:U.revised_prompt}:{},created:(F=I.created)!=null?F:void 0,size:(Z=I.size)!=null?Z:void 0,quality:(L=I.quality)!=null?L:void 0,background:(M=I.background)!=null?M:void 0,outputFormat:(q=I.output_format)!=null?q:void 0}})}}}}};async function lR(e){if(!e)return;if(e.type==="url")return Oi(e.url);let t=e.data instanceof Uint8Array?e.data:ar(e.data);return new Blob([t],{type:e.mediaType})}var iS=O(()=>A(a.object({callId:a.string(),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}))),sS=O(()=>A(a.object({status:a.enum(["completed","failed"]),output:a.string().optional()}))),KG=O(()=>A(a.object({}))),uR=je({id:"openai.apply_patch",inputSchema:iS,outputSchema:sS}),cR=uR,dR=O(()=>A(a.object({code:a.string().nullish(),containerId:a.string()}))),pR=O(()=>A(a.object({outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullish()}))),mR=O(()=>A(a.object({container:a.union([a.string(),a.object({fileIds:a.array(a.string()).optional()})]).optional()}))),fR=je({id:"openai.code_interpreter",inputSchema:dR,outputSchema:pR}),gR=(e={})=>fR(e),lS=a.object({key:a.string(),type:a.enum(["eq","ne","gt","gte","lt","lte","in","nin"]),value:a.union([a.string(),a.number(),a.boolean(),a.array(a.string())])}),uS=a.object({type:a.enum(["and","or"]),filters:a.array(a.union([lS,a.lazy(()=>uS)]))}),hR=O(()=>A(a.object({vectorStoreIds:a.array(a.string()),maxNumResults:a.number().optional(),ranking:a.object({ranker:a.string().optional(),scoreThreshold:a.number().optional()}).optional(),filters:a.union([lS,uS]).optional()}))),vR=O(()=>A(a.object({queries:a.array(a.string()),results:a.array(a.object({attributes:a.record(a.string(),a.unknown()),fileId:a.string(),filename:a.string(),score:a.number(),text:a.string()})).nullable()}))),yR=je({id:"openai.file_search",inputSchema:a.object({}),outputSchema:vR}),_R=O(()=>A(a.object({background:a.enum(["auto","opaque","transparent"]).optional(),inputFidelity:a.enum(["low","high"]).optional(),inputImageMask:a.object({fileId:a.string().optional(),imageUrl:a.string().optional()}).optional(),model:a.string().optional(),moderation:a.enum(["auto"]).optional(),outputCompression:a.number().int().min(0).max(100).optional(),outputFormat:a.enum(["png","jpeg","webp"]).optional(),partialImages:a.number().int().min(0).max(3).optional(),quality:a.enum(["auto","low","medium","high"]).optional(),size:a.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),bR=O(()=>A(a.object({}))),xR=O(()=>A(a.object({result:a.string()}))),wR=je({id:"openai.image_generation",inputSchema:bR,outputSchema:xR}),SR=(e={})=>wR(e),cS=O(()=>A(a.object({action:a.object({type:a.literal("exec"),command:a.array(a.string()),timeoutMs:a.number().optional(),user:a.string().optional(),workingDirectory:a.string().optional(),env:a.record(a.string(),a.string()).optional()})}))),dS=O(()=>A(a.object({output:a.string()}))),kR=je({id:"openai.local_shell",inputSchema:cS,outputSchema:dS}),pS=O(()=>A(a.object({action:a.object({commands:a.array(a.string()),timeoutMs:a.number().optional(),maxOutputLength:a.number().optional()})}))),mS=O(()=>A(a.object({output:a.array(a.object({stdout:a.string(),stderr:a.string(),outcome:a.discriminatedUnion("type",[a.object({type:a.literal("timeout")}),a.object({type:a.literal("exit"),exitCode:a.number()})])}))}))),IR=je({id:"openai.shell",inputSchema:pS,outputSchema:mS}),TR=O(()=>A(a.object({externalWebAccess:a.boolean().optional(),filters:a.object({allowedDomains:a.array(a.string()).optional()}).optional(),searchContextSize:a.enum(["low","medium","high"]).optional(),userLocation:a.object({type:a.literal("approximate"),country:a.string().optional(),city:a.string().optional(),region:a.string().optional(),timezone:a.string().optional()}).optional()}))),$R=O(()=>A(a.object({}))),ER=O(()=>A(a.object({action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().optional()}),a.object({type:a.literal("openPage"),url:a.string().nullish()}),a.object({type:a.literal("findInPage"),url:a.string().nullish(),pattern:a.string().nullish()})]),sources:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url"),url:a.string()}),a.object({type:a.literal("api"),name:a.string()})])).optional()}))),CR=je({id:"openai.web_search",inputSchema:$R,outputSchema:ER}),AR=(e={})=>CR(e),PR=O(()=>A(a.object({searchContextSize:a.enum(["low","medium","high"]).optional(),userLocation:a.object({type:a.literal("approximate"),country:a.string().optional(),city:a.string().optional(),region:a.string().optional(),timezone:a.string().optional()}).optional()}))),OR=O(()=>A(a.object({}))),RR=O(()=>A(a.object({action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().optional()}),a.object({type:a.literal("openPage"),url:a.string().nullish()}),a.object({type:a.literal("findInPage"),url:a.string().nullish(),pattern:a.string().nullish()})])}))),MR=je({id:"openai.web_search_preview",inputSchema:OR,outputSchema:RR}),uh=a.lazy(()=>a.union([a.string(),a.number(),a.boolean(),a.null(),a.array(uh),a.record(a.string(),uh)])),NR=O(()=>A(a.object({serverLabel:a.string(),allowedTools:a.union([a.array(a.string()),a.object({readOnly:a.boolean().optional(),toolNames:a.array(a.string()).optional()})]).optional(),authorization:a.string().optional(),connectorId:a.string().optional(),headers:a.record(a.string(),a.string()).optional(),requireApproval:a.union([a.enum(["always","never"]),a.object({never:a.object({toolNames:a.array(a.string()).optional()}).optional()})]).optional(),serverDescription:a.string().optional(),serverUrl:a.string().optional()}).refine(e=>e.serverUrl!=null||e.connectorId!=null,"One of serverUrl or connectorId must be provided."))),jR=O(()=>A(a.object({}))),DR=O(()=>A(a.object({type:a.literal("call"),serverLabel:a.string(),name:a.string(),arguments:a.string(),output:a.string().nullish(),error:a.union([a.string(),uh]).optional()}))),zR=je({id:"openai.mcp",inputSchema:jR,outputSchema:DR}),UR=e=>zR(e),FR={applyPatch:cR,codeInterpreter:gR,fileSearch:yR,imageGeneration:SR,localShell:kR,shell:IR,webSearchPreview:MR,webSearch:AR,mcp:UR};function Yw(e){var t,r,o,n;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let i=e.input_tokens,s=e.output_tokens,l=(r=(t=e.input_tokens_details)==null?void 0:t.cached_tokens)!=null?r:0,d=(n=(o=e.output_tokens_details)==null?void 0:o.reasoning_tokens)!=null?n:0;return{inputTokens:{total:i,noCache:i-l,cacheRead:l,cacheWrite:void 0},outputTokens:{total:s,text:s-d,reasoning:d},raw:e}}function Xw(e,t){return t?t.some(r=>e.startsWith(r)):!1}async function LR({prompt:e,toolNameMapping:t,systemMessageMode:r,providerOptionsName:o,fileIdPrefixes:n,store:i,hasConversation:s=!1,hasLocalShellTool:l=!1,hasShellTool:d=!1,hasApplyPatchTool:u=!1}){var m,c,p,f,v,g,y,S,b,_,k,w,h;let I=[],j=[],U=new Set;for(let{role:F,content:Z}of e)switch(F){case"system":{switch(r){case"system":{I.push({role:"system",content:Z});break}case"developer":{I.push({role:"developer",content:Z});break}case"remove":{j.push({type:"other",message:"system messages are removed for this model"});break}default:{let L=r;throw new Error(`Unsupported system message mode: ${L}`)}}break}case"user":{I.push({role:"user",content:Z.map((L,M)=>{var q,C,E;switch(L.type){case"text":return{type:"input_text",text:L.text};case"file":if(L.mediaType.startsWith("image/")){let te=L.mediaType==="image/*"?"image/jpeg":L.mediaType;return{type:"input_image",...L.data instanceof URL?{image_url:L.data.toString()}:typeof L.data=="string"&&Xw(L.data,n)?{file_id:L.data}:{image_url:`data:${te};base64,${kt(L.data)}`},detail:(C=(q=L.providerOptions)==null?void 0:q[o])==null?void 0:C.imageDetail}}else{if(L.mediaType==="application/pdf")return L.data instanceof URL?{type:"input_file",file_url:L.data.toString()}:{type:"input_file",...typeof L.data=="string"&&Xw(L.data,n)?{file_id:L.data}:{filename:(E=L.filename)!=null?E:`part-${M}.pdf`,file_data:`data:application/pdf;base64,${kt(L.data)}`}};throw new Re({functionality:`file part media type ${L.mediaType}`})}}})});break}case"assistant":{let L={};for(let M of Z)switch(M.type){case"text":{let q=(c=(m=M.providerOptions)==null?void 0:m[o])==null?void 0:c.itemId;if(s&&q!=null)break;if(i&&q!=null){I.push({type:"item_reference",id:q});break}I.push({role:"assistant",content:[{type:"output_text",text:M.text}],id:q});break}case"tool-call":{let q=(y=(f=(p=M.providerOptions)==null?void 0:p[o])==null?void 0:f.itemId)!=null?y:(g=(v=M.providerMetadata)==null?void 0:v[o])==null?void 0:g.itemId;if(s&&q!=null)break;if(M.providerExecuted){i&&q!=null&&I.push({type:"item_reference",id:q});break}if(i&&q!=null){I.push({type:"item_reference",id:q});break}let C=t.toProviderToolName(M.toolName);if(l&&C==="local_shell"){let E=await Je({value:M.input,schema:cS});I.push({type:"local_shell_call",call_id:M.toolCallId,id:q,action:{type:"exec",command:E.action.command,timeout_ms:E.action.timeoutMs,user:E.action.user,working_directory:E.action.workingDirectory,env:E.action.env}});break}if(d&&C==="shell"){let E=await Je({value:M.input,schema:pS});I.push({type:"shell_call",call_id:M.toolCallId,id:q,status:"completed",action:{commands:E.action.commands,timeout_ms:E.action.timeoutMs,max_output_length:E.action.maxOutputLength}});break}if(u&&C==="apply_patch"){let E=await Je({value:M.input,schema:iS});I.push({type:"apply_patch_call",call_id:E.callId,id:q,status:"completed",operation:E.operation});break}I.push({type:"function_call",call_id:M.toolCallId,name:C,arguments:JSON.stringify(M.input),id:q});break}case"tool-result":{if(M.output.type==="execution-denied"||M.output.type==="json"&&typeof M.output.value=="object"&&M.output.value!=null&&"type"in M.output.value&&M.output.value.type==="execution-denied"||s)break;if(i){let q=(_=(b=(S=M.providerMetadata)==null?void 0:S[o])==null?void 0:b.itemId)!=null?_:M.toolCallId;I.push({type:"item_reference",id:q})}else j.push({type:"other",message:`Results for OpenAI tool ${M.toolName} are not sent to the API when store is false`});break}case"reasoning":{let q=await Ee({provider:o,providerOptions:M.providerOptions,schema:qR}),C=q==null?void 0:q.itemId;if(s&&C!=null)break;if(C!=null){let E=L[C];if(i)E===void 0&&(I.push({type:"item_reference",id:C}),L[C]={type:"reasoning",id:C,summary:[]});else{let te=[];M.text.length>0?te.push({type:"summary_text",text:M.text}):E!==void 0&&j.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(M)}.`}),E===void 0?(L[C]={type:"reasoning",id:C,encrypted_content:q==null?void 0:q.reasoningEncryptedContent,summary:te},I.push(L[C])):(E.summary.push(...te),(q==null?void 0:q.reasoningEncryptedContent)!=null&&(E.encrypted_content=q.reasoningEncryptedContent))}}else j.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(M)}.`});break}}break}case"tool":{for(let L of Z){if(L.type==="tool-approval-response"){let E=L;if(U.has(E.approvalId))continue;U.add(E.approvalId),i&&I.push({type:"item_reference",id:E.approvalId}),I.push({type:"mcp_approval_response",approval_request_id:E.approvalId,approve:E.approved});continue}let M=L.output;if(M.type==="execution-denied"&&((w=(k=M.providerOptions)==null?void 0:k.openai)==null?void 0:w.approvalId))continue;let q=t.toProviderToolName(L.toolName);if(l&&q==="local_shell"&&M.type==="json"){let E=await Je({value:M.value,schema:dS});I.push({type:"local_shell_call_output",call_id:L.toolCallId,output:E.output});continue}if(d&&q==="shell"&&M.type==="json"){let E=await Je({value:M.value,schema:mS});I.push({type:"shell_call_output",call_id:L.toolCallId,output:E.output.map(te=>({stdout:te.stdout,stderr:te.stderr,outcome:te.outcome.type==="timeout"?{type:"timeout"}:{type:"exit",exit_code:te.outcome.exitCode}}))});continue}if(u&&L.toolName==="apply_patch"&&M.type==="json"){let E=await Je({value:M.value,schema:sS});I.push({type:"apply_patch_call_output",call_id:L.toolCallId,status:E.status,output:E.output});continue}let C;switch(M.type){case"text":case"error-text":C=M.value;break;case"execution-denied":C=(h=M.reason)!=null?h:"Tool execution denied.";break;case"json":case"error-json":C=JSON.stringify(M.value);break;case"content":C=M.value.map(E=>{var te;switch(E.type){case"text":return{type:"input_text",text:E.text};case"image-data":return{type:"input_image",image_url:`data:${E.mediaType};base64,${E.data}`};case"image-url":return{type:"input_image",image_url:E.url};case"file-data":return{type:"input_file",filename:(te=E.filename)!=null?te:"data",file_data:`data:${E.mediaType};base64,${E.data}`};default:{j.push({type:"other",message:`unsupported tool content part type: ${E.type}`});return}}}).filter(_u);break}I.push({type:"function_call_output",call_id:L.toolCallId,output:C})}break}default:{let L=F;throw new Error(`Unsupported role: ${L}`)}}return{input:I,warnings:j}}var qR=a.object({itemId:a.string().nullish(),reasoningEncryptedContent:a.string().nullish()});function Qw({finishReason:e,hasFunctionCall:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"other"}}var ZR=O(()=>A(a.union([a.object({type:a.literal("response.output_text.delta"),item_id:a.string(),delta:a.string(),logprobs:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish()}),a.object({type:a.enum(["response.completed","response.incomplete"]),response:a.object({incomplete_details:a.object({reason:a.string()}).nullish(),usage:a.object({input_tokens:a.number(),input_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),output_tokens:a.number(),output_tokens_details:a.object({reasoning_tokens:a.number().nullish()}).nullish()}),service_tier:a.string().nullish()})}),a.object({type:a.literal("response.created"),response:a.object({id:a.string(),created_at:a.number(),model:a.string(),service_tier:a.string().nullish()})}),a.object({type:a.literal("response.output_item.added"),output_index:a.number(),item:a.discriminatedUnion("type",[a.object({type:a.literal("message"),id:a.string()}),a.object({type:a.literal("reasoning"),id:a.string(),encrypted_content:a.string().nullish()}),a.object({type:a.literal("function_call"),id:a.string(),call_id:a.string(),name:a.string(),arguments:a.string()}),a.object({type:a.literal("web_search_call"),id:a.string(),status:a.string()}),a.object({type:a.literal("computer_call"),id:a.string(),status:a.string()}),a.object({type:a.literal("file_search_call"),id:a.string()}),a.object({type:a.literal("image_generation_call"),id:a.string()}),a.object({type:a.literal("code_interpreter_call"),id:a.string(),container_id:a.string(),code:a.string().nullable(),outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullable(),status:a.string()}),a.object({type:a.literal("mcp_call"),id:a.string(),status:a.string(),approval_request_id:a.string().nullish()}),a.object({type:a.literal("mcp_list_tools"),id:a.string()}),a.object({type:a.literal("mcp_approval_request"),id:a.string()}),a.object({type:a.literal("apply_patch_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed"]),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}),a.object({type:a.literal("shell_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed","incomplete"]),action:a.object({commands:a.array(a.string())})})])}),a.object({type:a.literal("response.output_item.done"),output_index:a.number(),item:a.discriminatedUnion("type",[a.object({type:a.literal("message"),id:a.string()}),a.object({type:a.literal("reasoning"),id:a.string(),encrypted_content:a.string().nullish()}),a.object({type:a.literal("function_call"),id:a.string(),call_id:a.string(),name:a.string(),arguments:a.string(),status:a.literal("completed")}),a.object({type:a.literal("code_interpreter_call"),id:a.string(),code:a.string().nullable(),container_id:a.string(),outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullable()}),a.object({type:a.literal("image_generation_call"),id:a.string(),result:a.string()}),a.object({type:a.literal("web_search_call"),id:a.string(),status:a.string(),action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().nullish(),sources:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url"),url:a.string()}),a.object({type:a.literal("api"),name:a.string()})])).nullish()}),a.object({type:a.literal("open_page"),url:a.string().nullish()}),a.object({type:a.literal("find_in_page"),url:a.string().nullish(),pattern:a.string().nullish()})])}),a.object({type:a.literal("file_search_call"),id:a.string(),queries:a.array(a.string()),results:a.array(a.object({attributes:a.record(a.string(),a.union([a.string(),a.number(),a.boolean()])),file_id:a.string(),filename:a.string(),score:a.number(),text:a.string()})).nullish()}),a.object({type:a.literal("local_shell_call"),id:a.string(),call_id:a.string(),action:a.object({type:a.literal("exec"),command:a.array(a.string()),timeout_ms:a.number().optional(),user:a.string().optional(),working_directory:a.string().optional(),env:a.record(a.string(),a.string()).optional()})}),a.object({type:a.literal("computer_call"),id:a.string(),status:a.literal("completed")}),a.object({type:a.literal("mcp_call"),id:a.string(),status:a.string(),arguments:a.string(),name:a.string(),server_label:a.string(),output:a.string().nullish(),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).nullish(),approval_request_id:a.string().nullish()}),a.object({type:a.literal("mcp_list_tools"),id:a.string(),server_label:a.string(),tools:a.array(a.object({name:a.string(),description:a.string().optional(),input_schema:a.any(),annotations:a.record(a.string(),a.unknown()).optional()})),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).optional()}),a.object({type:a.literal("mcp_approval_request"),id:a.string(),server_label:a.string(),name:a.string(),arguments:a.string(),approval_request_id:a.string().optional()}),a.object({type:a.literal("apply_patch_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed"]),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}),a.object({type:a.literal("shell_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed","incomplete"]),action:a.object({commands:a.array(a.string())})})])}),a.object({type:a.literal("response.function_call_arguments.delta"),item_id:a.string(),output_index:a.number(),delta:a.string()}),a.object({type:a.literal("response.image_generation_call.partial_image"),item_id:a.string(),output_index:a.number(),partial_image_b64:a.string()}),a.object({type:a.literal("response.code_interpreter_call_code.delta"),item_id:a.string(),output_index:a.number(),delta:a.string()}),a.object({type:a.literal("response.code_interpreter_call_code.done"),item_id:a.string(),output_index:a.number(),code:a.string()}),a.object({type:a.literal("response.output_text.annotation.added"),annotation:a.discriminatedUnion("type",[a.object({type:a.literal("url_citation"),start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()}),a.object({type:a.literal("file_citation"),file_id:a.string(),filename:a.string(),index:a.number()}),a.object({type:a.literal("container_file_citation"),container_id:a.string(),file_id:a.string(),filename:a.string(),start_index:a.number(),end_index:a.number()}),a.object({type:a.literal("file_path"),file_id:a.string(),index:a.number()})])}),a.object({type:a.literal("response.reasoning_summary_part.added"),item_id:a.string(),summary_index:a.number()}),a.object({type:a.literal("response.reasoning_summary_text.delta"),item_id:a.string(),summary_index:a.number(),delta:a.string()}),a.object({type:a.literal("response.reasoning_summary_part.done"),item_id:a.string(),summary_index:a.number()}),a.object({type:a.literal("response.apply_patch_call_operation_diff.delta"),item_id:a.string(),output_index:a.number(),delta:a.string(),obfuscation:a.string().nullish()}),a.object({type:a.literal("response.apply_patch_call_operation_diff.done"),item_id:a.string(),output_index:a.number(),diff:a.string()}),a.object({type:a.literal("error"),sequence_number:a.number(),error:a.object({type:a.string(),code:a.string(),message:a.string(),param:a.string().nullish()})}),a.object({type:a.string()}).loose().transform(e=>({type:"unknown_chunk",message:e.type}))]))),VR=O(()=>A(a.object({id:a.string().optional(),created_at:a.number().optional(),error:a.object({message:a.string(),type:a.string(),param:a.string().nullish(),code:a.string()}).nullish(),model:a.string().optional(),output:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("message"),role:a.literal("assistant"),id:a.string(),content:a.array(a.object({type:a.literal("output_text"),text:a.string(),logprobs:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish(),annotations:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url_citation"),start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()}),a.object({type:a.literal("file_citation"),file_id:a.string(),filename:a.string(),index:a.number()}),a.object({type:a.literal("container_file_citation"),container_id:a.string(),file_id:a.string(),filename:a.string(),start_index:a.number(),end_index:a.number()}),a.object({type:a.literal("file_path"),file_id:a.string(),index:a.number()})]))}))}),a.object({type:a.literal("web_search_call"),id:a.string(),status:a.string(),action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().nullish(),sources:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url"),url:a.string()}),a.object({type:a.literal("api"),name:a.string()})])).nullish()}),a.object({type:a.literal("open_page"),url:a.string().nullish()}),a.object({type:a.literal("find_in_page"),url:a.string().nullish(),pattern:a.string().nullish()})])}),a.object({type:a.literal("file_search_call"),id:a.string(),queries:a.array(a.string()),results:a.array(a.object({attributes:a.record(a.string(),a.union([a.string(),a.number(),a.boolean()])),file_id:a.string(),filename:a.string(),score:a.number(),text:a.string()})).nullish()}),a.object({type:a.literal("code_interpreter_call"),id:a.string(),code:a.string().nullable(),container_id:a.string(),outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullable()}),a.object({type:a.literal("image_generation_call"),id:a.string(),result:a.string()}),a.object({type:a.literal("local_shell_call"),id:a.string(),call_id:a.string(),action:a.object({type:a.literal("exec"),command:a.array(a.string()),timeout_ms:a.number().optional(),user:a.string().optional(),working_directory:a.string().optional(),env:a.record(a.string(),a.string()).optional()})}),a.object({type:a.literal("function_call"),call_id:a.string(),name:a.string(),arguments:a.string(),id:a.string()}),a.object({type:a.literal("computer_call"),id:a.string(),status:a.string().optional()}),a.object({type:a.literal("reasoning"),id:a.string(),encrypted_content:a.string().nullish(),summary:a.array(a.object({type:a.literal("summary_text"),text:a.string()}))}),a.object({type:a.literal("mcp_call"),id:a.string(),status:a.string(),arguments:a.string(),name:a.string(),server_label:a.string(),output:a.string().nullish(),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).nullish(),approval_request_id:a.string().nullish()}),a.object({type:a.literal("mcp_list_tools"),id:a.string(),server_label:a.string(),tools:a.array(a.object({name:a.string(),description:a.string().optional(),input_schema:a.any(),annotations:a.record(a.string(),a.unknown()).optional()})),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).optional()}),a.object({type:a.literal("mcp_approval_request"),id:a.string(),server_label:a.string(),name:a.string(),arguments:a.string(),approval_request_id:a.string().optional()}),a.object({type:a.literal("apply_patch_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed"]),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}),a.object({type:a.literal("shell_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed","incomplete"]),action:a.object({commands:a.array(a.string())})})])).optional(),service_tier:a.string().nullish(),incomplete_details:a.object({reason:a.string()}).nullish(),usage:a.object({input_tokens:a.number(),input_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),output_tokens:a.number(),output_tokens_details:a.object({reasoning_tokens:a.number().nullish()}).nullish()}).optional()}))),fS=20,GR=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex","gpt-5.1-codex-max","gpt-5.2","gpt-5.2-chat-latest","gpt-5.2-pro"],w5=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...GR],eS=O(()=>A(a.object({conversation:a.string().nullish(),include:a.array(a.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:a.string().nullish(),logprobs:a.union([a.boolean(),a.number().min(1).max(fS)]).optional(),maxToolCalls:a.number().nullish(),metadata:a.any().nullish(),parallelToolCalls:a.boolean().nullish(),previousResponseId:a.string().nullish(),promptCacheKey:a.string().nullish(),promptCacheRetention:a.enum(["in_memory","24h"]).nullish(),reasoningEffort:a.string().nullish(),reasoningSummary:a.string().nullish(),safetyIdentifier:a.string().nullish(),serviceTier:a.enum(["auto","flex","priority","default"]).nullish(),store:a.boolean().nullish(),strictJsonSchema:a.boolean().nullish(),textVerbosity:a.enum(["low","medium","high"]).nullish(),truncation:a.enum(["auto","disabled"]).nullish(),user:a.string().nullish(),systemMessageMode:a.enum(["system","developer","remove"]).optional(),forceReasoning:a.boolean().optional()})));async function HR({tools:e,toolChoice:t}){e=e!=null&&e.length?e:void 0;let r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let o=[];for(let i of e)switch(i.type){case"function":o.push({type:"function",name:i.name,description:i.description,parameters:i.inputSchema,...i.strict!=null?{strict:i.strict}:{}});break;case"provider":{switch(i.id){case"openai.file_search":{let s=await Je({value:i.args,schema:hR});o.push({type:"file_search",vector_store_ids:s.vectorStoreIds,max_num_results:s.maxNumResults,ranking_options:s.ranking?{ranker:s.ranking.ranker,score_threshold:s.ranking.scoreThreshold}:void 0,filters:s.filters});break}case"openai.local_shell":{o.push({type:"local_shell"});break}case"openai.shell":{o.push({type:"shell"});break}case"openai.apply_patch":{o.push({type:"apply_patch"});break}case"openai.web_search_preview":{let s=await Je({value:i.args,schema:PR});o.push({type:"web_search_preview",search_context_size:s.searchContextSize,user_location:s.userLocation});break}case"openai.web_search":{let s=await Je({value:i.args,schema:TR});o.push({type:"web_search",filters:s.filters!=null?{allowed_domains:s.filters.allowedDomains}:void 0,external_web_access:s.externalWebAccess,search_context_size:s.searchContextSize,user_location:s.userLocation});break}case"openai.code_interpreter":{let s=await Je({value:i.args,schema:mR});o.push({type:"code_interpreter",container:s.container==null?{type:"auto",file_ids:void 0}:typeof s.container=="string"?s.container:{type:"auto",file_ids:s.container.fileIds}});break}case"openai.image_generation":{let s=await Je({value:i.args,schema:_R});o.push({type:"image_generation",background:s.background,input_fidelity:s.inputFidelity,input_image_mask:s.inputImageMask?{file_id:s.inputImageMask.fileId,image_url:s.inputImageMask.imageUrl}:void 0,model:s.model,moderation:s.moderation,partial_images:s.partialImages,quality:s.quality,output_compression:s.outputCompression,output_format:s.outputFormat,size:s.size});break}case"openai.mcp":{let s=await Je({value:i.args,schema:NR}),l=m=>({tool_names:m.toolNames}),d=s.requireApproval,u=d==null?void 0:typeof d=="string"?d:d.never!=null?{never:l(d.never)}:void 0;o.push({type:"mcp",server_label:s.serverLabel,allowed_tools:Array.isArray(s.allowedTools)?s.allowedTools:s.allowedTools?{read_only:s.allowedTools.readOnly,tool_names:s.allowedTools.toolNames}:void 0,authorization:s.authorization,connector_id:s.connectorId,headers:s.headers,require_approval:u!=null?u:"never",server_description:s.serverDescription,server_url:s.serverUrl});break}}break}default:r.push({type:"unsupported",feature:`function tool ${i}`});break}if(t==null)return{tools:o,toolChoice:void 0,toolWarnings:r};let n=t.type;switch(n){case"auto":case"none":case"required":return{tools:o,toolChoice:n,toolWarnings:r};case"tool":return{tools:o,toolChoice:t.toolName==="code_interpreter"||t.toolName==="file_search"||t.toolName==="image_generation"||t.toolName==="web_search_preview"||t.toolName==="web_search"||t.toolName==="mcp"||t.toolName==="apply_patch"?{type:t.toolName}:{type:"function",name:t.toolName},toolWarnings:r};default:{let i=n;throw new Re({functionality:`tool choice type: ${i}`})}}}function tS(e){var t,r;let o={};for(let n of e)if(n.role==="assistant")for(let i of n.content){if(i.type!=="tool-call")continue;let s=(r=(t=i.providerOptions)==null?void 0:t.openai)==null?void 0:r.approvalRequestId;s!=null&&(o[s]=i.toolCallId)}return o}var BR=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({maxOutputTokens:e,temperature:t,stopSequences:r,topP:o,topK:n,presencePenalty:i,frequencyPenalty:s,seed:l,prompt:d,providerOptions:u,tools:m,toolChoice:c,responseFormat:p}){var f,v,g,y,S,b;let _=[],k=aS(this.modelId);n!=null&&_.push({type:"unsupported",feature:"topK"}),l!=null&&_.push({type:"unsupported",feature:"seed"}),i!=null&&_.push({type:"unsupported",feature:"presencePenalty"}),s!=null&&_.push({type:"unsupported",feature:"frequencyPenalty"}),r!=null&&_.push({type:"unsupported",feature:"stopSequences"});let w=this.config.provider.includes("azure")?"azure":"openai",h=await Ee({provider:w,providerOptions:u,schema:eS});h==null&&w!=="openai"&&(h=await Ee({provider:"openai",providerOptions:u,schema:eS}));let I=(f=h==null?void 0:h.forceReasoning)!=null?f:k.isReasoningModel;h!=null&&h.conversation&&(h!=null&&h.previousResponseId)&&_.push({type:"unsupported",feature:"conversation",details:"conversation and previousResponseId cannot be used together"});let j=gu({tools:m,providerToolNames:{"openai.code_interpreter":"code_interpreter","openai.file_search":"file_search","openai.image_generation":"image_generation","openai.local_shell":"local_shell","openai.shell":"shell","openai.web_search":"web_search","openai.web_search_preview":"web_search_preview","openai.mcp":"mcp","openai.apply_patch":"apply_patch"}}),{input:U,warnings:F}=await LR({prompt:d,toolNameMapping:j,systemMessageMode:(v=h==null?void 0:h.systemMessageMode)!=null?v:I?"developer":k.systemMessageMode,providerOptionsName:w,fileIdPrefixes:this.config.fileIdPrefixes,store:(g=h==null?void 0:h.store)!=null?g:!0,hasConversation:(h==null?void 0:h.conversation)!=null,hasLocalShellTool:q("openai.local_shell"),hasShellTool:q("openai.shell"),hasApplyPatchTool:q("openai.apply_patch")});_.push(...F);let Z=(y=h==null?void 0:h.strictJsonSchema)!=null?y:!0,L=h==null?void 0:h.include;function M(fe){L==null?L=[fe]:L.includes(fe)||(L=[...L,fe])}function q(fe){return(m==null?void 0:m.find(V=>V.type==="provider"&&V.id===fe))!=null}let C=typeof(h==null?void 0:h.logprobs)=="number"?h==null?void 0:h.logprobs:(h==null?void 0:h.logprobs)===!0?fS:void 0;C&&M("message.output_text.logprobs");let E=(S=m==null?void 0:m.find(fe=>fe.type==="provider"&&(fe.id==="openai.web_search"||fe.id==="openai.web_search_preview")))==null?void 0:S.name;E&&M("web_search_call.action.sources"),q("openai.code_interpreter")&&M("code_interpreter_call.outputs");let te=h==null?void 0:h.store;te===!1&&I&&M("reasoning.encrypted_content");let P={model:this.modelId,input:U,temperature:t,top_p:o,max_output_tokens:e,...((p==null?void 0:p.type)==="json"||(h==null?void 0:h.textVerbosity))&&{text:{...(p==null?void 0:p.type)==="json"&&{format:p.schema!=null?{type:"json_schema",strict:Z,name:(b=p.name)!=null?b:"response",description:p.description,schema:p.schema}:{type:"json_object"}},...(h==null?void 0:h.textVerbosity)&&{verbosity:h.textVerbosity}}},conversation:h==null?void 0:h.conversation,max_tool_calls:h==null?void 0:h.maxToolCalls,metadata:h==null?void 0:h.metadata,parallel_tool_calls:h==null?void 0:h.parallelToolCalls,previous_response_id:h==null?void 0:h.previousResponseId,store:te,user:h==null?void 0:h.user,instructions:h==null?void 0:h.instructions,service_tier:h==null?void 0:h.serviceTier,include:L,prompt_cache_key:h==null?void 0:h.promptCacheKey,prompt_cache_retention:h==null?void 0:h.promptCacheRetention,safety_identifier:h==null?void 0:h.safetyIdentifier,top_logprobs:C,truncation:h==null?void 0:h.truncation,...I&&((h==null?void 0:h.reasoningEffort)!=null||(h==null?void 0:h.reasoningSummary)!=null)&&{reasoning:{...(h==null?void 0:h.reasoningEffort)!=null&&{effort:h.reasoningEffort},...(h==null?void 0:h.reasoningSummary)!=null&&{summary:h.reasoningSummary}}}};I?(h==null?void 0:h.reasoningEffort)==="none"&&k.supportsNonReasoningParameters||(P.temperature!=null&&(P.temperature=void 0,_.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),P.top_p!=null&&(P.top_p=void 0,_.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"}))):((h==null?void 0:h.reasoningEffort)!=null&&_.push({type:"unsupported",feature:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),(h==null?void 0:h.reasoningSummary)!=null&&_.push({type:"unsupported",feature:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),(h==null?void 0:h.serviceTier)==="flex"&&!k.supportsFlexProcessing&&(_.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete P.service_tier),(h==null?void 0:h.serviceTier)==="priority"&&!k.supportsPriorityProcessing&&(_.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete P.service_tier);let{tools:se,toolChoice:ee,toolWarnings:he}=await HR({tools:m,toolChoice:c});return{webSearchToolName:E,args:{...P,tools:se,tool_choice:ee},warnings:[..._,...he],store:te,toolNameMapping:j,providerOptionsName:w}}async doGenerate(e){var t,r,o,n,i,s,l,d,u,m,c,p,f,v,g,y,S,b,_,k,w,h,I,j,U;let{args:F,warnings:Z,webSearchToolName:L,toolNameMapping:M,providerOptionsName:q}=await this.getArgs(e),C=this.config.url({path:"/responses",modelId:this.modelId}),E=tS(e.prompt),{responseHeaders:te,value:P,rawValue:se}=await we({url:C,headers:_e(this.config.headers(),e.headers),body:F,failedResponseHandler:Sr,successfulResponseHandler:ke(VR),abortSignal:e.abortSignal,fetch:this.config.fetch});if(P.error)throw new Ye({message:P.error.message,url:C,requestBodyValues:F,statusCode:400,responseHeaders:te,responseBody:se,isRetryable:!1});let ee=[],he=[],fe=!1;for(let T of P.output)switch(T.type){case"reasoning":{T.summary.length===0&&T.summary.push({type:"summary_text",text:""});for(let pe of T.summary)ee.push({type:"reasoning",text:pe.text,providerMetadata:{[q]:{itemId:T.id,reasoningEncryptedContent:(t=T.encrypted_content)!=null?t:null}}});break}case"image_generation_call":{ee.push({type:"tool-call",toolCallId:T.id,toolName:M.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0}),ee.push({type:"tool-result",toolCallId:T.id,toolName:M.toCustomToolName("image_generation"),result:{result:T.result}});break}case"local_shell_call":{ee.push({type:"tool-call",toolCallId:T.call_id,toolName:M.toCustomToolName("local_shell"),input:JSON.stringify({action:T.action}),providerMetadata:{[q]:{itemId:T.id}}});break}case"shell_call":{ee.push({type:"tool-call",toolCallId:T.call_id,toolName:M.toCustomToolName("shell"),input:JSON.stringify({action:{commands:T.action.commands}}),providerMetadata:{[q]:{itemId:T.id}}});break}case"message":{for(let pe of T.content){(o=(r=e.providerOptions)==null?void 0:r[q])!=null&&o.logprobs&&pe.logprobs&&he.push(pe.logprobs);let de={itemId:T.id,...pe.annotations.length>0&&{annotations:pe.annotations}};ee.push({type:"text",text:pe.text,providerMetadata:{[q]:de}});for(let H of pe.annotations)H.type==="url_citation"?ee.push({type:"source",sourceType:"url",id:(s=(i=(n=this.config).generateId)==null?void 0:i.call(n))!=null?s:Fe(),url:H.url,title:H.title}):H.type==="file_citation"?ee.push({type:"source",sourceType:"document",id:(u=(d=(l=this.config).generateId)==null?void 0:d.call(l))!=null?u:Fe(),mediaType:"text/plain",title:H.filename,filename:H.filename,providerMetadata:{[q]:{type:H.type,fileId:H.file_id,index:H.index}}}):H.type==="container_file_citation"?ee.push({type:"source",sourceType:"document",id:(p=(c=(m=this.config).generateId)==null?void 0:c.call(m))!=null?p:Fe(),mediaType:"text/plain",title:H.filename,filename:H.filename,providerMetadata:{[q]:{type:H.type,fileId:H.file_id,containerId:H.container_id}}}):H.type==="file_path"&&ee.push({type:"source",sourceType:"document",id:(g=(v=(f=this.config).generateId)==null?void 0:v.call(f))!=null?g:Fe(),mediaType:"application/octet-stream",title:H.file_id,filename:H.file_id,providerMetadata:{[q]:{type:H.type,fileId:H.file_id,index:H.index}}})}break}case"function_call":{fe=!0,ee.push({type:"tool-call",toolCallId:T.call_id,toolName:T.name,input:T.arguments,providerMetadata:{[q]:{itemId:T.id}}});break}case"web_search_call":{ee.push({type:"tool-call",toolCallId:T.id,toolName:M.toCustomToolName(L!=null?L:"web_search"),input:JSON.stringify({}),providerExecuted:!0}),ee.push({type:"tool-result",toolCallId:T.id,toolName:M.toCustomToolName(L!=null?L:"web_search"),result:nS(T.action)});break}case"mcp_call":{let pe=T.approval_request_id!=null&&(y=E[T.approval_request_id])!=null?y:T.id,de=`mcp.${T.name}`;ee.push({type:"tool-call",toolCallId:pe,toolName:de,input:T.arguments,providerExecuted:!0,dynamic:!0}),ee.push({type:"tool-result",toolCallId:pe,toolName:de,result:{type:"call",serverLabel:T.server_label,name:T.name,arguments:T.arguments,...T.output!=null?{output:T.output}:{},...T.error!=null?{error:T.error}:{}},providerMetadata:{[q]:{itemId:T.id}}});break}case"mcp_list_tools":break;case"mcp_approval_request":{let pe=(S=T.approval_request_id)!=null?S:T.id,de=(k=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?k:Fe(),H=`mcp.${T.name}`;ee.push({type:"tool-call",toolCallId:de,toolName:H,input:T.arguments,providerExecuted:!0,dynamic:!0}),ee.push({type:"tool-approval-request",approvalId:pe,toolCallId:de});break}case"computer_call":{ee.push({type:"tool-call",toolCallId:T.id,toolName:M.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),ee.push({type:"tool-result",toolCallId:T.id,toolName:M.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:T.status||"completed"}});break}case"file_search_call":{ee.push({type:"tool-call",toolCallId:T.id,toolName:M.toCustomToolName("file_search"),input:"{}",providerExecuted:!0}),ee.push({type:"tool-result",toolCallId:T.id,toolName:M.toCustomToolName("file_search"),result:{queries:T.queries,results:(h=(w=T.results)==null?void 0:w.map(pe=>({attributes:pe.attributes,fileId:pe.file_id,filename:pe.filename,score:pe.score,text:pe.text})))!=null?h:null}});break}case"code_interpreter_call":{ee.push({type:"tool-call",toolCallId:T.id,toolName:M.toCustomToolName("code_interpreter"),input:JSON.stringify({code:T.code,containerId:T.container_id}),providerExecuted:!0}),ee.push({type:"tool-result",toolCallId:T.id,toolName:M.toCustomToolName("code_interpreter"),result:{outputs:T.outputs}});break}case"apply_patch_call":{ee.push({type:"tool-call",toolCallId:T.call_id,toolName:M.toCustomToolName("apply_patch"),input:JSON.stringify({callId:T.call_id,operation:T.operation}),providerMetadata:{[q]:{itemId:T.id}}});break}}let V={[q]:{responseId:P.id,...he.length>0?{logprobs:he}:{},...typeof P.service_tier=="string"?{serviceTier:P.service_tier}:{}}},Ae=P.usage;return{content:ee,finishReason:{unified:Qw({finishReason:(I=P.incomplete_details)==null?void 0:I.reason,hasFunctionCall:fe}),raw:(U=(j=P.incomplete_details)==null?void 0:j.reason)!=null?U:void 0},usage:Yw(Ae),request:{body:F},response:{id:P.id,timestamp:new Date(P.created_at*1e3),modelId:P.model,headers:te,body:se},providerMetadata:V,warnings:Z}}async doStream(e){let{args:t,warnings:r,webSearchToolName:o,toolNameMapping:n,store:i,providerOptionsName:s}=await this.getArgs(e),{responseHeaders:l,value:d}=await we({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Sr,successfulResponseHandler:Nt(ZR),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=this,m=tS(e.prompt),c=new Map,p={unified:"other",raw:void 0},f,v=[],g=null,y={},S=[],b=!1,_={},k;return{stream:d.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,h){var I,j,U,F,Z,L,M,q,C,E,te,P,se,ee,he,fe,V,Ae,T,pe,de,H,le,R,D,Q,B,G,Me,sr;if(e.includeRawChunks&&h.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){p={unified:"error",raw:void 0},h.enqueue({type:"error",error:w.error});return}let x=w.value;if(rS(x)){if(x.item.type==="function_call")y[x.output_index]={toolName:x.item.name,toolCallId:x.item.call_id},h.enqueue({type:"tool-input-start",id:x.item.call_id,toolName:x.item.name});else if(x.item.type==="web_search_call")y[x.output_index]={toolName:n.toCustomToolName(o!=null?o:"web_search"),toolCallId:x.item.id},h.enqueue({type:"tool-input-start",id:x.item.id,toolName:n.toCustomToolName(o!=null?o:"web_search"),providerExecuted:!0}),h.enqueue({type:"tool-input-end",id:x.item.id}),h.enqueue({type:"tool-call",toolCallId:x.item.id,toolName:n.toCustomToolName(o!=null?o:"web_search"),input:JSON.stringify({}),providerExecuted:!0});else if(x.item.type==="computer_call")y[x.output_index]={toolName:n.toCustomToolName("computer_use"),toolCallId:x.item.id},h.enqueue({type:"tool-input-start",id:x.item.id,toolName:n.toCustomToolName("computer_use"),providerExecuted:!0});else if(x.item.type==="code_interpreter_call")y[x.output_index]={toolName:n.toCustomToolName("code_interpreter"),toolCallId:x.item.id,codeInterpreter:{containerId:x.item.container_id}},h.enqueue({type:"tool-input-start",id:x.item.id,toolName:n.toCustomToolName("code_interpreter"),providerExecuted:!0}),h.enqueue({type:"tool-input-delta",id:x.item.id,delta:`{"containerId":"${x.item.container_id}","code":"`});else if(x.item.type==="file_search_call")h.enqueue({type:"tool-call",toolCallId:x.item.id,toolName:n.toCustomToolName("file_search"),input:"{}",providerExecuted:!0});else if(x.item.type==="image_generation_call")h.enqueue({type:"tool-call",toolCallId:x.item.id,toolName:n.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0});else if(!(x.item.type==="mcp_call"||x.item.type==="mcp_list_tools"||x.item.type==="mcp_approval_request"))if(x.item.type==="apply_patch_call"){let{call_id:ue,operation:Oe}=x.item;if(y[x.output_index]={toolName:n.toCustomToolName("apply_patch"),toolCallId:ue,applyPatch:{hasDiff:Oe.type==="delete_file",endEmitted:Oe.type==="delete_file"}},h.enqueue({type:"tool-input-start",id:ue,toolName:n.toCustomToolName("apply_patch")}),Oe.type==="delete_file"){let De=JSON.stringify({callId:ue,operation:Oe});h.enqueue({type:"tool-input-delta",id:ue,delta:De}),h.enqueue({type:"tool-input-end",id:ue})}else h.enqueue({type:"tool-input-delta",id:ue,delta:`{"callId":"${lo(ue)}","operation":{"type":"${lo(Oe.type)}","path":"${lo(Oe.path)}","diff":"`})}else x.item.type==="shell_call"?y[x.output_index]={toolName:n.toCustomToolName("shell"),toolCallId:x.item.call_id}:x.item.type==="message"?(S.splice(0,S.length),h.enqueue({type:"text-start",id:x.item.id,providerMetadata:{[s]:{itemId:x.item.id}}})):rS(x)&&x.item.type==="reasoning"&&(_[x.item.id]={encryptedContent:x.item.encrypted_content,summaryParts:{0:"active"}},h.enqueue({type:"reasoning-start",id:`${x.item.id}:0`,providerMetadata:{[s]:{itemId:x.item.id,reasoningEncryptedContent:(I=x.item.encrypted_content)!=null?I:null}}}))}else if(WR(x)){if(x.item.type==="message")h.enqueue({type:"text-end",id:x.item.id,providerMetadata:{[s]:{itemId:x.item.id,...S.length>0&&{annotations:S}}}});else if(x.item.type==="function_call")y[x.output_index]=void 0,b=!0,h.enqueue({type:"tool-input-end",id:x.item.call_id}),h.enqueue({type:"tool-call",toolCallId:x.item.call_id,toolName:x.item.name,input:x.item.arguments,providerMetadata:{[s]:{itemId:x.item.id}}});else if(x.item.type==="web_search_call")y[x.output_index]=void 0,h.enqueue({type:"tool-result",toolCallId:x.item.id,toolName:n.toCustomToolName(o!=null?o:"web_search"),result:nS(x.item.action)});else if(x.item.type==="computer_call")y[x.output_index]=void 0,h.enqueue({type:"tool-input-end",id:x.item.id}),h.enqueue({type:"tool-call",toolCallId:x.item.id,toolName:n.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),h.enqueue({type:"tool-result",toolCallId:x.item.id,toolName:n.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:x.item.status||"completed"}});else if(x.item.type==="file_search_call")y[x.output_index]=void 0,h.enqueue({type:"tool-result",toolCallId:x.item.id,toolName:n.toCustomToolName("file_search"),result:{queries:x.item.queries,results:(U=(j=x.item.results)==null?void 0:j.map(ue=>({attributes:ue.attributes,fileId:ue.file_id,filename:ue.filename,score:ue.score,text:ue.text})))!=null?U:null}});else if(x.item.type==="code_interpreter_call")y[x.output_index]=void 0,h.enqueue({type:"tool-result",toolCallId:x.item.id,toolName:n.toCustomToolName("code_interpreter"),result:{outputs:x.item.outputs}});else if(x.item.type==="image_generation_call")h.enqueue({type:"tool-result",toolCallId:x.item.id,toolName:n.toCustomToolName("image_generation"),result:{result:x.item.result}});else if(x.item.type==="mcp_call"){y[x.output_index]=void 0;let ue=(F=x.item.approval_request_id)!=null?F:void 0,Oe=ue!=null&&(L=(Z=c.get(ue))!=null?Z:m[ue])!=null?L:x.item.id,De=`mcp.${x.item.name}`;h.enqueue({type:"tool-call",toolCallId:Oe,toolName:De,input:x.item.arguments,providerExecuted:!0,dynamic:!0}),h.enqueue({type:"tool-result",toolCallId:Oe,toolName:De,result:{type:"call",serverLabel:x.item.server_label,name:x.item.name,arguments:x.item.arguments,...x.item.output!=null?{output:x.item.output}:{},...x.item.error!=null?{error:x.item.error}:{}},providerMetadata:{[s]:{itemId:x.item.id}}})}else if(x.item.type==="mcp_list_tools")y[x.output_index]=void 0;else if(x.item.type==="apply_patch_call"){let ue=y[x.output_index];ue!=null&&ue.applyPatch&&!ue.applyPatch.endEmitted&&x.item.operation.type!=="delete_file"&&(ue.applyPatch.hasDiff||h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:lo(x.item.operation.diff)}),h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:'"}}'}),h.enqueue({type:"tool-input-end",id:ue.toolCallId}),ue.applyPatch.endEmitted=!0),ue&&x.item.status==="completed"&&h.enqueue({type:"tool-call",toolCallId:ue.toolCallId,toolName:n.toCustomToolName("apply_patch"),input:JSON.stringify({callId:x.item.call_id,operation:x.item.operation}),providerMetadata:{[s]:{itemId:x.item.id}}}),y[x.output_index]=void 0}else if(x.item.type==="mcp_approval_request"){y[x.output_index]=void 0;let ue=(C=(q=(M=u.config).generateId)==null?void 0:q.call(M))!=null?C:Fe(),Oe=(E=x.item.approval_request_id)!=null?E:x.item.id;c.set(Oe,ue);let De=`mcp.${x.item.name}`;h.enqueue({type:"tool-call",toolCallId:ue,toolName:De,input:x.item.arguments,providerExecuted:!0,dynamic:!0}),h.enqueue({type:"tool-approval-request",approvalId:Oe,toolCallId:ue})}else if(x.item.type==="local_shell_call")y[x.output_index]=void 0,h.enqueue({type:"tool-call",toolCallId:x.item.call_id,toolName:n.toCustomToolName("local_shell"),input:JSON.stringify({action:{type:"exec",command:x.item.action.command,timeoutMs:x.item.action.timeout_ms,user:x.item.action.user,workingDirectory:x.item.action.working_directory,env:x.item.action.env}}),providerMetadata:{[s]:{itemId:x.item.id}}});else if(x.item.type==="shell_call")y[x.output_index]=void 0,h.enqueue({type:"tool-call",toolCallId:x.item.call_id,toolName:n.toCustomToolName("shell"),input:JSON.stringify({action:{commands:x.item.action.commands}}),providerMetadata:{[s]:{itemId:x.item.id}}});else if(x.item.type==="reasoning"){let ue=_[x.item.id],Oe=Object.entries(ue.summaryParts).filter(([De,at])=>at==="active"||at==="can-conclude").map(([De])=>De);for(let De of Oe)h.enqueue({type:"reasoning-end",id:`${x.item.id}:${De}`,providerMetadata:{[s]:{itemId:x.item.id,reasoningEncryptedContent:(te=x.item.encrypted_content)!=null?te:null}}});delete _[x.item.id]}}else if(XR(x)){let ue=y[x.output_index];ue!=null&&h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:x.delta})}else if(rM(x)){let ue=y[x.output_index];ue!=null&&ue.applyPatch&&(h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:lo(x.delta)}),ue.applyPatch.hasDiff=!0)}else if(nM(x)){let ue=y[x.output_index];ue!=null&&ue.applyPatch&&!ue.applyPatch.endEmitted&&(ue.applyPatch.hasDiff||(h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:lo(x.diff)}),ue.applyPatch.hasDiff=!0),h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:'"}}'}),h.enqueue({type:"tool-input-end",id:ue.toolCallId}),ue.applyPatch.endEmitted=!0)}else if(QR(x))h.enqueue({type:"tool-result",toolCallId:x.item_id,toolName:n.toCustomToolName("image_generation"),result:{result:x.partial_image_b64},preliminary:!0});else if(eM(x)){let ue=y[x.output_index];ue!=null&&h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:lo(x.delta)})}else if(tM(x)){let ue=y[x.output_index];ue!=null&&(h.enqueue({type:"tool-input-delta",id:ue.toolCallId,delta:'"}'}),h.enqueue({type:"tool-input-end",id:ue.toolCallId}),h.enqueue({type:"tool-call",toolCallId:ue.toolCallId,toolName:n.toCustomToolName("code_interpreter"),input:JSON.stringify({code:x.code,containerId:ue.codeInterpreter.containerId}),providerExecuted:!0}))}else if(YR(x))g=x.response.id,h.enqueue({type:"response-metadata",id:x.response.id,timestamp:new Date(x.response.created_at*1e3),modelId:x.response.model});else if(JR(x))h.enqueue({type:"text-delta",id:x.item_id,delta:x.delta}),(se=(P=e.providerOptions)==null?void 0:P[s])!=null&&se.logprobs&&x.logprobs&&v.push(x.logprobs);else if(x.type==="response.reasoning_summary_part.added"){if(x.summary_index>0){let ue=_[x.item_id];ue.summaryParts[x.summary_index]="active";for(let Oe of Object.keys(ue.summaryParts))ue.summaryParts[Oe]==="can-conclude"&&(h.enqueue({type:"reasoning-end",id:`${x.item_id}:${Oe}`,providerMetadata:{[s]:{itemId:x.item_id}}}),ue.summaryParts[Oe]="concluded");h.enqueue({type:"reasoning-start",id:`${x.item_id}:${x.summary_index}`,providerMetadata:{[s]:{itemId:x.item_id,reasoningEncryptedContent:(he=(ee=_[x.item_id])==null?void 0:ee.encryptedContent)!=null?he:null}}})}}else x.type==="response.reasoning_summary_text.delta"?h.enqueue({type:"reasoning-delta",id:`${x.item_id}:${x.summary_index}`,delta:x.delta,providerMetadata:{[s]:{itemId:x.item_id}}}):x.type==="response.reasoning_summary_part.done"?i?(h.enqueue({type:"reasoning-end",id:`${x.item_id}:${x.summary_index}`,providerMetadata:{[s]:{itemId:x.item_id}}}),_[x.item_id].summaryParts[x.summary_index]="concluded"):_[x.item_id].summaryParts[x.summary_index]="can-conclude":KR(x)?(p={unified:Qw({finishReason:(fe=x.response.incomplete_details)==null?void 0:fe.reason,hasFunctionCall:b}),raw:(Ae=(V=x.response.incomplete_details)==null?void 0:V.reason)!=null?Ae:void 0},f=x.response.usage,typeof x.response.service_tier=="string"&&(k=x.response.service_tier)):oM(x)?(S.push(x.annotation),x.annotation.type==="url_citation"?h.enqueue({type:"source",sourceType:"url",id:(de=(pe=(T=u.config).generateId)==null?void 0:pe.call(T))!=null?de:Fe(),url:x.annotation.url,title:x.annotation.title}):x.annotation.type==="file_citation"?h.enqueue({type:"source",sourceType:"document",id:(R=(le=(H=u.config).generateId)==null?void 0:le.call(H))!=null?R:Fe(),mediaType:"text/plain",title:x.annotation.filename,filename:x.annotation.filename,providerMetadata:{[s]:{type:x.annotation.type,fileId:x.annotation.file_id,index:x.annotation.index}}}):x.annotation.type==="container_file_citation"?h.enqueue({type:"source",sourceType:"document",id:(B=(Q=(D=u.config).generateId)==null?void 0:Q.call(D))!=null?B:Fe(),mediaType:"text/plain",title:x.annotation.filename,filename:x.annotation.filename,providerMetadata:{[s]:{type:x.annotation.type,fileId:x.annotation.file_id,containerId:x.annotation.container_id}}}):x.annotation.type==="file_path"&&h.enqueue({type:"source",sourceType:"document",id:(sr=(Me=(G=u.config).generateId)==null?void 0:Me.call(G))!=null?sr:Fe(),mediaType:"application/octet-stream",title:x.annotation.file_id,filename:x.annotation.file_id,providerMetadata:{[s]:{type:x.annotation.type,fileId:x.annotation.file_id,index:x.annotation.index}}})):aM(x)&&h.enqueue({type:"error",error:x})},flush(w){let h={[s]:{responseId:g,...v.length>0?{logprobs:v}:{},...k!==void 0?{serviceTier:k}:{}}};w.enqueue({type:"finish",finishReason:p,usage:Yw(f),providerMetadata:h})}})),request:{body:t},response:{headers:l}}}};function JR(e){return e.type==="response.output_text.delta"}function WR(e){return e.type==="response.output_item.done"}function KR(e){return e.type==="response.completed"||e.type==="response.incomplete"}function YR(e){return e.type==="response.created"}function XR(e){return e.type==="response.function_call_arguments.delta"}function QR(e){return e.type==="response.image_generation_call.partial_image"}function eM(e){return e.type==="response.code_interpreter_call_code.delta"}function tM(e){return e.type==="response.code_interpreter_call_code.done"}function rM(e){return e.type==="response.apply_patch_call_operation_diff.delta"}function nM(e){return e.type==="response.apply_patch_call_operation_diff.done"}function rS(e){return e.type==="response.output_item.added"}function oM(e){return e.type==="response.output_text.annotation.added"}function aM(e){return e.type==="error"}function nS(e){var t;switch(e.type){case"search":return{action:{type:"search",query:(t=e.query)!=null?t:void 0},...e.sources!=null&&{sources:e.sources}};case"open_page":return{action:{type:"openPage",url:e.url}};case"find_in_page":return{action:{type:"findInPage",url:e.url,pattern:e.pattern}}}}function lo(e){return JSON.stringify(e).slice(1,-1)}var iM=O(()=>A(a.object({instructions:a.string().nullish(),speed:a.number().min(.25).max(4).default(1).nullish()}))),sM=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({text:e,voice:t="alloy",outputFormat:r="mp3",speed:o,instructions:n,language:i,providerOptions:s}){let l=[],d=await Ee({provider:"openai",providerOptions:s,schema:iM}),u={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:o,instructions:n};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?u.response_format=r:l.push({type:"unsupported",feature:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),d){let m={};for(let c in m){let p=m[c];p!==void 0&&(u[c]=p)}}return i&&l.push({type:"unsupported",feature:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:u,warnings:l}}async doGenerate(e){var t,r,o;let n=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,{requestBody:i,warnings:s}=await this.getArgs(e),{value:l,responseHeaders:d,rawValue:u}=await we({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:i,failedResponseHandler:Sr,successfulResponseHandler:qw(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:l,warnings:s,request:{body:JSON.stringify(i)},response:{timestamp:n,modelId:this.modelId,headers:d,body:u}}}},lM=O(()=>A(a.object({text:a.string(),language:a.string().nullish(),duration:a.number().nullish(),words:a.array(a.object({word:a.string(),start:a.number(),end:a.number()})).nullish(),segments:a.array(a.object({id:a.number(),seek:a.number(),start:a.number(),end:a.number(),text:a.string(),tokens:a.array(a.number()),temperature:a.number(),avg_logprob:a.number(),compression_ratio:a.number(),no_speech_prob:a.number()})).nullish()}))),uM=O(()=>A(a.object({include:a.array(a.string()).optional(),language:a.string().optional(),prompt:a.string().optional(),temperature:a.number().min(0).max(1).default(0).optional(),timestampGranularities:a.array(a.enum(["word","segment"])).default(["segment"]).optional()}))),oS={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},cM=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:t,providerOptions:r}){let o=[],n=await Ee({provider:"openai",providerOptions:r,schema:uM}),i=new FormData,s=e instanceof Uint8Array?new Blob([e]):new Blob([ar(e)]);i.append("model",this.modelId);let l=Nw(t);if(i.append("file",new File([s],"audio",{type:t}),`audio.${l}`),n){let d={include:n.include,language:n.language,prompt:n.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:n.temperature,timestamp_granularities:n.timestampGranularities};for(let[u,m]of Object.entries(d))if(m!=null)if(Array.isArray(m))for(let c of m)i.append(`${u}[]`,String(c));else i.append(u,String(m))}return{formData:i,warnings:o}}async doGenerate(e){var t,r,o,n,i,s,l,d;let u=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,{formData:m,warnings:c}=await this.getArgs(e),{value:p,responseHeaders:f,rawValue:v}=await ba({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),formData:m,failedResponseHandler:Sr,successfulResponseHandler:ke(lM),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=p.language!=null&&p.language in oS?oS[p.language]:void 0;return{text:p.text,segments:(l=(s=(n=p.segments)==null?void 0:n.map(y=>({text:y.text,startSecond:y.start,endSecond:y.end})))!=null?s:(i=p.words)==null?void 0:i.map(y=>({text:y.word,startSecond:y.start,endSecond:y.end})))!=null?l:[],language:g,durationInSeconds:(d=p.duration)!=null?d:void 0,warnings:c,response:{timestamp:u,modelId:this.modelId,headers:f,body:v}}}},dM="3.0.26";function dh(e={}){var t,r;let o=(t=Vr(cn({settingValue:e.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?t:"https://api.openai.com/v1",n=(r=e.name)!=null?r:"openai",i=()=>Ct({Authorization:`Bearer ${ya({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers},`ai-sdk/openai/${dM}`),s=g=>new KO(g,{provider:`${n}.chat`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch}),l=g=>new eR(g,{provider:`${n}.completion`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch}),d=g=>new nR(g,{provider:`${n}.embedding`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch}),u=g=>new sR(g,{provider:`${n}.image`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch}),m=g=>new cM(g,{provider:`${n}.transcription`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch}),c=g=>new sM(g,{provider:`${n}.speech`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch}),p=g=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return f(g)},f=g=>new BR(g,{provider:`${n}.responses`,url:({path:y})=>`${o}${y}`,headers:i,fetch:e.fetch,fileIdPrefixes:["file-"]}),v=function(g){return p(g)};return v.specificationVersion="v3",v.languageModel=p,v.chat=s,v.completion=l,v.responses=f,v.embedding=d,v.embeddingModel=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=u,v.imageModel=u,v.transcription=m,v.transcriptionModel=m,v.speech=c,v.speechModel=c,v.tools=FR,v}var R5=dh();var pM=a.object({error:a.object({message:a.string(),type:a.string().nullish(),param:a.any().nullish(),code:a.union([a.string(),a.number()]).nullish()})}),ji={errorSchema:pM,errorToMessage:e=>e.error.message};function gS(e){var t,r,o,n,i,s;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let l=(t=e.prompt_tokens)!=null?t:0,d=(r=e.completion_tokens)!=null?r:0,u=(n=(o=e.prompt_tokens_details)==null?void 0:o.cached_tokens)!=null?n:0,m=(s=(i=e.completion_tokens_details)==null?void 0:i.reasoning_tokens)!=null?s:0;return{inputTokens:{total:l,noCache:l-u,cacheRead:u,cacheWrite:void 0},outputTokens:{total:d,text:d-m,reasoning:m},raw:e}}function Ni(e){var t,r;return(r=(t=e==null?void 0:e.providerOptions)==null?void 0:t.openaiCompatible)!=null?r:{}}function mM(e){switch(e){case"audio/wav":return"wav";case"audio/mp3":case"audio/mpeg":return"mp3";default:return null}}function fM(e){var t,r,o;let n=[];for(let{role:i,content:s,...l}of e){let d=Ni({...l});switch(i){case"system":{n.push({role:"system",content:s,...d});break}case"user":{if(s.length===1&&s[0].type==="text"){n.push({role:"user",content:s[0].text,...Ni(s[0])});break}n.push({role:"user",content:s.map(u=>{var m;let c=Ni(u);switch(u.type){case"text":return{type:"text",text:u.text,...c};case"file":{if(u.mediaType.startsWith("image/")){let p=u.mediaType==="image/*"?"image/jpeg":u.mediaType;return{type:"image_url",image_url:{url:u.data instanceof URL?u.data.toString():`data:${p};base64,${kt(u.data)}`},...c}}if(u.mediaType.startsWith("audio/")){if(u.data instanceof URL)throw new Re({functionality:"audio file parts with URLs"});let p=mM(u.mediaType);if(p===null)throw new Re({functionality:`audio media type ${u.mediaType}`});return{type:"input_audio",input_audio:{data:kt(u.data),format:p},...c}}if(u.mediaType==="application/pdf"){if(u.data instanceof URL)throw new Re({functionality:"PDF file parts with URLs"});return{type:"file",file:{filename:(m=u.filename)!=null?m:"document.pdf",file_data:`data:application/pdf;base64,${kt(u.data)}`},...c}}if(u.mediaType.startsWith("text/"))return{type:"text",text:u.data instanceof URL?u.data.toString():typeof u.data=="string"?u.data:new TextDecoder().decode(u.data),...c};throw new Re({functionality:`file part media type ${u.mediaType}`})}}}),...d});break}case"assistant":{let u="",m="",c=[];for(let p of s){let f=Ni(p);switch(p.type){case"text":{u+=p.text;break}case"reasoning":{m+=p.text;break}case"tool-call":{let v=(r=(t=p.providerOptions)==null?void 0:t.google)==null?void 0:r.thoughtSignature;c.push({id:p.toolCallId,type:"function",function:{name:p.toolName,arguments:JSON.stringify(p.input)},...f,...v?{extra_content:{google:{thought_signature:String(v)}}}:{}});break}}}n.push({role:"assistant",content:u,...m.length>0?{reasoning_content:m}:{},tool_calls:c.length>0?c:void 0,...d});break}case"tool":{for(let u of s){if(u.type==="tool-approval-response")continue;let m=u.output,c;switch(m.type){case"text":case"error-text":c=m.value;break;case"execution-denied":c=(o=m.reason)!=null?o:"Tool execution denied.";break;case"content":case"json":case"error-json":c=JSON.stringify(m.value);break}let p=Ni(u);n.push({role:"tool",tool_call_id:u.toolCallId,content:c,...p})}break}default:{let u=i;throw new Error(`Unsupported role: ${u}`)}}}return n}function hS({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function vS(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var bu=a.object({user:a.string().optional(),reasoningEffort:a.string().optional(),textVerbosity:a.string().optional(),strictJsonSchema:a.boolean().optional()});function gM({tools:e,toolChoice:t}){e=e!=null&&e.length?e:void 0;let r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let o=[];for(let i of e)i.type==="provider"?r.push({type:"unsupported",feature:`provider-defined tool ${i.id}`}):o.push({type:"function",function:{name:i.name,description:i.description,parameters:i.inputSchema,...i.strict!=null?{strict:i.strict}:{}}});if(t==null)return{tools:o,toolChoice:void 0,toolWarnings:r};let n=t.type;switch(n){case"auto":case"none":case"required":return{tools:o,toolChoice:n,toolWarnings:r};case"tool":return{tools:o,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:r};default:{let i=n;throw new Re({functionality:`tool choice type: ${i}`})}}}var hM=class{constructor(e,t){this.specificationVersion="v3";var r,o;this.modelId=e,this.config=t;let n=(r=t.errorStructure)!=null?r:ji;this.chunkSchema=_M(n.errorSchema),this.failedResponseHandler=ot(n),this.supportsStructuredOutputs=(o=t.supportsStructuredOutputs)!=null?o:!1}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}transformRequestBody(e){var t,r,o;return(o=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?o:e}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,providerOptions:l,stopSequences:d,responseFormat:u,seed:m,toolChoice:c,tools:p}){var f,v,g,y,S;let b=[],_=await Ee({provider:"openai-compatible",providerOptions:l,schema:bu});_!=null&&b.push({type:"other",message:"The 'openai-compatible' key in providerOptions is deprecated. Use 'openaiCompatible' instead."});let k=Object.assign(_!=null?_:{},(f=await Ee({provider:"openaiCompatible",providerOptions:l,schema:bu}))!=null?f:{},(v=await Ee({provider:this.providerOptionsName,providerOptions:l,schema:bu}))!=null?v:{}),w=(g=k==null?void 0:k.strictJsonSchema)!=null?g:!0;n!=null&&b.push({type:"unsupported",feature:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported",feature:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{tools:h,toolChoice:I,toolWarnings:j}=gM({tools:p,toolChoice:c});return{args:{model:this.modelId,user:k.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs===!0&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:w,name:(y=u.name)!=null?y:"response",description:u.description}}:{type:"json_object"}:void 0,stop:d,seed:m,...Object.fromEntries(Object.entries((S=l==null?void 0:l[this.providerOptionsName])!=null?S:{}).filter(([U])=>!Object.keys(bu.shape).includes(U))),reasoning_effort:k.reasoningEffort,verbosity:k.textVerbosity,messages:fM(e),tools:h,tool_choice:I},warnings:[...b,...j]}}async doGenerate(e){var t,r,o,n,i,s,l,d;let{args:u,warnings:m}=await this.getArgs({...e}),c=this.transformRequestBody(u),p=JSON.stringify(c),{responseHeaders:f,value:v,rawValue:g}=await we({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:c,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ke(vM),abortSignal:e.abortSignal,fetch:this.config.fetch}),y=v.choices[0],S=[],b=y.message.content;b!=null&&b.length>0&&S.push({type:"text",text:b});let _=(t=y.message.reasoning_content)!=null?t:y.message.reasoning;if(_!=null&&_.length>0&&S.push({type:"reasoning",text:_}),y.message.tool_calls!=null)for(let h of y.message.tool_calls){let I=(o=(r=h.extra_content)==null?void 0:r.google)==null?void 0:o.thought_signature;S.push({type:"tool-call",toolCallId:(n=h.id)!=null?n:Fe(),toolName:h.function.name,input:h.function.arguments,...I?{providerMetadata:{[this.providerOptionsName]:{thoughtSignature:I}}}:{}})}let k={[this.providerOptionsName]:{},...await((s=(i=this.config.metadataExtractor)==null?void 0:i.extractMetadata)==null?void 0:s.call(i,{parsedBody:g}))},w=(l=v.usage)==null?void 0:l.completion_tokens_details;return(w==null?void 0:w.accepted_prediction_tokens)!=null&&(k[this.providerOptionsName].acceptedPredictionTokens=w==null?void 0:w.accepted_prediction_tokens),(w==null?void 0:w.rejected_prediction_tokens)!=null&&(k[this.providerOptionsName].rejectedPredictionTokens=w==null?void 0:w.rejected_prediction_tokens),{content:S,finishReason:{unified:vS(y.finish_reason),raw:(d=y.finish_reason)!=null?d:void 0},usage:gS(v.usage),providerMetadata:k,request:{body:p},response:{...hS(v),headers:f,body:g},warnings:m}}async doStream(e){var t;let{args:r,warnings:o}=await this.getArgs({...e}),n=this.transformRequestBody({...r,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:l}=await we({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:n,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Nt(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=[],u={unified:"other",raw:void 0},m,c=!0,p=this.providerOptionsName,f=!1,v=!1;return{stream:l.pipeThrough(new TransformStream({start(g){g.enqueue({type:"stream-start",warnings:o})},transform(g,y){var S,b,_,k,w,h,I,j,U,F,Z,L,M,q,C,E,te,P;if(e.includeRawChunks&&y.enqueue({type:"raw",rawValue:g.rawValue}),!g.success){u={unified:"error",raw:void 0},y.enqueue({type:"error",error:g.error});return}if(i==null||i.processChunk(g.rawValue),"error"in g.value){u={unified:"error",raw:void 0},y.enqueue({type:"error",error:g.value.error.message});return}let se=g.value;c&&(c=!1,y.enqueue({type:"response-metadata",...hS(se)})),se.usage!=null&&(m=se.usage);let ee=se.choices[0];if((ee==null?void 0:ee.finish_reason)!=null&&(u={unified:vS(ee.finish_reason),raw:(S=ee.finish_reason)!=null?S:void 0}),(ee==null?void 0:ee.delta)==null)return;let he=ee.delta,fe=(b=he.reasoning_content)!=null?b:he.reasoning;if(fe&&(f||(y.enqueue({type:"reasoning-start",id:"reasoning-0"}),f=!0),y.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:fe})),he.content&&(f&&(y.enqueue({type:"reasoning-end",id:"reasoning-0"}),f=!1),v||(y.enqueue({type:"text-start",id:"txt-0"}),v=!0),y.enqueue({type:"text-delta",id:"txt-0",delta:he.content})),he.tool_calls!=null){f&&(y.enqueue({type:"reasoning-end",id:"reasoning-0"}),f=!1);for(let V of he.tool_calls){let Ae=(_=V.index)!=null?_:d.length;if(d[Ae]==null){if(V.id==null)throw new Gn({data:V,message:"Expected 'id' to be a string."});if(((k=V.function)==null?void 0:k.name)==null)throw new Gn({data:V,message:"Expected 'function.name' to be a string."});y.enqueue({type:"tool-input-start",id:V.id,toolName:V.function.name}),d[Ae]={id:V.id,type:"function",function:{name:V.function.name,arguments:(w=V.function.arguments)!=null?w:""},hasFinished:!1,thoughtSignature:(j=(I=(h=V.extra_content)==null?void 0:h.google)==null?void 0:I.thought_signature)!=null?j:void 0};let pe=d[Ae];((U=pe.function)==null?void 0:U.name)!=null&&((F=pe.function)==null?void 0:F.arguments)!=null&&(pe.function.arguments.length>0&&y.enqueue({type:"tool-input-delta",id:pe.id,delta:pe.function.arguments}),_a(pe.function.arguments)&&(y.enqueue({type:"tool-input-end",id:pe.id}),y.enqueue({type:"tool-call",toolCallId:(Z=pe.id)!=null?Z:Fe(),toolName:pe.function.name,input:pe.function.arguments,...pe.thoughtSignature?{providerMetadata:{[p]:{thoughtSignature:pe.thoughtSignature}}}:{}}),pe.hasFinished=!0));continue}let T=d[Ae];T.hasFinished||(((L=V.function)==null?void 0:L.arguments)!=null&&(T.function.arguments+=(q=(M=V.function)==null?void 0:M.arguments)!=null?q:""),y.enqueue({type:"tool-input-delta",id:T.id,delta:(C=V.function.arguments)!=null?C:""}),((E=T.function)==null?void 0:E.name)!=null&&((te=T.function)==null?void 0:te.arguments)!=null&&_a(T.function.arguments)&&(y.enqueue({type:"tool-input-end",id:T.id}),y.enqueue({type:"tool-call",toolCallId:(P=T.id)!=null?P:Fe(),toolName:T.function.name,input:T.function.arguments,...T.thoughtSignature?{providerMetadata:{[p]:{thoughtSignature:T.thoughtSignature}}}:{}}),T.hasFinished=!0))}}},flush(g){var y,S,b,_,k;f&&g.enqueue({type:"reasoning-end",id:"reasoning-0"}),v&&g.enqueue({type:"text-end",id:"txt-0"});for(let h of d.filter(I=>!I.hasFinished))g.enqueue({type:"tool-input-end",id:h.id}),g.enqueue({type:"tool-call",toolCallId:(y=h.id)!=null?y:Fe(),toolName:h.function.name,input:h.function.arguments,...h.thoughtSignature?{providerMetadata:{[p]:{thoughtSignature:h.thoughtSignature}}}:{}});let w={[p]:{},...i==null?void 0:i.buildMetadata()};((S=m==null?void 0:m.completion_tokens_details)==null?void 0:S.accepted_prediction_tokens)!=null&&(w[p].acceptedPredictionTokens=(b=m==null?void 0:m.completion_tokens_details)==null?void 0:b.accepted_prediction_tokens),((_=m==null?void 0:m.completion_tokens_details)==null?void 0:_.rejected_prediction_tokens)!=null&&(w[p].rejectedPredictionTokens=(k=m==null?void 0:m.completion_tokens_details)==null?void 0:k.rejected_prediction_tokens),g.enqueue({type:"finish",finishReason:u,usage:gS(m),providerMetadata:w})}})),request:{body:n},response:{headers:s}}}},SS=a.looseObject({prompt_tokens:a.number().nullish(),completion_tokens:a.number().nullish(),total_tokens:a.number().nullish(),prompt_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),completion_tokens_details:a.object({reasoning_tokens:a.number().nullish(),accepted_prediction_tokens:a.number().nullish(),rejected_prediction_tokens:a.number().nullish()}).nullish()}).nullish(),vM=a.looseObject({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({message:a.object({role:a.literal("assistant").nullish(),content:a.string().nullish(),reasoning_content:a.string().nullish(),reasoning:a.string().nullish(),tool_calls:a.array(a.object({id:a.string().nullish(),function:a.object({name:a.string(),arguments:a.string()}),extra_content:a.object({google:a.object({thought_signature:a.string().nullish()}).nullish()}).nullish()})).nullish()}),finish_reason:a.string().nullish()})),usage:SS}),yM=a.looseObject({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({delta:a.object({role:a.enum(["assistant"]).nullish(),content:a.string().nullish(),reasoning_content:a.string().nullish(),reasoning:a.string().nullish(),tool_calls:a.array(a.object({index:a.number().nullish(),id:a.string().nullish(),function:a.object({name:a.string().nullish(),arguments:a.string().nullish()}),extra_content:a.object({google:a.object({thought_signature:a.string().nullish()}).nullish()}).nullish()})).nullish()}).nullish(),finish_reason:a.string().nullish()})),usage:SS}),_M=e=>a.union([yM,e]);function yS(e){var t,r;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let o=(t=e.prompt_tokens)!=null?t:0,n=(r=e.completion_tokens)!=null?r:0;return{inputTokens:{total:o,noCache:o,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:n,text:n,reasoning:void 0},raw:e}}function bM({prompt:e,user:t="user",assistant:r="assistant"}){let o="";e[0].role==="system"&&(o+=`${e[0].content}

`,e=e.slice(1));for(let{role:n,content:i}of e)switch(n){case"system":throw new gr({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let s=i.map(l=>{if(l.type==="text")return l.text}).filter(Boolean).join("");o+=`${t}:
${s}

`;break}case"assistant":{let s=i.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Re({functionality:"tool-call messages"})}}).join("");o+=`${r}:
${s}

`;break}case"tool":throw new Re({functionality:"tool messages"});default:{let s=n;throw new Error(`Unsupported role: ${s}`)}}return o+=`${r}:
`,{prompt:o,stopSequences:[`
${t}:`]}}function _S({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function bS(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var xM=a.object({echo:a.boolean().optional(),logitBias:a.record(a.string(),a.number()).optional(),suffix:a.string().optional(),user:a.string().optional()}),wM=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t;let o=(r=t.errorStructure)!=null?r:ji;this.chunkSchema=kM(o.errorSchema),this.failedResponseHandler=ot(o)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:l,responseFormat:d,seed:u,providerOptions:m,tools:c,toolChoice:p}){var f;let v=[],g=(f=await Ee({provider:this.providerOptionsName,providerOptions:m,schema:xM}))!=null?f:{};n!=null&&v.push({type:"unsupported",feature:"topK"}),c!=null&&c.length&&v.push({type:"unsupported",feature:"tools"}),p!=null&&v.push({type:"unsupported",feature:"toolChoice"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});let{prompt:y,stopSequences:S}=bM({prompt:e}),b=[...S!=null?S:[],...l!=null?l:[]];return{args:{model:this.modelId,echo:g.echo,logit_bias:g.logitBias,suffix:g.suffix,user:g.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,seed:u,...m==null?void 0:m[this.providerOptionsName],prompt:y,stop:b.length>0?b:void 0},warnings:v}}async doGenerate(e){let{args:t,warnings:r}=await this.getArgs(e),{responseHeaders:o,value:n,rawValue:i}=await we({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:t,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ke(SM),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=n.choices[0],l=[];return s.text!=null&&s.text.length>0&&l.push({type:"text",text:s.text}),{content:l,usage:yS(n.usage),finishReason:{unified:bS(s.finish_reason),raw:s.finish_reason},request:{body:t},response:{..._S(n),headers:o,body:i},warnings:r}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:n,value:i}=await we({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:o,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Nt(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),s={unified:"other",raw:void 0},l,d=!0;return{stream:i.pipeThrough(new TransformStream({start(u){u.enqueue({type:"stream-start",warnings:r})},transform(u,m){var c;if(e.includeRawChunks&&m.enqueue({type:"raw",rawValue:u.rawValue}),!u.success){s={unified:"error",raw:void 0},m.enqueue({type:"error",error:u.error});return}let p=u.value;if("error"in p){s={unified:"error",raw:void 0},m.enqueue({type:"error",error:p.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",..._S(p)}),m.enqueue({type:"text-start",id:"0"})),p.usage!=null&&(l=p.usage);let f=p.choices[0];(f==null?void 0:f.finish_reason)!=null&&(s={unified:bS(f.finish_reason),raw:(c=f.finish_reason)!=null?c:void 0}),(f==null?void 0:f.text)!=null&&m.enqueue({type:"text-delta",id:"0",delta:f.text})},flush(u){d||u.enqueue({type:"text-end",id:"0"}),u.enqueue({type:"finish",finishReason:s,usage:yS(l)})}})),request:{body:o},response:{headers:n}}}},kS=a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}),SM=a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string()})),usage:kS.nullish()}),kM=e=>a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string().nullish(),index:a.number()})),usage:kS.nullish()}),e]),ph=a.object({dimensions:a.number().optional(),user:a.string().optional()}),IM=class{constructor(e,t){this.specificationVersion="v3",this.modelId=e,this.config=t}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n,i,s;let l=[],d=await Ee({provider:"openai-compatible",providerOptions:o,schema:ph});d!=null&&l.push({type:"other",message:"The 'openai-compatible' key in providerOptions is deprecated. Use 'openaiCompatible' instead."});let u=Object.assign(d!=null?d:{},(n=await Ee({provider:"openaiCompatible",providerOptions:o,schema:ph}))!=null?n:{},(i=await Ee({provider:this.providerOptionsName,providerOptions:o,schema:ph}))!=null?i:{});if(e.length>this.maxEmbeddingsPerCall)throw new To({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:m,value:c,rawValue:p}=await we({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:_e(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:u.dimensions,user:u.user},failedResponseHandler:ot((s=this.config.errorStructure)!=null?s:ji),successfulResponseHandler:ke(TM),abortSignal:r,fetch:this.config.fetch});return{warnings:l,embeddings:c.data.map(f=>f.embedding),usage:c.usage?{tokens:c.usage.prompt_tokens}:void 0,providerMetadata:c.providerMetadata,response:{headers:m,body:p}}}},TM=a.object({data:a.array(a.object({embedding:a.array(a.number())})),usage:a.object({prompt_tokens:a.number()}).nullish(),providerMetadata:a.record(a.string(),a.record(a.string(),a.any())).optional()}),$M=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=10}get provider(){return this.config.provider}get providerOptionsKey(){return this.config.provider.split(".")[0].trim()}getArgs(e){return{...e[this.providerOptionsKey],...e[EM(this.providerOptionsKey)]}}async doGenerate({prompt:e,n:t,size:r,aspectRatio:o,seed:n,providerOptions:i,headers:s,abortSignal:l,files:d,mask:u}){var m,c,p,f,v;let g=[];o!=null&&g.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),n!=null&&g.push({type:"unsupported",feature:"seed"});let y=(p=(c=(m=this.config._internal)==null?void 0:m.currentDate)==null?void 0:c.call(m))!=null?p:new Date,S=this.getArgs(i);if(d!=null&&d.length>0){let{value:k,responseHeaders:w}=await ba({url:this.config.url({path:"/images/edits",modelId:this.modelId}),headers:_e(this.config.headers(),s),formData:vu({model:this.modelId,prompt:e,image:await Promise.all(d.map(h=>wS(h))),mask:u!=null?await wS(u):void 0,n:t,size:r,...S}),failedResponseHandler:ot((f=this.config.errorStructure)!=null?f:ji),successfulResponseHandler:ke(xS),abortSignal:l,fetch:this.config.fetch});return{images:k.data.map(h=>h.b64_json),warnings:g,response:{timestamp:y,modelId:this.modelId,headers:w}}}let{value:b,responseHeaders:_}=await we({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:_e(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:r,...S,response_format:"b64_json"},failedResponseHandler:ot((v=this.config.errorStructure)!=null?v:ji),successfulResponseHandler:ke(xS),abortSignal:l,fetch:this.config.fetch});return{images:b.data.map(k=>k.b64_json),warnings:g,response:{timestamp:y,modelId:this.modelId,headers:_}}}},xS=a.object({data:a.array(a.object({b64_json:a.string()}))});async function wS(e){if(e.type==="url")return Oi(e.url);let t=e.data instanceof Uint8Array?e.data:ar(e.data);return new Blob([t],{type:e.mediaType})}function EM(e){return e.replace(/[_-]([a-z])/g,t=>t[1].toUpperCase())}var CM="2.0.28";function IS(e){let t=Vr(e.baseURL),r=e.name,o={...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers},n=()=>Ct(o,`ai-sdk/openai-compatible/${CM}`),i=p=>({provider:`${r}.${p}`,url:({path:f})=>{let v=new URL(`${t}${f}`);return e.queryParams&&(v.search=new URLSearchParams(e.queryParams).toString()),v.toString()},headers:n,fetch:e.fetch}),s=p=>l(p),l=p=>new hM(p,{...i("chat"),includeUsage:e.includeUsage,supportsStructuredOutputs:e.supportsStructuredOutputs,transformRequestBody:e.transformRequestBody,metadataExtractor:e.metadataExtractor}),d=p=>new wM(p,{...i("completion"),includeUsage:e.includeUsage}),u=p=>new IM(p,{...i("embedding")}),m=p=>new $M(p,i("image")),c=p=>s(p);return c.specificationVersion="v3",c.languageModel=s,c.chatModel=l,c.completionModel=d,c.embeddingModel=u,c.textEmbeddingModel=u,c.imageModel=m,c}var AM="3.0.41",PM=O(()=>A(a.object({type:a.literal("error"),error:a.object({type:a.string(),message:a.string()})}))),TS=ot({errorSchema:PM,errorToMessage:e=>e.error.message}),OM=O(()=>A(a.object({type:a.literal("message"),id:a.string().nullish(),model:a.string().nullish(),content:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("text"),text:a.string(),citations:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("web_search_result_location"),cited_text:a.string(),url:a.string(),title:a.string(),encrypted_index:a.string()}),a.object({type:a.literal("page_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_page_number:a.number(),end_page_number:a.number()}),a.object({type:a.literal("char_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_char_index:a.number(),end_char_index:a.number()})])).optional()}),a.object({type:a.literal("thinking"),thinking:a.string(),signature:a.string()}),a.object({type:a.literal("redacted_thinking"),data:a.string()}),a.object({type:a.literal("compaction"),content:a.string()}),a.object({type:a.literal("tool_use"),id:a.string(),name:a.string(),input:a.unknown(),caller:a.union([a.object({type:a.literal("code_execution_20250825"),tool_id:a.string()}),a.object({type:a.literal("direct")})]).optional()}),a.object({type:a.literal("server_tool_use"),id:a.string(),name:a.string(),input:a.record(a.string(),a.unknown()).nullish()}),a.object({type:a.literal("mcp_tool_use"),id:a.string(),name:a.string(),input:a.unknown(),server_name:a.string()}),a.object({type:a.literal("mcp_tool_result"),tool_use_id:a.string(),is_error:a.boolean(),content:a.array(a.union([a.string(),a.object({type:a.literal("text"),text:a.string()})]))}),a.object({type:a.literal("web_fetch_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("web_fetch_result"),url:a.string(),retrieved_at:a.string(),content:a.object({type:a.literal("document"),title:a.string().nullable(),citations:a.object({enabled:a.boolean()}).optional(),source:a.union([a.object({type:a.literal("base64"),media_type:a.literal("application/pdf"),data:a.string()}),a.object({type:a.literal("text"),media_type:a.literal("text/plain"),data:a.string()})])})}),a.object({type:a.literal("web_fetch_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("web_search_tool_result"),tool_use_id:a.string(),content:a.union([a.array(a.object({type:a.literal("web_search_result"),url:a.string(),title:a.string(),encrypted_content:a.string(),page_age:a.string().nullish()})),a.object({type:a.literal("web_search_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("code_execution_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number(),content:a.array(a.object({type:a.literal("code_execution_output"),file_id:a.string()})).optional().default([])}),a.object({type:a.literal("code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("bash_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("bash_code_execution_result"),content:a.array(a.object({type:a.literal("bash_code_execution_output"),file_id:a.string()})),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("bash_code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("text_editor_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("text_editor_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_view_result"),content:a.string(),file_type:a.string(),num_lines:a.number().nullable(),start_line:a.number().nullable(),total_lines:a.number().nullable()}),a.object({type:a.literal("text_editor_code_execution_create_result"),is_file_update:a.boolean()}),a.object({type:a.literal("text_editor_code_execution_str_replace_result"),lines:a.array(a.string()).nullable(),new_lines:a.number().nullable(),new_start:a.number().nullable(),old_lines:a.number().nullable(),old_start:a.number().nullable()})])}),a.object({type:a.literal("tool_search_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("tool_search_tool_search_result"),tool_references:a.array(a.object({type:a.literal("tool_reference"),tool_name:a.string()}))}),a.object({type:a.literal("tool_search_tool_result_error"),error_code:a.string()})])})])),stop_reason:a.string().nullish(),stop_sequence:a.string().nullish(),usage:a.looseObject({input_tokens:a.number(),output_tokens:a.number(),cache_creation_input_tokens:a.number().nullish(),cache_read_input_tokens:a.number().nullish(),iterations:a.array(a.object({type:a.union([a.literal("compaction"),a.literal("message")]),input_tokens:a.number(),output_tokens:a.number()})).nullish()}),container:a.object({expires_at:a.string(),id:a.string(),skills:a.array(a.object({type:a.union([a.literal("anthropic"),a.literal("custom")]),skill_id:a.string(),version:a.string()})).nullish()}).nullish(),context_management:a.object({applied_edits:a.array(a.union([a.object({type:a.literal("clear_tool_uses_20250919"),cleared_tool_uses:a.number(),cleared_input_tokens:a.number()}),a.object({type:a.literal("clear_thinking_20251015"),cleared_thinking_turns:a.number(),cleared_input_tokens:a.number()}),a.object({type:a.literal("compact_20260112")})]))}).nullish()}))),RM=O(()=>A(a.discriminatedUnion("type",[a.object({type:a.literal("message_start"),message:a.object({id:a.string().nullish(),model:a.string().nullish(),role:a.string().nullish(),usage:a.looseObject({input_tokens:a.number(),cache_creation_input_tokens:a.number().nullish(),cache_read_input_tokens:a.number().nullish()}),content:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("tool_use"),id:a.string(),name:a.string(),input:a.unknown(),caller:a.union([a.object({type:a.literal("code_execution_20250825"),tool_id:a.string()}),a.object({type:a.literal("direct")})]).optional()})])).nullish(),stop_reason:a.string().nullish(),container:a.object({expires_at:a.string(),id:a.string()}).nullish()})}),a.object({type:a.literal("content_block_start"),index:a.number(),content_block:a.discriminatedUnion("type",[a.object({type:a.literal("text"),text:a.string()}),a.object({type:a.literal("thinking"),thinking:a.string()}),a.object({type:a.literal("tool_use"),id:a.string(),name:a.string(),input:a.record(a.string(),a.unknown()).optional(),caller:a.union([a.object({type:a.literal("code_execution_20250825"),tool_id:a.string()}),a.object({type:a.literal("direct")})]).optional()}),a.object({type:a.literal("redacted_thinking"),data:a.string()}),a.object({type:a.literal("compaction"),content:a.string().nullish()}),a.object({type:a.literal("server_tool_use"),id:a.string(),name:a.string(),input:a.record(a.string(),a.unknown()).nullish()}),a.object({type:a.literal("mcp_tool_use"),id:a.string(),name:a.string(),input:a.unknown(),server_name:a.string()}),a.object({type:a.literal("mcp_tool_result"),tool_use_id:a.string(),is_error:a.boolean(),content:a.array(a.union([a.string(),a.object({type:a.literal("text"),text:a.string()})]))}),a.object({type:a.literal("web_fetch_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("web_fetch_result"),url:a.string(),retrieved_at:a.string(),content:a.object({type:a.literal("document"),title:a.string().nullable(),citations:a.object({enabled:a.boolean()}).optional(),source:a.union([a.object({type:a.literal("base64"),media_type:a.literal("application/pdf"),data:a.string()}),a.object({type:a.literal("text"),media_type:a.literal("text/plain"),data:a.string()})])})}),a.object({type:a.literal("web_fetch_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("web_search_tool_result"),tool_use_id:a.string(),content:a.union([a.array(a.object({type:a.literal("web_search_result"),url:a.string(),title:a.string(),encrypted_content:a.string(),page_age:a.string().nullish()})),a.object({type:a.literal("web_search_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("code_execution_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number(),content:a.array(a.object({type:a.literal("code_execution_output"),file_id:a.string()})).optional().default([])}),a.object({type:a.literal("code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("bash_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("bash_code_execution_result"),content:a.array(a.object({type:a.literal("bash_code_execution_output"),file_id:a.string()})),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("bash_code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("text_editor_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("text_editor_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_view_result"),content:a.string(),file_type:a.string(),num_lines:a.number().nullable(),start_line:a.number().nullable(),total_lines:a.number().nullable()}),a.object({type:a.literal("text_editor_code_execution_create_result"),is_file_update:a.boolean()}),a.object({type:a.literal("text_editor_code_execution_str_replace_result"),lines:a.array(a.string()).nullable(),new_lines:a.number().nullable(),new_start:a.number().nullable(),old_lines:a.number().nullable(),old_start:a.number().nullable()})])}),a.object({type:a.literal("tool_search_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("tool_search_tool_search_result"),tool_references:a.array(a.object({type:a.literal("tool_reference"),tool_name:a.string()}))}),a.object({type:a.literal("tool_search_tool_result_error"),error_code:a.string()})])})])}),a.object({type:a.literal("content_block_delta"),index:a.number(),delta:a.discriminatedUnion("type",[a.object({type:a.literal("input_json_delta"),partial_json:a.string()}),a.object({type:a.literal("text_delta"),text:a.string()}),a.object({type:a.literal("thinking_delta"),thinking:a.string()}),a.object({type:a.literal("signature_delta"),signature:a.string()}),a.object({type:a.literal("compaction_delta"),content:a.string()}),a.object({type:a.literal("citations_delta"),citation:a.discriminatedUnion("type",[a.object({type:a.literal("web_search_result_location"),cited_text:a.string(),url:a.string(),title:a.string(),encrypted_index:a.string()}),a.object({type:a.literal("page_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_page_number:a.number(),end_page_number:a.number()}),a.object({type:a.literal("char_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_char_index:a.number(),end_char_index:a.number()})])})])}),a.object({type:a.literal("content_block_stop"),index:a.number()}),a.object({type:a.literal("error"),error:a.object({type:a.string(),message:a.string()})}),a.object({type:a.literal("message_delta"),delta:a.object({stop_reason:a.string().nullish(),stop_sequence:a.string().nullish(),container:a.object({expires_at:a.string(),id:a.string(),skills:a.array(a.object({type:a.union([a.literal("anthropic"),a.literal("custom")]),skill_id:a.string(),version:a.string()})).nullish()}).nullish()}),usage:a.looseObject({input_tokens:a.number().nullish(),output_tokens:a.number(),cache_creation_input_tokens:a.number().nullish(),cache_read_input_tokens:a.number().nullish(),iterations:a.array(a.object({type:a.union([a.literal("compaction"),a.literal("message")]),input_tokens:a.number(),output_tokens:a.number()})).nullish()}),context_management:a.object({applied_edits:a.array(a.union([a.object({type:a.literal("clear_tool_uses_20250919"),cleared_tool_uses:a.number(),cleared_input_tokens:a.number()}),a.object({type:a.literal("clear_thinking_20251015"),cleared_thinking_turns:a.number(),cleared_input_tokens:a.number()}),a.object({type:a.literal("compact_20260112")})]))}).nullish()}),a.object({type:a.literal("message_stop")}),a.object({type:a.literal("ping")})]))),MM=O(()=>A(a.object({signature:a.string().optional(),redactedData:a.string().optional()}))),$S=a.object({citations:a.object({enabled:a.boolean()}).optional(),title:a.string().optional(),context:a.string().optional()}),ES=a.object({sendReasoning:a.boolean().optional(),structuredOutputMode:a.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:a.discriminatedUnion("type",[a.object({type:a.literal("adaptive")}),a.object({type:a.literal("enabled"),budgetTokens:a.number().optional()}),a.object({type:a.literal("disabled")})]).optional(),disableParallelToolUse:a.boolean().optional(),cacheControl:a.object({type:a.literal("ephemeral"),ttl:a.union([a.literal("5m"),a.literal("1h")]).optional()}).optional(),mcpServers:a.array(a.object({type:a.literal("url"),name:a.string(),url:a.string(),authorizationToken:a.string().nullish(),toolConfiguration:a.object({enabled:a.boolean().nullish(),allowedTools:a.array(a.string()).nullish()}).nullish()})).optional(),container:a.object({id:a.string().optional(),skills:a.array(a.object({type:a.union([a.literal("anthropic"),a.literal("custom")]),skillId:a.string(),version:a.string().optional()})).optional()}).optional(),toolStreaming:a.boolean().optional(),effort:a.enum(["low","medium","high","max"]).optional(),speed:a.literal("fast").optional(),contextManagement:a.object({edits:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("clear_tool_uses_20250919"),trigger:a.discriminatedUnion("type",[a.object({type:a.literal("input_tokens"),value:a.number()}),a.object({type:a.literal("tool_uses"),value:a.number()})]).optional(),keep:a.object({type:a.literal("tool_uses"),value:a.number()}).optional(),clearAtLeast:a.object({type:a.literal("input_tokens"),value:a.number()}).optional(),clearToolInputs:a.boolean().optional(),excludeTools:a.array(a.string()).optional()}),a.object({type:a.literal("clear_thinking_20251015"),keep:a.union([a.literal("all"),a.object({type:a.literal("thinking_turns"),value:a.number()})]).optional()}),a.object({type:a.literal("compact_20260112"),trigger:a.object({type:a.literal("input_tokens"),value:a.number()}).optional(),pauseAfterCompaction:a.boolean().optional(),instructions:a.string().optional()})]))}).optional()}),CS=4;function NM(e){var t;let r=e==null?void 0:e.anthropic;return(t=r==null?void 0:r.cacheControl)!=null?t:r==null?void 0:r.cache_control}var hh=class{constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(e,t){let r=NM(e);if(r){if(!t.canCache){this.warnings.push({type:"unsupported",feature:"cache_control on non-cacheable context",details:`cache_control cannot be set on ${t.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>CS){this.warnings.push({type:"unsupported",feature:"cacheControl breakpoint limit",details:`Maximum ${CS} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},jM=O(()=>A(a.object({maxCharacters:a.number().optional()}))),DM=O(()=>A(a.object({command:a.enum(["view","create","str_replace","insert"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),insert_text:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),zM=Le({id:"anthropic.text_editor_20250728",inputSchema:DM}),UM=(e={})=>zM(e),FM=O(()=>A(a.object({maxUses:a.number().optional(),allowedDomains:a.array(a.string()).optional(),blockedDomains:a.array(a.string()).optional(),userLocation:a.object({type:a.literal("approximate"),city:a.string().optional(),region:a.string().optional(),country:a.string().optional(),timezone:a.string().optional()}).optional()}))),RS=O(()=>A(a.array(a.object({url:a.string(),title:a.string().nullable(),pageAge:a.string().nullable(),encryptedContent:a.string(),type:a.literal("web_search_result")})))),LM=O(()=>A(a.object({query:a.string()}))),qM=je({id:"anthropic.web_search_20250305",inputSchema:LM,outputSchema:RS,supportsDeferredResults:!0}),ZM=(e={})=>qM(e),VM=O(()=>A(a.object({maxUses:a.number().optional(),allowedDomains:a.array(a.string()).optional(),blockedDomains:a.array(a.string()).optional(),citations:a.object({enabled:a.boolean()}).optional(),maxContentTokens:a.number().optional()}))),MS=O(()=>A(a.object({type:a.literal("web_fetch_result"),url:a.string(),content:a.object({type:a.literal("document"),title:a.string().nullable(),citations:a.object({enabled:a.boolean()}).optional(),source:a.union([a.object({type:a.literal("base64"),mediaType:a.literal("application/pdf"),data:a.string()}),a.object({type:a.literal("text"),mediaType:a.literal("text/plain"),data:a.string()})])}),retrievedAt:a.string().nullable()}))),GM=O(()=>A(a.object({url:a.string()}))),HM=je({id:"anthropic.web_fetch_20250910",inputSchema:GM,outputSchema:MS,supportsDeferredResults:!0}),BM=(e={})=>HM(e);async function JM({tools:e,toolChoice:t,disableParallelToolUse:r,cacheControlValidator:o,supportsStructuredOutput:n}){var i;e=e!=null&&e.length?e:void 0;let s=[],l=new Set,d=o||new hh;if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:l};let u=[];for(let c of e)switch(c.type){case"function":{let p=d.getCacheControl(c.providerOptions,{type:"tool definition",canCache:!0}),f=(i=c.providerOptions)==null?void 0:i.anthropic,v=f==null?void 0:f.deferLoading,g=f==null?void 0:f.allowedCallers;u.push({name:c.name,description:c.description,input_schema:c.inputSchema,cache_control:p,...n===!0&&c.strict!=null?{strict:c.strict}:{},...v!=null?{defer_loading:v}:{},...g!=null?{allowed_callers:g}:{},...c.inputExamples!=null?{input_examples:c.inputExamples.map(y=>y.input)}:{}}),n===!0&&l.add("structured-outputs-2025-11-13"),(c.inputExamples!=null||g!=null)&&l.add("advanced-tool-use-2025-11-20");break}case"provider":{switch(c.id){case"anthropic.code_execution_20250522":{l.add("code-execution-2025-05-22"),u.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{l.add("code-execution-2025-08-25"),u.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{l.add("computer-use-2025-01-24"),u.push({name:"computer",type:"computer_20250124",display_width_px:c.args.displayWidthPx,display_height_px:c.args.displayHeightPx,display_number:c.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20251124":{l.add("computer-use-2025-11-24"),u.push({name:"computer",type:"computer_20251124",display_width_px:c.args.displayWidthPx,display_height_px:c.args.displayHeightPx,display_number:c.args.displayNumber,enable_zoom:c.args.enableZoom,cache_control:void 0});break}case"anthropic.computer_20241022":{l.add("computer-use-2024-10-22"),u.push({name:"computer",type:"computer_20241022",display_width_px:c.args.displayWidthPx,display_height_px:c.args.displayHeightPx,display_number:c.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{l.add("computer-use-2025-01-24"),u.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{l.add("computer-use-2024-10-22"),u.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{l.add("computer-use-2025-01-24"),u.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await Je({value:c.args,schema:jM});u.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{l.add("computer-use-2025-01-24"),u.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{l.add("computer-use-2024-10-22"),u.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{l.add("context-management-2025-06-27"),u.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{l.add("web-fetch-2025-09-10");let p=await Je({value:c.args,schema:VM});u.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await Je({value:c.args,schema:FM});u.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}case"anthropic.tool_search_regex_20251119":{l.add("advanced-tool-use-2025-11-20"),u.push({type:"tool_search_tool_regex_20251119",name:"tool_search_tool_regex"});break}case"anthropic.tool_search_bm25_20251119":{l.add("advanced-tool-use-2025-11-20"),u.push({type:"tool_search_tool_bm25_20251119",name:"tool_search_tool_bm25"});break}default:{s.push({type:"unsupported",feature:`provider-defined tool ${c.id}`});break}}break}default:{s.push({type:"unsupported",feature:`tool ${c}`});break}}if(t==null)return{tools:u,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:s,betas:l};let m=t.type;switch(m){case"auto":return{tools:u,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:s,betas:l};case"required":return{tools:u,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:s,betas:l};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:l};case"tool":return{tools:u,toolChoice:{type:"tool",name:t.toolName,disable_parallel_tool_use:r},toolWarnings:s,betas:l};default:{let c=m;throw new Re({functionality:`tool choice type: ${c}`})}}}function AS({usage:e,rawUsage:t}){var r,o;let n=(r=e.cache_creation_input_tokens)!=null?r:0,i=(o=e.cache_read_input_tokens)!=null?o:0,s,l;if(e.iterations&&e.iterations.length>0){let d=e.iterations.reduce((u,m)=>({input:u.input+m.input_tokens,output:u.output+m.output_tokens}),{input:0,output:0});s=d.input,l=d.output}else s=e.input_tokens,l=e.output_tokens;return{inputTokens:{total:s+n+i,noCache:s,cacheRead:i,cacheWrite:n},outputTokens:{total:l,text:void 0,reasoning:void 0},raw:t!=null?t:e}}var NS=O(()=>A(a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number(),content:a.array(a.object({type:a.literal("code_execution_output"),file_id:a.string()})).optional().default([])}))),WM=O(()=>A(a.object({code:a.string()}))),KM=je({id:"anthropic.code_execution_20250522",inputSchema:WM,outputSchema:NS}),YM=(e={})=>KM(e),jS=O(()=>A(a.discriminatedUnion("type",[a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number(),content:a.array(a.object({type:a.literal("code_execution_output"),file_id:a.string()})).optional().default([])}),a.object({type:a.literal("bash_code_execution_result"),content:a.array(a.object({type:a.literal("bash_code_execution_output"),file_id:a.string()})),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("bash_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_view_result"),content:a.string(),file_type:a.string(),num_lines:a.number().nullable(),start_line:a.number().nullable(),total_lines:a.number().nullable()}),a.object({type:a.literal("text_editor_code_execution_create_result"),is_file_update:a.boolean()}),a.object({type:a.literal("text_editor_code_execution_str_replace_result"),lines:a.array(a.string()).nullable(),new_lines:a.number().nullable(),new_start:a.number().nullable(),old_lines:a.number().nullable(),old_start:a.number().nullable()})]))),XM=O(()=>A(a.discriminatedUnion("type",[a.object({type:a.literal("programmatic-tool-call"),code:a.string()}),a.object({type:a.literal("bash_code_execution"),command:a.string()}),a.discriminatedUnion("command",[a.object({type:a.literal("text_editor_code_execution"),command:a.literal("view"),path:a.string()}),a.object({type:a.literal("text_editor_code_execution"),command:a.literal("create"),path:a.string(),file_text:a.string().nullish()}),a.object({type:a.literal("text_editor_code_execution"),command:a.literal("str_replace"),path:a.string(),old_str:a.string(),new_str:a.string()})])]))),QM=je({id:"anthropic.code_execution_20250825",inputSchema:XM,outputSchema:jS,supportsDeferredResults:!0}),eN=(e={})=>QM(e),DS=O(()=>A(a.array(a.object({type:a.literal("tool_reference"),toolName:a.string()})))),tN=O(()=>A(a.object({pattern:a.string(),limit:a.number().optional()}))),rN=je({id:"anthropic.tool_search_regex_20251119",inputSchema:tN,outputSchema:DS,supportsDeferredResults:!0}),nN=(e={})=>rN(e);function oN(e){if(typeof e=="string")return Buffer.from(e,"base64").toString("utf-8");if(e instanceof Uint8Array)return new TextDecoder().decode(e);throw e instanceof URL?new Re({functionality:"URL-based text documents are not supported for citations"}):new Re({functionality:`unsupported data type for text documents: ${typeof e}`})}function mh(e){return e instanceof URL||aN(e)}function aN(e){return typeof e=="string"&&/^https?:\/\//i.test(e)}function fh(e){return e instanceof URL?e.toString():e}async function iN({prompt:e,sendReasoning:t,warnings:r,cacheControlValidator:o,toolNameMapping:n}){var i,s,l,d,u,m,c,p,f,v,g,y,S,b,_,k,w,h;let I=new Set,j=sN(e),U=o||new hh,F,Z=[];async function L(q){var C,E;let te=await Ee({provider:"anthropic",providerOptions:q,schema:$S});return(E=(C=te==null?void 0:te.citations)==null?void 0:C.enabled)!=null?E:!1}async function M(q){let C=await Ee({provider:"anthropic",providerOptions:q,schema:$S});return{title:C==null?void 0:C.title,context:C==null?void 0:C.context}}for(let q=0;q<j.length;q++){let C=j[q],E=q===j.length-1,te=C.type;switch(te){case"system":{if(F!=null)throw new Re({functionality:"Multiple system messages that are separated by user/assistant messages"});F=C.messages.map(({content:P,providerOptions:se})=>({type:"text",text:P,cache_control:U.getCacheControl(se,{type:"system message",canCache:!0})}));break}case"user":{let P=[];for(let se of C.messages){let{role:ee,content:he}=se;switch(ee){case"user":{for(let fe=0;fe<he.length;fe++){let V=he[fe],Ae=fe===he.length-1,T=(i=U.getCacheControl(V.providerOptions,{type:"user message part",canCache:!0}))!=null?i:Ae?U.getCacheControl(se.providerOptions,{type:"user message",canCache:!0}):void 0;switch(V.type){case"text":{P.push({type:"text",text:V.text,cache_control:T});break}case"file":{if(V.mediaType.startsWith("image/"))P.push({type:"image",source:mh(V.data)?{type:"url",url:fh(V.data)}:{type:"base64",media_type:V.mediaType==="image/*"?"image/jpeg":V.mediaType,data:kt(V.data)},cache_control:T});else if(V.mediaType==="application/pdf"){I.add("pdfs-2024-09-25");let pe=await L(V.providerOptions),de=await M(V.providerOptions);P.push({type:"document",source:mh(V.data)?{type:"url",url:fh(V.data)}:{type:"base64",media_type:"application/pdf",data:kt(V.data)},title:(s=de.title)!=null?s:V.filename,...de.context&&{context:de.context},...pe&&{citations:{enabled:!0}},cache_control:T})}else if(V.mediaType==="text/plain"){let pe=await L(V.providerOptions),de=await M(V.providerOptions);P.push({type:"document",source:mh(V.data)?{type:"url",url:fh(V.data)}:{type:"text",media_type:"text/plain",data:oN(V.data)},title:(l=de.title)!=null?l:V.filename,...de.context&&{context:de.context},...pe&&{citations:{enabled:!0}},cache_control:T})}else throw new Re({functionality:`media type: ${V.mediaType}`});break}}}break}case"tool":{for(let fe=0;fe<he.length;fe++){let V=he[fe];if(V.type==="tool-approval-response")continue;let Ae=fe===he.length-1,T=(d=U.getCacheControl(V.providerOptions,{type:"tool result part",canCache:!0}))!=null?d:Ae?U.getCacheControl(se.providerOptions,{type:"tool result message",canCache:!0}):void 0,pe=V.output,de;switch(pe.type){case"content":de=pe.value.map(H=>{var le;switch(H.type){case"text":return{type:"text",text:H.text};case"image-data":return{type:"image",source:{type:"base64",media_type:H.mediaType,data:H.data}};case"image-url":return{type:"image",source:{type:"url",url:H.url}};case"file-url":return{type:"document",source:{type:"url",url:H.url}};case"file-data":{if(H.mediaType==="application/pdf")return I.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:H.mediaType,data:H.data}};r.push({type:"other",message:`unsupported tool content part type: ${H.type} with media type: ${H.mediaType}`});return}case"custom":{let R=(le=H.providerOptions)==null?void 0:le.anthropic;if((R==null?void 0:R.type)==="tool-reference")return{type:"tool_reference",tool_name:R.toolName};r.push({type:"other",message:"unsupported custom tool content part"});return}default:{r.push({type:"other",message:`unsupported tool content part type: ${H.type}`});return}}}).filter(_u);break;case"text":case"error-text":de=pe.value;break;case"execution-denied":de=(u=pe.reason)!=null?u:"Tool execution denied.";break;default:de=JSON.stringify(pe.value);break}P.push({type:"tool_result",tool_use_id:V.toolCallId,content:de,is_error:pe.type==="error-text"||pe.type==="error-json"?!0:void 0,cache_control:T})}break}default:{let fe=ee;throw new Error(`Unsupported role: ${fe}`)}}}Z.push({role:"user",content:P});break}case"assistant":{let P=[],se=new Set;for(let ee=0;ee<C.messages.length;ee++){let he=C.messages[ee],fe=ee===C.messages.length-1,{content:V}=he;for(let Ae=0;Ae<V.length;Ae++){let T=V[Ae],pe=Ae===V.length-1,de=(m=U.getCacheControl(T.providerOptions,{type:"assistant message part",canCache:!0}))!=null?m:pe?U.getCacheControl(he.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(T.type){case"text":{let H=(c=T.providerOptions)==null?void 0:c.anthropic;(H==null?void 0:H.type)==="compaction"?P.push({type:"compaction",content:T.text,cache_control:de}):P.push({type:"text",text:E&&fe&&pe?T.text.trim():T.text,cache_control:de});break}case"reasoning":{if(t){let H=await Ee({provider:"anthropic",providerOptions:T.providerOptions,schema:MM});H!=null?H.signature!=null?(U.getCacheControl(T.providerOptions,{type:"thinking block",canCache:!1}),P.push({type:"thinking",thinking:T.text,signature:H.signature})):H.redactedData!=null?(U.getCacheControl(T.providerOptions,{type:"redacted thinking block",canCache:!1}),P.push({type:"redacted_thinking",data:H.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(T.providerExecuted){let R=n.toProviderToolName(T.toolName);if(((f=(p=T.providerOptions)==null?void 0:p.anthropic)==null?void 0:f.type)==="mcp-tool-use"){se.add(T.toolCallId);let Q=(g=(v=T.providerOptions)==null?void 0:v.anthropic)==null?void 0:g.serverName;if(Q==null||typeof Q!="string"){r.push({type:"other",message:"mcp tool use server name is required and must be a string"});break}P.push({type:"mcp_tool_use",id:T.toolCallId,name:T.toolName,input:T.input,server_name:Q,cache_control:de})}else if(R==="code_execution"&&T.input!=null&&typeof T.input=="object"&&"type"in T.input&&typeof T.input.type=="string"&&(T.input.type==="bash_code_execution"||T.input.type==="text_editor_code_execution"))P.push({type:"server_tool_use",id:T.toolCallId,name:T.input.type,input:T.input,cache_control:de});else if(R==="code_execution"&&T.input!=null&&typeof T.input=="object"&&"type"in T.input&&T.input.type==="programmatic-tool-call"){let{type:Q,...B}=T.input;P.push({type:"server_tool_use",id:T.toolCallId,name:"code_execution",input:B,cache_control:de})}else R==="code_execution"||R==="web_fetch"||R==="web_search"?P.push({type:"server_tool_use",id:T.toolCallId,name:R,input:T.input,cache_control:de}):R==="tool_search_tool_regex"||R==="tool_search_tool_bm25"?P.push({type:"server_tool_use",id:T.toolCallId,name:R,input:T.input,cache_control:de}):r.push({type:"other",message:`provider executed tool call for tool ${T.toolName} is not supported`});break}let H=(y=T.providerOptions)==null?void 0:y.anthropic,le=H!=null&&H.caller?H.caller.type==="code_execution_20250825"&&H.caller.toolId?{type:"code_execution_20250825",tool_id:H.caller.toolId}:H.caller.type==="direct"?{type:"direct"}:void 0:void 0;P.push({type:"tool_use",id:T.toolCallId,name:T.toolName,input:T.input,...le&&{caller:le},cache_control:de});break}case"tool-result":{let H=n.toProviderToolName(T.toolName);if(se.has(T.toolCallId)){let le=T.output;if(le.type!=="json"&&le.type!=="error-json"){r.push({type:"other",message:`provider executed tool result output type ${le.type} for tool ${T.toolName} is not supported`});break}P.push({type:"mcp_tool_result",tool_use_id:T.toolCallId,is_error:le.type==="error-json",content:le.value,cache_control:de})}else if(H==="code_execution"){let le=T.output;if(le.type==="error-text"||le.type==="error-json"){let R={};try{typeof le.value=="string"?R=JSON.parse(le.value):typeof le.value=="object"&&le.value!==null&&(R=le.value)}catch(D){}R.type==="code_execution_tool_result_error"?P.push({type:"code_execution_tool_result",tool_use_id:T.toolCallId,content:{type:"code_execution_tool_result_error",error_code:(S=R.errorCode)!=null?S:"unknown"},cache_control:de}):P.push({type:"bash_code_execution_tool_result",tool_use_id:T.toolCallId,cache_control:de,content:{type:"bash_code_execution_tool_result_error",error_code:(b=R.errorCode)!=null?b:"unknown"}});break}if(le.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${le.type} for tool ${T.toolName} is not supported`});break}if(le.value==null||typeof le.value!="object"||!("type"in le.value)||typeof le.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${T.toolName}`});break}if(le.value.type==="code_execution_result"){let R=await Je({value:le.value,schema:NS});P.push({type:"code_execution_tool_result",tool_use_id:T.toolCallId,content:{type:R.type,stdout:R.stdout,stderr:R.stderr,return_code:R.return_code,content:(_=R.content)!=null?_:[]},cache_control:de})}else{let R=await Je({value:le.value,schema:jS});R.type==="code_execution_result"?P.push({type:"code_execution_tool_result",tool_use_id:T.toolCallId,content:{type:R.type,stdout:R.stdout,stderr:R.stderr,return_code:R.return_code,content:(k=R.content)!=null?k:[]},cache_control:de}):R.type==="bash_code_execution_result"||R.type==="bash_code_execution_tool_result_error"?P.push({type:"bash_code_execution_tool_result",tool_use_id:T.toolCallId,cache_control:de,content:R}):P.push({type:"text_editor_code_execution_tool_result",tool_use_id:T.toolCallId,cache_control:de,content:R})}break}if(H==="web_fetch"){let le=T.output;if(le.type==="error-json"){let D={};try{typeof le.value=="string"?D=JSON.parse(le.value):typeof le.value=="object"&&le.value!==null&&(D=le.value)}catch(Q){let B=(w=le.value)==null?void 0:w.errorCode;D={errorCode:typeof B=="string"?B:"unknown"}}P.push({type:"web_fetch_tool_result",tool_use_id:T.toolCallId,content:{type:"web_fetch_tool_result_error",error_code:(h=D.errorCode)!=null?h:"unknown"},cache_control:de});break}if(le.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${le.type} for tool ${T.toolName} is not supported`});break}let R=await Je({value:le.value,schema:MS});P.push({type:"web_fetch_tool_result",tool_use_id:T.toolCallId,content:{type:"web_fetch_result",url:R.url,retrieved_at:R.retrievedAt,content:{type:"document",title:R.content.title,citations:R.content.citations,source:{type:R.content.source.type,media_type:R.content.source.mediaType,data:R.content.source.data}}},cache_control:de});break}if(H==="web_search"){let le=T.output;if(le.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${le.type} for tool ${T.toolName} is not supported`});break}let R=await Je({value:le.value,schema:RS});P.push({type:"web_search_tool_result",tool_use_id:T.toolCallId,content:R.map(D=>({url:D.url,title:D.title,page_age:D.pageAge,encrypted_content:D.encryptedContent,type:D.type})),cache_control:de});break}if(H==="tool_search_tool_regex"||H==="tool_search_tool_bm25"){let le=T.output;if(le.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${le.type} for tool ${T.toolName} is not supported`});break}let D=(await Je({value:le.value,schema:DS})).map(Q=>({type:"tool_reference",tool_name:Q.toolName}));P.push({type:"tool_search_tool_result",tool_use_id:T.toolCallId,content:{type:"tool_search_tool_search_result",tool_references:D},cache_control:de});break}r.push({type:"other",message:`provider executed tool result for tool ${T.toolName} is not supported`});break}}}}Z.push({role:"assistant",content:P});break}default:{let P=te;throw new Error(`content type: ${P}`)}}}return{prompt:{system:F,messages:Z},betas:I}}function sN(e){let t=[],r;for(let o of e){let{role:n}=o;switch(n){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(o);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(o);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(o);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(o);break}default:{let i=n;throw new Error(`Unsupported role: ${i}`)}}}return t}function gh({finishReason:e,isJsonResponseFromTool:t}){switch(e){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return t?"stop":"tool-calls";case"max_tokens":case"model_context_window_exceeded":return"length";case"compaction":return"other";default:return"other"}}function PS(e,t,r){var o;if(e.type==="web_search_result_location")return{type:"source",sourceType:"url",id:r(),url:e.url,title:e.title,providerMetadata:{anthropic:{citedText:e.cited_text,encryptedIndex:e.encrypted_index}}};if(e.type!=="page_location"&&e.type!=="char_location")return;let n=t[e.document_index];if(n)return{type:"source",sourceType:"document",id:r(),mediaType:n.mediaType,title:(o=e.document_title)!=null?o:n.title,filename:n.filename,providerMetadata:{anthropic:e.type==="page_location"?{citedText:e.cited_text,startPageNumber:e.start_page_number,endPageNumber:e.end_page_number}:{citedText:e.cited_text,startCharIndex:e.start_char_index,endCharIndex:e.end_char_index}}}}var lN=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:Fe}supportsUrl(e){return e.protocol==="https:"}get provider(){return this.config.provider}get providerOptionsName(){let e=this.config.provider,t=e.indexOf(".");return t===-1?e:e.substring(0,t)}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({userSuppliedBetas:e,prompt:t,maxOutputTokens:r,temperature:o,topP:n,topK:i,frequencyPenalty:s,presencePenalty:l,stopSequences:d,responseFormat:u,seed:m,tools:c,toolChoice:p,providerOptions:f,stream:v}){var g,y,S,b,_,k;let w=[];s!=null&&w.push({type:"unsupported",feature:"frequencyPenalty"}),l!=null&&w.push({type:"unsupported",feature:"presencePenalty"}),m!=null&&w.push({type:"unsupported",feature:"seed"}),o!=null&&o>1?(w.push({type:"unsupported",feature:"temperature",details:`${o} exceeds anthropic maximum of 1.0. clamped to 1.0`}),o=1):o!=null&&o<0&&(w.push({type:"unsupported",feature:"temperature",details:`${o} is below anthropic minimum of 0. clamped to 0`}),o=0),(u==null?void 0:u.type)==="json"&&u.schema==null&&w.push({type:"unsupported",feature:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."});let h=this.providerOptionsName,I=await Ee({provider:"anthropic",providerOptions:f,schema:ES}),j=h!=="anthropic"?await Ee({provider:h,providerOptions:f,schema:ES}):null,U=j!=null,F=Object.assign({},I!=null?I:{},j!=null?j:{}),{maxOutputTokens:Z,supportsStructuredOutput:L,isKnownModel:M}=uN(this.modelId),q=((g=this.config.supportsNativeStructuredOutput)!=null?g:!0)&&L,C=(y=F==null?void 0:F.structuredOutputMode)!=null?y:"auto",E=C==="outputFormat"||C==="auto"&&q,te=(u==null?void 0:u.type)==="json"&&u.schema!=null&&!E?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:u.schema}:void 0,P=F==null?void 0:F.contextManagement,se=new hh,ee=gu({tools:c,providerToolNames:{"anthropic.code_execution_20250522":"code_execution","anthropic.code_execution_20250825":"code_execution","anthropic.computer_20241022":"computer","anthropic.computer_20250124":"computer","anthropic.text_editor_20241022":"str_replace_editor","anthropic.text_editor_20250124":"str_replace_editor","anthropic.text_editor_20250429":"str_replace_based_edit_tool","anthropic.text_editor_20250728":"str_replace_based_edit_tool","anthropic.bash_20241022":"bash","anthropic.bash_20250124":"bash","anthropic.memory_20250818":"memory","anthropic.web_search_20250305":"web_search","anthropic.web_fetch_20250910":"web_fetch","anthropic.tool_search_regex_20251119":"tool_search_tool_regex","anthropic.tool_search_bm25_20251119":"tool_search_tool_bm25"}}),{prompt:he,betas:fe}=await iN({prompt:t,sendReasoning:(S=F==null?void 0:F.sendReasoning)!=null?S:!0,warnings:w,cacheControlValidator:se,toolNameMapping:ee}),V=(b=F==null?void 0:F.thinking)==null?void 0:b.type,Ae=V==="enabled"||V==="adaptive",T=V==="enabled"?(_=F==null?void 0:F.thinking)==null?void 0:_.budgetTokens:void 0,pe=r!=null?r:Z,de={model:this.modelId,max_tokens:pe,temperature:o,top_k:i,top_p:n,stop_sequences:d,...Ae&&{thinking:{type:V,...T!=null&&{budget_tokens:T}}},...(F==null?void 0:F.effort)&&{output_config:{effort:F.effort}},...(F==null?void 0:F.speed)&&{speed:F.speed},...E&&(u==null?void 0:u.type)==="json"&&u.schema!=null&&{output_format:{type:"json_schema",schema:u.schema}},...(F==null?void 0:F.mcpServers)&&F.mcpServers.length>0&&{mcp_servers:F.mcpServers.map(G=>({type:G.type,name:G.name,url:G.url,authorization_token:G.authorizationToken,tool_configuration:G.toolConfiguration?{allowed_tools:G.toolConfiguration.allowedTools,enabled:G.toolConfiguration.enabled}:void 0}))},...(F==null?void 0:F.container)&&{container:F.container.skills&&F.container.skills.length>0?{id:F.container.id,skills:F.container.skills.map(G=>({type:G.type,skill_id:G.skillId,version:G.version}))}:F.container.id},system:he.system,messages:he.messages,...P&&{context_management:{edits:P.edits.map(G=>{let Me=G.type;switch(Me){case"clear_tool_uses_20250919":return{type:G.type,...G.trigger!==void 0&&{trigger:G.trigger},...G.keep!==void 0&&{keep:G.keep},...G.clearAtLeast!==void 0&&{clear_at_least:G.clearAtLeast},...G.clearToolInputs!==void 0&&{clear_tool_inputs:G.clearToolInputs},...G.excludeTools!==void 0&&{exclude_tools:G.excludeTools}};case"clear_thinking_20251015":return{type:G.type,...G.keep!==void 0&&{keep:G.keep}};case"compact_20260112":return{type:G.type,...G.trigger!==void 0&&{trigger:G.trigger},...G.pauseAfterCompaction!==void 0&&{pause_after_compaction:G.pauseAfterCompaction},...G.instructions!==void 0&&{instructions:G.instructions}};default:w.push({type:"other",message:`Unknown context management strategy: ${Me}`});return}}).filter(G=>G!==void 0)}}};Ae?(V==="enabled"&&T==null&&(w.push({type:"compatibility",feature:"extended thinking",details:"thinking budget is required when thinking is enabled. using default budget of 1024 tokens."}),de.thinking={type:"enabled",budget_tokens:1024},T=1024),de.temperature!=null&&(de.temperature=void 0,w.push({type:"unsupported",feature:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(de.top_k=void 0,w.push({type:"unsupported",feature:"topK",details:"topK is not supported when thinking is enabled"})),n!=null&&(de.top_p=void 0,w.push({type:"unsupported",feature:"topP",details:"topP is not supported when thinking is enabled"})),de.max_tokens=pe+(T!=null?T:0)):n!=null&&o!=null&&(w.push({type:"unsupported",feature:"topP",details:"topP is not supported when temperature is set. topP is ignored."}),de.top_p=void 0),M&&de.max_tokens>Z&&(r!=null&&w.push({type:"unsupported",feature:"maxOutputTokens",details:`${de.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${Z} max output tokens. The max output tokens have been limited to ${Z}.`}),de.max_tokens=Z),F!=null&&F.mcpServers&&F.mcpServers.length>0&&fe.add("mcp-client-2025-04-04"),P&&(fe.add("context-management-2025-06-27"),P.edits.some(G=>G.type==="compact_20260112")&&fe.add("compact-2026-01-12")),F!=null&&F.container&&F.container.skills&&F.container.skills.length>0&&(fe.add("code-execution-2025-08-25"),fe.add("skills-2025-10-02"),fe.add("files-api-2025-04-14"),c!=null&&c.some(G=>G.type==="provider"&&G.id==="anthropic.code_execution_20250825")||w.push({type:"other",message:"code execution tool is required when using skills"})),F!=null&&F.effort&&fe.add("effort-2025-11-24"),F!=null&&F.speed&&fe.add("fast-mode-2026-02-01"),v&&((k=F==null?void 0:F.toolStreaming)==null||k)&&fe.add("fine-grained-tool-streaming-2025-05-14"),E&&(u==null?void 0:u.type)==="json"&&u.schema!=null&&fe.add("structured-outputs-2025-11-13");let{tools:le,toolChoice:R,toolWarnings:D,betas:Q}=await JM(te!=null?{tools:[...c!=null?c:[],te],toolChoice:{type:"required"},disableParallelToolUse:!0,cacheControlValidator:se,supportsStructuredOutput:!1}:{tools:c!=null?c:[],toolChoice:p,disableParallelToolUse:F==null?void 0:F.disableParallelToolUse,cacheControlValidator:se,supportsStructuredOutput:q}),B=se.getWarnings();return{args:{...de,tools:le,tool_choice:R,stream:v===!0?!0:void 0},warnings:[...w,...D,...B],betas:new Set([...fe,...Q,...e]),usesJsonResponseTool:te!=null,toolNameMapping:ee,providerOptionsName:h,usedCustomProviderKey:U}}async getHeaders({betas:e,headers:t}){return _e(await ze(this.config.headers),t,e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{})}async getBetasFromHeaders(e){var t,r;let n=(t=(await ze(this.config.headers))["anthropic-beta"])!=null?t:"",i=(r=e==null?void 0:e["anthropic-beta"])!=null?r:"";return new Set([...n.toLowerCase().split(","),...i.toLowerCase().split(",")].map(s=>s.trim()).filter(s=>s!==""))}buildRequestUrl(e){var t,r,o;return(o=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?o:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,o;return(o=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?o:e}extractCitationDocuments(e){let t=r=>{var o,n;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(o=r.providerOptions)==null?void 0:o.anthropic,s=i==null?void 0:i.citations;return(n=s==null?void 0:s.enabled)!=null?n:!1};return e.filter(r=>r.role==="user").flatMap(r=>r.content).filter(t).map(r=>{var o;let n=r;return{title:(o=n.filename)!=null?o:"Untitled Document",filename:n.filename,mediaType:n.mediaType}})}async doGenerate(e){var t,r,o,n,i,s;let{args:l,warnings:d,betas:u,usesJsonResponseTool:m,toolNameMapping:c,providerOptionsName:p,usedCustomProviderKey:f}=await this.getArgs({...e,stream:!1,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),v=[...this.extractCitationDocuments(e.prompt)],{responseHeaders:g,value:y,rawValue:S}=await we({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:u,headers:e.headers}),body:this.transformRequestBody(l),failedResponseHandler:TS,successfulResponseHandler:ke(OM),abortSignal:e.abortSignal,fetch:this.config.fetch}),b=[],_={},k={},w=!1;for(let h of y.content)switch(h.type){case"text":{if(!m&&(b.push({type:"text",text:h.text}),h.citations))for(let I of h.citations){let j=PS(I,v,this.generateId);j&&b.push(j)}break}case"thinking":{b.push({type:"reasoning",text:h.thinking,providerMetadata:{anthropic:{signature:h.signature}}});break}case"redacted_thinking":{b.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:h.data}}});break}case"compaction":{b.push({type:"text",text:h.content,providerMetadata:{anthropic:{type:"compaction"}}});break}case"tool_use":{if(m&&h.name==="json")w=!0,b.push({type:"text",text:JSON.stringify(h.input)});else{let j=h.caller,U=j?{type:j.type,toolId:"tool_id"in j?j.tool_id:void 0}:void 0;b.push({type:"tool-call",toolCallId:h.id,toolName:h.name,input:JSON.stringify(h.input),...U&&{providerMetadata:{anthropic:{caller:U}}}})}break}case"server_tool_use":{if(h.name==="text_editor_code_execution"||h.name==="bash_code_execution")b.push({type:"tool-call",toolCallId:h.id,toolName:c.toCustomToolName("code_execution"),input:JSON.stringify({type:h.name,...h.input}),providerExecuted:!0});else if(h.name==="web_search"||h.name==="code_execution"||h.name==="web_fetch"){let I=h.name==="code_execution"&&h.input!=null&&typeof h.input=="object"&&"code"in h.input&&!("type"in h.input)?{type:"programmatic-tool-call",...h.input}:h.input;b.push({type:"tool-call",toolCallId:h.id,toolName:c.toCustomToolName(h.name),input:JSON.stringify(I),providerExecuted:!0})}else(h.name==="tool_search_tool_regex"||h.name==="tool_search_tool_bm25")&&(k[h.id]=h.name,b.push({type:"tool-call",toolCallId:h.id,toolName:c.toCustomToolName(h.name),input:JSON.stringify(h.input),providerExecuted:!0}));break}case"mcp_tool_use":{_[h.id]={type:"tool-call",toolCallId:h.id,toolName:h.name,input:JSON.stringify(h.input),providerExecuted:!0,dynamic:!0,providerMetadata:{anthropic:{type:"mcp-tool-use",serverName:h.server_name}}},b.push(_[h.id]);break}case"mcp_tool_result":{b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:_[h.tool_use_id].toolName,isError:h.is_error,result:h.content,dynamic:!0,providerMetadata:_[h.tool_use_id].providerMetadata});break}case"web_fetch_tool_result":{h.content.type==="web_fetch_result"?(v.push({title:(t=h.content.content.title)!=null?t:h.content.url,mediaType:h.content.content.source.media_type}),b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("web_fetch"),result:{type:"web_fetch_result",url:h.content.url,retrievedAt:h.content.retrieved_at,content:{type:h.content.content.type,title:h.content.content.title,citations:h.content.content.citations,source:{type:h.content.content.source.type,mediaType:h.content.content.source.media_type,data:h.content.content.source.data}}}})):h.content.type==="web_fetch_tool_result_error"&&b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("web_fetch"),isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:h.content.error_code}});break}case"web_search_tool_result":{if(Array.isArray(h.content)){b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("web_search"),result:h.content.map(I=>{var j;return{url:I.url,title:I.title,pageAge:(j=I.page_age)!=null?j:null,encryptedContent:I.encrypted_content,type:I.type}})});for(let I of h.content)b.push({type:"source",sourceType:"url",id:this.generateId(),url:I.url,title:I.title,providerMetadata:{anthropic:{pageAge:(r=I.page_age)!=null?r:null}}})}else b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("web_search"),isError:!0,result:{type:"web_search_tool_result_error",errorCode:h.content.error_code}});break}case"code_execution_tool_result":{h.content.type==="code_execution_result"?b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("code_execution"),result:{type:h.content.type,stdout:h.content.stdout,stderr:h.content.stderr,return_code:h.content.return_code,content:(o=h.content.content)!=null?o:[]}}):h.content.type==="code_execution_tool_result_error"&&b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("code_execution"),isError:!0,result:{type:"code_execution_tool_result_error",errorCode:h.content.error_code}});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName("code_execution"),result:h.content});break}case"tool_search_tool_result":{let I=k[h.tool_use_id];if(I==null){let j=c.toCustomToolName("tool_search_tool_bm25"),U=c.toCustomToolName("tool_search_tool_regex");j!=="tool_search_tool_bm25"?I="tool_search_tool_bm25":I="tool_search_tool_regex"}h.content.type==="tool_search_tool_search_result"?b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName(I),result:h.content.tool_references.map(j=>({type:j.type,toolName:j.tool_name}))}):b.push({type:"tool-result",toolCallId:h.tool_use_id,toolName:c.toCustomToolName(I),isError:!0,result:{type:"tool_search_tool_result_error",errorCode:h.content.error_code}});break}}return{content:b,finishReason:{unified:gh({finishReason:y.stop_reason,isJsonResponseFromTool:w}),raw:(n=y.stop_reason)!=null?n:void 0},usage:AS({usage:y.usage}),request:{body:l},response:{id:(i=y.id)!=null?i:void 0,modelId:(s=y.model)!=null?s:void 0,headers:g,body:S},warnings:d,providerMetadata:(()=>{var h,I,j,U,F;let Z={usage:y.usage,cacheCreationInputTokens:(h=y.usage.cache_creation_input_tokens)!=null?h:null,stopSequence:(I=y.stop_sequence)!=null?I:null,iterations:y.usage.iterations?y.usage.iterations.map(M=>({type:M.type,inputTokens:M.input_tokens,outputTokens:M.output_tokens})):null,container:y.container?{expiresAt:y.container.expires_at,id:y.container.id,skills:(U=(j=y.container.skills)==null?void 0:j.map(M=>({type:M.type,skillId:M.skill_id,version:M.version})))!=null?U:null}:null,contextManagement:(F=OS(y.context_management))!=null?F:null},L={anthropic:Z};return f&&p!=="anthropic"&&(L[p]=Z),L})()}}async doStream(e){var t,r;let{args:o,warnings:n,betas:i,usesJsonResponseTool:s,toolNameMapping:l,providerOptionsName:d,usedCustomProviderKey:u}=await this.getArgs({...e,stream:!0,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),m=[...this.extractCitationDocuments(e.prompt)],c=this.buildRequestUrl(!0),{responseHeaders:p,value:f}=await we({url:c,headers:await this.getHeaders({betas:i,headers:e.headers}),body:this.transformRequestBody(o),failedResponseHandler:TS,successfulResponseHandler:Nt(RM),abortSignal:e.abortSignal,fetch:this.config.fetch}),v={unified:"other",raw:void 0},g={input_tokens:0,output_tokens:0,cache_creation_input_tokens:0,cache_read_input_tokens:0,iterations:null},y={},S={},b={},_=null,k,w=null,h=null,I=null,j=!1,U,F=this.generateId,Z=f.pipeThrough(new TransformStream({start(C){C.enqueue({type:"stream-start",warnings:n})},transform(C,E){var te,P,se,ee,he,fe,V,Ae,T,pe,de,H,le;if(e.includeRawChunks&&E.enqueue({type:"raw",rawValue:C.rawValue}),!C.success){E.enqueue({type:"error",error:C.error});return}let R=C.value;switch(R.type){case"ping":return;case"content_block_start":{let D=R.content_block,Q=D.type;switch(U=Q,Q){case"text":{if(s)return;y[R.index]={type:"text"},E.enqueue({type:"text-start",id:String(R.index)});return}case"thinking":{y[R.index]={type:"reasoning"},E.enqueue({type:"reasoning-start",id:String(R.index)});return}case"redacted_thinking":{y[R.index]={type:"reasoning"},E.enqueue({type:"reasoning-start",id:String(R.index),providerMetadata:{anthropic:{redactedData:D.data}}});return}case"compaction":{y[R.index]={type:"text"},E.enqueue({type:"text-start",id:String(R.index),providerMetadata:{anthropic:{type:"compaction"}}});return}case"tool_use":{if(s&&D.name==="json")j=!0,y[R.index]={type:"text"},E.enqueue({type:"text-start",id:String(R.index)});else{let G=D.caller,Me=G?{type:G.type,toolId:"tool_id"in G?G.tool_id:void 0}:void 0,x=D.input&&Object.keys(D.input).length>0?JSON.stringify(D.input):"";y[R.index]={type:"tool-call",toolCallId:D.id,toolName:D.name,input:x,firstDelta:x.length===0,...Me&&{caller:Me}},E.enqueue({type:"tool-input-start",id:D.id,toolName:D.name})}return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(D.name)){let B=D.name==="text_editor_code_execution"||D.name==="bash_code_execution"?"code_execution":D.name,G=l.toCustomToolName(B);y[R.index]={type:"tool-call",toolCallId:D.id,toolName:G,input:"",providerExecuted:!0,firstDelta:!0,providerToolName:D.name},E.enqueue({type:"tool-input-start",id:D.id,toolName:G,providerExecuted:!0})}else if(D.name==="tool_search_tool_regex"||D.name==="tool_search_tool_bm25"){b[D.id]=D.name;let B=l.toCustomToolName(D.name);y[R.index]={type:"tool-call",toolCallId:D.id,toolName:B,input:"",providerExecuted:!0,firstDelta:!0,providerToolName:D.name},E.enqueue({type:"tool-input-start",id:D.id,toolName:B,providerExecuted:!0})}return}case"web_fetch_tool_result":{D.content.type==="web_fetch_result"?(m.push({title:(te=D.content.content.title)!=null?te:D.content.url,mediaType:D.content.content.source.media_type}),E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("web_fetch"),result:{type:"web_fetch_result",url:D.content.url,retrievedAt:D.content.retrieved_at,content:{type:D.content.content.type,title:D.content.content.title,citations:D.content.content.citations,source:{type:D.content.content.source.type,mediaType:D.content.content.source.media_type,data:D.content.content.source.data}}}})):D.content.type==="web_fetch_tool_result_error"&&E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("web_fetch"),isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:D.content.error_code}});return}case"web_search_tool_result":{if(Array.isArray(D.content)){E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("web_search"),result:D.content.map(B=>{var G;return{url:B.url,title:B.title,pageAge:(G=B.page_age)!=null?G:null,encryptedContent:B.encrypted_content,type:B.type}})});for(let B of D.content)E.enqueue({type:"source",sourceType:"url",id:F(),url:B.url,title:B.title,providerMetadata:{anthropic:{pageAge:(P=B.page_age)!=null?P:null}}})}else E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("web_search"),isError:!0,result:{type:"web_search_tool_result_error",errorCode:D.content.error_code}});return}case"code_execution_tool_result":{D.content.type==="code_execution_result"?E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("code_execution"),result:{type:D.content.type,stdout:D.content.stdout,stderr:D.content.stderr,return_code:D.content.return_code,content:(se=D.content.content)!=null?se:[]}}):D.content.type==="code_execution_tool_result_error"&&E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("code_execution"),isError:!0,result:{type:"code_execution_tool_result_error",errorCode:D.content.error_code}});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName("code_execution"),result:D.content});return}case"tool_search_tool_result":{let B=b[D.tool_use_id];if(B==null){let G=l.toCustomToolName("tool_search_tool_bm25"),Me=l.toCustomToolName("tool_search_tool_regex");G!=="tool_search_tool_bm25"?B="tool_search_tool_bm25":B="tool_search_tool_regex"}D.content.type==="tool_search_tool_search_result"?E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName(B),result:D.content.tool_references.map(G=>({type:G.type,toolName:G.tool_name}))}):E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:l.toCustomToolName(B),isError:!0,result:{type:"tool_search_tool_result_error",errorCode:D.content.error_code}});return}case"mcp_tool_use":{S[D.id]={type:"tool-call",toolCallId:D.id,toolName:D.name,input:JSON.stringify(D.input),providerExecuted:!0,dynamic:!0,providerMetadata:{anthropic:{type:"mcp-tool-use",serverName:D.server_name}}},E.enqueue(S[D.id]);return}case"mcp_tool_result":{E.enqueue({type:"tool-result",toolCallId:D.tool_use_id,toolName:S[D.tool_use_id].toolName,isError:D.is_error,result:D.content,dynamic:!0,providerMetadata:S[D.tool_use_id].providerMetadata});return}default:{let B=Q;throw new Error(`Unsupported content block type: ${B}`)}}}case"content_block_stop":{if(y[R.index]!=null){let D=y[R.index];switch(D.type){case"text":{E.enqueue({type:"text-end",id:String(R.index)});break}case"reasoning":{E.enqueue({type:"reasoning-end",id:String(R.index)});break}case"tool-call":if(!(s&&D.toolName==="json")){E.enqueue({type:"tool-input-end",id:D.toolCallId});let B=D.input===""?"{}":D.input;if(D.providerToolName==="code_execution")try{let G=JSON.parse(B);G!=null&&typeof G=="object"&&"code"in G&&!("type"in G)&&(B=JSON.stringify({type:"programmatic-tool-call",...G}))}catch(G){}E.enqueue({type:"tool-call",toolCallId:D.toolCallId,toolName:D.toolName,input:B,providerExecuted:D.providerExecuted,...D.caller&&{providerMetadata:{anthropic:{caller:D.caller}}}})}break}delete y[R.index]}U=void 0;return}case"content_block_delta":{let D=R.delta.type;switch(D){case"text_delta":{if(s)return;E.enqueue({type:"text-delta",id:String(R.index),delta:R.delta.text});return}case"thinking_delta":{E.enqueue({type:"reasoning-delta",id:String(R.index),delta:R.delta.thinking});return}case"signature_delta":{U==="thinking"&&E.enqueue({type:"reasoning-delta",id:String(R.index),delta:"",providerMetadata:{anthropic:{signature:R.delta.signature}}});return}case"compaction_delta":{E.enqueue({type:"text-delta",id:String(R.index),delta:R.delta.content});return}case"input_json_delta":{let Q=y[R.index],B=R.delta.partial_json;if(B.length===0)return;if(j){if((Q==null?void 0:Q.type)!=="text")return;E.enqueue({type:"text-delta",id:String(R.index),delta:B})}else{if((Q==null?void 0:Q.type)!=="tool-call")return;Q.firstDelta&&(Q.providerToolName==="bash_code_execution"||Q.providerToolName==="text_editor_code_execution")&&(B=`{"type": "${Q.providerToolName}",${B.substring(1)}`),E.enqueue({type:"tool-input-delta",id:Q.toolCallId,delta:B}),Q.input+=B,Q.firstDelta=!1}return}case"citations_delta":{let Q=R.delta.citation,B=PS(Q,m,F);B&&E.enqueue(B);return}default:{let Q=D;throw new Error(`Unsupported delta type: ${Q}`)}}}case"message_start":{if(g.input_tokens=R.message.usage.input_tokens,g.cache_read_input_tokens=(ee=R.message.usage.cache_read_input_tokens)!=null?ee:0,g.cache_creation_input_tokens=(he=R.message.usage.cache_creation_input_tokens)!=null?he:0,k={...R.message.usage},w=(fe=R.message.usage.cache_creation_input_tokens)!=null?fe:null,R.message.container!=null&&(I={expiresAt:R.message.container.expires_at,id:R.message.container.id,skills:null}),R.message.stop_reason!=null&&(v={unified:gh({finishReason:R.message.stop_reason,isJsonResponseFromTool:j}),raw:R.message.stop_reason}),E.enqueue({type:"response-metadata",id:(V=R.message.id)!=null?V:void 0,modelId:(Ae=R.message.model)!=null?Ae:void 0}),R.message.content!=null)for(let D=0;D<R.message.content.length;D++){let Q=R.message.content[D];if(Q.type==="tool_use"){let B=Q.caller,G=B?{type:B.type,toolId:"tool_id"in B?B.tool_id:void 0}:void 0;E.enqueue({type:"tool-input-start",id:Q.id,toolName:Q.name});let Me=JSON.stringify((T=Q.input)!=null?T:{});E.enqueue({type:"tool-input-delta",id:Q.id,delta:Me}),E.enqueue({type:"tool-input-end",id:Q.id}),E.enqueue({type:"tool-call",toolCallId:Q.id,toolName:Q.name,input:Me,...G&&{providerMetadata:{anthropic:{caller:G}}}})}}return}case"message_delta":{R.usage.input_tokens!=null&&g.input_tokens!==R.usage.input_tokens&&(g.input_tokens=R.usage.input_tokens),g.output_tokens=R.usage.output_tokens,R.usage.cache_read_input_tokens!=null&&(g.cache_read_input_tokens=R.usage.cache_read_input_tokens),R.usage.cache_creation_input_tokens!=null&&(g.cache_creation_input_tokens=R.usage.cache_creation_input_tokens,w=R.usage.cache_creation_input_tokens),R.usage.iterations!=null&&(g.iterations=R.usage.iterations),v={unified:gh({finishReason:R.delta.stop_reason,isJsonResponseFromTool:j}),raw:(pe=R.delta.stop_reason)!=null?pe:void 0},h=(de=R.delta.stop_sequence)!=null?de:null,I=R.delta.container!=null?{expiresAt:R.delta.container.expires_at,id:R.delta.container.id,skills:(le=(H=R.delta.container.skills)==null?void 0:H.map(D=>({type:D.type,skillId:D.skill_id,version:D.version})))!=null?le:null}:null,R.context_management&&(_=OS(R.context_management)),k={...k,...R.usage};return}case"message_stop":{let D={usage:k!=null?k:null,cacheCreationInputTokens:w,stopSequence:h,iterations:g.iterations?g.iterations.map(B=>({type:B.type,inputTokens:B.input_tokens,outputTokens:B.output_tokens})):null,container:I,contextManagement:_},Q={anthropic:D};u&&d!=="anthropic"&&(Q[d]=D),E.enqueue({type:"finish",finishReason:v,usage:AS({usage:g,rawUsage:k}),providerMetadata:Q});return}case"error":{E.enqueue({type:"error",error:R.error});return}default:{let D=R;throw new Error(`Unsupported chunk type: ${D}`)}}}})),[L,M]=Z.tee(),q=L.getReader();try{await q.read();let C=await q.read();if(((t=C.value)==null?void 0:t.type)==="raw"&&(C=await q.read()),((r=C.value)==null?void 0:r.type)==="error"){let E=C.value.error;throw new Ye({message:E.message,url:c,requestBodyValues:o,statusCode:E.type==="overloaded_error"?529:500,responseHeaders:p,responseBody:JSON.stringify(E),isRetryable:E.type==="overloaded_error"})}}finally{q.cancel().catch(()=>{}),q.releaseLock()}return{stream:M,request:{body:o},response:{headers:p}}}};function uN(e){return e.includes("claude-opus-4-6")?{maxOutputTokens:128e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-sonnet-4-5")||e.includes("claude-opus-4-5")||e.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-sonnet-4-")||e.includes("claude-3-7-sonnet")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}function OS(e){return e?{appliedEdits:e.applied_edits.map(t=>{switch(t.type){case"clear_tool_uses_20250919":return{type:t.type,clearedToolUses:t.cleared_tool_uses,clearedInputTokens:t.cleared_input_tokens};case"clear_thinking_20251015":return{type:t.type,clearedThinkingTurns:t.cleared_thinking_turns,clearedInputTokens:t.cleared_input_tokens};case"compact_20260112":return{type:t.type}}}).filter(t=>t!==void 0)}:null}var cN=O(()=>A(a.object({command:a.string(),restart:a.boolean().optional()}))),dN=Le({id:"anthropic.bash_20241022",inputSchema:cN}),pN=O(()=>A(a.object({command:a.string(),restart:a.boolean().optional()}))),mN=Le({id:"anthropic.bash_20250124",inputSchema:pN}),fN=O(()=>A(a.object({action:a.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:a.array(a.number().int()).optional(),text:a.string().optional()}))),gN=Le({id:"anthropic.computer_20241022",inputSchema:fN}),hN=O(()=>A(a.object({action:a.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:a.tuple([a.number().int(),a.number().int()]).optional(),duration:a.number().optional(),scroll_amount:a.number().optional(),scroll_direction:a.enum(["up","down","left","right"]).optional(),start_coordinate:a.tuple([a.number().int(),a.number().int()]).optional(),text:a.string().optional()}))),vN=Le({id:"anthropic.computer_20250124",inputSchema:hN}),yN=O(()=>A(a.object({action:a.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot","zoom"]),coordinate:a.tuple([a.number().int(),a.number().int()]).optional(),duration:a.number().optional(),region:a.tuple([a.number().int(),a.number().int(),a.number().int(),a.number().int()]).optional(),scroll_amount:a.number().optional(),scroll_direction:a.enum(["up","down","left","right"]).optional(),start_coordinate:a.tuple([a.number().int(),a.number().int()]).optional(),text:a.string().optional()}))),_N=Le({id:"anthropic.computer_20251124",inputSchema:yN}),bN=O(()=>A(a.discriminatedUnion("command",[a.object({command:a.literal("view"),path:a.string(),view_range:a.tuple([a.number(),a.number()]).optional()}),a.object({command:a.literal("create"),path:a.string(),file_text:a.string()}),a.object({command:a.literal("str_replace"),path:a.string(),old_str:a.string(),new_str:a.string()}),a.object({command:a.literal("insert"),path:a.string(),insert_line:a.number(),insert_text:a.string()}),a.object({command:a.literal("delete"),path:a.string()}),a.object({command:a.literal("rename"),old_path:a.string(),new_path:a.string()})]))),xN=Le({id:"anthropic.memory_20250818",inputSchema:bN}),wN=O(()=>A(a.object({command:a.enum(["view","create","str_replace","insert","undo_edit"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),insert_text:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),SN=Le({id:"anthropic.text_editor_20241022",inputSchema:wN}),kN=O(()=>A(a.object({command:a.enum(["view","create","str_replace","insert","undo_edit"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),insert_text:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),IN=Le({id:"anthropic.text_editor_20250124",inputSchema:kN}),TN=O(()=>A(a.object({command:a.enum(["view","create","str_replace","insert"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),insert_text:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),$N=Le({id:"anthropic.text_editor_20250429",inputSchema:TN}),EN=O(()=>A(a.array(a.object({type:a.literal("tool_reference"),toolName:a.string()})))),CN=O(()=>A(a.object({query:a.string(),limit:a.number().optional()}))),AN=je({id:"anthropic.tool_search_bm25_20251119",inputSchema:CN,outputSchema:EN,supportsDeferredResults:!0}),PN=(e={})=>AN(e),ON={bash_20241022:dN,bash_20250124:mN,codeExecution_20250522:YM,codeExecution_20250825:eN,computer_20241022:gN,computer_20250124:vN,computer_20251124:_N,memory_20250818:xN,textEditor_20241022:SN,textEditor_20250124:IN,textEditor_20250429:$N,textEditor_20250728:UM,webFetch_20250910:BM,webSearch_20250305:ZM,toolSearchRegex_20251119:nN,toolSearchBm25_20251119:PN};function vh(e={}){var t,r;let o=(t=Vr(cn({settingValue:e.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?t:"https://api.anthropic.com/v1",n=(r=e.name)!=null?r:"anthropic.messages";if(e.apiKey&&e.authToken)throw new Io({argument:"apiKey/authToken",message:"Both apiKey and authToken were provided. Please use only one authentication method."});let i=()=>{let d=e.authToken?{Authorization:`Bearer ${e.authToken}`}:{"x-api-key":ya({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"})};return Ct({"anthropic-version":"2023-06-01",...d,...e.headers},`ai-sdk/anthropic/${AM}`)},s=d=>{var u;return new lN(d,{provider:n,baseURL:o,headers:i,fetch:e.fetch,generateId:(u=e.generateId)!=null?u:Fe,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]})})},l=function(d){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(d)};return l.specificationVersion="v3",l.languageModel=s,l.chat=s,l.messages=s,l.embeddingModel=d=>{throw new Wc({modelId:d,modelType:"embeddingModel"})},l.textEmbeddingModel=l.embeddingModel,l.imageModel=d=>{throw new Wc({modelId:d,modelType:"imageModel"})},l.tools=ON,l}var oB=vh();var RN="3.0.24",MN=O(()=>A(a.object({error:a.object({code:a.number().nullable(),message:a.string(),status:a.string()})}))),uo=ot({errorSchema:MN,errorToMessage:e=>e.error.message}),NN=O(()=>A(a.object({outputDimensionality:a.number().optional(),taskType:a.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),jN=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){let n=await Ee({provider:"google",providerOptions:o,schema:NN});if(e.length>this.maxEmbeddingsPerCall)throw new To({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let i=_e(await ze(this.config.headers),t);if(e.length===1){let{responseHeaders:u,value:m,rawValue:c}=await we({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:n==null?void 0:n.outputDimensionality,taskType:n==null?void 0:n.taskType},failedResponseHandler:uo,successfulResponseHandler:ke(zN),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:[m.embedding.values],usage:void 0,response:{headers:u,body:c}}}let{responseHeaders:s,value:l,rawValue:d}=await we({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:e.map(u=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:u}]},outputDimensionality:n==null?void 0:n.outputDimensionality,taskType:n==null?void 0:n.taskType}))},failedResponseHandler:uo,successfulResponseHandler:ke(DN),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:l.embeddings.map(u=>u.values),usage:void 0,response:{headers:s,body:d}}}},DN=O(()=>A(a.object({embeddings:a.array(a.object({values:a.array(a.number())}))}))),zN=O(()=>A(a.object({embedding:a.object({values:a.array(a.number())})})));function zS(e){var t,r,o,n;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let i=(t=e.promptTokenCount)!=null?t:0,s=(r=e.candidatesTokenCount)!=null?r:0,l=(o=e.cachedContentTokenCount)!=null?o:0,d=(n=e.thoughtsTokenCount)!=null?n:0;return{inputTokens:{total:i,noCache:i-l,cacheRead:l,cacheWrite:void 0},outputTokens:{total:s+d,text:s,reasoning:d},raw:e}}function Gr(e,t=!0){if(e==null)return;if(UN(e))return t?void 0:typeof e=="object"&&e.description?{type:"object",description:e.description}:{type:"object"};if(typeof e=="boolean")return{type:"boolean",properties:{}};let{type:r,description:o,required:n,properties:i,items:s,allOf:l,anyOf:d,oneOf:u,format:m,const:c,minLength:p,enum:f}=e,v={};if(o&&(v.description=o),n&&(v.required=n),m&&(v.format=m),c!==void 0&&(v.enum=[c]),r)if(Array.isArray(r)){let g=r.includes("null"),y=r.filter(S=>S!=="null");y.length===0?v.type="null":(v.anyOf=y.map(S=>({type:S})),g&&(v.nullable=!0))}else v.type=r;if(f!==void 0&&(v.enum=f),i!=null&&(v.properties=Object.entries(i).reduce((g,[y,S])=>(g[y]=Gr(S,!1),g),{})),s&&(v.items=Array.isArray(s)?s.map(g=>Gr(g,!1)):Gr(s,!1)),l&&(v.allOf=l.map(g=>Gr(g,!1))),d)if(d.some(g=>typeof g=="object"&&(g==null?void 0:g.type)==="null")){let g=d.filter(y=>!(typeof y=="object"&&(y==null?void 0:y.type)==="null"));if(g.length===1){let y=Gr(g[0],!1);typeof y=="object"&&(v.nullable=!0,Object.assign(v,y))}else v.anyOf=g.map(y=>Gr(y,!1)),v.nullable=!0}else v.anyOf=d.map(g=>Gr(g,!1));return u&&(v.oneOf=u.map(g=>Gr(g,!1))),p!==void 0&&(v.minLength=p),v}function UN(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function FN(e,t){var r,o,n;let i=[],s=[],l=!0,d=(r=t==null?void 0:t.isGemmaModel)!=null?r:!1,u=(o=t==null?void 0:t.providerOptionsName)!=null?o:"google";for(let{role:m,content:c}of e)switch(m){case"system":{if(!l)throw new Re({functionality:"system messages are only supported at the beginning of the conversation"});i.push({text:c});break}case"user":{l=!1;let p=[];for(let f of c)switch(f.type){case"text":{p.push({text:f.text});break}case"file":{let v=f.mediaType==="image/*"?"image/jpeg":f.mediaType;p.push(f.data instanceof URL?{fileData:{mimeType:v,fileUri:f.data.toString()}}:{inlineData:{mimeType:v,data:kt(f.data)}});break}}s.push({role:"user",parts:p});break}case"assistant":{l=!1,s.push({role:"model",parts:c.map(p=>{var f;let v=(f=p.providerOptions)==null?void 0:f[u],g=(v==null?void 0:v.thoughtSignature)!=null?String(v.thoughtSignature):void 0;switch(p.type){case"text":return p.text.length===0?void 0:{text:p.text,thoughtSignature:g};case"reasoning":return p.text.length===0?void 0:{text:p.text,thought:!0,thoughtSignature:g};case"file":{if(p.data instanceof URL)throw new Re({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:p.mediaType,data:kt(p.data)},thoughtSignature:g}}case"tool-call":return{functionCall:{name:p.toolName,args:p.input},thoughtSignature:g}}}).filter(p=>p!==void 0)});break}case"tool":{l=!1;let p=[];for(let f of c){if(f.type==="tool-approval-response")continue;let v=f.output;if(v.type==="content")for(let g of v.value)switch(g.type){case"text":p.push({functionResponse:{name:f.toolName,response:{name:f.toolName,content:g.text}}});break;case"image-data":p.push({inlineData:{mimeType:g.mediaType,data:g.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:p.push({text:JSON.stringify(g)});break}else p.push({functionResponse:{name:f.toolName,response:{name:f.toolName,content:v.type==="execution-denied"?(n=v.reason)!=null?n:"Tool execution denied.":v.value}}})}s.push({role:"user",parts:p});break}}if(d&&i.length>0&&s.length>0&&s[0].role==="user"){let m=i.map(c=>c.text).join(`

`);s[0].parts.unshift({text:m+`

`})}return{systemInstruction:i.length>0&&!d?{parts:i}:void 0,contents:s}}function US(e){return e.includes("/")?e:`models/${e}`}var FS=O(()=>A(a.object({responseModalities:a.array(a.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:a.object({thinkingBudget:a.number().optional(),includeThoughts:a.boolean().optional(),thinkingLevel:a.enum(["minimal","low","medium","high"]).optional()}).optional(),cachedContent:a.string().optional(),structuredOutputs:a.boolean().optional(),safetySettings:a.array(a.object({category:a.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:a.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:a.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:a.boolean().optional(),labels:a.record(a.string(),a.string()).optional(),mediaResolution:a.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:a.object({aspectRatio:a.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:a.enum(["1K","2K","4K"]).optional()}).optional(),retrievalConfig:a.object({latLng:a.object({latitude:a.number(),longitude:a.number()}).optional()}).optional()})));function LN({tools:e,toolChoice:t,modelId:r}){var o;e=e!=null&&e.length?e:void 0;let n=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(f=>f===r),s=r.includes("gemini-2")||r.includes("gemini-3")||i,l=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),d=r.includes("gemini-2.5")||r.includes("gemini-3");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:n};let u=e.some(f=>f.type==="function"),m=e.some(f=>f.type==="provider");if(u&&m&&n.push({type:"unsupported",feature:"combination of function and provider-defined tools"}),m){let f=[];return e.filter(g=>g.type==="provider").forEach(g=>{switch(g.id){case"google.google_search":s?f.push({googleSearch:{}}):l?f.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:g.args.mode,dynamicThreshold:g.args.dynamicThreshold}}}):f.push({googleSearchRetrieval:{}});break;case"google.enterprise_web_search":s?f.push({enterpriseWebSearch:{}}):n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`,details:"Enterprise Web Search requires Gemini 2.0 or newer."});break;case"google.url_context":s?f.push({urlContext:{}}):n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":s?f.push({codeExecution:{}}):n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":d?f.push({fileSearch:{...g.args}}):n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`,details:"The file search tool is only supported with Gemini 2.5 models and Gemini 3 models."});break;case"google.vertex_rag_store":s?f.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:g.args.ragCorpus},similarity_top_k:g.args.topK}}}):n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;case"google.google_maps":s?f.push({googleMaps:{}}):n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`,details:"The Google Maps grounding tool is not supported with Gemini models other than Gemini 2 or newer."});break;default:n.push({type:"unsupported",feature:`provider-defined tool ${g.id}`});break}}),{tools:f.length>0?f:void 0,toolConfig:void 0,toolWarnings:n}}let c=[];for(let f of e)f.type==="function"?c.push({name:f.name,description:(o=f.description)!=null?o:"",parameters:Gr(f.inputSchema)}):n.push({type:"unsupported",feature:`function tool ${f.name}`});if(t==null)return{tools:[{functionDeclarations:c}],toolConfig:void 0,toolWarnings:n};let p=t.type;switch(p){case"auto":return{tools:[{functionDeclarations:c}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:n};case"none":return{tools:[{functionDeclarations:c}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:n};case"required":return{tools:[{functionDeclarations:c}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:n};case"tool":return{tools:[{functionDeclarations:c}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:n};default:{let f=p;throw new Re({functionality:`tool choice type: ${f}`})}}}function LS({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"MALFORMED_FUNCTION_CALL":return"error";default:return"other"}}var qN=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:Fe}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:l,responseFormat:d,seed:u,tools:m,toolChoice:c,providerOptions:p}){var f;let v=[],g=this.config.provider.includes("vertex")?"vertex":"google",y=await Ee({provider:g,providerOptions:p,schema:FS});y==null&&g!=="google"&&(y=await Ee({provider:"google",providerOptions:p,schema:FS})),m!=null&&m.some(I=>I.type==="provider"&&I.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&v.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let S=this.modelId.toLowerCase().startsWith("gemma-"),{contents:b,systemInstruction:_}=FN(e,{isGemmaModel:S,providerOptionsName:g}),{tools:k,toolConfig:w,toolWarnings:h}=LN({tools:m,toolChoice:c,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:r,topK:n,topP:o,frequencyPenalty:i,presencePenalty:s,stopSequences:l,seed:u,responseMimeType:(d==null?void 0:d.type)==="json"?"application/json":void 0,responseSchema:(d==null?void 0:d.type)==="json"&&d.schema!=null&&((f=y==null?void 0:y.structuredOutputs)==null||f)?Gr(d.schema):void 0,...(y==null?void 0:y.audioTimestamp)&&{audioTimestamp:y.audioTimestamp},responseModalities:y==null?void 0:y.responseModalities,thinkingConfig:y==null?void 0:y.thinkingConfig,...(y==null?void 0:y.mediaResolution)&&{mediaResolution:y.mediaResolution},...(y==null?void 0:y.imageConfig)&&{imageConfig:y.imageConfig}},contents:b,systemInstruction:S?void 0:_,safetySettings:y==null?void 0:y.safetySettings,tools:k,toolConfig:y!=null&&y.retrievalConfig?{...w,retrievalConfig:y.retrievalConfig}:w,cachedContent:y==null?void 0:y.cachedContent,labels:y==null?void 0:y.labels},warnings:[...v,...h],providerOptionsName:g}}async doGenerate(e){var t,r,o,n,i,s,l,d,u,m;let{args:c,warnings:p,providerOptionsName:f}=await this.getArgs(e),v=_e(await ze(this.config.headers),e.headers),{responseHeaders:g,value:y,rawValue:S}=await we({url:`${this.config.baseURL}/${US(this.modelId)}:generateContent`,headers:v,body:c,failedResponseHandler:uo,successfulResponseHandler:ke(VN),abortSignal:e.abortSignal,fetch:this.config.fetch}),b=y.candidates[0],_=[],k=(r=(t=b.content)==null?void 0:t.parts)!=null?r:[],w=y.usageMetadata,h;for(let j of k)if("executableCode"in j&&((o=j.executableCode)!=null&&o.code)){let U=this.config.generateId();h=U,_.push({type:"tool-call",toolCallId:U,toolName:"code_execution",input:JSON.stringify(j.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in j&&j.codeExecutionResult)_.push({type:"tool-result",toolCallId:h,toolName:"code_execution",result:{outcome:j.codeExecutionResult.outcome,output:(n=j.codeExecutionResult.output)!=null?n:""}}),h=void 0;else if("text"in j&&j.text!=null){let U=j.thoughtSignature?{[f]:{thoughtSignature:j.thoughtSignature}}:void 0;if(j.text.length===0){if(U!=null&&_.length>0){let F=_[_.length-1];F.providerMetadata=U}}else _.push({type:j.thought===!0?"reasoning":"text",text:j.text,providerMetadata:U})}else"functionCall"in j?_.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:j.functionCall.name,input:JSON.stringify(j.functionCall.args),providerMetadata:j.thoughtSignature?{[f]:{thoughtSignature:j.thoughtSignature}}:void 0}):"inlineData"in j&&_.push({type:"file",data:j.inlineData.data,mediaType:j.inlineData.mimeType,providerMetadata:j.thoughtSignature?{[f]:{thoughtSignature:j.thoughtSignature}}:void 0});let I=(i=qS({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}))!=null?i:[];for(let j of I)_.push(j);return{content:_,finishReason:{unified:LS({finishReason:b.finishReason,hasToolCalls:_.some(j=>j.type==="tool-call"&&!j.providerExecuted)}),raw:(s=b.finishReason)!=null?s:void 0},usage:zS(w),warnings:p,providerMetadata:{[f]:{promptFeedback:(l=y.promptFeedback)!=null?l:null,groundingMetadata:(d=b.groundingMetadata)!=null?d:null,urlContextMetadata:(u=b.urlContextMetadata)!=null?u:null,safetyRatings:(m=b.safetyRatings)!=null?m:null,usageMetadata:w!=null?w:null}},request:{body:c},response:{headers:g,body:S}}}async doStream(e){let{args:t,warnings:r,providerOptionsName:o}=await this.getArgs(e),n=_e(await ze(this.config.headers),e.headers),{responseHeaders:i,value:s}=await we({url:`${this.config.baseURL}/${US(this.modelId)}:streamGenerateContent?alt=sse`,headers:n,body:t,failedResponseHandler:uo,successfulResponseHandler:Nt(GN),abortSignal:e.abortSignal,fetch:this.config.fetch}),l={unified:"other",raw:void 0},d,u,m=this.config.generateId,c=!1,p=null,f=null,v=0,g=new Set,y;return{stream:s.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:r})},transform(S,b){var _,k,w,h,I,j,U,F;if(e.includeRawChunks&&b.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){b.enqueue({type:"error",error:S.error});return}let Z=S.value,L=Z.usageMetadata;L!=null&&(d=L);let M=(_=Z.candidates)==null?void 0:_[0];if(M==null)return;let q=M.content,C=qS({groundingMetadata:M.groundingMetadata,generateId:m});if(C!=null)for(let E of C)E.sourceType==="url"&&!g.has(E.url)&&(g.add(E.url),b.enqueue(E));if(q!=null){let E=(k=q.parts)!=null?k:[];for(let P of E)if("executableCode"in P&&((w=P.executableCode)!=null&&w.code)){let se=m();y=se,b.enqueue({type:"tool-call",toolCallId:se,toolName:"code_execution",input:JSON.stringify(P.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in P&&P.codeExecutionResult){let se=y;se&&(b.enqueue({type:"tool-result",toolCallId:se,toolName:"code_execution",result:{outcome:P.codeExecutionResult.outcome,output:(h=P.codeExecutionResult.output)!=null?h:""}}),y=void 0)}else if("text"in P&&P.text!=null){let se=P.thoughtSignature?{[o]:{thoughtSignature:P.thoughtSignature}}:void 0;P.text.length===0?se!=null&&p!==null&&b.enqueue({type:"text-delta",id:p,delta:"",providerMetadata:se}):P.thought===!0?(p!==null&&(b.enqueue({type:"text-end",id:p}),p=null),f===null&&(f=String(v++),b.enqueue({type:"reasoning-start",id:f,providerMetadata:se})),b.enqueue({type:"reasoning-delta",id:f,delta:P.text,providerMetadata:se})):(f!==null&&(b.enqueue({type:"reasoning-end",id:f}),f=null),p===null&&(p=String(v++),b.enqueue({type:"text-start",id:p,providerMetadata:se})),b.enqueue({type:"text-delta",id:p,delta:P.text,providerMetadata:se}))}else"inlineData"in P&&b.enqueue({type:"file",mediaType:P.inlineData.mimeType,data:P.inlineData.data});let te=ZN({parts:q.parts,generateId:m,providerOptionsName:o});if(te!=null)for(let P of te)b.enqueue({type:"tool-input-start",id:P.toolCallId,toolName:P.toolName,providerMetadata:P.providerMetadata}),b.enqueue({type:"tool-input-delta",id:P.toolCallId,delta:P.args,providerMetadata:P.providerMetadata}),b.enqueue({type:"tool-input-end",id:P.toolCallId,providerMetadata:P.providerMetadata}),b.enqueue({type:"tool-call",toolCallId:P.toolCallId,toolName:P.toolName,input:P.args,providerMetadata:P.providerMetadata}),c=!0}M.finishReason!=null&&(l={unified:LS({finishReason:M.finishReason,hasToolCalls:c}),raw:M.finishReason},u={[o]:{promptFeedback:(I=Z.promptFeedback)!=null?I:null,groundingMetadata:(j=M.groundingMetadata)!=null?j:null,urlContextMetadata:(U=M.urlContextMetadata)!=null?U:null,safetyRatings:(F=M.safetyRatings)!=null?F:null}},L!=null&&(u[o].usageMetadata=L))},flush(S){p!==null&&S.enqueue({type:"text-end",id:p}),f!==null&&S.enqueue({type:"reasoning-end",id:f}),S.enqueue({type:"finish",finishReason:l,usage:zS(d),providerMetadata:u})}})),response:{headers:i},request:{body:t}}}};function ZN({parts:e,generateId:t,providerOptionsName:r}){let o=e==null?void 0:e.filter(n=>"functionCall"in n);return o==null||o.length===0?void 0:o.map(n=>({type:"tool-call",toolCallId:t(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args),providerMetadata:n.thoughtSignature?{[r]:{thoughtSignature:n.thoughtSignature}}:void 0}))}function qS({groundingMetadata:e,generateId:t}){var r,o,n,i,s;if(!(e!=null&&e.groundingChunks))return;let l=[];for(let d of e.groundingChunks)if(d.web!=null)l.push({type:"source",sourceType:"url",id:t(),url:d.web.uri,title:(r=d.web.title)!=null?r:void 0});else if(d.retrievedContext!=null){let u=d.retrievedContext.uri,m=d.retrievedContext.fileSearchStore;if(u&&(u.startsWith("http://")||u.startsWith("https://")))l.push({type:"source",sourceType:"url",id:t(),url:u,title:(o=d.retrievedContext.title)!=null?o:void 0});else if(u){let c=(n=d.retrievedContext.title)!=null?n:"Unknown Document",p="application/octet-stream",f;u.endsWith(".pdf")?(p="application/pdf",f=u.split("/").pop()):u.endsWith(".txt")?(p="text/plain",f=u.split("/").pop()):u.endsWith(".docx")?(p="application/vnd.openxmlformats-officedocument.wordprocessingml.document",f=u.split("/").pop()):u.endsWith(".doc")?(p="application/msword",f=u.split("/").pop()):(u.match(/\.(md|markdown)$/)&&(p="text/markdown"),f=u.split("/").pop()),l.push({type:"source",sourceType:"document",id:t(),mediaType:p,title:c,filename:f})}else if(m){let c=(i=d.retrievedContext.title)!=null?i:"Unknown Document";l.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:c,filename:m.split("/").pop()})}}else d.maps!=null&&d.maps.uri&&l.push({type:"source",sourceType:"url",id:t(),url:d.maps.uri,title:(s=d.maps.title)!=null?s:void 0});return l.length>0?l:void 0}var VS=()=>a.object({webSearchQueries:a.array(a.string()).nullish(),retrievalQueries:a.array(a.string()).nullish(),searchEntryPoint:a.object({renderedContent:a.string()}).nullish(),groundingChunks:a.array(a.object({web:a.object({uri:a.string(),title:a.string().nullish()}).nullish(),retrievedContext:a.object({uri:a.string().nullish(),title:a.string().nullish(),text:a.string().nullish(),fileSearchStore:a.string().nullish()}).nullish(),maps:a.object({uri:a.string().nullish(),title:a.string().nullish(),text:a.string().nullish(),placeId:a.string().nullish()}).nullish()})).nullish(),groundingSupports:a.array(a.object({segment:a.object({startIndex:a.number().nullish(),endIndex:a.number().nullish(),text:a.string().nullish()}).nullish(),segment_text:a.string().nullish(),groundingChunkIndices:a.array(a.number()).nullish(),supportChunkIndices:a.array(a.number()).nullish(),confidenceScores:a.array(a.number()).nullish(),confidenceScore:a.array(a.number()).nullish()})).nullish(),retrievalMetadata:a.union([a.object({webDynamicRetrievalScore:a.number()}),a.object({})]).nullish()}),GS=()=>a.object({parts:a.array(a.union([a.object({functionCall:a.object({name:a.string(),args:a.unknown()}),thoughtSignature:a.string().nullish()}),a.object({inlineData:a.object({mimeType:a.string(),data:a.string()}),thoughtSignature:a.string().nullish()}),a.object({executableCode:a.object({language:a.string(),code:a.string()}).nullish(),codeExecutionResult:a.object({outcome:a.string(),output:a.string().nullish()}).nullish(),text:a.string().nullish(),thought:a.boolean().nullish(),thoughtSignature:a.string().nullish()})])).nullish()}),xu=()=>a.object({category:a.string().nullish(),probability:a.string().nullish(),probabilityScore:a.number().nullish(),severity:a.string().nullish(),severityScore:a.number().nullish(),blocked:a.boolean().nullish()}),HS=a.object({cachedContentTokenCount:a.number().nullish(),thoughtsTokenCount:a.number().nullish(),promptTokenCount:a.number().nullish(),candidatesTokenCount:a.number().nullish(),totalTokenCount:a.number().nullish(),trafficType:a.string().nullish()}),BS=()=>a.object({urlMetadata:a.array(a.object({retrievedUrl:a.string(),urlRetrievalStatus:a.string()}))}),VN=O(()=>A(a.object({candidates:a.array(a.object({content:GS().nullish().or(a.object({}).strict()),finishReason:a.string().nullish(),safetyRatings:a.array(xu()).nullish(),groundingMetadata:VS().nullish(),urlContextMetadata:BS().nullish()})),usageMetadata:HS.nullish(),promptFeedback:a.object({blockReason:a.string().nullish(),safetyRatings:a.array(xu()).nullish()}).nullish()}))),GN=O(()=>A(a.object({candidates:a.array(a.object({content:GS().nullish(),finishReason:a.string().nullish(),safetyRatings:a.array(xu()).nullish(),groundingMetadata:VS().nullish(),urlContextMetadata:BS().nullish()})).nullish(),usageMetadata:HS.nullish(),promptFeedback:a.object({blockReason:a.string().nullish(),safetyRatings:a.array(xu()).nullish()}).nullish()}))),HN=je({id:"google.code_execution",inputSchema:a.object({language:a.string().describe("The programming language of the code."),code:a.string().describe("The code to be executed.")}),outputSchema:a.object({outcome:a.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:a.string().describe("The output from the code execution.")})}),BN=Le({id:"google.enterprise_web_search",inputSchema:O(()=>A(a.object({})))}),JN=a.object({fileSearchStoreNames:a.array(a.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:a.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:a.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),WN=O(()=>A(JN)),KN=Le({id:"google.file_search",inputSchema:WN}),YN=Le({id:"google.google_maps",inputSchema:O(()=>A(a.object({})))}),XN=Le({id:"google.google_search",inputSchema:O(()=>A(a.object({mode:a.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:a.number().default(1)})))}),QN=Le({id:"google.url_context",inputSchema:O(()=>A(a.object({})))}),ej=Le({id:"google.vertex_rag_store",inputSchema:a.object({ragCorpus:a.string(),topK:a.number().optional()})}),tj={googleSearch:XN,enterpriseWebSearch:BN,googleMaps:YN,urlContext:QN,fileSearch:KN,codeExecution:HN,vertexRagStore:ej},rj=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,r,o;let{prompt:n,n:i=1,size:s,aspectRatio:l="1:1",seed:d,providerOptions:u,headers:m,abortSignal:c,files:p,mask:f}=e,v=[];if(p!=null&&p.length>0)throw new Error("Google Generative AI does not support image editing. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");if(f!=null)throw new Error("Google Generative AI does not support image editing with masks. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");s!=null&&v.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),d!=null&&v.push({type:"unsupported",feature:"seed",details:"This model does not support the `seed` option through this provider."});let g=await Ee({provider:"google",providerOptions:u,schema:oj}),y=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,S={sampleCount:i};l!=null&&(S.aspectRatio=l),g&&Object.assign(S,g);let b={instances:[{prompt:n}],parameters:S},{responseHeaders:_,value:k}=await we({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:_e(await ze(this.config.headers),m),body:b,failedResponseHandler:uo,successfulResponseHandler:ke(nj),abortSignal:c,fetch:this.config.fetch});return{images:k.predictions.map(w=>w.bytesBase64Encoded),warnings:v!=null?v:[],providerMetadata:{google:{images:k.predictions.map(w=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:_}}}},nj=O(()=>A(a.object({predictions:a.array(a.object({bytesBase64Encoded:a.string()})).default([])}))),oj=O(()=>A(a.object({personGeneration:a.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:a.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()}))),aj=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}get maxVideosPerCall(){return 4}async doGenerate(e){var t,r,o,n,i,s,l,d;let u=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,m=[],c=await Ee({provider:"google",providerOptions:e.providerOptions,schema:ij}),p=[{}],f=p[0];if(e.prompt!=null&&(f.prompt=e.prompt),e.image!=null)if(e.image.type==="url")m.push({type:"unsupported",feature:"URL-based image input",details:"Google Generative AI video models require base64-encoded images. URL will be ignored."});else{let Z=typeof e.image.data=="string"?e.image.data:pr(e.image.data);f.image={inlineData:{mimeType:e.image.mediaType||"image/png",data:Z}}}(c==null?void 0:c.referenceImages)!=null&&(f.referenceImages=c.referenceImages.map(Z=>Z.bytesBase64Encoded?{inlineData:{mimeType:"image/png",data:Z.bytesBase64Encoded}}:Z.gcsUri?{gcsUri:Z.gcsUri}:Z));let v={sampleCount:e.n};if(e.aspectRatio&&(v.aspectRatio=e.aspectRatio),e.resolution){let Z={"1280x720":"720p","1920x1080":"1080p","3840x2160":"4k"};v.resolution=Z[e.resolution]||e.resolution}if(e.duration&&(v.durationSeconds=e.duration),e.seed&&(v.seed=e.seed),c!=null){let Z=c;Z.personGeneration!==void 0&&Z.personGeneration!==null&&(v.personGeneration=Z.personGeneration),Z.negativePrompt!==void 0&&Z.negativePrompt!==null&&(v.negativePrompt=Z.negativePrompt);for(let[L,M]of Object.entries(Z))["pollIntervalMs","pollTimeoutMs","personGeneration","negativePrompt","referenceImages"].includes(L)||(v[L]=M)}let{value:g}=await we({url:`${this.config.baseURL}/models/${this.modelId}:predictLongRunning`,headers:_e(await ze(this.config.headers),e.headers),body:{instances:p,parameters:v},successfulResponseHandler:ke(ZS),failedResponseHandler:uo,abortSignal:e.abortSignal,fetch:this.config.fetch}),y=g.name;if(!y)throw new oe({name:"GOOGLE_VIDEO_GENERATION_ERROR",message:"No operation name returned from API"});let S=(n=c==null?void 0:c.pollIntervalMs)!=null?n:1e4,b=(i=c==null?void 0:c.pollTimeoutMs)!=null?i:6e5,_=Date.now(),k=g,w;for(;!k.done;){if(Date.now()-_>b)throw new oe({name:"GOOGLE_VIDEO_GENERATION_TIMEOUT",message:`Video generation timed out after ${b}ms`});if(await hu(S),(s=e.abortSignal)!=null&&s.aborted)throw new oe({name:"GOOGLE_VIDEO_GENERATION_ABORTED",message:"Video generation request was aborted"});let{value:Z,responseHeaders:L}=await Ri({url:`${this.config.baseURL}/${y}`,headers:_e(await ze(this.config.headers),e.headers),successfulResponseHandler:ke(ZS),failedResponseHandler:uo,abortSignal:e.abortSignal,fetch:this.config.fetch});k=Z,w=L}if(k.error)throw new oe({name:"GOOGLE_VIDEO_GENERATION_FAILED",message:`Video generation failed: ${k.error.message}`});let h=k.response;if(!((l=h==null?void 0:h.generateVideoResponse)!=null&&l.generatedSamples)||h.generateVideoResponse.generatedSamples.length===0)throw new oe({name:"GOOGLE_VIDEO_GENERATION_ERROR",message:`No videos in response. Response: ${JSON.stringify(k)}`});let I=[],j=[],U=await ze(this.config.headers),F=U==null?void 0:U["x-goog-api-key"];for(let Z of h.generateVideoResponse.generatedSamples)if((d=Z.video)!=null&&d.uri){let L=F?`${Z.video.uri}${Z.video.uri.includes("?")?"&":"?"}key=${F}`:Z.video.uri;I.push({type:"url",url:L,mediaType:"video/mp4"}),j.push({uri:Z.video.uri})}if(I.length===0)throw new oe({name:"GOOGLE_VIDEO_GENERATION_ERROR",message:"No valid videos in response"});return{videos:I,warnings:m,response:{timestamp:u,modelId:this.modelId,headers:w},providerMetadata:{google:{videos:j}}}}},ZS=a.object({name:a.string().nullish(),done:a.boolean().nullish(),error:a.object({code:a.number().nullish(),message:a.string(),status:a.string().nullish()}).nullish(),response:a.object({generateVideoResponse:a.object({generatedSamples:a.array(a.object({video:a.object({uri:a.string().nullish()}).nullish()})).nullish()}).nullish()}).nullish()}),ij=O(()=>A(a.object({pollIntervalMs:a.number().positive().nullish(),pollTimeoutMs:a.number().positive().nullish(),personGeneration:a.enum(["dont_allow","allow_adult","allow_all"]).nullish(),negativePrompt:a.string().nullish(),referenceImages:a.array(a.object({bytesBase64Encoded:a.string().nullish(),gcsUri:a.string().nullish()})).nullish()}).passthrough()));function yh(e={}){var t,r;let o=(t=Vr(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",n=(r=e.name)!=null?r:"google.generative-ai",i=()=>Ct({"x-goog-api-key":ya({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${RN}`),s=c=>{var p;return new qN(c,{provider:n,baseURL:o,headers:i,generateId:(p=e.generateId)!=null?p:Fe,supportedUrls:()=>({"*":[new RegExp(`^${o}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},l=c=>new jN(c,{provider:n,baseURL:o,headers:i,fetch:e.fetch}),d=(c,p={})=>new rj(c,p,{provider:n,baseURL:o,headers:i,fetch:e.fetch}),u=c=>{var p;return new aj(c,{provider:n,baseURL:o,headers:i,fetch:e.fetch,generateId:(p=e.generateId)!=null?p:Fe})},m=function(c){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return s(c)};return m.specificationVersion="v3",m.languageModel=s,m.chat=s,m.generativeAI=s,m.embedding=l,m.embeddingModel=l,m.textEmbedding=l,m.textEmbeddingModel=l,m.image=d,m.imageModel=d,m.video=u,m.videoModel=u,m.tools=tj,m}var qB=yh();var sj=Object.defineProperty,lj=Object.defineProperties,uj=Object.getOwnPropertyDescriptors,Tu=Object.getOwnPropertySymbols,Ok=Object.prototype.hasOwnProperty,Rk=Object.prototype.propertyIsEnumerable,Mk=e=>{throw TypeError(e)},JS=(e,t,r)=>t in e?sj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))Ok.call(t,r)&&JS(e,r,t[r]);if(Tu)for(var r of Tu(t))Rk.call(t,r)&&JS(e,r,t[r]);return e},qe=(e,t)=>lj(e,uj(t)),kh=(e,t)=>{var r={};for(var o in e)Ok.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&Tu)for(var o of Tu(e))t.indexOf(o)<0&&Rk.call(e,o)&&(r[o]=e[o]);return r},cj=(e,t,r)=>t.has(e)||Mk("Cannot "+r),WS=(e,t,r)=>(cj(e,t,"read from private field"),r?r.call(e):t.get(e)),dj=(e,t,r)=>t.has(e)?Mk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Nk="vercel.ai.error",pj=Symbol.for(Nk),KS,YS,et=class jk extends(YS=Error,KS=pj,YS){constructor({name:t,message:r,cause:o}){super(r),this[KS]=!0,this.name=t,this.cause=o}static isInstance(t){return jk.hasMarker(t,Nk)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}},Dk="AI_APICallError",zk=`vercel.ai.error.${Dk}`,mj=Symbol.for(zk),XS,QS,$r=class extends(QS=et,XS=mj,QS){constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:s,isRetryable:l=o!=null&&(o===408||o===409||o===429||o>=500),data:d}){super({name:Dk,message:e,cause:s}),this[XS]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=l,this.data=d}static isInstance(e){return et.hasMarker(e,zk)}},Uk="AI_EmptyResponseBodyError",Fk=`vercel.ai.error.${Uk}`,fj=Symbol.for(Fk),ek,tk,gj=class extends(tk=et,ek=fj,tk){constructor({message:e="Empty response body"}={}){super({name:Uk,message:e}),this[ek]=!0}static isInstance(e){return et.hasMarker(e,Fk)}};function Lk(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var qk="AI_InvalidArgumentError",Zk=`vercel.ai.error.${qk}`,hj=Symbol.for(Zk),rk,nk,Vk=class extends(nk=et,rk=hj,nk){constructor({message:e,cause:t,argument:r}){super({name:qk,message:e,cause:t}),this[rk]=!0,this.argument=r}static isInstance(e){return et.hasMarker(e,Zk)}},Gk="AI_InvalidPromptError",Hk=`vercel.ai.error.${Gk}`,vj=Symbol.for(Hk),ok,ak,yj=class extends(ak=et,ok=vj,ak){constructor({prompt:e,message:t,cause:r}){super({name:Gk,message:`Invalid prompt: ${t}`,cause:r}),this[ok]=!0,this.prompt=e}static isInstance(e){return et.hasMarker(e,Hk)}},Bk="AI_InvalidResponseDataError",Jk=`vercel.ai.error.${Bk}`,_j=Symbol.for(Jk),ik,sk,Di=class extends(sk=et,ik=_j,sk){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Bk,message:t}),this[ik]=!0,this.data=e}static isInstance(e){return et.hasMarker(e,Jk)}},Wk="AI_JSONParseError",Kk=`vercel.ai.error.${Wk}`,bj=Symbol.for(Kk),lk,uk,$u=class extends(uk=et,lk=bj,uk){constructor({text:e,cause:t}){super({name:Wk,message:`JSON parsing failed: Text: ${e}.
Error message: ${Lk(t)}`,cause:t}),this[lk]=!0,this.text=e}static isInstance(e){return et.hasMarker(e,Kk)}},Yk="AI_LoadAPIKeyError",Xk=`vercel.ai.error.${Yk}`,xj=Symbol.for(Xk),ck,dk,wu=class extends(dk=et,ck=xj,dk){constructor({message:e}){super({name:Yk,message:e}),this[ck]=!0}static isInstance(e){return et.hasMarker(e,Xk)}},Qk="AI_LoadSettingError",eI=`vercel.ai.error.${Qk}`,wj=Symbol.for(eI),pk,mk,JB=class extends(mk=et,pk=wj,mk){constructor({message:e}){super({name:Qk,message:e}),this[pk]=!0}static isInstance(e){return et.hasMarker(e,eI)}},tI="AI_NoContentGeneratedError",rI=`vercel.ai.error.${tI}`,Sj=Symbol.for(rI),fk,gk,Ah=class extends(gk=et,fk=Sj,gk){constructor({message:e="No content generated."}={}){super({name:tI,message:e}),this[fk]=!0}static isInstance(e){return et.hasMarker(e,rI)}},nI="AI_NoSuchModelError",oI=`vercel.ai.error.${nI}`,kj=Symbol.for(oI),hk,vk,WB=class extends(vk=et,hk=kj,vk){constructor({errorName:e=nI,modelId:t,modelType:r,message:o=`No such ${r}: ${t}`}){super({name:e,message:o}),this[hk]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return et.hasMarker(e,oI)}},aI="AI_TooManyEmbeddingValuesForCallError",iI=`vercel.ai.error.${aI}`,Ij=Symbol.for(iI),yk,_k,KB=class extends(_k=et,yk=Ij,_k){constructor(e){super({name:aI,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[yk]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return et.hasMarker(e,iI)}},sI="AI_TypeValidationError",lI=`vercel.ai.error.${sI}`,Tj=Symbol.for(lI),bk,xk,zi=class Ih extends(xk=et,bk=Tj,xk){constructor({value:t,cause:r}){super({name:sI,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Lk(r)}`,cause:r}),this[bk]=!0,this.value=t}static isInstance(t){return et.hasMarker(t,lI)}static wrap({value:t,cause:r}){return Ih.isInstance(r)&&r.value===t?r:new Ih({value:t,cause:r})}},uI="AI_UnsupportedFunctionalityError",cI=`vercel.ai.error.${uI}`,$j=Symbol.for(cI),wk,Sk,dn=class extends(Sk=et,wk=$j,Sk){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:uI,message:t}),this[wk]=!0,this.functionality=e}static isInstance(e){return et.hasMarker(e,cI)}},kk=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function _h(e){}function Ej(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=_h,onError:r=_h,onRetry:o=_h,onComment:n}=e,i="",s=!0,l,d="",u="";function m(g){let y=s?g.replace(/^\xEF\xBB\xBF/,""):g,[S,b]=Cj(`${i}${y}`);for(let _ of S)c(_);i=b,s=!1}function c(g){if(g===""){f();return}if(g.startsWith(":")){n&&n(g.slice(g.startsWith(": ")?2:1));return}let y=g.indexOf(":");if(y!==-1){let S=g.slice(0,y),b=g[y+1]===" "?2:1,_=g.slice(y+b);p(S,_,g);return}p(g,"",g)}function p(g,y,S){switch(g){case"event":u=y;break;case"data":d=`${d}${y}
`;break;case"id":l=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?o(parseInt(y,10)):r(new kk(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:S}));break;default:r(new kk(`Unknown field "${g.length>20?`${g.slice(0,20)}\u2026`:g}"`,{type:"unknown-field",field:g,value:y,line:S}));break}}function f(){d.length>0&&t({id:l,event:u||void 0,data:d.endsWith(`
`)?d.slice(0,-1):d}),l=void 0,d="",u=""}function v(g={}){i&&g.consume&&c(i),s=!0,l=void 0,d="",u="",i=""}return{feed:m,reset:v}}function Cj(e){let t=[],r="",o=0;for(;o<e.length;){let n=e.indexOf("\r",o),i=e.indexOf(`
`,o),s=-1;if(n!==-1&&i!==-1?s=Math.min(n,i):n!==-1?n===e.length-1?s=-1:s=n:i!==-1&&(s=i),s===-1){r=e.slice(o);break}else{let l=e.slice(o,s);t.push(l),o=s+1,e[o-1]==="\r"&&e[o]===`
`&&o++}}return[t,r]}var Aj=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let o;super({start(n){o=Ej({onEvent:i=>{n.enqueue(i)},onError(i){e==="terminate"?n.error(i):typeof e=="function"&&e(i)},onRetry:t,onComment:r})},transform(n){o.feed(n)}})}};function xa(...e){return e.reduce((t,r)=>re(re({},t),r!=null?r:{}),{})}function Pu(e){return Object.fromEntries([...e.headers])}var{btoa:Pj,atob:e3}=globalThis;function Oj(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return Pj(t)}var dI="AI_DownloadError",pI=`vercel.ai.error.${dI}`,Rj=Symbol.for(pI),Ik,Tk,t3=class extends(Tk=et,Ik=Rj,Tk){constructor({url:e,statusCode:t,statusText:r,cause:o,message:n=o==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${o}`}){super({name:dI,message:n,cause:o}),this[Ik]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return et.hasMarker(e,pI)}},Mj=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=()=>{let i=r.length,s=new Array(t);for(let l=0;l<t;l++)s[l]=r[Math.random()*i|0];return s.join("")};if(e==null)return n;if(r.includes(o))throw new Vk({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},Tr=Mj();function Th(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Nj=["fetch failed","failed to fetch"];function jj({error:e,url:t,requestBodyValues:r}){if(Th(e))return e;if(e instanceof TypeError&&Nj.includes(e.message.toLowerCase())){let o=e.cause;if(o!=null)return new $r({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r,isRetryable:!0})}return e}function Dj(e=globalThis){var t,r,o;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(o=(r=e.process)==null?void 0:r.versions)!=null&&o.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function zj(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((r,o)=>{t[o.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(let[r,o]of e)o!=null&&(t[r.toLowerCase()]=o)}return t}function Uj(e,...t){let r=new Headers(zj(e)),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var Fj="4.0.1";function Lj({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:o}){if(typeof e=="string")return e;if(e!=null)throw new wu({message:`${o} API key must be a string.`});if(typeof process=="undefined")throw new wu({message:`${o} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new wu({message:`${o} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new wu({message:`${o} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var qj=/"__proto__"\s*:/,Zj=/"constructor"\s*:/;function $k(e){let t=JSON.parse(e);return t===null||typeof t!="object"||qj.test(e)===!1&&Zj.test(e)===!1?t:Vj(t)}function Vj(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}function Ph(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(r){return $k(e)}try{return $k(e)}finally{Error.stackTraceLimit=t}}function Su(e){if(e.type==="object"){e.additionalProperties=!1;let t=e.properties;if(t!=null)for(let r in t)t[r]=Su(t[r])}return e.type==="array"&&e.items!=null&&(Array.isArray(e.items)?e.items=e.items.map(t=>Su(t)):e.items=Su(e.items)),e}var Gj=Symbol("Let zodToJsonSchema decide on which parser to use"),Ek={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Hj=e=>typeof e=="string"?qe(re({},Ek),{name:e}):re(re({},Ek),e);function ir(){return{}}function Bj(e,t){var r,o,n;let i={type:"array"};return(r=e.type)!=null&&r._def&&((n=(o=e.type)==null?void 0:o._def)==null?void 0:n.typeName)!==z.ZodAny&&(i.items=We(e.type._def,qe(re({},t),{currentPath:[...t.currentPath,"items"]}))),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function Jj(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Wj(){return{type:"boolean"}}function mI(e,t){return We(e.type._def,t)}var Kj=(e,t)=>We(e.innerType._def,t);function fI(e,t,r){let o=r!=null?r:t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>fI(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Yj(e)}}var Yj=e=>{let t={type:"integer",format:"unix-time"};for(let r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function Xj(e,t){return qe(re({},We(e.innerType._def,t)),{default:e.defaultValue()})}function Qj(e,t){return t.effectStrategy==="input"?We(e.schema._def,t):ir()}function eD(e){return{type:"string",enum:Array.from(e.values)}}var tD=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function rD(e,t){let r=[We(e.left._def,qe(re({},t),{currentPath:[...t.currentPath,"allOf","0"]})),We(e.right._def,qe(re({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter(n=>!!n),o=[];return r.forEach(n=>{if(tD(n))o.push(...n.allOf);else{let i=n;if("additionalProperties"in n&&n.additionalProperties===!1){let s=n,{additionalProperties:l}=s;i=kh(s,["additionalProperties"])}o.push(i)}}),o.length?{allOf:o}:void 0}function nD(e){let t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var bh=void 0,kr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(bh===void 0&&(bh=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),bh),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function gI(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"email":switch(t.emailStrategy){case"format:email":Ir(r,"email",o.message,t);break;case"format:idn-email":Ir(r,"idn-email",o.message,t);break;case"pattern:zod":Gt(r,kr.email,o.message,t);break}break;case"url":Ir(r,"uri",o.message,t);break;case"uuid":Ir(r,"uuid",o.message,t);break;case"regex":Gt(r,o.regex,o.message,t);break;case"cuid":Gt(r,kr.cuid,o.message,t);break;case"cuid2":Gt(r,kr.cuid2,o.message,t);break;case"startsWith":Gt(r,RegExp(`^${xh(o.value,t)}`),o.message,t);break;case"endsWith":Gt(r,RegExp(`${xh(o.value,t)}$`),o.message,t);break;case"datetime":Ir(r,"date-time",o.message,t);break;case"date":Ir(r,"date",o.message,t);break;case"time":Ir(r,"time",o.message,t);break;case"duration":Ir(r,"duration",o.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"includes":{Gt(r,RegExp(xh(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&Ir(r,"ipv4",o.message,t),o.version!=="v4"&&Ir(r,"ipv6",o.message,t);break}case"base64url":Gt(r,kr.base64url,o.message,t);break;case"jwt":Gt(r,kr.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&Gt(r,kr.ipv4Cidr,o.message,t),o.version!=="v4"&&Gt(r,kr.ipv6Cidr,o.message,t);break}case"emoji":Gt(r,kr.emoji(),o.message,t);break;case"ulid":{Gt(r,kr.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ir(r,"binary",o.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Gt(r,kr.base64,o.message,t);break}}break}case"nanoid":Gt(r,kr.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function xh(e,t){return t.patternStrategy==="escape"?aD(e):e}var oD=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function aD(e){let t="";for(let r=0;r<e.length;r++)oD.has(e[r])||(t+="\\"),t+=e[r];return t}function Ir(e,t,r,o){var n;e.format||(n=e.anyOf)!=null&&n.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push(re({format:t},r&&o.errorMessages&&{errorMessage:{format:r}}))):e.format=t}function Gt(e,t,r,o){var n;e.pattern||(n=e.allOf)!=null&&n.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push(re({pattern:Ck(t,o)},r&&o.errorMessages&&{errorMessage:{pattern:r}}))):e.pattern=Ck(t,o)}function Ck(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let o={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=o.i?e.source.toLowerCase():e.source,i="",s=!1,l=!1,d=!1;for(let u=0;u<n.length;u++){if(s){i+=n[u],s=!1;continue}if(o.i){if(l){if(n[u].match(/[a-z]/)){d?(i+=n[u],i+=`${n[u-2]}-${n[u]}`.toUpperCase(),d=!1):n[u+1]==="-"&&((r=n[u+2])!=null&&r.match(/[a-z]/))?(i+=n[u],d=!0):i+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){i+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(o.m){if(n[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(o.s&&n[u]==="."){i+=l?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}i+=n[u],n[u]==="\\"?s=!0:l&&n[u]==="]"?l=!1:!l&&n[u]==="["&&(l=!0)}try{new RegExp(i)}catch(u){return e.source}return i}function hI(e,t){var r,o,n,i,s,l;let d={type:"object",additionalProperties:(r=We(e.valueType._def,qe(re({},t),{currentPath:[...t.currentPath,"additionalProperties"]})))!=null?r:t.allowedAdditionalProperties};if(((o=e.keyType)==null?void 0:o._def.typeName)===z.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){let u=gI(e.keyType._def,t),{type:m}=u,c=kh(u,["type"]);return qe(re({},d),{propertyNames:c})}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===z.ZodEnum)return qe(re({},d),{propertyNames:{enum:e.keyType._def.values}});if(((s=e.keyType)==null?void 0:s._def.typeName)===z.ZodBranded&&e.keyType._def.type._def.typeName===z.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){let u=mI(e.keyType._def,t),{type:m}=u,c=kh(u,["type"]);return qe(re({},d),{propertyNames:c})}}return d}function iD(e,t){if(t.mapStrategy==="record")return hI(e,t);let r=We(e.keyType._def,qe(re({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||ir(),o=We(e.valueType._def,qe(re({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||ir();return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}function sD(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}function lD(){return{not:ir()}}function uD(){return{type:"null"}}var $h={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function cD(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in $h&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let s=$h[i._def.typeName];return s&&!n.includes(s)?[...n,s]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...n,s];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];default:return n}},[]);if(o.length===r.length){let n=o.filter((i,s,l)=>l.indexOf(i)===s);return{type:n.length>1?n:n[0],enum:r.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return dD(e,t)}var dD=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>We(o._def,qe(re({},t),{currentPath:[...t.currentPath,"anyOf",`${n}`]}))).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0};function pD(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[$h[e.innerType._def.typeName],"null"]};let r=We(e.innerType._def,qe(re({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return r&&{anyOf:[r,{type:"null"}]}}function mD(e){let t={type:"number"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function fD(e,t){let r={type:"object",properties:{}},o=[],n=e.shape();for(let s in n){let l=n[s];if(l===void 0||l._def===void 0)continue;let d=hD(l),u=We(l._def,qe(re({},t),{currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]}));u!==void 0&&(r.properties[s]=u,d||o.push(s))}o.length&&(r.required=o);let i=gD(e,t);return i!==void 0&&(r.additionalProperties=i),r}function gD(e,t){if(e.catchall._def.typeName!=="ZodNever")return We(e.catchall._def,qe(re({},t),{currentPath:[...t.currentPath,"additionalProperties"]}));switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function hD(e){try{return e.isOptional()}catch(t){return!0}}var vD=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return We(e.innerType._def,t);let o=We(e.innerType._def,qe(re({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return o?{anyOf:[{not:ir()},o]}:ir()},yD=(e,t)=>{if(t.pipeStrategy==="input")return We(e.in._def,t);if(t.pipeStrategy==="output")return We(e.out._def,t);let r=We(e.in._def,qe(re({},t),{currentPath:[...t.currentPath,"allOf","0"]})),o=We(e.out._def,qe(re({},t),{currentPath:[...t.currentPath,"allOf",r?"1":"0"]}));return{allOf:[r,o].filter(n=>n!==void 0)}};function _D(e,t){return We(e.type._def,t)}function bD(e,t){let o={type:"array",uniqueItems:!0,items:We(e.valueType._def,qe(re({},t),{currentPath:[...t.currentPath,"items"]}))};return e.minSize&&(o.minItems=e.minSize.value),e.maxSize&&(o.maxItems=e.maxSize.value),o}function xD(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>We(r._def,qe(re({},t),{currentPath:[...t.currentPath,"items",`${o}`]}))).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:We(e.rest._def,qe(re({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>We(r._def,qe(re({},t),{currentPath:[...t.currentPath,"items",`${o}`]}))).reduce((r,o)=>o===void 0?r:[...r,o],[])}}function wD(){return{not:ir()}}function SD(){return ir()}var kD=(e,t)=>We(e.innerType._def,t),ID=(e,t,r)=>{switch(t){case z.ZodString:return gI(e,r);case z.ZodNumber:return mD(e);case z.ZodObject:return fD(e,r);case z.ZodBigInt:return Jj(e);case z.ZodBoolean:return Wj();case z.ZodDate:return fI(e,r);case z.ZodUndefined:return wD();case z.ZodNull:return uD();case z.ZodArray:return Bj(e,r);case z.ZodUnion:case z.ZodDiscriminatedUnion:return cD(e,r);case z.ZodIntersection:return rD(e,r);case z.ZodTuple:return xD(e,r);case z.ZodRecord:return hI(e,r);case z.ZodLiteral:return nD(e);case z.ZodEnum:return eD(e);case z.ZodNativeEnum:return sD(e);case z.ZodNullable:return pD(e,r);case z.ZodOptional:return vD(e,r);case z.ZodMap:return iD(e,r);case z.ZodSet:return bD(e,r);case z.ZodLazy:return()=>e.getter()._def;case z.ZodPromise:return _D(e,r);case z.ZodNaN:case z.ZodNever:return lD();case z.ZodEffects:return Qj(e,r);case z.ZodAny:return ir();case z.ZodUnknown:return SD();case z.ZodDefault:return Xj(e,r);case z.ZodBranded:return mI(e,r);case z.ZodReadonly:return kD(e,r);case z.ZodCatch:return Kj(e,r);case z.ZodPipeline:return yD(e,r);case z.ZodFunction:case z.ZodVoid:case z.ZodSymbol:return;default:return(o=>{})(t)}},TD=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function We(e,t,r=!1){var o;let n=t.seen.get(e);if(t.override){let d=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(d!==Gj)return d}if(n&&!r){let d=$D(n,t);if(d!==void 0)return d}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=ID(e,e.typeName,t),l=typeof s=="function"?We(s(),t):s;if(l&&ED(e,t,l),t.postProcess){let d=t.postProcess(l,e,t);return i.jsonSchema=l,d}return i.jsonSchema=l,l}var $D=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:TD(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)||t.$refStrategy==="seen"?ir():void 0}},ED=(e,t,r)=>(e.description&&(r.description=e.description),r),CD=e=>{let t=Hj(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return qe(re({},t),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))})},AD=(e,t)=>{var r;let o=CD(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[m,c])=>{var p;return qe(re({},u),{[m]:(p=We(c._def,qe(re({},o),{currentPath:[...o.basePath,o.definitionPath,m]}),!0))!=null?p:ir()})},{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=(r=We(e._def,i===void 0?o:qe(re({},o),{currentPath:[...o.basePath,o.definitionPath,i]}),!1))!=null?r:ir(),l=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;l!==void 0&&(s.title=l);let d=i===void 0?n?qe(re({},s),{[o.definitionPath]:n}):s:{$ref:[...o.$refStrategy==="relative"?[]:o.basePath,o.definitionPath,i].join("/"),[o.definitionPath]:qe(re({},n),{[i]:s})};return d.$schema="http://json-schema.org/draft-07/schema#",d},Eh=Symbol.for("vercel.ai.schema");function Ou(e,{validate:t}={}){return{[Eh]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function PD(e){return typeof e=="object"&&e!==null&&Eh in e&&e[Eh]===!0&&"jsonSchema"in e&&"validate"in e}function OD(e){return e==null?Ou({properties:{},additionalProperties:!1}):PD(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?DD(e):RD(e):e()}function RD(e){return Ou(()=>e["~standard"].jsonSchema.input({target:"draft-07"}),{validate:async t=>{let r=await e["~standard"].validate(t);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new zi({value:t,cause:r.issues})}}})}function MD(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Ou(()=>AD(e,{$refStrategy:o?"root":"none"}),{validate:async n=>{let i=await e.safeParseAsync(n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function ND(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Ou(()=>Su(On(e,{target:"draft-7",io:"input",reused:o?"ref":"inline"})),{validate:async n=>{let i=await eo(e,n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function jD(e){return"_zod"in e}function DD(e,t){return jD(e)?ND(e,t):MD(e,t)}async function zD({value:e,schema:t}){let r=await vI({value:e,schema:t});if(!r.success)throw zi.wrap({value:e,cause:r.error});return r.value}async function vI({value:e,schema:t}){let r=OD(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};let o=await r.validate(e);return o.success?{success:!0,value:o.value,rawValue:e}:{success:!1,error:zi.wrap({value:e,cause:o.error}),rawValue:e}}catch(o){return{success:!1,error:zi.wrap({value:e,cause:o}),rawValue:e}}}async function UD({text:e,schema:t}){try{let r=Ph(e);return t==null?r:zD({value:r,schema:t})}catch(r){throw $u.isInstance(r)||zi.isInstance(r)?r:new $u({text:e,cause:r})}}async function yI({text:e,schema:t}){try{let r=Ph(e);return t==null?{success:!0,value:r,rawValue:r}:await vI({value:r,schema:t})}catch(r){return{success:!1,error:$u.isInstance(r)?r:new $u({text:e,cause:r}),rawValue:void 0}}}function wh(e){try{return Ph(e),!0}catch(t){return!1}}function FD({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Aj).pipeThrough(new TransformStream({async transform({data:r},o){r!=="[DONE]"&&o.enqueue(await yI({text:r,schema:t}))}}))}var LD=()=>globalThis.fetch,wa=async({url:e,headers:t,body:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>qD({url:e,headers:re({"Content-Type":"application/json"},t),body:{content:JSON.stringify(r),values:r},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s}),qD=async({url:e,headers:t={},body:r,successfulResponseHandler:o,failedResponseHandler:n,abortSignal:i,fetch:s=LD()})=>{try{let l=await s(e,{method:"POST",headers:Uj(t,`ai-sdk/provider-utils/${Fj}`,Dj()),body:r.content,signal:i}),d=Pu(l);if(!l.ok){let u;try{u=await n({response:l,url:e,requestBodyValues:r.values})}catch(m){throw Th(m)||$r.isInstance(m)?m:new $r({message:"Failed to process error response",cause:m,statusCode:l.status,url:e,responseHeaders:d,requestBodyValues:r.values})}throw u.value}try{return await o({response:l,url:e,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&(Th(u)||$r.isInstance(u))?u:new $r({message:"Failed to process successful response",cause:u,statusCode:l.status,url:e,responseHeaders:d,requestBodyValues:r.values})}}catch(l){throw jj({error:l,url:e,requestBodyValues:r.values})}},ZD=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:o,url:n,requestBodyValues:i})=>{let s=await o.text(),l=Pu(o);if(s.trim()==="")return{responseHeaders:l,value:new $r({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:l,responseBody:s,isRetryable:r==null?void 0:r(o)})};try{let d=await UD({text:s,schema:e});return{responseHeaders:l,value:new $r({message:t(d),url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:l,responseBody:s,data:d,isRetryable:r==null?void 0:r(o,d)})}}catch(d){return{responseHeaders:l,value:new $r({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:l,responseBody:s,isRetryable:r==null?void 0:r(o)})}}},_I=e=>async({response:t})=>{let r=Pu(t);if(t.body==null)throw new gj({});return{responseHeaders:r,value:FD({stream:t.body,schema:e})}},Ru=e=>async({response:t,url:r,requestBodyValues:o})=>{let n=await t.text(),i=await yI({text:n,schema:e}),s=Pu(t);if(!i.success)throw new $r({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:n,url:r,requestBodyValues:o});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}};function VD(e){return e==null?void 0:e.replace(/\/$/,"")}function Sh(e){return e!=null}var bI=(e=>(e.Unknown="unknown",e.OpenAIResponsesV1="openai-responses-v1",e.XAIResponsesV1="xai-responses-v1",e.AnthropicClaudeV1="anthropic-claude-v1",e.GoogleGeminiV1="google-gemini-v1",e))(bI||{}),Oh=a.object({id:a.string().nullish(),format:a.enum(bI).nullish(),index:a.number().optional()}).loose(),GD=a.object({type:a.literal("reasoning.summary"),summary:a.string()}).extend(Oh.shape),HD=a.object({type:a.literal("reasoning.encrypted"),data:a.string()}).extend(Oh.shape),BD=a.object({type:a.literal("reasoning.text"),text:a.string().nullish(),signature:a.string().nullish()}).extend(Oh.shape),Rh=a.union([GD,HD,BD]),ku=a.union([Rh,a.unknown().transform(()=>null)]),Mh=a.array(ku).transform(e=>e.filter(t=>!!t)),n3=a.union([a.object({delta:a.object({reasoning_details:a.array(ku)})}).transform(e=>e.delta.reasoning_details.filter(Sh)),a.object({message:a.object({reasoning_details:a.array(ku)})}).transform(e=>e.message.reasoning_details.filter(Sh)),a.object({text:a.string(),reasoning_details:a.array(ku)}).transform(e=>e.reasoning_details.filter(Sh))]),Mu=a.object({error:a.object({code:a.union([a.string(),a.number()]).nullable().optional().default(null),message:a.string(),type:a.string().nullable().optional().default(null),param:a.any().nullable().optional().default(null)}).passthrough()}).passthrough(),Sa=ZD({errorSchema:Mu,errorToMessage:e=>e.error.message}),xI=a.object({type:a.literal("file"),file:a.object({hash:a.string(),name:a.string(),content:a.array(a.object({type:a.string(),text:a.string().optional()}).catchall(a.any())).optional()}).catchall(a.any())}).catchall(a.any()),Nh=a.object({provider:a.string(),reasoning_details:a.array(Rh).optional(),annotations:a.array(xI).optional(),usage:a.object({promptTokens:a.number(),promptTokensDetails:a.object({cachedTokens:a.number()}).catchall(a.any()).optional(),completionTokens:a.number(),completionTokensDetails:a.object({reasoningTokens:a.number()}).catchall(a.any()).optional(),totalTokens:a.number(),cost:a.number().optional(),costDetails:a.object({upstreamInferenceCost:a.number()}).catchall(a.any()).optional()}).catchall(a.any())}).catchall(a.any()),wI=a.object({openrouter:a.object({reasoning_details:a.array(Rh).optional(),annotations:a.array(xI).optional()}).optional()}).optional();function Eu(e){var t,r,o,n,i,s,l,d;let u=(t=e.prompt_tokens)!=null?t:0,m=(r=e.completion_tokens)!=null?r:0,c=(n=(o=e.prompt_tokens_details)==null?void 0:o.cached_tokens)!=null?n:0,p=(s=(i=e.prompt_tokens_details)==null?void 0:i.cache_write_tokens)!=null?s:void 0,f=(d=(l=e.completion_tokens_details)==null?void 0:l.reasoning_tokens)!=null?d:0;return{inputTokens:{total:u,noCache:u-c,cacheRead:c,cacheWrite:p},outputTokens:{total:m,text:m-f,reasoning:f},raw:e}}function SI(){return{inputTokens:{total:0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:0,text:void 0,reasoning:void 0},raw:void 0}}function JD(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}function Cu(e){return{unified:JD(e),raw:e!=null?e:void 0}}function Dn(e,t){return{unified:e,raw:t}}var Iu,WD=class{constructor(){dj(this,Iu,new Set)}upsert(e){let t=this.getCanonicalKey(e);return t===null||WS(this,Iu).has(t)?!1:(WS(this,Iu).add(t),!0)}getCanonicalKey(e){switch(e.type){case"reasoning.summary":return e.summary;case"reasoning.encrypted":return e.id?e.id:e.data;case"reasoning.text":return e.text?e.text:e.signature?e.signature:null;default:return null}}};Iu=new WeakMap;var KD=["wav","mp3","aiff","aac","ogg","flac","m4a","pcm16","pcm24"];function jh({url:e,protocols:t}){try{let r=new URL(e);return t.has(r.protocol)}catch(r){return!1}}function kI({data:e,mediaType:t,defaultMediaType:r}){if(e instanceof Uint8Array){let n=Oj(e);return`data:${t!=null?t:r};base64,${n}`}let o=e.toString();return jh({url:o,protocols:new Set(["http:","https:"])})||o.startsWith("data:")?o:`data:${t!=null?t:r};base64,${o}`}function Ch({part:e,defaultMediaType:t}){let r=e.data instanceof URL?e.data.toString():e.data;return kI({data:r,mediaType:e.mediaType,defaultMediaType:t})}function Ak(e,t){var r;let o=e.match(/^data:([^;]+)/);return o&&(r=o[1])!=null?r:t}function Au(e){let t=e.match(/^data:[^;]*;base64,(.+)$/);return t?t[1]:e}var YD={mpeg:"mp3",mp3:"mp3","x-wav":"wav",wave:"wav",wav:"wav",ogg:"ogg",vorbis:"ogg",aac:"aac","x-aac":"aac",m4a:"m4a","x-m4a":"m4a",mp4:"m4a",aiff:"aiff","x-aiff":"aiff",flac:"flac","x-flac":"flac",pcm16:"pcm16",pcm24:"pcm24"};function XD(e){let t=Ch({part:e,defaultMediaType:"audio/mpeg"});if(jh({url:t,protocols:new Set(["http:","https:"])}))throw new Error(`Audio files cannot be provided as URLs.

OpenRouter requires audio to be base64-encoded. Please:
1. Download the audio file locally
2. Read it as a Buffer or Uint8Array
3. Pass it as the data parameter

The AI SDK will automatically handle base64 encoding.

Learn more: https://openrouter.ai/docs/features/multimodal/audio`);let r=Au(t),o=e.mediaType||"audio/mpeg",n=o.replace("audio/",""),i=YD[n];if(i===void 0){let s=KD.join(", ");throw new Error(`Unsupported audio format: "${o}"

OpenRouter supports the following audio formats: ${s}

Learn more: https://openrouter.ai/docs/features/multimodal/audio`)}return{data:r,format:i}}function jn(e){var t,r,o;let n=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(o=(r=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?r:n==null?void 0:n.cacheControl)!=null?o:n==null?void 0:n.cache_control}function QD(e){var t,r,o,n,i,s,l,d;let u=[],m=new WD;for(let{role:c,content:p,providerOptions:f}of e)switch(c){case"system":{let v=jn(f);u.push({role:"system",content:[re({type:"text",text:p},v&&{cache_control:v})]});break}case"user":{if(p.length===1&&((t=p[0])==null?void 0:t.type)==="text"){let S=(r=jn(f))!=null?r:jn(p[0].providerOptions),b=S?[{type:"text",text:p[0].text,cache_control:S}]:p[0].text;u.push({role:"user",content:b});break}let v=jn(f),g=-1;for(let S=p.length-1;S>=0;S--)if(((o=p[S])==null?void 0:o.type)==="text"){g=S;break}let y=p.map((S,b)=>{var _,k,w,h,I,j;let U=S.type==="text"&&b===g,F=jn(S.providerOptions),Z=S.type==="text"?F!=null?F:U?v:void 0:F;switch(S.type){case"text":return re({type:"text",text:S.text},Z&&{cache_control:Z});case"file":{if((_=S.mediaType)!=null&&_.startsWith("image/")){let q=Ch({part:S,defaultMediaType:"image/jpeg"});return re({type:"image_url",image_url:{url:q}},Z&&{cache_control:Z})}if((k=S.mediaType)!=null&&k.startsWith("audio/"))return re({type:"input_audio",input_audio:XD(S)},Z&&{cache_control:Z});let L=String((j=(I=(h=(w=S.providerOptions)==null?void 0:w.openrouter)==null?void 0:h.filename)!=null?I:S.filename)!=null?j:""),M=Ch({part:S,defaultMediaType:"application/pdf"});return jh({url:M,protocols:new Set(["http:","https:"])})?{type:"file",file:{filename:L,file_data:M}}:re({type:"file",file:{filename:L,file_data:M}},Z&&{cache_control:Z})}default:return re({type:"text",text:""},Z&&{cache_control:Z})}});u.push({role:"user",content:y});break}case"assistant":{let v="",g="",y=[];for(let h of p)switch(h.type){case"text":{v+=h.text;break}case"tool-call":{y.push({id:h.toolCallId,type:"function",function:{name:h.toolName,arguments:JSON.stringify(h.input)}});break}case"reasoning":{g+=h.text;break}case"file":break;default:break}let S=wI.safeParse(f),b=S.success?(i=(n=S.data)==null?void 0:n.openrouter)==null?void 0:i.reasoning_details:void 0,_=S.success?(l=(s=S.data)==null?void 0:s.openrouter)==null?void 0:l.annotations:void 0,k=b&&Array.isArray(b)&&b.length>0?b:tz(p),w;if(k&&k.length>0){let h=[];for(let I of k)m.upsert(I)&&h.push(I);w=h.length>0?h:void 0}u.push({role:"assistant",content:v,tool_calls:y.length>0?y:void 0,reasoning:g||void 0,reasoning_details:w,annotations:_,cache_control:jn(f)});break}case"tool":{for(let v of p){if(v.type==="tool-approval-response")continue;let g=ez(v);u.push({role:"tool",tool_call_id:v.toolCallId,content:g,cache_control:(d=jn(f))!=null?d:jn(v.providerOptions)})}break}default:break}return u}function ez(e){var t;switch(e.output.type){case"text":case"error-text":return e.output.value;case"json":case"error-json":case"content":return JSON.stringify(e.output.value);case"execution-denied":return(t=e.output.reason)!=null?t:"Tool execution denied"}}function tz(e){var t,r,o;for(let n of e)if(n.type==="tool-call"){let i=(t=n.providerOptions)==null?void 0:t.openrouter,s=i==null?void 0:i.reasoning_details;if(Array.isArray(s)&&s.length>0)return s}for(let n of e)if(n.type==="reasoning"){let i=wI.safeParse(n.providerOptions);if(i.success&&((o=(r=i.data)==null?void 0:r.openrouter)!=null&&o.reasoning_details)&&i.data.openrouter.reasoning_details.length>0)return i.data.openrouter.reasoning_details}}var s3=a.union([a.literal("auto"),a.literal("none"),a.literal("required"),a.object({type:a.literal("function"),function:a.object({name:a.string()})})]);function rz(e){switch(e.type){case"auto":case"none":case"required":return e.type;case"tool":return{type:"function",function:{name:e.toolName}};default:throw new Vk({argument:"toolChoice",message:`Invalid tool choice type: ${JSON.stringify(e)}`})}}var nz=a.object({type:a.literal("image_url"),image_url:a.object({url:a.string()}).passthrough()}).passthrough(),oz=a.union([nz,a.unknown().transform(()=>null)]),II=a.array(oz).transform(e=>e.filter(t=>!!t)),TI=a.object({id:a.string().optional(),model:a.string().optional(),provider:a.string().optional(),usage:a.object({prompt_tokens:a.number(),prompt_tokens_details:a.object({cached_tokens:a.number(),cache_write_tokens:a.number().nullish()}).passthrough().nullish(),completion_tokens:a.number(),completion_tokens_details:a.object({reasoning_tokens:a.number()}).passthrough().nullish(),total_tokens:a.number(),cost:a.number().optional(),cost_details:a.object({upstream_inference_cost:a.number().nullish()}).passthrough().nullish()}).passthrough().nullish()}).passthrough(),az=a.union([TI.extend({choices:a.array(a.object({message:a.object({role:a.literal("assistant"),content:a.string().nullable().optional(),reasoning:a.string().nullable().optional(),reasoning_details:Mh.nullish(),images:II.nullish(),tool_calls:a.array(a.object({id:a.string().optional().nullable(),type:a.literal("function"),function:a.object({name:a.string(),arguments:a.string().optional()}).passthrough()}).passthrough()).optional(),annotations:a.array(a.union([a.object({type:a.literal("url_citation"),url_citation:a.object({url:a.string(),title:a.string().optional(),start_index:a.number().optional(),end_index:a.number().optional(),content:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file_annotation"),file_annotation:a.object({file_id:a.string(),quote:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file"),file:a.object({hash:a.string(),name:a.string(),content:a.array(a.object({type:a.string(),text:a.string().optional()}).passthrough()).optional()}).passthrough()}).passthrough()])).nullish()}).passthrough(),index:a.number().nullish(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}).passthrough())}).passthrough()).nullable()}).passthrough().nullable().optional(),finish_reason:a.string().optional().nullable()}).passthrough())}),Mu.extend({user_id:a.string().optional()})]),iz=a.union([TI.extend({choices:a.array(a.object({delta:a.object({role:a.enum(["assistant"]).optional(),content:a.string().nullish(),reasoning:a.string().nullish().optional(),reasoning_details:Mh.nullish(),images:II.nullish(),tool_calls:a.array(a.object({index:a.number().nullish(),id:a.string().nullish(),type:a.literal("function").optional(),function:a.object({name:a.string().nullish(),arguments:a.string().nullish()}).passthrough()}).passthrough()).nullish(),annotations:a.array(a.union([a.object({type:a.literal("url_citation"),url_citation:a.object({url:a.string(),title:a.string().optional(),start_index:a.number().optional(),end_index:a.number().optional(),content:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file_annotation"),file_annotation:a.object({file_id:a.string(),quote:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file"),file:a.object({hash:a.string(),name:a.string(),content:a.array(a.object({type:a.string(),text:a.string().optional()}).passthrough()).optional()}).passthrough()}).passthrough()])).nullish()}).passthrough().nullish(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}).passthrough())}).passthrough()).nullable()}).passthrough().nullish(),finish_reason:a.string().nullable().optional(),index:a.number().nullish()}).passthrough())}),Mu]),sz=class{constructor(e,t,r){this.specificationVersion="v3",this.provider="openrouter",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!0,this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.modelId=e,this.settings=t,this.config=r}getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,frequencyPenalty:n,presencePenalty:i,seed:s,stopSequences:l,responseFormat:d,topK:u,tools:m,toolChoice:c}){var p;let f=re(re({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:t,temperature:r,top_p:o,frequency_penalty:n,presence_penalty:i,seed:s,stop:l,response_format:(d==null?void 0:d.type)==="json"?d.schema!=null?{type:"json_schema",json_schema:re({schema:d.schema,strict:!0,name:(p=d.name)!=null?p:"response"},d.description&&{description:d.description})}:{type:"json_object"}:void 0,top_k:u,messages:QD(e),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning,usage:this.settings.usage,plugins:this.settings.plugins,web_search_options:this.settings.web_search_options,provider:this.settings.provider,debug:this.settings.debug},this.config.extraBody),this.settings.extraBody);if(m&&m.length>0){let v=m.filter(g=>g.type==="function").map(g=>({type:"function",function:{name:g.name,description:g.description,parameters:g.inputSchema}}));return qe(re({},f),{tools:v,tool_choice:c?rz(c):void 0})}return f}async doGenerate(e){var t,r,o,n,i,s,l,d,u,m,c,p,f,v,g,y,S,b,_,k,w,h;let j=(e.providerOptions||{}).openrouter||{},U=re(re({},this.getArgs(e)),j),{value:F,responseHeaders:Z}=await wa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xa(this.config.headers(),e.headers),body:U,failedResponseHandler:Sa,successfulResponseHandler:Ru(az),abortSignal:e.abortSignal,fetch:this.config.fetch});if("error"in F){let V=F.error;throw new $r({message:V.message,url:this.config.url({path:"/chat/completions",modelId:this.modelId}),requestBodyValues:U,statusCode:200,responseHeaders:Z,data:V})}let L=F,M=L.choices[0];if(!M)throw new Ah({message:"No choice in response"});let q=L.usage?Eu(L.usage):SI(),C=(t=M.message.reasoning_details)!=null?t:[],E=C.length>0?C.map(V=>{switch(V.type){case"reasoning.text":{if(V.text)return{type:"reasoning",text:V.text,providerMetadata:{openrouter:{reasoning_details:[V]}}};break}case"reasoning.summary":{if(V.summary)return{type:"reasoning",text:V.summary,providerMetadata:{openrouter:{reasoning_details:[V]}}};break}case"reasoning.encrypted":{if(V.data)return{type:"reasoning",text:"[REDACTED]",providerMetadata:{openrouter:{reasoning_details:[V]}}};break}default:}return null}).filter(V=>V!==null):M.message.reasoning?[{type:"reasoning",text:M.message.reasoning}]:[],te=[];if(te.push(...E),M.message.content&&te.push({type:"text",text:M.message.content}),M.message.tool_calls){let V=!1;for(let Ae of M.message.tool_calls)te.push({type:"tool-call",toolCallId:(r=Ae.id)!=null?r:Tr(),toolName:Ae.function.name,input:(o=Ae.function.arguments)!=null?o:"{}",providerMetadata:V?void 0:{openrouter:{reasoning_details:C}}}),V=!0}if(M.message.images)for(let V of M.message.images)te.push({type:"file",mediaType:Ak(V.image_url.url,"image/jpeg"),data:Au(V.image_url.url)});if(M.message.annotations)for(let V of M.message.annotations)V.type==="url_citation"&&te.push({type:"source",sourceType:"url",id:V.url_citation.url,url:V.url_citation.url,title:(n=V.url_citation.title)!=null?n:"",providerMetadata:{openrouter:{content:(i=V.url_citation.content)!=null?i:"",startIndex:(s=V.url_citation.start_index)!=null?s:0,endIndex:(l=V.url_citation.end_index)!=null?l:0}}});let P=(d=M.message.annotations)==null?void 0:d.filter(V=>V.type==="file"),se=M.message.tool_calls&&M.message.tool_calls.length>0,ee=C.some(V=>V.type==="reasoning.encrypted"&&V.data),fe=se&&ee&&M.finish_reason==="stop"?Dn("tool-calls",(u=M.finish_reason)!=null?u:void 0):Cu(M.finish_reason);return{content:te,finishReason:fe,usage:q,warnings:[],providerMetadata:{openrouter:Nh.parse({provider:(m=L.provider)!=null?m:"",reasoning_details:(c=M.message.reasoning_details)!=null?c:[],annotations:P&&P.length>0?P:void 0,usage:re(re(re(re({promptTokens:(p=q.inputTokens.total)!=null?p:0,completionTokens:(f=q.outputTokens.total)!=null?f:0,totalTokens:((v=q.inputTokens.total)!=null?v:0)+((g=q.outputTokens.total)!=null?g:0)},((y=L.usage)==null?void 0:y.cost)!=null?{cost:L.usage.cost}:{}),((b=(S=L.usage)==null?void 0:S.prompt_tokens_details)==null?void 0:b.cached_tokens)!=null?{promptTokensDetails:{cachedTokens:L.usage.prompt_tokens_details.cached_tokens}}:{}),((k=(_=L.usage)==null?void 0:_.completion_tokens_details)==null?void 0:k.reasoning_tokens)!=null?{completionTokensDetails:{reasoningTokens:L.usage.completion_tokens_details.reasoning_tokens}}:{}),((h=(w=L.usage)==null?void 0:w.cost_details)==null?void 0:h.upstream_inference_cost)!=null?{costDetails:{upstreamInferenceCost:L.usage.cost_details.upstream_inference_cost}}:{})})},request:{body:U},response:{id:L.id,modelId:L.model,headers:Z}}}async doStream(e){var t;let o=(e.providerOptions||{}).openrouter||{},n=re(re({},this.getArgs(e)),o),{value:i,responseHeaders:s}=await wa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xa(this.config.headers(),e.headers),body:qe(re({},n),{stream:!0,stream_options:this.config.compatibility==="strict"?re({include_usage:!0},(t=this.settings.usage)!=null&&t.include?{include_usage:!0}:{}):void 0}),failedResponseHandler:Sa,successfulResponseHandler:_I(iz),abortSignal:e.abortSignal,fetch:this.config.fetch}),l=[],d=Dn("other"),u={inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0},m={},c,p=[],f=!1,v=[],g=!1,y=!1,S,b,_,k;return{stream:i.pipeThrough(new TransformStream({transform(w,h){var I,j,U,F,Z,L,M,q,C,E,te,P,se,ee,he,fe,V,Ae,T,pe,de;if(e.includeRawChunks&&h.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){d=Dn("error"),h.enqueue({type:"error",error:w.error});return}let H=w.value;if("error"in H){d=Dn("error"),h.enqueue({type:"error",error:H.error});return}if(H.provider&&(k=H.provider),H.id&&(_=H.id,h.enqueue({type:"response-metadata",id:H.id})),H.model&&h.enqueue({type:"response-metadata",modelId:H.model}),H.usage!=null){let Q=Eu(H.usage);Object.assign(u.inputTokens,Q.inputTokens),Object.assign(u.outputTokens,Q.outputTokens),c=H.usage;let B=(I=H.usage.prompt_tokens)!=null?I:0,G=(j=H.usage.completion_tokens)!=null?j:0;m.promptTokens=B,H.usage.prompt_tokens_details&&(m.promptTokensDetails={cachedTokens:(U=H.usage.prompt_tokens_details.cached_tokens)!=null?U:0}),m.completionTokens=G,H.usage.completion_tokens_details&&(m.completionTokensDetails={reasoningTokens:(F=H.usage.completion_tokens_details.reasoning_tokens)!=null?F:0}),H.usage.cost!=null&&(m.cost=H.usage.cost),m.totalTokens=H.usage.total_tokens;let Me=(Z=H.usage.cost_details)==null?void 0:Z.upstream_inference_cost;Me!=null&&(m.costDetails={upstreamInferenceCost:Me})}let le=H.choices[0];if((le==null?void 0:le.finish_reason)!=null&&(d=Cu(le.finish_reason)),(le==null?void 0:le.delta)==null)return;let R=le.delta,D=(Q,B)=>{y||(b=_||Tr(),h.enqueue({providerMetadata:B,type:"reasoning-start",id:b}),y=!0),h.enqueue({providerMetadata:B,type:"reasoning-delta",delta:Q,id:b||Tr()})};if(R.reasoning_details&&R.reasoning_details.length>0){for(let B of R.reasoning_details)if(B.type==="reasoning.text"){let G=p[p.length-1];(G==null?void 0:G.type)==="reasoning.text"?(G.text=(G.text||"")+(B.text||""),G.signature=G.signature||B.signature,G.format=G.format||B.format):p.push(re({},B))}else p.push(B);let Q={openrouter:{reasoning_details:R.reasoning_details}};for(let B of R.reasoning_details)switch(B.type){case"reasoning.text":{B.text&&D(B.text,Q);break}case"reasoning.encrypted":{B.data&&D("[REDACTED]",Q);break}case"reasoning.summary":{B.summary&&D(B.summary,Q);break}default:break}}else R.reasoning&&D(R.reasoning);if(R.content&&(y&&!g&&(h.enqueue({type:"reasoning-end",id:b||Tr(),providerMetadata:p.length>0?{openrouter:{reasoning_details:p}}:void 0}),y=!1),g||(S=_||Tr(),h.enqueue({type:"text-start",id:S}),g=!0),h.enqueue({type:"text-delta",delta:R.content,id:S||Tr()})),R.annotations){for(let Q of R.annotations)if(Q.type==="url_citation")h.enqueue({type:"source",sourceType:"url",id:Q.url_citation.url,url:Q.url_citation.url,title:(L=Q.url_citation.title)!=null?L:"",providerMetadata:{openrouter:{content:(M=Q.url_citation.content)!=null?M:"",startIndex:(q=Q.url_citation.start_index)!=null?q:0,endIndex:(C=Q.url_citation.end_index)!=null?C:0}}});else if(Q.type==="file"){let B=Q.file;B&&typeof B=="object"&&"hash"in B&&"name"in B&&v.push(Q)}}if(R.tool_calls!=null)for(let Q of R.tool_calls){let B=(E=Q.index)!=null?E:l.length-1;if(l[B]==null){if(Q.type!=="function")throw new Di({data:Q,message:"Expected 'function' type."});if(Q.id==null)throw new Di({data:Q,message:"Expected 'id' to be a string."});if(((te=Q.function)==null?void 0:te.name)==null)throw new Di({data:Q,message:"Expected 'function.name' to be a string."});l[B]={id:Q.id,type:"function",function:{name:Q.function.name,arguments:(P=Q.function.arguments)!=null?P:""},inputStarted:!1,sent:!1};let Me=l[B];if(Me==null)throw new Di({data:{index:B,toolCallsLength:l.length},message:`Tool call at index ${B} is missing after creation.`});((se=Me.function)==null?void 0:se.name)!=null&&((ee=Me.function)==null?void 0:ee.arguments)!=null&&wh(Me.function.arguments)&&(Me.inputStarted=!0,h.enqueue({type:"tool-input-start",id:Me.id,toolName:Me.function.name}),h.enqueue({type:"tool-input-delta",id:Me.id,delta:Me.function.arguments}),h.enqueue({type:"tool-input-end",id:Me.id}),h.enqueue({type:"tool-call",toolCallId:Me.id,toolName:Me.function.name,input:Me.function.arguments,providerMetadata:f?void 0:{openrouter:{reasoning_details:p}}}),f=!0,Me.sent=!0);continue}let G=l[B];if(G==null)throw new Di({data:{index:B,toolCallsLength:l.length,toolCallDelta:Q},message:`Tool call at index ${B} is missing during merge.`});G.inputStarted||(G.inputStarted=!0,h.enqueue({type:"tool-input-start",id:G.id,toolName:G.function.name})),((he=Q.function)==null?void 0:he.arguments)!=null&&(G.function.arguments+=(V=(fe=Q.function)==null?void 0:fe.arguments)!=null?V:""),h.enqueue({type:"tool-input-delta",id:G.id,delta:(Ae=Q.function.arguments)!=null?Ae:""}),((T=G.function)==null?void 0:T.name)!=null&&((pe=G.function)==null?void 0:pe.arguments)!=null&&wh(G.function.arguments)&&(h.enqueue({type:"tool-call",toolCallId:(de=G.id)!=null?de:Tr(),toolName:G.function.name,input:G.function.arguments,providerMetadata:f?void 0:{openrouter:{reasoning_details:p}}}),f=!0,G.sent=!0)}if(R.images!=null)for(let Q of R.images)h.enqueue({type:"file",mediaType:Ak(Q.image_url.url,"image/jpeg"),data:Au(Q.image_url.url)})},flush(w){var h;let I=l.length>0,j=p.some(F=>F.type==="reasoning.encrypted"&&F.data);if(I&&j&&d.unified==="stop"&&(d=Dn("tool-calls",d.raw)),d.unified==="tool-calls")for(let F of l)F&&!F.sent&&(w.enqueue({type:"tool-call",toolCallId:(h=F.id)!=null?h:Tr(),toolName:F.function.name,input:wh(F.function.arguments)?F.function.arguments:"{}",providerMetadata:f?void 0:{openrouter:{reasoning_details:p}}}),f=!0,F.sent=!0);y&&w.enqueue({type:"reasoning-end",id:b||Tr(),providerMetadata:p.length>0?{openrouter:{reasoning_details:p}}:void 0}),g&&w.enqueue({type:"text-end",id:S||Tr()});let U={usage:m};k!==void 0&&(U.provider=k),p.length>0&&(U.reasoning_details=p),v.length>0&&(U.annotations=v),u.raw=c,w.enqueue({type:"finish",finishReason:d,usage:u,providerMetadata:{openrouter:U}})}})),warnings:[],request:{body:n},response:{headers:s}}}};function lz({prompt:e,inputFormat:t,user:r="user",assistant:o="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let n="";e[0]&&e[0].role==="system"&&(n+=`${e[0].content}

`,e=e.slice(1));for(let{role:i,content:s}of e)switch(i){case"system":throw new yj({message:`Unexpected system message in prompt: ${s}`,prompt:e});case"user":{let l=s.map(d=>{switch(d.type){case"text":return d.text;case"file":throw new dn({functionality:"file attachments"});default:return""}}).join("");n+=`${r}:
${l}

`;break}case"assistant":{let l=s.map(d=>{switch(d.type){case"text":return d.text;case"tool-call":throw new dn({functionality:"tool-call messages"});case"tool-result":throw new dn({functionality:"tool-result messages"});case"reasoning":throw new dn({functionality:"reasoning messages"});case"file":throw new dn({functionality:"file attachments"});default:return""}}).join("");n+=`${o}:
${l}

`;break}case"tool":throw new dn({functionality:"tool messages"});default:break}return n+=`${o}:
`,{prompt:n}}var Pk=a.union([a.object({id:a.string().optional(),model:a.string().optional(),provider:a.string().optional(),choices:a.array(a.object({text:a.string(),reasoning:a.string().nullish().optional(),reasoning_details:Mh.nullish(),finish_reason:a.string().nullish(),index:a.number().nullish(),logprobs:a.object({tokens:a.array(a.string()),token_logprobs:a.array(a.number()),top_logprobs:a.array(a.record(a.string(),a.number())).nullable()}).passthrough().nullable().optional()}).passthrough()),usage:a.object({prompt_tokens:a.number(),prompt_tokens_details:a.object({cached_tokens:a.number(),cache_write_tokens:a.number().nullish()}).passthrough().nullish(),completion_tokens:a.number(),completion_tokens_details:a.object({reasoning_tokens:a.number()}).passthrough().nullish(),total_tokens:a.number(),cost:a.number().optional(),cost_details:a.object({upstream_inference_cost:a.number().nullish()}).passthrough().nullish()}).passthrough().nullish()}).passthrough(),Mu]),uz=class{constructor(e,t,r){this.specificationVersion="v3",this.provider="openrouter",this.supportsImageUrls=!0,this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"text/*":[/^data:text\//,/^https?:\/\/.+$/],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,frequencyPenalty:n,presencePenalty:i,seed:s,responseFormat:l,topK:d,stopSequences:u,tools:m,toolChoice:c}){let{prompt:p}=lz({prompt:e,inputFormat:"prompt"});if(m!=null&&m.length)throw new dn({functionality:"tools"});if(c)throw new dn({functionality:"toolChoice"});return re(re({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:n,presence_penalty:i,seed:s,stop:u,response_format:l,top_k:d,prompt:p,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody)}async doGenerate(e){var t,r,o,n,i,s,l,d,u,m,c,p,f,v,g,y,S;let _=(e.providerOptions||{}).openrouter||{},k=re(re({},this.getArgs(e)),_),{value:w,responseHeaders:h}=await wa({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xa(this.config.headers(),e.headers),body:k,failedResponseHandler:Sa,successfulResponseHandler:Ru(Pk),abortSignal:e.abortSignal,fetch:this.config.fetch});if("error"in w){let j=w.error;throw new $r({message:j.message,url:this.config.url({path:"/completions",modelId:this.modelId}),requestBodyValues:k,statusCode:200,responseHeaders:h,data:j})}let I=w.choices[0];if(!I)throw new Ah({message:"No choice in OpenRouter completion response"});return{content:[{type:"text",text:(t=I.text)!=null?t:""}],finishReason:Cu(I.finish_reason),usage:w.usage?Eu(w.usage):SI(),warnings:[],providerMetadata:{openrouter:Nh.parse({provider:(r=w.provider)!=null?r:"",usage:re(re(re(re({promptTokens:(n=(o=w.usage)==null?void 0:o.prompt_tokens)!=null?n:0,completionTokens:(s=(i=w.usage)==null?void 0:i.completion_tokens)!=null?s:0,totalTokens:((d=(l=w.usage)==null?void 0:l.prompt_tokens)!=null?d:0)+((m=(u=w.usage)==null?void 0:u.completion_tokens)!=null?m:0)},((c=w.usage)==null?void 0:c.cost)!=null?{cost:w.usage.cost}:{}),((f=(p=w.usage)==null?void 0:p.prompt_tokens_details)==null?void 0:f.cached_tokens)!=null?{promptTokensDetails:{cachedTokens:w.usage.prompt_tokens_details.cached_tokens}}:{}),((g=(v=w.usage)==null?void 0:v.completion_tokens_details)==null?void 0:g.reasoning_tokens)!=null?{completionTokensDetails:{reasoningTokens:w.usage.completion_tokens_details.reasoning_tokens}}:{}),((S=(y=w.usage)==null?void 0:y.cost_details)==null?void 0:S.upstream_inference_cost)!=null?{costDetails:{upstreamInferenceCost:w.usage.cost_details.upstream_inference_cost}}:{})})},response:{headers:h}}}async doStream(e){let r=(e.providerOptions||{}).openrouter||{},o=re(re({},this.getArgs(e)),r),{value:n,responseHeaders:i}=await wa({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xa(this.config.headers(),e.headers),body:qe(re({},o),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Sa,successfulResponseHandler:_I(Pk),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=Dn("other"),l={inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0},d={},u,m;return{stream:n.pipeThrough(new TransformStream({transform(c,p){var f,v,g,y,S;if(e.includeRawChunks&&p.enqueue({type:"raw",rawValue:c.rawValue}),!c.success){s=Dn("error"),p.enqueue({type:"error",error:c.error});return}let b=c.value;if("error"in b){s=Dn("error"),p.enqueue({type:"error",error:b.error});return}if(b.provider&&(u=b.provider),b.usage!=null){let k=Eu(b.usage);Object.assign(l.inputTokens,k.inputTokens),Object.assign(l.outputTokens,k.outputTokens),m=b.usage;let w=(f=b.usage.prompt_tokens)!=null?f:0,h=(v=b.usage.completion_tokens)!=null?v:0;d.promptTokens=w,b.usage.prompt_tokens_details&&(d.promptTokensDetails={cachedTokens:(g=b.usage.prompt_tokens_details.cached_tokens)!=null?g:0}),d.completionTokens=h,b.usage.completion_tokens_details&&(d.completionTokensDetails={reasoningTokens:(y=b.usage.completion_tokens_details.reasoning_tokens)!=null?y:0}),b.usage.cost!=null&&(d.cost=b.usage.cost),d.totalTokens=b.usage.total_tokens;let I=(S=b.usage.cost_details)==null?void 0:S.upstream_inference_cost;I!=null&&(d.costDetails={upstreamInferenceCost:I})}let _=b.choices[0];(_==null?void 0:_.finish_reason)!=null&&(s=Cu(_.finish_reason)),(_==null?void 0:_.text)!=null&&p.enqueue({type:"text-delta",delta:_.text,id:Tr()})},flush(c){l.raw=m;let p={usage:d};u!==void 0&&(p.provider=u),c.enqueue({type:"finish",finishReason:s,usage:l,providerMetadata:{openrouter:p}})}})),response:{headers:i}}}},cz=a.object({prompt_tokens:a.number(),total_tokens:a.number(),cost:a.number().optional()}),dz=a.object({object:a.literal("embedding"),embedding:a.array(a.number()),index:a.number().optional()}),pz=a.object({id:a.string().optional(),object:a.literal("list"),data:a.array(dz),model:a.string(),provider:a.string().optional(),usage:cz.optional()}),mz=class{constructor(e,t,r){this.specificationVersion="v3",this.provider="openrouter",this.maxEmbeddingsPerCall=void 0,this.supportsParallelCalls=!0,this.modelId=e,this.settings=t,this.config=r}async doEmbed(e){var t,r,o,n,i,s;let{values:l,abortSignal:d,headers:u}=e,m=re(re({model:this.modelId,input:l,user:this.settings.user,provider:this.settings.provider},this.config.extraBody),this.settings.extraBody),{value:c,responseHeaders:p}=await wa({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:xa(this.config.headers(),u),body:m,failedResponseHandler:Sa,successfulResponseHandler:Ru(pz),abortSignal:d,fetch:this.config.fetch});return{embeddings:c.data.map(f=>f.embedding),usage:c.usage?{tokens:c.usage.prompt_tokens}:void 0,providerMetadata:{openrouter:Nh.parse({provider:(t=c.provider)!=null?t:"",usage:re({promptTokens:(o=(r=c.usage)==null?void 0:r.prompt_tokens)!=null?o:0,completionTokens:0,totalTokens:(i=(n=c.usage)==null?void 0:n.total_tokens)!=null?i:0},((s=c.usage)==null?void 0:s.cost)!=null?{cost:c.usage.cost}:{})})},response:{headers:p,body:c},warnings:[]}}};var fz=a.object({id:a.string().optional(),object:a.string().optional(),created:a.number().optional(),model:a.string(),choices:a.array(a.object({index:a.number(),message:a.object({role:a.string(),content:a.string().nullable().optional(),images:a.array(a.object({type:a.literal("image_url"),image_url:a.object({url:a.string()})}).passthrough()).optional()}).passthrough(),finish_reason:a.string().nullable().optional()}).passthrough()),usage:a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}).passthrough().optional()}).passthrough(),gz=class{constructor(e,t,r){this.specificationVersion="v3",this.provider="openrouter",this.maxImagesPerCall=1,this.modelId=e,this.settings=t,this.config=r}async doGenerate(e){var t;let{prompt:r,n:o,size:n,aspectRatio:i,seed:s,files:l,mask:d,abortSignal:u,headers:m,providerOptions:c}=e,p=(c==null?void 0:c.openrouter)||{},f=[];if(d!==void 0)throw new dn({functionality:"image inpainting (mask parameter)"});o>1&&f.push({type:"unsupported",feature:"n > 1",details:`OpenRouter image generation returns 1 image per call. Requested ${o} images.`}),n!==void 0&&f.push({type:"unsupported",feature:"size",details:"Use aspectRatio instead. Size parameter is not supported by OpenRouter image generation."});let v=i!==void 0?{aspect_ratio:i}:void 0,y=l!==void 0&&l.length>0?[...l.map(I=>vz(I)),{type:"text",text:r!=null?r:""}]:r!=null?r:"",S=re(re(re(re(re(re(re({model:this.modelId,messages:[{role:"user",content:y}],modalities:["image","text"]},v!==void 0&&{image_config:v}),s!==void 0&&{seed:s}),this.settings.user!==void 0&&{user:this.settings.user}),this.settings.provider!==void 0&&{provider:this.settings.provider}),this.config.extraBody),this.settings.extraBody),p),{value:b,responseHeaders:_}=await wa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xa(this.config.headers(),m),body:S,failedResponseHandler:Sa,successfulResponseHandler:Ru(fz),abortSignal:u,fetch:this.config.fetch}),k=b.choices[0];if(!k)throw new Ah({message:"No choice in response"});let w=[];if((t=k.message)!=null&&t.images)for(let I of k.message.images){let j=I.image_url.url;w.push(Au(j))}let h=b.usage?{inputTokens:b.usage.prompt_tokens,outputTokens:b.usage.completion_tokens,totalTokens:b.usage.total_tokens}:void 0;return{images:w,warnings:f,response:{timestamp:new Date,modelId:b.model,headers:_},usage:h}}},hz="image/png";function vz(e){return e.type==="url"?{type:"image_url",image_url:{url:e.url}}:{type:"image_url",image_url:{url:kI({data:e.data,mediaType:e.mediaType,defaultMediaType:hz})}}}function yz(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}function _z(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):e:{}}function bz(e,t){let r=t.toLowerCase();return Object.keys(e).find(o=>o.toLowerCase()===r)}function xz(e,...t){let r=_z(e),o=yz(r),n=bz(o,"user-agent"),i=n?o[n]:void 0,s=i!=null&&i.trim()?i:t.filter(Boolean).join(" "),l=Object.fromEntries(Object.entries(o).filter(([d])=>d.toLowerCase()!=="user-agent"));return qe(re({},l),{"user-agent":s})}var wz="2.2.3";function Dh(e={}){var t,r,o;let n=(r=VD((t=e.baseURL)!=null?t:e.baseUrl))!=null?r:"https://openrouter.ai/api/v1",i=(o=e.compatibility)!=null?o:"compatible",s=()=>xz(re(re({Authorization:`Bearer ${Lj({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),e.api_keys&&Object.keys(e.api_keys).length>0&&{"X-Provider-API-Keys":JSON.stringify(e.api_keys)}),`ai-sdk/openrouter/${wz}`),l=(f,v={})=>new sz(f,v,{provider:"openrouter.chat",url:({path:g})=>`${n}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),d=(f,v={})=>new uz(f,v,{provider:"openrouter.completion",url:({path:g})=>`${n}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(f,v={})=>new mz(f,v,{provider:"openrouter.embedding",url:({path:g})=>`${n}${g}`,headers:s,fetch:e.fetch,extraBody:e.extraBody}),m=(f,v={})=>new gz(f,v,{provider:"openrouter.image",url:({path:g})=>`${n}${g}`,headers:s,fetch:e.fetch,extraBody:e.extraBody}),c=(f,v)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return f==="openai/gpt-3.5-turbo-instruct"?d(f,v):l(f,v)},p=(f,v)=>c(f,v);return p.languageModel=c,p.chat=l,p.completion=d,p.textEmbeddingModel=u,p.embedding=u,p.imageModel=m,p}var m3=Dh({compatibility:"strict"});var BT=ds(Qh(),1),JT=ds(Qh(),1);var Q1="vercel.ai.gateway.error",ev=Symbol.for(Q1),sT,lT,Ht=class jT extends(lT=Error,sT=ev,lT){constructor({message:t,statusCode:r=500,cause:o,generationId:n}){super(n?`${t} [${n}]`:t),this[sT]=!0,this.statusCode=r,this.cause=o,this.generationId=n}static isInstance(t){return jT.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&ev in t&&t[ev]===!0}},DT="GatewayAuthenticationError",e4=`vercel.ai.gateway.error.${DT}`,uT=Symbol.for(e4),cT,dT,Fu=class zT extends(dT=Ht,cT=uT,dT){constructor({message:t="Authentication failed",statusCode:r=401,cause:o,generationId:n}={}){super({message:t,statusCode:r,cause:o,generationId:n}),this[cT]=!0,this.name=DT,this.type="authentication_error"}static isInstance(t){return Ht.hasMarker(t)&&uT in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:r,message:o="Authentication failed",statusCode:n=401,cause:i,generationId:s}){let l;return t?l=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:r?l=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:l=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new zT({message:l,statusCode:n,cause:i,generationId:s})}},UT="GatewayInvalidRequestError",t4=`vercel.ai.gateway.error.${UT}`,pT=Symbol.for(t4),mT,fT,r4=class extends(fT=Ht,mT=pT,fT){constructor({message:e="Invalid request",statusCode:t=400,cause:r,generationId:o}={}){super({message:e,statusCode:t,cause:r,generationId:o}),this[mT]=!0,this.name=UT,this.type="invalid_request_error"}static isInstance(e){return Ht.hasMarker(e)&&pT in e}},FT="GatewayRateLimitError",n4=`vercel.ai.gateway.error.${FT}`,gT=Symbol.for(n4),hT,vT,o4=class extends(vT=Ht,hT=gT,vT){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:r,generationId:o}={}){super({message:e,statusCode:t,cause:r,generationId:o}),this[hT]=!0,this.name=FT,this.type="rate_limit_exceeded"}static isInstance(e){return Ht.hasMarker(e)&&gT in e}},LT="GatewayModelNotFoundError",a4=`vercel.ai.gateway.error.${LT}`,yT=Symbol.for(a4),i4=O(()=>A(a.object({modelId:a.string()}))),_T,bT,s4=class extends(bT=Ht,_T=yT,bT){constructor({message:e="Model not found",statusCode:t=404,modelId:r,cause:o,generationId:n}={}){super({message:e,statusCode:t,cause:o,generationId:n}),this[_T]=!0,this.name=LT,this.type="model_not_found",this.modelId=r}static isInstance(e){return Ht.hasMarker(e)&&yT in e}},qT="GatewayInternalServerError",l4=`vercel.ai.gateway.error.${qT}`,xT=Symbol.for(l4),wT,ST,kT=class extends(ST=Ht,wT=xT,ST){constructor({message:e="Internal server error",statusCode:t=500,cause:r,generationId:o}={}){super({message:e,statusCode:t,cause:r,generationId:o}),this[wT]=!0,this.name=qT,this.type="internal_server_error"}static isInstance(e){return Ht.hasMarker(e)&&xT in e}},ZT="GatewayResponseError",u4=`vercel.ai.gateway.error.${ZT}`,IT=Symbol.for(u4),TT,$T,c4=class extends($T=Ht,TT=IT,$T){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:r,validationError:o,cause:n,generationId:i}={}){super({message:e,statusCode:t,cause:n,generationId:i}),this[TT]=!0,this.name=ZT,this.type="response_error",this.response=r,this.validationError=o}static isInstance(e){return Ht.hasMarker(e)&&IT in e}};async function ET({response:e,statusCode:t,defaultMessage:r="Gateway request failed",cause:o,authMethod:n}){var i;let s=await Mt({value:e,schema:d4});if(!s.success){let c=typeof e=="object"&&e!==null&&"generationId"in e?e.generationId:void 0;return new c4({message:`Invalid error response format: ${r}`,statusCode:t,response:e,validationError:s.error,cause:o,generationId:c})}let l=s.value,d=l.error.type,u=l.error.message,m=(i=l.generationId)!=null?i:void 0;switch(d){case"authentication_error":return Fu.createContextualError({apiKeyProvided:n==="api-key",oidcTokenProvided:n==="oidc",statusCode:t,cause:o,generationId:m});case"invalid_request_error":return new r4({message:u,statusCode:t,cause:o,generationId:m});case"rate_limit_exceeded":return new o4({message:u,statusCode:t,cause:o,generationId:m});case"model_not_found":{let c=await Mt({value:l.error.param,schema:i4});return new s4({message:u,statusCode:t,modelId:c.success?c.value.modelId:void 0,cause:o,generationId:m})}case"internal_server_error":return new kT({message:u,statusCode:t,cause:o,generationId:m});default:return new kT({message:u,statusCode:t,cause:o,generationId:m})}}var d4=O(()=>A(a.object({error:a.object({message:a.string(),type:a.string().nullish(),param:a.unknown().nullish(),code:a.union([a.string(),a.number()]).nullish()}),generationId:a.string().nullish()}))),VT="GatewayTimeoutError",p4=`vercel.ai.gateway.error.${VT}`,CT=Symbol.for(p4),AT,PT,OT=class GT extends(PT=Ht,AT=CT,PT){constructor({message:t="Request timed out",statusCode:r=408,cause:o,generationId:n}={}){super({message:t,statusCode:r,cause:o,generationId:n}),this[AT]=!0,this.name=VT,this.type="timeout_error"}static isInstance(t){return Ht.hasMarker(t)&&CT in t}static createTimeoutError({originalMessage:t,statusCode:r=408,cause:o,generationId:n}){let i=`Gateway request timed out: ${t}

    This is a client-side timeout. To resolve this, increase your timeout configuration: https://vercel.com/docs/ai-gateway/capabilities/video-generation#extending-timeouts-for-node.js`;return new GT({message:i,statusCode:r,cause:o,generationId:n})}};function RT(e){if(!(e instanceof Error))return!1;let t=e.code;return typeof t=="string"?["UND_ERR_HEADERS_TIMEOUT","UND_ERR_BODY_TIMEOUT","UND_ERR_CONNECT_TIMEOUT"].includes(t):!1}async function pn(e,t){var r;return Ht.isInstance(e)?e:RT(e)?OT.createTimeoutError({originalMessage:e instanceof Error?e.message:"Unknown error",cause:e}):Ye.isInstance(e)?e.cause&&RT(e.cause)?OT.createTimeoutError({originalMessage:e.message,cause:e}):await ET({response:m4(e),statusCode:(r=e.statusCode)!=null?r:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):await ET({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function m4(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}var HT="ai-gateway-auth-method";async function mo(e){let t=await Mt({value:e[HT],schema:f4});return t.success?t.value:void 0}var f4=O(()=>A(a.union([a.literal("api-key"),a.literal("oidc")]))),MT=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await Ri({url:`${this.config.baseURL}/config`,headers:await ze(this.config.headers()),successfulResponseHandler:ke(g4),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await pn(e)}}async getCredits(){try{let e=new URL(this.config.baseURL),{value:t}=await Ri({url:`${e.origin}/v1/credits`,headers:await ze(this.config.headers()),successfulResponseHandler:ke(h4),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:r=>r}),fetch:this.config.fetch});return t}catch(e){throw await pn(e)}}},g4=O(()=>A(a.object({models:a.array(a.object({id:a.string(),name:a.string(),description:a.string().nullish(),pricing:a.object({input:a.string(),output:a.string(),input_cache_read:a.string().nullish(),input_cache_write:a.string().nullish()}).transform(({input:e,output:t,input_cache_read:r,input_cache_write:o})=>({input:e,output:t,...r?{cachedInputTokens:r}:{},...o?{cacheCreationInputTokens:o}:{}})).nullish(),specification:a.object({specificationVersion:a.literal("v3"),provider:a.string(),modelId:a.string()}),modelType:a.enum(["embedding","image","language","video"]).nullish()}))}))),h4=O(()=>A(a.object({balance:a.string(),total_used:a.string()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),v4=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...r}=e;return{args:this.maybeEncodeFileParts(r),warnings:[]}}async doGenerate(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:o}=e,n=await ze(this.config.headers());try{let{responseHeaders:i,value:s,rawValue:l}=await we({url:this.getUrl(),headers:_e(n,e.headers,this.getModelConfigHeaders(this.modelId,!1),await ze(this.config.o11yHeaders)),body:t,successfulResponseHandler:ke(a.any()),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:d=>d}),...o&&{abortSignal:o},fetch:this.config.fetch});return{...s,request:{body:t},response:{headers:i,body:l},warnings:r}}catch(i){throw await pn(i,await mo(n))}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:o}=e,n=await ze(this.config.headers());try{let{value:i,responseHeaders:s}=await we({url:this.getUrl(),headers:_e(n,e.headers,this.getModelConfigHeaders(this.modelId,!0),await ze(this.config.o11yHeaders)),body:t,successfulResponseHandler:Nt(a.any()),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:l=>l}),...o&&{abortSignal:o},fetch:this.config.fetch});return{stream:i.pipeThrough(new TransformStream({start(l){r.length>0&&l.enqueue({type:"stream-start",warnings:r})},transform(l,d){if(l.success){let u=l.value;if(u.type==="raw"&&!e.includeRawChunks)return;u.type==="response-metadata"&&u.timestamp&&typeof u.timestamp=="string"&&(u.timestamp=new Date(u.timestamp)),d.enqueue(u)}else d.error(l.error)}})),request:{body:t},response:{headers:s}}}catch(i){throw await pn(i,await mo(n))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(let t of e.prompt)for(let r of t.content)if(this.isFilePart(r)){let o=r;if(o.data instanceof Uint8Array){let n=Uint8Array.from(o.data),i=Buffer.from(n).toString("base64");o.data=new URL(`data:${o.mediaType||"application/octet-stream"};base64,${i}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"3","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},y4=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n;let i=await ze(this.config.headers());try{let{responseHeaders:s,value:l,rawValue:d}=await we({url:this.getUrl(),headers:_e(i,t!=null?t:{},this.getModelConfigHeaders(),await ze(this.config.o11yHeaders)),body:{values:e,...o?{providerOptions:o}:{}},successfulResponseHandler:ke(_4),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:u=>u}),...r&&{abortSignal:r},fetch:this.config.fetch});return{embeddings:l.embeddings,usage:(n=l.usage)!=null?n:void 0,providerMetadata:l.providerMetadata,response:{headers:s,body:d},warnings:[]}}catch(s){throw await pn(s,await mo(i))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"3","ai-model-id":this.modelId}}},_4=O(()=>A(a.object({embeddings:a.array(a.array(a.number())),usage:a.object({tokens:a.number()}).nullish(),providerMetadata:a.record(a.string(),a.record(a.string(),a.unknown())).optional()}))),b4=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:o,seed:n,files:i,mask:s,providerOptions:l,headers:d,abortSignal:u}){var m,c,p,f;let v=await ze(this.config.headers());try{let{responseHeaders:g,value:y,rawValue:S}=await we({url:this.getUrl(),headers:_e(v,d!=null?d:{},this.getModelConfigHeaders(),await ze(this.config.o11yHeaders)),body:{prompt:e,n:t,...r&&{size:r},...o&&{aspectRatio:o},...n&&{seed:n},...l&&{providerOptions:l},...i&&{files:i.map(b=>NT(b))},...s&&{mask:NT(s)}},successfulResponseHandler:ke(k4),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:b=>b}),...u&&{abortSignal:u},fetch:this.config.fetch});return{images:y.images,warnings:(m=y.warnings)!=null?m:[],providerMetadata:y.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:g},...y.usage!=null&&{usage:{inputTokens:(c=y.usage.inputTokens)!=null?c:void 0,outputTokens:(p=y.usage.outputTokens)!=null?p:void 0,totalTokens:(f=y.usage.totalTokens)!=null?f:void 0}}}}catch(g){throw pn(g,await mo(v))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"3","ai-model-id":this.modelId}}};function NT(e){return e.type==="file"&&e.data instanceof Uint8Array?{...e,data:pr(e.data)}:e}var x4=a.object({images:a.array(a.unknown()).optional()}).catchall(a.unknown()),w4=a.discriminatedUnion("type",[a.object({type:a.literal("unsupported"),feature:a.string(),details:a.string().optional()}),a.object({type:a.literal("compatibility"),feature:a.string(),details:a.string().optional()}),a.object({type:a.literal("other"),message:a.string()})]),S4=a.object({inputTokens:a.number().nullish(),outputTokens:a.number().nullish(),totalTokens:a.number().nullish()}),k4=a.object({images:a.array(a.string()),warnings:a.array(w4).optional(),providerMetadata:a.record(a.string(),x4).optional(),usage:S4.optional()}),I4=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxVideosPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,aspectRatio:r,resolution:o,duration:n,fps:i,seed:s,image:l,providerOptions:d,headers:u,abortSignal:m}){var c;let p=await ze(this.config.headers());try{let{responseHeaders:f,value:v,rawValue:g}=await we({url:this.getUrl(),headers:_e(p,u!=null?u:{},this.getModelConfigHeaders(),await ze(this.config.o11yHeaders)),body:{prompt:e,n:t,...r&&{aspectRatio:r},...o&&{resolution:o},...n&&{duration:n},...i&&{fps:i},...s&&{seed:s},...d&&{providerOptions:d},...l&&{image:T4(l)}},successfulResponseHandler:ke(C4),failedResponseHandler:ot({errorSchema:a.any(),errorToMessage:y=>y}),...m&&{abortSignal:m},fetch:this.config.fetch});return{videos:v.videos,warnings:(c=v.warnings)!=null?c:[],providerMetadata:v.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:f}}}catch(f){throw pn(f,await mo(p))}}getUrl(){return`${this.config.baseURL}/video-model`}getModelConfigHeaders(){return{"ai-video-model-specification-version":"3","ai-model-id":this.modelId}}};function T4(e){return e.type==="file"&&e.data instanceof Uint8Array?{...e,data:pr(e.data)}:e}var $4=a.object({videos:a.array(a.unknown()).optional()}).catchall(a.unknown()),E4=a.union([a.object({type:a.literal("url"),url:a.string(),mediaType:a.string()}),a.object({type:a.literal("base64"),data:a.string(),mediaType:a.string()})]),C4=a.object({videos:a.array(E4),warnings:a.array(a.object({type:a.literal("other"),message:a.string()})).optional(),providerMetadata:a.record(a.string(),$4).optional()}),A4=O(()=>A(a.object({objective:a.string().describe("Natural-language description of the web research goal, including source or freshness guidance and broader context from the task. Maximum 5000 characters."),search_queries:a.array(a.string()).optional().describe("Optional search queries to supplement the objective. Maximum 200 characters per query."),mode:a.enum(["one-shot","agentic"]).optional().describe('Mode preset: "one-shot" for comprehensive results with longer excerpts (default), "agentic" for concise, token-efficient results for multi-step workflows.'),max_results:a.number().optional().describe("Maximum number of results to return (1-20). Defaults to 10 if not specified."),source_policy:a.object({include_domains:a.array(a.string()).optional().describe("List of domains to include in search results."),exclude_domains:a.array(a.string()).optional().describe("List of domains to exclude from search results."),after_date:a.string().optional().describe("Only include results published after this date (ISO 8601 format).")}).optional().describe("Source policy for controlling which domains to include/exclude and freshness."),excerpts:a.object({max_chars_per_result:a.number().optional().describe("Maximum characters per result."),max_chars_total:a.number().optional().describe("Maximum total characters across all results.")}).optional().describe("Excerpt configuration for controlling result length."),fetch_policy:a.object({max_age_seconds:a.number().optional().describe("Maximum age in seconds for cached content. Set to 0 to always fetch fresh content.")}).optional().describe("Fetch policy for controlling content freshness.")}))),P4=O(()=>A(a.union([a.object({searchId:a.string(),results:a.array(a.object({url:a.string(),title:a.string(),excerpt:a.string(),publishDate:a.string().nullable().optional(),relevanceScore:a.number().optional()}))}),a.object({error:a.enum(["api_error","rate_limit","timeout","invalid_input","configuration_error","unknown"]),statusCode:a.number().optional(),message:a.string()})]))),O4=je({id:"gateway.parallel_search",inputSchema:A4,outputSchema:P4}),R4=(e={})=>O4(e),M4=O(()=>A(a.object({query:a.union([a.string(),a.array(a.string())]).describe("Search query (string) or multiple queries (array of up to 5 strings). Multi-query searches return combined results from all queries."),max_results:a.number().optional().describe("Maximum number of search results to return (1-20, default: 10)"),max_tokens_per_page:a.number().optional().describe("Maximum number of tokens to extract per search result page (256-2048, default: 2048)"),max_tokens:a.number().optional().describe("Maximum total tokens across all search results (default: 25000, max: 1000000)"),country:a.string().optional().describe("Two-letter ISO 3166-1 alpha-2 country code for regional search results (e.g., 'US', 'GB', 'FR')"),search_domain_filter:a.array(a.string()).optional().describe("List of domains to include or exclude from search results (max 20). To include: ['nature.com', 'science.org']. To exclude: ['-example.com', '-spam.net']"),search_language_filter:a.array(a.string()).optional().describe("List of ISO 639-1 language codes to filter results (max 10, lowercase). Examples: ['en', 'fr', 'de']"),search_after_date:a.string().optional().describe("Include only results published after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),search_before_date:a.string().optional().describe("Include only results published before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),last_updated_after_filter:a.string().optional().describe("Include only results last updated after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),last_updated_before_filter:a.string().optional().describe("Include only results last updated before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),search_recency_filter:a.enum(["day","week","month","year"]).optional().describe("Filter results by relative time period. Cannot be used with search_after_date or search_before_date.")}))),N4=O(()=>A(a.union([a.object({results:a.array(a.object({title:a.string(),url:a.string(),snippet:a.string(),date:a.string().optional(),lastUpdated:a.string().optional()})),id:a.string()}),a.object({error:a.enum(["api_error","rate_limit","timeout","invalid_input","unknown"]),statusCode:a.number().optional(),message:a.string()})]))),j4=je({id:"gateway.perplexity_search",inputSchema:M4,outputSchema:N4}),D4=(e={})=>j4(e),z4={parallelSearch:R4,perplexitySearch:D4};async function U4(){var e;return(e=(0,BT.getContext)().headers)==null?void 0:e["x-vercel-id"]}var F4="3.0.40",L4="0.0.1";function q4(e={}){var t,r;let o=null,n=null,i=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5,s=0,l=(r=Vr(e.baseURL))!=null?r:"https://ai-gateway.vercel.sh/v3/ai",d=async()=>{try{let g=await Z4(e);return Ct({Authorization:`Bearer ${g.token}`,"ai-gateway-protocol-version":L4,[HT]:g.authMethod,...e.headers},`ai-sdk/gateway/${F4}`)}catch(g){throw Fu.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401,cause:g})}},u=()=>{let g=cn({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),y=cn({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),S=cn({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let b=await U4();return{...g&&{"ai-o11y-deployment-id":g},...y&&{"ai-o11y-environment":y},...S&&{"ai-o11y-region":S},...b&&{"ai-o11y-request-id":b}}}},m=g=>new v4(g,{provider:"gateway",baseURL:l,headers:d,fetch:e.fetch,o11yHeaders:u()}),c=async()=>{var g,y,S;let b=(S=(y=(g=e._internal)==null?void 0:g.currentDate)==null?void 0:y.call(g).getTime())!=null?S:Date.now();return(!o||b-s>i)&&(s=b,o=new MT({baseURL:l,headers:d,fetch:e.fetch}).getAvailableModels().then(_=>(n=_,_)).catch(async _=>{throw await pn(_,await mo(await d()))})),n?Promise.resolve(n):o},p=async()=>new MT({baseURL:l,headers:d,fetch:e.fetch}).getCredits().catch(async g=>{throw await pn(g,await mo(await d()))}),f=function(g){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return m(g)};f.specificationVersion="v3",f.getAvailableModels=c,f.getCredits=p,f.imageModel=g=>new b4(g,{provider:"gateway",baseURL:l,headers:d,fetch:e.fetch,o11yHeaders:u()}),f.languageModel=m;let v=g=>new y4(g,{provider:"gateway",baseURL:l,headers:d,fetch:e.fetch,o11yHeaders:u()});return f.embeddingModel=v,f.textEmbeddingModel=v,f.videoModel=g=>new I4(g,{provider:"gateway",baseURL:l,headers:d,fetch:e.fetch,o11yHeaders:u()}),f.chat=f.languageModel,f.embedding=f.embeddingModel,f.image=f.imageModel,f.video=f.videoModel,f.tools=z4,f}var WT=q4();async function Z4(e){let t=cn({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});return t?{token:t,authMethod:"api-key"}:{token:await(0,JT.getVercelOidcToken)(),authMethod:"oidc"}}var KT=typeof globalThis=="object"?globalThis:global;var mn="1.9.0";var YT=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function V4(e){var t=new Set([e]),r=new Set,o=e.match(YT);if(!o)return function(){return!1};var n={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(n.prerelease!=null)return function(d){return d===e};function i(l){return r.add(l),!1}function s(l){return t.add(l),!0}return function(d){if(t.has(d))return!0;if(r.has(d))return!1;var u=d.match(YT);if(!u)return i(d);var m={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return m.prerelease!=null||n.major!==m.major?i(d):n.major===0?n.minor===m.minor&&n.patch<=m.patch?s(d):i(d):n.minor<=m.minor?s(d):i(d)}}var XT=V4(mn);var G4=mn.split(".")[0],Zi=Symbol.for("opentelemetry.js.api."+G4),Vi=KT;function Ta(e,t,r,o){var n;o===void 0&&(o=!1);var i=Vi[Zi]=(n=Vi[Zi])!==null&&n!==void 0?n:{version:mn};if(!o&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}if(i.version!==mn){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+mn);return r.error(s.stack||s.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+mn+"."),!0}function fn(e){var t,r,o=(t=Vi[Zi])===null||t===void 0?void 0:t.version;if(!(!o||!XT(o)))return(r=Vi[Zi])===null||r===void 0?void 0:r[e]}function $a(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+mn+".");var r=Vi[Zi];r&&delete r[e]}var H4=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},B4=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},QT=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Gi("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Gi("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Gi("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Gi("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Gi("verbose",this._namespace,t)},e})();function Gi(e,t,r){var o=fn("diag");if(o)return r.unshift(t),o[e].apply(o,B4([],H4(r),!1))}var Bt;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Bt||(Bt={}));function e0(e,t){e<Bt.NONE?e=Bt.NONE:e>Bt.ALL&&(e=Bt.ALL),t=t||{};function r(o,n){var i=t[o];return typeof i=="function"&&e>=n?i.bind(t):function(){}}return{error:r("error",Bt.ERROR),warn:r("warn",Bt.WARN),info:r("info",Bt.INFO),debug:r("debug",Bt.DEBUG),verbose:r("verbose",Bt.VERBOSE)}}var J4=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},W4=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},K4="diag",Ea=(function(){function e(){function t(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var l=fn("diag");if(l)return l[n].apply(l,W4([],J4(i),!1))}}var r=this,o=function(n,i){var s,l,d;if(i===void 0&&(i={logLevel:Bt.INFO}),n===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var m=fn("diag"),c=e0((l=i.logLevel)!==null&&l!==void 0?l:Bt.INFO,n);if(m&&!i.suppressOverrideMessage){var p=(d=new Error().stack)!==null&&d!==void 0?d:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+p),c.warn("Current logger will overwrite one already registered from "+p)}return Ta("diag",c,r,!0)};r.setLogger=o,r.disable=function(){$a(K4,r)},r.createComponentLogger=function(n){return new QT(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function t0(e){return Symbol.for(e)}var Y4=(function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(o){return r._currentContext.get(o)},r.setValue=function(o,n){var i=new e(r._currentContext);return i._currentContext.set(o,n),i},r.deleteValue=function(o){var n=new e(r._currentContext);return n._currentContext.delete(o),n}}return e})(),r0=new Y4;var X4=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},Q4=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},n0=(function(){function e(){}return e.prototype.active=function(){return r0},e.prototype.with=function(t,r,o){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return r.call.apply(r,Q4([o],X4(n),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})();var eU=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},tU=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},tv="context",rU=new n0,Ca=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Ta(tv,t,Ea.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,o){for(var n,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,tU([t,r,o],eU(i),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return fn(tv)||rU},e.prototype.disable=function(){this._getContextManager().disable(),$a(tv,Ea.instance())},e})();var Lu;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Lu||(Lu={}));var rv="0000000000000000",nv="00000000000000000000000000000000",o0={traceId:nv,spanId:rv,traceFlags:Lu.NONE};var zn=(function(){function e(t){t===void 0&&(t=o0),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e})();var ov=t0("OpenTelemetry Context Key SPAN");function qu(e){return e.getValue(ov)||void 0}function a0(){return qu(Ca.getInstance().active())}function Hi(e,t){return e.setValue(ov,t)}function i0(e){return e.deleteValue(ov)}function s0(e,t){return Hi(e,new zn(t))}function Zu(e){var t;return(t=qu(e))===null||t===void 0?void 0:t.spanContext()}var nU=/^([0-9a-f]{32})$/i,oU=/^[0-9a-f]{16}$/i;function aU(e){return nU.test(e)&&e!==nv}function iU(e){return oU.test(e)&&e!==rv}function Vu(e){return aU(e.traceId)&&iU(e.spanId)}function l0(e){return new zn(e)}var av=Ca.getInstance(),Gu=(function(){function e(){}return e.prototype.startSpan=function(t,r,o){o===void 0&&(o=av.active());var n=!!(r!=null&&r.root);if(n)return new zn;var i=o&&Zu(o);return sU(i)&&Vu(i)?new zn(i):new zn},e.prototype.startActiveSpan=function(t,r,o,n){var i,s,l;if(!(arguments.length<2)){arguments.length===2?l=r:arguments.length===3?(i=r,l=o):(i=r,s=o,l=n);var d=s!=null?s:av.active(),u=this.startSpan(t,i,d),m=Hi(d,u);return av.with(m,l,void 0,u)}},e})();function sU(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var lU=new Gu,u0=(function(){function e(t,r,o,n){this._provider=t,this.name=r,this.version=o,this.options=n}return e.prototype.startSpan=function(t,r,o){return this._getTracer().startSpan(t,r,o)},e.prototype.startActiveSpan=function(t,r,o,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):lU},e})();var c0=(function(){function e(){}return e.prototype.getTracer=function(t,r,o){return new Gu},e})();var uU=new c0,iv=(function(){function e(){}return e.prototype.getTracer=function(t,r,o){var n;return(n=this.getDelegateTracer(t,r,o))!==null&&n!==void 0?n:new u0(this,t,r,o)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:uU},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,o){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r,o)},e})();var Aa;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Aa||(Aa={}));var Hu=Ca.getInstance();var sv="trace",d0=(function(){function e(){this._proxyTracerProvider=new iv,this.wrapSpanContext=l0,this.isSpanContextValid=Vu,this.deleteSpan=i0,this.getSpan=qu,this.getActiveSpan=a0,this.getSpanContext=Zu,this.setSpan=Hi,this.setSpanContext=s0}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=Ta(sv,this._proxyTracerProvider,Ea.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return fn(sv)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){$a(sv,Ea.instance()),this._proxyTracerProvider=new iv},e})();var lv=d0.getInstance();var dU=Object.defineProperty,pU=(e,t)=>{for(var r in t)dU(e,r,{get:t[r],enumerable:!0})},k0="AI_InvalidArgumentError",I0=`vercel.ai.error.${k0}`,mU=Symbol.for(I0),T0,Hr=class extends oe{constructor({parameter:e,value:t,message:r}){super({name:k0,message:`Invalid argument for parameter ${e}: ${r}`}),this[T0]=!0,this.parameter=e,this.value=t}static isInstance(e){return oe.hasMarker(e,I0)}};T0=mU;var fU="AI_InvalidStreamPartError",gU=`vercel.ai.error.${fU}`,hU=Symbol.for(gU),vU;vU=hU;var $0="AI_InvalidToolApprovalError",E0=`vercel.ai.error.${$0}`,yU=Symbol.for(E0),C0,_U=class extends oe{constructor({approvalId:e}){super({name:$0,message:`Tool approval response references unknown approvalId: "${e}". No matching tool-approval-request found in message history.`}),this[C0]=!0,this.approvalId=e}static isInstance(e){return oe.hasMarker(e,E0)}};C0=yU;var A0="AI_InvalidToolInputError",P0=`vercel.ai.error.${A0}`,bU=Symbol.for(P0),O0,fv=class extends oe{constructor({toolInput:e,toolName:t,cause:r,message:o=`Invalid input for tool ${t}: ${fr(r)}`}){super({name:A0,message:o,cause:r}),this[O0]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return oe.hasMarker(e,P0)}};O0=bU;var R0="AI_ToolCallNotFoundForApprovalError",M0=`vercel.ai.error.${R0}`,xU=Symbol.for(M0),N0,gv=class extends oe{constructor({toolCallId:e,approvalId:t}){super({name:R0,message:`Tool call "${e}" not found for approval request "${t}".`}),this[N0]=!0,this.toolCallId=e,this.approvalId=t}static isInstance(e){return oe.hasMarker(e,M0)}};N0=xU;var j0="AI_MissingToolResultsError",D0=`vercel.ai.error.${j0}`,wU=Symbol.for(D0),z0,p0=class extends oe{constructor({toolCallIds:e}){super({name:j0,message:`Tool result${e.length>1?"s are":" is"} missing for tool call${e.length>1?"s":""} ${e.join(", ")}.`}),this[z0]=!0,this.toolCallIds=e}static isInstance(e){return oe.hasMarker(e,D0)}};z0=wU;var SU="AI_NoImageGeneratedError",kU=`vercel.ai.error.${SU}`,IU=Symbol.for(kU),TU;TU=IU;var U0="AI_NoObjectGeneratedError",F0=`vercel.ai.error.${U0}`,$U=Symbol.for(F0),L0,Un=class extends oe{constructor({message:e="No object generated.",cause:t,text:r,response:o,usage:n,finishReason:i}){super({name:U0,message:e,cause:t}),this[L0]=!0,this.text=r,this.response=o,this.usage=n,this.finishReason=i}static isInstance(e){return oe.hasMarker(e,F0)}};L0=$U;var q0="AI_NoOutputGeneratedError",Z0=`vercel.ai.error.${q0}`,EU=Symbol.for(Z0),V0,G0=class extends oe{constructor({message:e="No output generated.",cause:t}={}){super({name:q0,message:e,cause:t}),this[V0]=!0}static isInstance(e){return oe.hasMarker(e,Z0)}};V0=EU;var CU="AI_NoSpeechGeneratedError",AU=`vercel.ai.error.${CU}`,PU=Symbol.for(AU),OU;OU=PU;var RU="AI_NoTranscriptGeneratedError",MU=`vercel.ai.error.${RU}`,NU=Symbol.for(MU),jU;jU=NU;var DU="AI_NoVideoGeneratedError",zU=`vercel.ai.error.${DU}`,UU=Symbol.for(zU),FU;FU=UU;var H0="AI_NoSuchToolError",B0=`vercel.ai.error.${H0}`,LU=Symbol.for(B0),J0,cv=class extends oe{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:H0,message:r}),this[J0]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return oe.hasMarker(e,B0)}};J0=LU;var W0="AI_ToolCallRepairError",K0=`vercel.ai.error.${W0}`,qU=Symbol.for(K0),Y0,ZU=class extends oe{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${fr(e)}`}){super({name:W0,message:r,cause:e}),this[Y0]=!0,this.originalError=t}static isInstance(e){return oe.hasMarker(e,K0)}};Y0=qU;var VU=class extends oe{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},X0="AI_UIMessageStreamError",Q0=`vercel.ai.error.${X0}`,GU=Symbol.for(Q0),e$,Pa=class extends oe{constructor({chunkType:e,chunkId:t,message:r}){super({name:X0,message:r}),this[e$]=!0,this.chunkType=e,this.chunkId=t}static isInstance(e){return oe.hasMarker(e,Q0)}};e$=GU;var HU="AI_InvalidDataContentError",BU=`vercel.ai.error.${HU}`,JU=Symbol.for(BU),WU;WU=JU;var t$="AI_InvalidMessageRoleError",r$=`vercel.ai.error.${t$}`,KU=Symbol.for(r$),n$,YU=class extends oe{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:t$,message:t}),this[n$]=!0,this.role=e}static isInstance(e){return oe.hasMarker(e,r$)}};n$=KU;var XU="AI_MessageConversionError",QU=`vercel.ai.error.${XU}`,e2=Symbol.for(QU),t2;t2=e2;var o$="AI_RetryError",a$=`vercel.ai.error.${o$}`,r2=Symbol.for(a$),i$,m0=class extends oe{constructor({message:e,reason:t,errors:r}){super({name:o$,message:e}),this[i$]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return oe.hasMarker(e,a$)}};i$=r2;var f0=!1,hv=e=>{if(e.warnings.length===0)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}f0||(f0=!0);for(let r of e.warnings);}};function n2({provider:e,modelId:t}){hv({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:e,model:t})}function o2(e){return e.specificationVersion==="v3"?e:(n2({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get(t,r){switch(r){case"specificationVersion":return"v3";case"doGenerate":return async(...o)=>{let n=await t.doGenerate(...o);return{...n,finishReason:s$(n.finishReason),usage:l$(n.usage)}};case"doStream":return async(...o)=>{let n=await t.doStream(...o);return{...n,stream:a2(n.stream)}};default:return t[r]}}}))}function a2(e){return e.pipeThrough(new TransformStream({transform(t,r){t.type==="finish"?r.enqueue({...t,finishReason:s$(t.finishReason),usage:l$(t.usage)}):r.enqueue(t)}}))}function s$(e){return{unified:e==="unknown"?"other":e,raw:void 0}}function l$(e){return{inputTokens:{total:e.inputTokens,noCache:void 0,cacheRead:e.cachedInputTokens,cacheWrite:void 0},outputTokens:{total:e.outputTokens,text:void 0,reasoning:e.reasoningTokens}}}function Ju(e){if(typeof e!="string"){if(e.specificationVersion!=="v3"&&e.specificationVersion!=="v2"){let t=e;throw new VU({version:t.specificationVersion,provider:t.provider,modelId:t.modelId})}return o2(e)}return i2().languageModel(e)}function i2(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:WT}function vv(e){if(e!=null)return typeof e=="number"?e:e.totalMs}function u$(e){if(!(e==null||typeof e=="number"))return e.stepMs}function s2(e){if(!(e==null||typeof e=="number"))return e.chunkMs}var l2=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}];var u2=e=>{let t=typeof e=="string"?ar(e):e,r=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(r+10)};function c2(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?u2(e):e}function d2({data:e,signatures:t}){let r=c2(e),o=typeof r=="string"?ar(r.substring(0,Math.min(r.length,24))):r;for(let n of t)if(o.length>=n.bytesPrefix.length&&n.bytesPrefix.every((i,s)=>i===null||o[s]===i))return n.mediaType}var c$="6.0.79",p2=async({url:e})=>{var t;let r=e.toString();try{let o=await fetch(r,{headers:Ct({},`ai-sdk/${c$}`,yu())});if(!o.ok)throw new io({url:r,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mediaType:(t=o.headers.get("content-type"))!=null?t:void 0}}catch(o){throw io.isInstance(o)?o:new io({url:r,cause:o})}},m2=(e=p2)=>t=>Promise.all(t.map(async r=>r.isUrlSupportedByModel?null:e(r)));function f2(e){try{let[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch(t){return{mediaType:void 0,base64Content:void 0}}}var d$=a.union([a.string(),a.instanceof(Uint8Array),a.instanceof(ArrayBuffer),a.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function p$(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch(t){}if(e instanceof URL&&e.protocol==="data:"){let{mediaType:t,base64Content:r}=f2(e.toString());if(t==null||r==null)throw new oe({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}function g2(e){return typeof e=="string"?e:e instanceof ArrayBuffer?pr(new Uint8Array(e)):pr(e)}function Wi(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function m$({prompt:e,supportedUrls:t,download:r=m2()}){let o=await v2(e.messages,r,t),n=new Map;for(let u of e.messages)if(u.role==="assistant"&&Array.isArray(u.content))for(let m of u.content)m.type==="tool-approval-request"&&"approvalId"in m&&"toolCallId"in m&&n.set(m.approvalId,m.toolCallId);let i=new Set;for(let u of e.messages)if(u.role==="tool"){for(let m of u.content)if(m.type==="tool-approval-response"){let c=n.get(m.approvalId);c&&i.add(c)}}let s=[...e.system!=null?typeof e.system=="string"?[{role:"system",content:e.system}]:Wi(e.system).map(u=>({role:"system",content:u.content,providerOptions:u.providerOptions})):[],...e.messages.map(u=>h2({message:u,downloadedAssets:o}))],l=[];for(let u of s){if(u.role!=="tool"){l.push(u);continue}let m=l.at(-1);(m==null?void 0:m.role)==="tool"?m.content.push(...u.content):l.push(u)}let d=new Set;for(let u of l)switch(u.role){case"assistant":{for(let m of u.content)m.type==="tool-call"&&!m.providerExecuted&&d.add(m.toolCallId);break}case"tool":{for(let m of u.content)m.type==="tool-result"&&d.delete(m.toolCallId);break}case"user":case"system":for(let m of i)d.delete(m);if(d.size>0)throw new p0({toolCallIds:Array.from(d)});break}for(let u of i)d.delete(u);if(d.size>0)throw new p0({toolCallIds:Array.from(d)});return l.filter(u=>u.role!=="tool"||u.content.length>0)}function h2({message:e,downloadedAssets:t}){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(o=>y2(o,t)).filter(o=>o.type!=="text"||o.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(o=>o.type!=="text"||o.text!==""||o.providerOptions!=null).filter(o=>o.type!=="tool-approval-request").map(o=>{let n=o.providerOptions;switch(o.type){case"file":{let{data:i,mediaType:s}=p$(o.data);return{type:"file",data:i,filename:o.filename,mediaType:s!=null?s:o.mediaType,providerOptions:n}}case"reasoning":return{type:"reasoning",text:o.text,providerOptions:n};case"text":return{type:"text",text:o.text,providerOptions:n};case"tool-call":return{type:"tool-call",toolCallId:o.toolCallId,toolName:o.toolName,input:o.input,providerExecuted:o.providerExecuted,providerOptions:n};case"tool-result":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:g0(o.output),providerOptions:n}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.filter(o=>o.type!=="tool-approval-response"||o.providerExecuted).map(o=>{switch(o.type){case"tool-result":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:g0(o.output),providerOptions:o.providerOptions};case"tool-approval-response":return{type:"tool-approval-response",approvalId:o.approvalId,approved:o.approved,reason:o.reason}}}),providerOptions:e.providerOptions};default:{let o=r;throw new YU({role:o})}}}async function v2(e,t,r){let o=e.filter(i=>i.role==="user").map(i=>i.content).filter(i=>Array.isArray(i)).flat().filter(i=>i.type==="image"||i.type==="file").map(i=>{var s;let l=(s=i.mediaType)!=null?s:i.type==="image"?"image/*":void 0,d=i.type==="image"?i.image:i.data;if(typeof d=="string")try{d=new URL(d)}catch(u){}return{mediaType:l,data:d}}).filter(i=>i.data instanceof URL).map(i=>({url:i.data,isUrlSupportedByModel:i.mediaType!=null&&Mw({url:i.data.toString(),mediaType:i.mediaType,supportedUrls:r})})),n=await t(o);return Object.fromEntries(n.map((i,s)=>i==null?null:[o[s].url.toString(),{data:i.data,mediaType:i.mediaType}]).filter(i=>i!=null))}function y2(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let o,n=e.type;switch(n){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${n}`)}let{data:i,mediaType:s}=p$(o),l=s!=null?s:e.mediaType,d=i;if(d instanceof URL){let u=t[d.toString()];u&&(d=u.data,l!=null||(l=u.mediaType))}switch(n){case"image":return(d instanceof Uint8Array||typeof d=="string")&&(l=(r=d2({data:d,signatures:l2}))!=null?r:l),{type:"file",mediaType:l!=null?l:"image/*",filename:void 0,data:d,providerOptions:e.providerOptions};case"file":{if(l==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:l,filename:e.filename,data:d,providerOptions:e.providerOptions}}}}function g0(e){return e.type!=="content"?e:{type:"content",value:e.value.map(t=>t.type!=="media"?t:t.mediaType.startsWith("image/")?{type:"image-data",data:t.data,mediaType:t.mediaType}:{type:"file-data",data:t.data,mediaType:t.mediaType})}}async function Ji({toolCallId:e,input:t,output:r,tool:o,errorMode:n}){return n==="text"?{type:"error-text",value:fr(r)}:n==="json"?{type:"error-json",value:h0(r)}:o!=null&&o.toModelOutput?await o.toModelOutput({toolCallId:e,input:t,output:r}):typeof r=="string"?{type:"text",value:r}:{type:"json",value:h0(r)}}function h0(e){return e===void 0?null:e}function dv({maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:n,frequencyPenalty:i,seed:s,stopSequences:l}){if(e!=null){if(!Number.isInteger(e))throw new Hr({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new Hr({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Hr({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Hr({parameter:"topP",value:r,message:"topP must be a number"});if(o!=null&&typeof o!="number")throw new Hr({parameter:"topK",value:o,message:"topK must be a number"});if(n!=null&&typeof n!="number")throw new Hr({parameter:"presencePenalty",value:n,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Hr({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Hr({parameter:"seed",value:s,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:n,frequencyPenalty:i,stopSequences:l,seed:s}}function _2(e){return e!=null&&Object.keys(e).length>0}async function f$({tools:e,toolChoice:t,activeTools:r}){if(!_2(e))return{tools:void 0,toolChoice:void 0};let o=r!=null?Object.entries(e).filter(([i])=>r.includes(i)):Object.entries(e),n=[];for(let[i,s]of o){let l=s.type;switch(l){case void 0:case"dynamic":case"function":n.push({type:"function",name:i,description:s.description,inputSchema:await Zr(s.inputSchema).jsonSchema,...s.inputExamples!=null?{inputExamples:s.inputExamples}:{},providerOptions:s.providerOptions,...s.strict!=null?{strict:s.strict}:{}});break;case"provider":n.push({type:"provider",name:i,id:s.id,args:s.args});break;default:{let d=l;throw new Error(`Unsupported tool type: ${d}`)}}}return{tools:n,toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}}var Ki=a.lazy(()=>a.union([a.null(),a.string(),a.number(),a.boolean(),a.record(a.string(),Ki.optional()),a.array(Ki)])),ve=a.record(a.string(),a.record(a.string(),Ki.optional())),g$=a.object({type:a.literal("text"),text:a.string(),providerOptions:ve.optional()}),b2=a.object({type:a.literal("image"),image:a.union([d$,a.instanceof(URL)]),mediaType:a.string().optional(),providerOptions:ve.optional()}),h$=a.object({type:a.literal("file"),data:a.union([d$,a.instanceof(URL)]),filename:a.string().optional(),mediaType:a.string(),providerOptions:ve.optional()}),x2=a.object({type:a.literal("reasoning"),text:a.string(),providerOptions:ve.optional()}),w2=a.object({type:a.literal("tool-call"),toolCallId:a.string(),toolName:a.string(),input:a.unknown(),providerOptions:ve.optional(),providerExecuted:a.boolean().optional()}),S2=a.discriminatedUnion("type",[a.object({type:a.literal("text"),value:a.string(),providerOptions:ve.optional()}),a.object({type:a.literal("json"),value:Ki,providerOptions:ve.optional()}),a.object({type:a.literal("execution-denied"),reason:a.string().optional(),providerOptions:ve.optional()}),a.object({type:a.literal("error-text"),value:a.string(),providerOptions:ve.optional()}),a.object({type:a.literal("error-json"),value:Ki,providerOptions:ve.optional()}),a.object({type:a.literal("content"),value:a.array(a.union([a.object({type:a.literal("text"),text:a.string(),providerOptions:ve.optional()}),a.object({type:a.literal("media"),data:a.string(),mediaType:a.string()}),a.object({type:a.literal("file-data"),data:a.string(),mediaType:a.string(),filename:a.string().optional(),providerOptions:ve.optional()}),a.object({type:a.literal("file-url"),url:a.string(),providerOptions:ve.optional()}),a.object({type:a.literal("file-id"),fileId:a.union([a.string(),a.record(a.string(),a.string())]),providerOptions:ve.optional()}),a.object({type:a.literal("image-data"),data:a.string(),mediaType:a.string(),providerOptions:ve.optional()}),a.object({type:a.literal("image-url"),url:a.string(),providerOptions:ve.optional()}),a.object({type:a.literal("image-file-id"),fileId:a.union([a.string(),a.record(a.string(),a.string())]),providerOptions:ve.optional()}),a.object({type:a.literal("custom"),providerOptions:ve.optional()})]))})]),v$=a.object({type:a.literal("tool-result"),toolCallId:a.string(),toolName:a.string(),output:S2,providerOptions:ve.optional()}),k2=a.object({type:a.literal("tool-approval-request"),approvalId:a.string(),toolCallId:a.string()}),I2=a.object({type:a.literal("tool-approval-response"),approvalId:a.string(),approved:a.boolean(),reason:a.string().optional()}),T2=a.object({role:a.literal("system"),content:a.string(),providerOptions:ve.optional()}),$2=a.object({role:a.literal("user"),content:a.union([a.string(),a.array(a.union([g$,b2,h$]))]),providerOptions:ve.optional()}),E2=a.object({role:a.literal("assistant"),content:a.union([a.string(),a.array(a.union([g$,h$,x2,w2,v$,k2]))]),providerOptions:ve.optional()}),C2=a.object({role:a.literal("tool"),content:a.array(a.union([v$,I2])),providerOptions:ve.optional()}),A2=a.union([T2,$2,E2,C2]);async function y$(e){if(e.prompt==null&&e.messages==null)throw new gr({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new gr({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string"&&!Wi(e.system).every(o=>typeof o=="object"&&o!==null&&"role"in o&&o.role==="system"))throw new gr({prompt:e,message:"system must be a string, SystemModelMessage, or array of SystemModelMessage"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new gr({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new gr({prompt:e,message:"messages must not be empty"});let r=await Mt({value:t,schema:a.array(A2)});if(!r.success)throw new gr({prompt:e,message:"The messages do not match the ModelMessage[] schema.",cause:r.error});return{messages:t,system:e.system}}function _$(e){if(!Fu.isInstance(e))return e;let t=(process==null?void 0:process.env.NODE_ENV)==="production",r="https://ai-sdk.dev/unauthenticated-ai-gateway";return t?new oe({name:"GatewayError",message:`Unauthenticated. Configure AI_GATEWAY_API_KEY or use a provider module. Learn more: ${r}`}):Object.assign(new Error(`\x1B[1m\x1B[31mUnauthenticated request to AI Gateway.\x1B[0m

To authenticate, set the \x1B[33mAI_GATEWAY_API_KEY\x1B[0m environment variable with your API key.

Alternatively, you can use a provider module instead of the AI Gateway.

Learn more: \x1B[34m${r}\x1B[0m

`),{name:"GatewayAuthenticationError"})}function Yi({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function b$({model:e,settings:t,telemetry:r,headers:o}){var n;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,l])=>{if(s==="timeout"){let d=vv(l);d!=null&&(i[`ai.settings.${s}`]=d)}else i[`ai.settings.${s}`]=l;return i},{}),...Object.entries((n=r==null?void 0:r.metadata)!=null?n:{}).reduce((i,[s,l])=>(i[`ai.telemetry.metadata.${s}`]=l,i),{}),...Object.entries(o!=null?o:{}).reduce((i,[s,l])=>(l!==void 0&&(i[`ai.request.headers.${s}`]=l),i),{})}}var P2={startSpan(){return Bu},startActiveSpan(e,t,r,o){if(typeof t=="function")return t(Bu);if(typeof r=="function")return r(Bu);if(typeof o=="function")return o(Bu)}},Bu={spanContext(){return O2},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},O2={traceId:"",spanId:"",traceFlags:0};function x$({isEnabled:e=!1,tracer:t}={}){return e?t||lv.getTracer("ai"):P2}async function Xi({name:e,tracer:t,attributes:r,fn:o,endWhenDone:n=!0}){return t.startActiveSpan(e,{attributes:await r},async i=>{let s=Hu.active();try{let l=await Hu.with(s,()=>o(i));return n&&i.end(),l}catch(l){try{w$(i,l)}finally{i.end()}throw l}})}function w$(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Aa.ERROR,message:t.message})):e.setStatus({code:Aa.ERROR})}async function Br({telemetry:e,attributes:t}){if((e==null?void 0:e.isEnabled)!==!0)return{};let r={};for(let[o,n]of Object.entries(t))if(n!=null){if(typeof n=="object"&&"input"in n&&typeof n.input=="function"){if((e==null?void 0:e.recordInputs)===!1)continue;let i=await n.input();i!=null&&(r[o]=i);continue}if(typeof n=="object"&&"output"in n&&typeof n.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)continue;let i=await n.output();i!=null&&(r[o]=i);continue}r[o]=n}return r}function S$(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(r=>r.type==="file"?{...r,data:r.data instanceof Uint8Array?g2(r.data):r.data}:r)})))}function k$(e){return{inputTokens:e.inputTokens.total,inputTokenDetails:{noCacheTokens:e.inputTokens.noCache,cacheReadTokens:e.inputTokens.cacheRead,cacheWriteTokens:e.inputTokens.cacheWrite},outputTokens:e.outputTokens.total,outputTokenDetails:{textTokens:e.outputTokens.text,reasoningTokens:e.outputTokens.reasoning},totalTokens:Er(e.inputTokens.total,e.outputTokens.total),raw:e.raw,reasoningTokens:e.outputTokens.reasoning,cachedInputTokens:e.inputTokens.cacheRead}}function uv(){return{inputTokens:void 0,inputTokenDetails:{noCacheTokens:void 0,cacheReadTokens:void 0,cacheWriteTokens:void 0},outputTokens:void 0,outputTokenDetails:{textTokens:void 0,reasoningTokens:void 0},totalTokens:void 0,raw:void 0}}function I$(e,t){var r,o,n,i,s,l,d,u,m,c;return{inputTokens:Er(e.inputTokens,t.inputTokens),inputTokenDetails:{noCacheTokens:Er((r=e.inputTokenDetails)==null?void 0:r.noCacheTokens,(o=t.inputTokenDetails)==null?void 0:o.noCacheTokens),cacheReadTokens:Er((n=e.inputTokenDetails)==null?void 0:n.cacheReadTokens,(i=t.inputTokenDetails)==null?void 0:i.cacheReadTokens),cacheWriteTokens:Er((s=e.inputTokenDetails)==null?void 0:s.cacheWriteTokens,(l=t.inputTokenDetails)==null?void 0:l.cacheWriteTokens)},outputTokens:Er(e.outputTokens,t.outputTokens),outputTokenDetails:{textTokens:Er((d=e.outputTokenDetails)==null?void 0:d.textTokens,(u=t.outputTokenDetails)==null?void 0:u.textTokens),reasoningTokens:Er((m=e.outputTokenDetails)==null?void 0:m.reasoningTokens,(c=t.outputTokenDetails)==null?void 0:c.reasoningTokens)},totalTokens:Er(e.totalTokens,t.totalTokens),reasoningTokens:Er(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:Er(e.cachedInputTokens,t.cachedInputTokens)}}function Er(e,t){return e==null&&t==null?void 0:(e!=null?e:0)+(t!=null?t:0)}function Ku(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;let r={...e};for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let n=t[o];if(n===void 0)continue;let i=o in e?e[o]:void 0,s=n!==null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)&&!(n instanceof RegExp),l=i!=null&&typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);s&&l?r[o]=Ku(i,n):r[o]=n}return r}function R2({error:e,exponentialBackoffDelay:t}){let r=e.responseHeaders;if(!r)return t;let o,n=r["retry-after-ms"];if(n){let s=parseFloat(n);Number.isNaN(s)||(o=s)}let i=r["retry-after"];if(i&&o===void 0){let s=parseFloat(i);Number.isNaN(s)?o=Date.parse(i)-Date.now():o=s*1e3}return o!=null&&!Number.isNaN(o)&&0<=o&&(o<60*1e3||o<t)?o:t}var M2=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:o}={})=>async n=>T$(n,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:o});async function T$(e,{maxRetries:t,delayInMs:r,backoffFactor:o,abortSignal:n},i=[]){try{return await e()}catch(s){if(un(s)||t===0)throw s;let l=va(s),d=[...i,s],u=d.length;if(u>t)throw new m0({message:`Failed after ${u} attempts. Last error: ${l}`,reason:"maxRetriesExceeded",errors:d});if(s instanceof Error&&Ye.isInstance(s)&&s.isRetryable===!0&&u<=t)return await hu(R2({error:s,exponentialBackoffDelay:r}),{abortSignal:n}),T$(e,{maxRetries:t,delayInMs:o*r,backoffFactor:o,abortSignal:n},d);throw u===1?s:new m0({message:`Failed after ${u} attempts with non-retryable error: '${l}'`,reason:"errorNotRetryable",errors:d})}}function $$({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Hr({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Hr({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let r=e!=null?e:2;return{maxRetries:r,retry:M2({maxRetries:r,abortSignal:t})}}function E$({messages:e}){let t=e.at(-1);if((t==null?void 0:t.role)!="tool")return{approvedToolApprovals:[],deniedToolApprovals:[]};let r={};for(let d of e)if(d.role==="assistant"&&typeof d.content!="string"){let u=d.content;for(let m of u)m.type==="tool-call"&&(r[m.toolCallId]=m)}let o={};for(let d of e)if(d.role==="assistant"&&typeof d.content!="string"){let u=d.content;for(let m of u)m.type==="tool-approval-request"&&(o[m.approvalId]=m)}let n={};for(let d of t.content)d.type==="tool-result"&&(n[d.toolCallId]=d);let i=[],s=[],l=t.content.filter(d=>d.type==="tool-approval-response");for(let d of l){let u=o[d.approvalId];if(u==null)throw new _U({approvalId:d.approvalId});if(n[u.toolCallId]!=null)continue;let m=r[u.toolCallId];if(m==null)throw new gv({toolCallId:u.toolCallId,approvalId:u.approvalId});let c={approvalRequest:u,approvalResponse:d,toolCall:m};d.approved?i.push(c):s.push(c)}return{approvedToolApprovals:i,deniedToolApprovals:s}}async function yv({toolCall:e,tools:t,tracer:r,telemetry:o,messages:n,abortSignal:i,experimental_context:s,onPreliminaryToolResult:l}){let{toolName:d,toolCallId:u,input:m}=e,c=t==null?void 0:t[d];if((c==null?void 0:c.execute)!=null)return Xi({name:"ai.toolCall",attributes:Br({telemetry:o,attributes:{...Yi({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":d,"ai.toolCall.id":u,"ai.toolCall.args":{output:()=>JSON.stringify(m)}}}),tracer:r,fn:async p=>{let f;try{let v=Zw({execute:c.execute.bind(c),input:m,options:{toolCallId:u,messages:n,abortSignal:i,experimental_context:s}});for await(let g of v)g.type==="preliminary"?l==null||l({...e,type:"tool-result",output:g.output,preliminary:!0}):f=g.output}catch(v){return w$(p,v),{type:"tool-error",toolCallId:u,toolName:d,input:m,error:v,dynamic:c.type==="dynamic",...e.providerMetadata!=null?{providerMetadata:e.providerMetadata}:{}}}try{p.setAttributes(await Br({telemetry:o,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(f)}}}))}catch(v){}return{type:"tool-result",toolCallId:u,toolName:d,input:m,output:f,dynamic:c.type==="dynamic",...e.providerMetadata!=null?{providerMetadata:e.providerMetadata}:{}}}})}function v0(e){let t=e.filter(r=>r.type==="reasoning");return t.length===0?void 0:t.map(r=>r.text).join(`
`)}function y0(e){let t=e.filter(r=>r.type==="text");if(t.length!==0)return t.map(r=>r.text).join("")}var C$=class{constructor({data:e,mediaType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=pr(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=ar(this.base64Data)),this.uint8ArrayData}},N2=class extends C${constructor(e){super(e),this.type="file"}};async function A$({tool:e,toolCall:t,messages:r,experimental_context:o}){return e.needsApproval==null?!1:typeof e.needsApproval=="boolean"?e.needsApproval:await e.needsApproval(t.input,{toolCallId:t.toolCallId,messages:r,experimental_context:o})}var j2={};pU(j2,{array:()=>U2,choice:()=>F2,json:()=>L2,object:()=>z2,text:()=>Wu});function D2(e){let t=["ROOT"],r=-1,o=null;function n(d,u,m){switch(d){case'"':{r=u,t.pop(),t.push(m),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=u,o=u,t.pop(),t.push(m),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(m),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=u,t.pop(),t.push(m),t.push("INSIDE_NUMBER");break}case"{":{r=u,t.pop(),t.push(m),t.push("INSIDE_OBJECT_START");break}case"[":{r=u,t.pop(),t.push(m),t.push("INSIDE_ARRAY_START");break}}}function i(d,u){switch(d){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=u,t.pop();break}}}function s(d,u){switch(d){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=u,t.pop();break}}}for(let d=0;d<e.length;d++){let u=e[d];switch(t[t.length-1]){case"ROOT":n(u,d,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=d,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{u==='"'&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break}case"INSIDE_OBJECT_KEY":{u==='"'&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break}case"INSIDE_OBJECT_AFTER_KEY":{u===":"&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break}case"INSIDE_OBJECT_BEFORE_VALUE":{n(u,d,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,d);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),r=d;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=d}break}case"INSIDE_ARRAY_START":{u==="]"?(r=d,t.pop()):(r=d,n(u,d,"INSIDE_ARRAY_AFTER_VALUE"));break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=d,t.pop();break}default:{r=d;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{n(u,d,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=d;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=d;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,d),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,d);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,d);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,d);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let c=e.substring(o,d+1);!"false".startsWith(c)&&!"true".startsWith(c)&&!"null".startsWith(c)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,d):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,d)):r=d;break}}}let l=e.slice(0,r+1);for(let d=t.length-1;d>=0;d--)switch(t[d]){case"INSIDE_STRING":{l+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{l+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{l+="]";break}case"INSIDE_LITERAL":{let m=e.substring(o,e.length);"true".startsWith(m)?l+="true".slice(m.length):"false".startsWith(m)?l+="false".slice(m.length):"null".startsWith(m)&&(l+="null".slice(m.length))}}return l}async function Qi(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Yt({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Yt({text:D2(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Wu=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}},createElementStreamTransform(){}}),z2=({schema:e,name:t,description:r})=>{let o=Zr(e);return{name:"object",responseFormat:ze(o.jsonSchema).then(n=>({type:"json",schema:n,...t!=null&&{name:t},...r!=null&&{description:r}})),async parseCompleteOutput({text:n},i){let s=await Yt({text:n});if(!s.success)throw new Un({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:i.response,usage:i.usage,finishReason:i.finishReason});let l=await Mt({value:s.value,schema:o});if(!l.success)throw new Un({message:"No object generated: response did not match schema.",cause:l.error,text:n,response:i.response,usage:i.usage,finishReason:i.finishReason});return l.value},async parsePartialOutput({text:n}){let i=await Qi(n);switch(i.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:i.value}}},createElementStreamTransform(){}}},U2=({element:e,name:t,description:r})=>{let o=Zr(e);return{name:"array",responseFormat:ze(o.jsonSchema).then(n=>{let{$schema:i,...s}=n;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:s}},required:["elements"],additionalProperties:!1},...t!=null&&{name:t},...r!=null&&{description:r}}}),async parseCompleteOutput({text:n},i){let s=await Yt({text:n});if(!s.success)throw new Un({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:i.response,usage:i.usage,finishReason:i.finishReason});let l=s.value;if(l==null||typeof l!="object"||!("elements"in l)||!Array.isArray(l.elements))throw new Un({message:"No object generated: response did not match schema.",cause:new hr({value:l,cause:"response must be an object with an elements array"}),text:n,response:i.response,usage:i.usage,finishReason:i.finishReason});for(let d of l.elements){let u=await Mt({value:d,schema:o});if(!u.success)throw new Un({message:"No object generated: response did not match schema.",cause:u.error,text:n,response:i.response,usage:i.usage,finishReason:i.finishReason})}return l.elements},async parsePartialOutput({text:n}){let i=await Qi(n);switch(i.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let s=i.value;if(s==null||typeof s!="object"||!("elements"in s)||!Array.isArray(s.elements))return;let l=i.state==="repaired-parse"&&s.elements.length>0?s.elements.slice(0,-1):s.elements,d=[];for(let u of l){let m=await Mt({value:u,schema:o});m.success&&d.push(m.value)}return{partial:d}}}},createElementStreamTransform(){let n=0;return new TransformStream({transform({partialOutput:i},s){if(i!=null)for(;n<i.length;n++)s.enqueue(i[n])}})}}},F2=({options:e,name:t,description:r})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...t!=null&&{name:t},...r!=null&&{description:r}}),async parseCompleteOutput({text:o},n){let i=await Yt({text:o});if(!i.success)throw new Un({message:"No object generated: could not parse the response.",cause:i.error,text:o,response:n.response,usage:n.usage,finishReason:n.finishReason});let s=i.value;if(s==null||typeof s!="object"||!("result"in s)||typeof s.result!="string"||!e.includes(s.result))throw new Un({message:"No object generated: response did not match schema.",cause:new hr({value:s,cause:"response must be an object that contains a choice value."}),text:o,response:n.response,usage:n.usage,finishReason:n.finishReason});return s.result},async parsePartialOutput({text:o}){let n=await Qi(o);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let i=n.value;if(i==null||typeof i!="object"||!("result"in i)||typeof i.result!="string")return;let s=e.filter(l=>l.startsWith(i.result));return n.state==="successful-parse"?s.includes(i.result)?{partial:i.result}:void 0:s.length===1?{partial:s[0]}:void 0}}},createElementStreamTransform(){}}),L2=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:r},o){let n=await Yt({text:r});if(!n.success)throw new Un({message:"No object generated: could not parse the response.",cause:n.error,text:r,response:o.response,usage:o.usage,finishReason:o.finishReason});return n.value},async parsePartialOutput({text:r}){let o=await Qi(r);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return o.value===void 0?void 0:{partial:o.value}}},createElementStreamTransform(){}});async function P$({toolCall:e,tools:t,repairToolCall:r,system:o,messages:n}){var i;try{if(t==null){if(e.providerExecuted&&e.dynamic)return await O$(e);throw new cv({toolName:e.toolName})}try{return await _0({toolCall:e,tools:t})}catch(s){if(r==null||!(cv.isInstance(s)||fv.isInstance(s)))throw s;let l=null;try{l=await r({toolCall:e,tools:t,inputSchema:async({toolName:d})=>{let{inputSchema:u}=t[d];return await Zr(u).jsonSchema},system:o,messages:n,error:s})}catch(d){throw new ZU({cause:d,originalError:s})}if(l==null)throw s;return await _0({toolCall:l,tools:t})}}catch(s){let l=await Yt({text:e.input}),d=l.success?l.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:d,dynamic:!0,invalid:!0,error:s,title:(i=t==null?void 0:t[e.toolName])==null?void 0:i.title,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}}async function O$(e){let t=e.input.trim()===""?{success:!0,value:{}}:await Yt({text:e.input});if(t.success===!1)throw new fv({toolName:e.toolName,toolInput:e.input,cause:t.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:t.value,providerExecuted:!0,dynamic:!0,providerMetadata:e.providerMetadata}}async function _0({toolCall:e,tools:t}){let r=e.toolName,o=t[r];if(o==null){if(e.providerExecuted&&e.dynamic)return await O$(e);throw new cv({toolName:e.toolName,availableTools:Object.keys(t)})}let n=Zr(o.inputSchema),i=e.input.trim()===""?await Mt({value:{},schema:n}):await Yt({text:e.input,schema:n});if(i.success===!1)throw new fv({toolName:r,toolInput:e.input,cause:i.error});return o.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0,title:o.title}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:o.title}}var R$=class{constructor({content:e,finishReason:t,rawFinishReason:r,usage:o,warnings:n,request:i,response:s,providerMetadata:l}){this.content=e,this.finishReason=t,this.rawFinishReason=r,this.usage=o,this.warnings=n,this.request=i,this.response=s,this.providerMetadata=l}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function M$(e){return({steps:t})=>t.length===e}async function N$({stopConditions:e,steps:t}){return(await Promise.all(e.map(r=>r({steps:t})))).some(r=>r)}async function pv({content:e,tools:t}){let r=[],o=[];for(let i of e)if(i.type!=="source"&&!((i.type==="tool-result"||i.type==="tool-error")&&!i.providerExecuted)&&!(i.type==="text"&&i.text.length===0))switch(i.type){case"text":o.push({type:"text",text:i.text,providerOptions:i.providerMetadata});break;case"reasoning":o.push({type:"reasoning",text:i.text,providerOptions:i.providerMetadata});break;case"file":o.push({type:"file",data:i.file.base64,mediaType:i.file.mediaType,providerOptions:i.providerMetadata});break;case"tool-call":o.push({type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,providerExecuted:i.providerExecuted,providerOptions:i.providerMetadata});break;case"tool-result":{let s=await Ji({toolCallId:i.toolCallId,input:i.input,tool:t==null?void 0:t[i.toolName],output:i.output,errorMode:"none"});o.push({type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:s,providerOptions:i.providerMetadata});break}case"tool-error":{let s=await Ji({toolCallId:i.toolCallId,input:i.input,tool:t==null?void 0:t[i.toolName],output:i.error,errorMode:"json"});o.push({type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:s,providerOptions:i.providerMetadata});break}case"tool-approval-request":o.push({type:"tool-approval-request",approvalId:i.approvalId,toolCallId:i.toolCall.toolCallId});break}o.length>0&&r.push({role:"assistant",content:o});let n=[];for(let i of e){if(!(i.type==="tool-result"||i.type==="tool-error")||i.providerExecuted)continue;let s=await Ji({toolCallId:i.toolCallId,input:i.input,tool:t==null?void 0:t[i.toolName],output:i.type==="tool-result"?i.output:i.error,errorMode:i.type==="tool-error"?"text":"none"});n.push({type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:s,...i.providerMetadata!=null?{providerOptions:i.providerMetadata}:{}})}return n.length>0&&r.push({role:"tool",content:n}),r}function j$(...e){let t=e.filter(o=>o!=null);if(t.length===0)return;if(t.length===1)return t[0];let r=new AbortController;for(let o of t){if(o.aborted)return r.abort(o.reason),r.signal;o.addEventListener("abort",()=>{r.abort(o.reason)},{once:!0})}return r.signal}var q2=qr({prefix:"aitxt",size:24});async function _v({model:e,tools:t,toolChoice:r,system:o,prompt:n,messages:i,maxRetries:s,abortSignal:l,timeout:d,headers:u,stopWhen:m=M$(1),experimental_output:c,output:p=c,experimental_telemetry:f,providerOptions:v,experimental_activeTools:g,activeTools:y=g,experimental_prepareStep:S,prepareStep:b=S,experimental_repairToolCall:_,experimental_download:k,experimental_context:w,experimental_include:h,_internal:{generateId:I=q2}={},onStepFinish:j,onFinish:U,...F}){let Z=Ju(e),L=Wi(m),M=vv(d),q=u$(d),C=q!=null?new AbortController:void 0,E=j$(l,M!=null?AbortSignal.timeout(M):void 0,C==null?void 0:C.signal),{maxRetries:te,retry:P}=$$({maxRetries:s,abortSignal:E}),se=dv(F),ee=Ct(u!=null?u:{},`ai/${c$}`),he=b$({model:Z,telemetry:f,headers:ee,settings:{...se,maxRetries:te}}),fe=await y$({system:o,prompt:n,messages:i}),V=x$(f);try{return await Xi({name:"ai.generateText",attributes:Br({telemetry:f,attributes:{...Yi({operationId:"ai.generateText",telemetry:f}),...he,"ai.model.provider":Z.provider,"ai.model.id":Z.modelId,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:n,messages:i})}}}),tracer:V,fn:async Ae=>{var T,pe,de,H,le,R,D,Q,B,G,Me;let sr=fe.messages,x=[],{approvedToolApprovals:ue,deniedToolApprovals:Oe}=E$({messages:sr}),De=ue.filter(Ze=>!Ze.toolCall.providerExecuted);if(Oe.length>0||De.length>0){let Ze=await b0({toolCalls:De.map(be=>be.toolCall),tools:t,tracer:V,telemetry:f,messages:sr,abortSignal:E,experimental_context:w}),It=[];for(let be of Ze){let tt=await Ji({toolCallId:be.toolCallId,input:be.input,tool:t==null?void 0:t[be.toolName],output:be.type==="tool-result"?be.output:be.error,errorMode:be.type==="tool-error"?"json":"none"});It.push({type:"tool-result",toolCallId:be.toolCallId,toolName:be.toolName,output:tt})}for(let be of Oe)It.push({type:"tool-result",toolCallId:be.toolCall.toolCallId,toolName:be.toolCall.toolName,output:{type:"execution-denied",reason:be.approvalResponse.reason,...be.toolCall.providerExecuted&&{providerOptions:{openai:{approvalId:be.approvalResponse.approvalId}}}}});x.push({role:"tool",content:It})}let at=[...ue,...Oe].filter(Ze=>Ze.toolCall.providerExecuted);at.length>0&&x.push({role:"tool",content:at.map(Ze=>({type:"tool-approval-response",approvalId:Ze.approvalResponse.approvalId,approved:Ze.approvalResponse.approved,reason:Ze.approvalResponse.reason,providerExecuted:!0}))});let gt=dv(F),ge,_t=[],Xt=[],ne=[],He=new Map;do{let Ze=q!=null?setTimeout(()=>C.abort(),q):void 0;try{let It=[...sr,...x],be=await(b==null?void 0:b({model:Z,steps:ne,stepNumber:ne.length,messages:It,experimental_context:w})),tt=Ju((T=be==null?void 0:be.model)!=null?T:Z),ct=await m$({prompt:{system:(pe=be==null?void 0:be.system)!=null?pe:fe.system,messages:(de=be==null?void 0:be.messages)!=null?de:It},supportedUrls:await tt.supportedUrls,download:k});w=(H=be==null?void 0:be.experimental_context)!=null?H:w;let{toolChoice:hn,tools:ho}=await f$({tools:t,toolChoice:(le=be==null?void 0:be.toolChoice)!=null?le:r,activeTools:(R=be==null?void 0:be.activeTools)!=null?R:y});ge=await P(()=>{var Ie;return Xi({name:"ai.generateText.doGenerate",attributes:Br({telemetry:f,attributes:{...Yi({operationId:"ai.generateText.doGenerate",telemetry:f}),...he,"ai.model.provider":tt.provider,"ai.model.id":tt.modelId,"ai.prompt.messages":{input:()=>S$(ct)},"ai.prompt.tools":{input:()=>ho==null?void 0:ho.map(Pt=>JSON.stringify(Pt))},"ai.prompt.toolChoice":{input:()=>hn!=null?JSON.stringify(hn):void 0},"gen_ai.system":tt.provider,"gen_ai.request.model":tt.modelId,"gen_ai.request.frequency_penalty":F.frequencyPenalty,"gen_ai.request.max_tokens":F.maxOutputTokens,"gen_ai.request.presence_penalty":F.presencePenalty,"gen_ai.request.stop_sequences":F.stopSequences,"gen_ai.request.temperature":(Ie=F.temperature)!=null?Ie:void 0,"gen_ai.request.top_k":F.topK,"gen_ai.request.top_p":F.topP}}),tracer:V,fn:async Pt=>{var Vn,Wr,ss,ls,Na,vo,Kr,ja;let Pc=Ku(v,be==null?void 0:be.providerOptions),St=await tt.doGenerate({...gt,tools:ho,toolChoice:hn,responseFormat:await(p==null?void 0:p.responseFormat),prompt:ct,providerOptions:Pc,abortSignal:E,headers:ee}),lr={id:(Wr=(Vn=St.response)==null?void 0:Vn.id)!=null?Wr:I(),timestamp:(ls=(ss=St.response)==null?void 0:ss.timestamp)!=null?ls:new Date,modelId:(vo=(Na=St.response)==null?void 0:Na.modelId)!=null?vo:tt.modelId,headers:(Kr=St.response)==null?void 0:Kr.headers,body:(ja=St.response)==null?void 0:ja.body};return Pt.setAttributes(await Br({telemetry:f,attributes:{"ai.response.finishReason":St.finishReason.unified,"ai.response.text":{output:()=>y0(St.content)},"ai.response.reasoning":{output:()=>v0(St.content)},"ai.response.toolCalls":{output:()=>{let yn=x0(St.content);return yn==null?void 0:JSON.stringify(yn)}},"ai.response.id":lr.id,"ai.response.model":lr.modelId,"ai.response.timestamp":lr.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(St.providerMetadata),"ai.usage.promptTokens":St.usage.inputTokens.total,"ai.usage.completionTokens":St.usage.outputTokens.total,"gen_ai.response.finish_reasons":[St.finishReason.unified],"gen_ai.response.id":lr.id,"gen_ai.response.model":lr.modelId,"gen_ai.usage.input_tokens":St.usage.inputTokens.total,"gen_ai.usage.output_tokens":St.usage.outputTokens.total}})),{...St,response:lr}}})});let vn=await Promise.all(ge.content.filter(Ie=>Ie.type==="tool-call").map(Ie=>P$({toolCall:Ie,tools:t,repairToolCall:_,system:o,messages:It}))),Cr={};for(let Ie of vn){if(Ie.invalid)continue;let Pt=t==null?void 0:t[Ie.toolName];Pt!=null&&((Pt==null?void 0:Pt.onInputAvailable)!=null&&await Pt.onInputAvailable({input:Ie.input,toolCallId:Ie.toolCallId,messages:It,abortSignal:E,experimental_context:w}),await A$({tool:Pt,toolCall:Ie,messages:It,experimental_context:w})&&(Cr[Ie.toolCallId]={type:"tool-approval-request",approvalId:I(),toolCall:Ie}))}let Ac=vn.filter(Ie=>Ie.invalid&&Ie.dynamic);Xt=[];for(let Ie of Ac)Xt.push({type:"tool-error",toolCallId:Ie.toolCallId,toolName:Ie.toolName,input:Ie.input,error:va(Ie.error),dynamic:!0});_t=vn.filter(Ie=>!Ie.providerExecuted),t!=null&&Xt.push(...await b0({toolCalls:_t.filter(Ie=>!Ie.invalid&&Cr[Ie.toolCallId]==null),tools:t,tracer:V,telemetry:f,messages:It,abortSignal:E,experimental_context:w}));for(let Ie of vn){if(!Ie.providerExecuted)continue;let Pt=t==null?void 0:t[Ie.toolName];(Pt==null?void 0:Pt.type)==="provider"&&Pt.supportsDeferredResults&&(ge.content.some(Wr=>Wr.type==="tool-result"&&Wr.toolCallId===Ie.toolCallId)||He.set(Ie.toolCallId,{toolName:Ie.toolName}))}for(let Ie of ge.content)Ie.type==="tool-result"&&He.delete(Ie.toolCallId);let Ma=V2({content:ge.content,toolCalls:vn,toolOutputs:Xt,toolApprovalRequests:Object.values(Cr),tools:t});x.push(...await pv({content:Ma,tools:t}));let is=(D=h==null?void 0:h.requestBody)==null||D?(Q=ge.request)!=null?Q:{}:{...ge.request,body:void 0},Zn={...ge.response,messages:structuredClone(x),body:(B=h==null?void 0:h.responseBody)==null||B?(G=ge.response)==null?void 0:G.body:void 0},Tt=new R$({content:Ma,finishReason:ge.finishReason.unified,rawFinishReason:ge.finishReason.raw,usage:k$(ge.usage),warnings:ge.warnings,providerMetadata:ge.providerMetadata,request:is,response:Zn});hv({warnings:(Me=ge.warnings)!=null?Me:[],provider:tt.provider,model:tt.modelId}),ne.push(Tt),await(j==null?void 0:j(Tt))}finally{Ze!=null&&clearTimeout(Ze)}}while((_t.length>0&&Xt.length===_t.length||He.size>0)&&!await N$({stopConditions:L,steps:ne}));Ae.setAttributes(await Br({telemetry:f,attributes:{"ai.response.finishReason":ge.finishReason.unified,"ai.response.text":{output:()=>y0(ge.content)},"ai.response.reasoning":{output:()=>v0(ge.content)},"ai.response.toolCalls":{output:()=>{let Ze=x0(ge.content);return Ze==null?void 0:JSON.stringify(Ze)}},"ai.response.providerMetadata":JSON.stringify(ge.providerMetadata),"ai.usage.promptTokens":ge.usage.inputTokens.total,"ai.usage.completionTokens":ge.usage.outputTokens.total}}));let Ue=ne[ne.length-1],gn=ne.reduce((Ze,It)=>I$(Ze,It.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0});await(U==null?void 0:U({finishReason:Ue.finishReason,rawFinishReason:Ue.rawFinishReason,usage:Ue.usage,content:Ue.content,text:Ue.text,reasoningText:Ue.reasoningText,reasoning:Ue.reasoning,files:Ue.files,sources:Ue.sources,toolCalls:Ue.toolCalls,staticToolCalls:Ue.staticToolCalls,dynamicToolCalls:Ue.dynamicToolCalls,toolResults:Ue.toolResults,staticToolResults:Ue.staticToolResults,dynamicToolResults:Ue.dynamicToolResults,request:Ue.request,response:Ue.response,warnings:Ue.warnings,providerMetadata:Ue.providerMetadata,steps:ne,totalUsage:gn,experimental_context:w}));let qn;return Ue.finishReason==="stop"&&(qn=await(p!=null?p:Wu()).parseCompleteOutput({text:Ue.text},{response:Ue.response,usage:Ue.usage,finishReason:Ue.finishReason})),new Z2({steps:ne,totalUsage:gn,output:qn})}})}catch(Ae){throw _$(Ae)}}async function b0({toolCalls:e,tools:t,tracer:r,telemetry:o,messages:n,abortSignal:i,experimental_context:s}){return(await Promise.all(e.map(async d=>yv({toolCall:d,tools:t,tracer:r,telemetry:o,messages:n,abortSignal:i,experimental_context:s})))).filter(d=>d!=null)}var Z2=class{constructor(e){this.steps=e.steps,this._output=e.output,this.totalUsage=e.totalUsage}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get rawFinishReason(){return this.finalStep.rawFinishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get experimental_output(){return this.output}get output(){if(this._output==null)throw new G0;return this._output}};function x0(e){let t=e.filter(r=>r.type==="tool-call");if(t.length!==0)return t.map(r=>({toolCallId:r.toolCallId,toolName:r.toolName,input:r.input}))}function V2({content:e,toolCalls:t,toolOutputs:r,toolApprovalRequests:o,tools:n}){let i=[];for(let s of e)switch(s.type){case"text":case"reasoning":case"source":i.push(s);break;case"file":{i.push({type:"file",file:new C$(s),...s.providerMetadata!=null?{providerMetadata:s.providerMetadata}:{}});break}case"tool-call":{i.push(t.find(l=>l.toolCallId===s.toolCallId));break}case"tool-result":{let l=t.find(d=>d.toolCallId===s.toolCallId);if(l==null){let d=n==null?void 0:n[s.toolName];if(!((d==null?void 0:d.type)==="provider"&&d.supportsDeferredResults))throw new Error(`Tool call ${s.toolCallId} not found.`);s.isError?i.push({type:"tool-error",toolCallId:s.toolCallId,toolName:s.toolName,input:void 0,error:s.result,providerExecuted:!0,dynamic:s.dynamic}):i.push({type:"tool-result",toolCallId:s.toolCallId,toolName:s.toolName,input:void 0,output:s.result,providerExecuted:!0,dynamic:s.dynamic});break}s.isError?i.push({type:"tool-error",toolCallId:s.toolCallId,toolName:s.toolName,input:l.input,error:s.result,providerExecuted:!0,dynamic:l.dynamic}):i.push({type:"tool-result",toolCallId:s.toolCallId,toolName:s.toolName,input:l.input,output:s.result,providerExecuted:!0,dynamic:l.dynamic});break}case"tool-approval-request":{let l=t.find(d=>d.toolCallId===s.toolCallId);if(l==null)throw new gv({toolCallId:s.toolCallId,approvalId:s.approvalId});i.push({type:"tool-approval-request",approvalId:s.approvalId,toolCall:l});break}}return[...i,...r,...o]}function Yu(e,t){let r=new Headers(e!=null?e:{});for(let[o,n]of Object.entries(t))r.has(o)||r.set(o,n);return r}function G2({status:e,statusText:t,headers:r,textStream:o}){return new Response(o.pipeThrough(new TextEncoderStream),{status:e!=null?e:200,statusText:t,headers:Yu(r,{"content-type":"text/plain; charset=utf-8"})})}function D$({response:e,status:t,statusText:r,headers:o,stream:n}){let i=t!=null?t:200;r!==void 0?e.writeHead(i,r,o):e.writeHead(i,o);let s=n.getReader();(async()=>{try{for(;;){let{done:d,value:u}=await s.read();if(d)break;e.write(u)||await new Promise(c=>{e.once("drain",c)})}}catch(d){throw d}finally{e.end()}})()}function H2({response:e,status:t,statusText:r,headers:o,textStream:n}){D$({response:e,status:t,statusText:r,headers:Object.fromEntries(Yu(o,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:n.pipeThrough(new TextEncoderStream)})}var z$=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},U$={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function B2({status:e,statusText:t,headers:r,stream:o,consumeSseStream:n}){let i=o.pipeThrough(new z$);if(n){let[s,l]=i.tee();i=s,n({stream:l})}return new Response(i.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:Yu(r,U$)})}function J2({originalMessages:e,responseMessageId:t}){if(e==null)return;let r=e[e.length-1];return(r==null?void 0:r.role)==="assistant"?r.id:typeof t=="function"?t():t}var OW=O(()=>A(a.union([a.strictObject({type:a.literal("text-start"),id:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("text-delta"),id:a.string(),delta:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("text-end"),id:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("error"),errorText:a.string()}),a.strictObject({type:a.literal("tool-input-start"),toolCallId:a.string(),toolName:a.string(),providerExecuted:a.boolean().optional(),providerMetadata:ve.optional(),dynamic:a.boolean().optional(),title:a.string().optional()}),a.strictObject({type:a.literal("tool-input-delta"),toolCallId:a.string(),inputTextDelta:a.string()}),a.strictObject({type:a.literal("tool-input-available"),toolCallId:a.string(),toolName:a.string(),input:a.unknown(),providerExecuted:a.boolean().optional(),providerMetadata:ve.optional(),dynamic:a.boolean().optional(),title:a.string().optional()}),a.strictObject({type:a.literal("tool-input-error"),toolCallId:a.string(),toolName:a.string(),input:a.unknown(),providerExecuted:a.boolean().optional(),providerMetadata:ve.optional(),dynamic:a.boolean().optional(),errorText:a.string(),title:a.string().optional()}),a.strictObject({type:a.literal("tool-approval-request"),approvalId:a.string(),toolCallId:a.string()}),a.strictObject({type:a.literal("tool-output-available"),toolCallId:a.string(),output:a.unknown(),providerExecuted:a.boolean().optional(),dynamic:a.boolean().optional(),preliminary:a.boolean().optional()}),a.strictObject({type:a.literal("tool-output-error"),toolCallId:a.string(),errorText:a.string(),providerExecuted:a.boolean().optional(),dynamic:a.boolean().optional()}),a.strictObject({type:a.literal("tool-output-denied"),toolCallId:a.string()}),a.strictObject({type:a.literal("reasoning-start"),id:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("reasoning-delta"),id:a.string(),delta:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("reasoning-end"),id:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("source-url"),sourceId:a.string(),url:a.string(),title:a.string().optional(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("source-document"),sourceId:a.string(),mediaType:a.string(),title:a.string(),filename:a.string().optional(),providerMetadata:ve.optional()}),a.strictObject({type:a.literal("file"),url:a.string(),mediaType:a.string(),providerMetadata:ve.optional()}),a.strictObject({type:a.custom(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:a.string().optional(),data:a.unknown(),transient:a.boolean().optional()}),a.strictObject({type:a.literal("start-step")}),a.strictObject({type:a.literal("finish-step")}),a.strictObject({type:a.literal("start"),messageId:a.string().optional(),messageMetadata:a.unknown().optional()}),a.strictObject({type:a.literal("finish"),finishReason:a.enum(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:a.unknown().optional()}),a.strictObject({type:a.literal("abort"),reason:a.string().optional()}),a.strictObject({type:a.literal("message-metadata"),messageMetadata:a.unknown()})])));function W2(e){return e.type.startsWith("data-")}function mv(e){return e.type.startsWith("tool-")}function K2(e){return e.type==="dynamic-tool"}function Y2(e){return mv(e)||K2(e)}function w0(e){return e.type.split("-").slice(1).join("-")}function X2({lastMessage:e,messageId:t}){return{message:(e==null?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Q2({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:o,onError:n,onToolCall:i,onData:s}){return e.pipeThrough(new TransformStream({async transform(l,d){await o(async({state:u,write:m})=>{var c,p,f,v;function g(_){let w=u.message.parts.filter(Y2).find(h=>h.toolCallId===_);if(w==null)throw new Pa({chunkType:"tool-invocation",chunkId:_,message:`No tool invocation found for tool call ID "${_}".`});return w}function y(_){var k;let w=u.message.parts.find(j=>mv(j)&&j.toolCallId===_.toolCallId),h=_,I=w;w!=null?(w.state=_.state,I.input=h.input,I.output=h.output,I.errorText=h.errorText,I.rawInput=h.rawInput,I.preliminary=h.preliminary,_.title!==void 0&&(I.title=_.title),I.providerExecuted=(k=h.providerExecuted)!=null?k:w.providerExecuted,h.providerMetadata!=null&&(w.callProviderMetadata=h.providerMetadata)):u.message.parts.push({type:`tool-${_.toolName}`,toolCallId:_.toolCallId,state:_.state,title:_.title,input:h.input,output:h.output,rawInput:h.rawInput,errorText:h.errorText,providerExecuted:h.providerExecuted,preliminary:h.preliminary,...h.providerMetadata!=null?{callProviderMetadata:h.providerMetadata}:{}})}function S(_){var k,w;let h=u.message.parts.find(U=>U.type==="dynamic-tool"&&U.toolCallId===_.toolCallId),I=_,j=h;h!=null?(h.state=_.state,j.toolName=_.toolName,j.input=I.input,j.output=I.output,j.errorText=I.errorText,j.rawInput=(k=I.rawInput)!=null?k:j.rawInput,j.preliminary=I.preliminary,_.title!==void 0&&(j.title=_.title),j.providerExecuted=(w=I.providerExecuted)!=null?w:h.providerExecuted,I.providerMetadata!=null&&(h.callProviderMetadata=I.providerMetadata)):u.message.parts.push({type:"dynamic-tool",toolName:_.toolName,toolCallId:_.toolCallId,state:_.state,input:I.input,output:I.output,errorText:I.errorText,preliminary:I.preliminary,providerExecuted:I.providerExecuted,title:_.title,...I.providerMetadata!=null?{callProviderMetadata:I.providerMetadata}:{}})}async function b(_){if(_!=null){let k=u.message.metadata!=null?Ku(u.message.metadata,_):_;t!=null&&await Je({value:k,schema:t,context:{field:"message.metadata",entityId:u.message.id}}),u.message.metadata=k}}switch(l.type){case"text-start":{let _={type:"text",text:"",providerMetadata:l.providerMetadata,state:"streaming"};u.activeTextParts[l.id]=_,u.message.parts.push(_),m();break}case"text-delta":{let _=u.activeTextParts[l.id];if(_==null)throw new Pa({chunkType:"text-delta",chunkId:l.id,message:`Received text-delta for missing text part with ID "${l.id}". Ensure a "text-start" chunk is sent before any "text-delta" chunks.`});_.text+=l.delta,_.providerMetadata=(c=l.providerMetadata)!=null?c:_.providerMetadata,m();break}case"text-end":{let _=u.activeTextParts[l.id];if(_==null)throw new Pa({chunkType:"text-end",chunkId:l.id,message:`Received text-end for missing text part with ID "${l.id}". Ensure a "text-start" chunk is sent before any "text-end" chunks.`});_.state="done",_.providerMetadata=(p=l.providerMetadata)!=null?p:_.providerMetadata,delete u.activeTextParts[l.id],m();break}case"reasoning-start":{let _={type:"reasoning",text:"",providerMetadata:l.providerMetadata,state:"streaming"};u.activeReasoningParts[l.id]=_,u.message.parts.push(_),m();break}case"reasoning-delta":{let _=u.activeReasoningParts[l.id];if(_==null)throw new Pa({chunkType:"reasoning-delta",chunkId:l.id,message:`Received reasoning-delta for missing reasoning part with ID "${l.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-delta" chunks.`});_.text+=l.delta,_.providerMetadata=(f=l.providerMetadata)!=null?f:_.providerMetadata,m();break}case"reasoning-end":{let _=u.activeReasoningParts[l.id];if(_==null)throw new Pa({chunkType:"reasoning-end",chunkId:l.id,message:`Received reasoning-end for missing reasoning part with ID "${l.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-end" chunks.`});_.providerMetadata=(v=l.providerMetadata)!=null?v:_.providerMetadata,_.state="done",delete u.activeReasoningParts[l.id],m();break}case"file":{u.message.parts.push({type:"file",mediaType:l.mediaType,url:l.url}),m();break}case"source-url":{u.message.parts.push({type:"source-url",sourceId:l.sourceId,url:l.url,title:l.title,providerMetadata:l.providerMetadata}),m();break}case"source-document":{u.message.parts.push({type:"source-document",sourceId:l.sourceId,mediaType:l.mediaType,title:l.title,filename:l.filename,providerMetadata:l.providerMetadata}),m();break}case"tool-input-start":{let _=u.message.parts.filter(mv);u.partialToolCalls[l.toolCallId]={text:"",toolName:l.toolName,index:_.length,dynamic:l.dynamic,title:l.title},l.dynamic?S({toolCallId:l.toolCallId,toolName:l.toolName,state:"input-streaming",input:void 0,providerExecuted:l.providerExecuted,title:l.title,providerMetadata:l.providerMetadata}):y({toolCallId:l.toolCallId,toolName:l.toolName,state:"input-streaming",input:void 0,providerExecuted:l.providerExecuted,title:l.title,providerMetadata:l.providerMetadata}),m();break}case"tool-input-delta":{let _=u.partialToolCalls[l.toolCallId];if(_==null)throw new Pa({chunkType:"tool-input-delta",chunkId:l.toolCallId,message:`Received tool-input-delta for missing tool call with ID "${l.toolCallId}". Ensure a "tool-input-start" chunk is sent before any "tool-input-delta" chunks.`});_.text+=l.inputTextDelta;let{value:k}=await Qi(_.text);_.dynamic?S({toolCallId:l.toolCallId,toolName:_.toolName,state:"input-streaming",input:k,title:_.title}):y({toolCallId:l.toolCallId,toolName:_.toolName,state:"input-streaming",input:k,title:_.title}),m();break}case"tool-input-available":{l.dynamic?S({toolCallId:l.toolCallId,toolName:l.toolName,state:"input-available",input:l.input,providerExecuted:l.providerExecuted,providerMetadata:l.providerMetadata,title:l.title}):y({toolCallId:l.toolCallId,toolName:l.toolName,state:"input-available",input:l.input,providerExecuted:l.providerExecuted,providerMetadata:l.providerMetadata,title:l.title}),m(),i&&!l.providerExecuted&&await i({toolCall:l});break}case"tool-input-error":{l.dynamic?S({toolCallId:l.toolCallId,toolName:l.toolName,state:"output-error",input:l.input,errorText:l.errorText,providerExecuted:l.providerExecuted,providerMetadata:l.providerMetadata}):y({toolCallId:l.toolCallId,toolName:l.toolName,state:"output-error",input:void 0,rawInput:l.input,errorText:l.errorText,providerExecuted:l.providerExecuted,providerMetadata:l.providerMetadata}),m();break}case"tool-approval-request":{let _=g(l.toolCallId);_.state="approval-requested",_.approval={id:l.approvalId},m();break}case"tool-output-denied":{let _=g(l.toolCallId);_.state="output-denied",m();break}case"tool-output-available":{let _=g(l.toolCallId);_.type==="dynamic-tool"?S({toolCallId:l.toolCallId,toolName:_.toolName,state:"output-available",input:_.input,output:l.output,preliminary:l.preliminary,providerExecuted:l.providerExecuted,title:_.title}):y({toolCallId:l.toolCallId,toolName:w0(_),state:"output-available",input:_.input,output:l.output,providerExecuted:l.providerExecuted,preliminary:l.preliminary,title:_.title}),m();break}case"tool-output-error":{let _=g(l.toolCallId);_.type==="dynamic-tool"?S({toolCallId:l.toolCallId,toolName:_.toolName,state:"output-error",input:_.input,errorText:l.errorText,providerExecuted:l.providerExecuted,title:_.title}):y({toolCallId:l.toolCallId,toolName:w0(_),state:"output-error",input:_.input,rawInput:_.rawInput,errorText:l.errorText,providerExecuted:l.providerExecuted,title:_.title}),m();break}case"start-step":{u.message.parts.push({type:"step-start"});break}case"finish-step":{u.activeTextParts={},u.activeReasoningParts={};break}case"start":{l.messageId!=null&&(u.message.id=l.messageId),await b(l.messageMetadata),(l.messageId!=null||l.messageMetadata!=null)&&m();break}case"finish":{l.finishReason!=null&&(u.finishReason=l.finishReason),await b(l.messageMetadata),l.messageMetadata!=null&&m();break}case"message-metadata":{await b(l.messageMetadata),l.messageMetadata!=null&&m();break}case"error":{n==null||n(new Error(l.errorText));break}default:if(W2(l)){if((r==null?void 0:r[l.type])!=null){let w=u.message.parts.findIndex(I=>"id"in I&&"data"in I&&I.id===l.id&&I.type===l.type),h=w>=0?w:u.message.parts.length;await Je({value:l.data,schema:r[l.type],context:{field:`message.parts[${h}].data`,entityName:l.type,entityId:l.id}})}let _=l;if(_.transient){s==null||s(_);break}let k=_.id!=null?u.message.parts.find(w=>_.type===w.type&&_.id===w.id):void 0;k!=null?k.data=_.data:u.message.parts.push(_),s==null||s(_),m()}}d.enqueue(l)})}}))}function eF({messageId:e,originalMessages:t=[],onFinish:r,onError:o,stream:n}){let i=t==null?void 0:t[t.length-1];(i==null?void 0:i.role)!=="assistant"?i=void 0:e=i.id;let s=!1,l=n.pipeThrough(new TransformStream({transform(p,f){if(p.type==="start"){let v=p;v.messageId==null&&e!=null&&(v.messageId=e)}p.type==="abort"&&(s=!0),f.enqueue(p)}}));if(r==null)return l;let d=X2({lastMessage:i?structuredClone(i):void 0,messageId:e!=null?e:""}),u=async p=>{await p({state:d,write:()=>{}})},m=!1,c=async()=>{if(m||!r)return;m=!0;let p=d.message.id===(i==null?void 0:i.id);await r({isAborted:s,isContinuation:p,responseMessage:d.message,messages:[...p?t.slice(0,-1):t,d.message],finishReason:d.finishReason})};return Q2({stream:l,runUpdateMessageJob:u,onError:o}).pipeThrough(new TransformStream({transform(p,f){f.enqueue(p)},async cancel(){await c()},async flush(){await c()}}))}function tF({response:e,status:t,statusText:r,headers:o,stream:n,consumeSseStream:i}){let s=n.pipeThrough(new z$);if(i){let[l,d]=s.tee();s=l,i({stream:d})}D$({response:e,status:t,statusText:r,headers:Object.fromEntries(Yu(o,U$).entries()),stream:s.pipeThrough(new TextEncoderStream)})}function Bi(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=function(){let r=this.getReader(),o=!1;async function n(i){var s;if(!o){o=!0;try{i&&await((s=r.cancel)==null?void 0:s.call(r))}finally{try{r.releaseLock()}catch(l){}}}}return{async next(){if(o)return{done:!0,value:void 0};let{done:i,value:s}=await r.read();return i?(await n(!0),{done:!0,value:void 0}):{done:!1,value:s}},async return(){return await n(!0),{done:!0,value:void 0}},async throw(i){throw await n(!0),i}}},t}async function rF({stream:e,onError:t}){let r=e.getReader();try{for(;;){let{done:o}=await r.read();if(o)break}}catch(o){t==null||t(o)}finally{r.releaseLock()}}function S0(){let e,t;return{promise:new Promise((o,n)=>{e=o,t=n}),resolve:e,reject:t}}function nF(){let e=[],t=null,r=!1,o=S0(),n=()=>{r=!0,o.resolve(),e.forEach(s=>s.cancel()),e=[],t==null||t.close()},i=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return o=S0(),await o.promise,i();try{let{value:s,done:l}=await e[0].read();l?(e.shift(),e.length===0&&r?t==null||t.close():await i()):t==null||t.enqueue(s)}catch(s){t==null||t.error(s),e.shift(),n()}};return{stream:new ReadableStream({start(s){t=s},pull:i,async cancel(){for(let s of e)await s.cancel();e=[],r=!0}}),addStream:s=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(s.getReader()),o.resolve()},close:()=>{r=!0,o.resolve(),e.length===0&&(t==null||t.close())},terminate:n}}function oF(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}function aF({tools:e,generatorStream:t,tracer:r,telemetry:o,system:n,messages:i,abortSignal:s,repairToolCall:l,experimental_context:d,generateId:u}){let m=null,c=new ReadableStream({start(_){m=_}}),p=new Set,f=new Map,v=new Map,g=!1,y;function S(){g&&p.size===0&&(y!=null&&m.enqueue(y),m.close())}let b=new TransformStream({async transform(_,k){let w=_.type;switch(w){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{k.enqueue(_);break}case"file":{k.enqueue({type:"file",file:new N2({data:_.data,mediaType:_.mediaType})});break}case"finish":{y={type:"finish",finishReason:_.finishReason.unified,rawFinishReason:_.finishReason.raw,usage:k$(_.usage),providerMetadata:_.providerMetadata};break}case"tool-approval-request":{let h=v.get(_.toolCallId);if(h==null){m.enqueue({type:"error",error:new gv({toolCallId:_.toolCallId,approvalId:_.approvalId})});break}k.enqueue({type:"tool-approval-request",approvalId:_.approvalId,toolCall:h});break}case"tool-call":{try{let h=await P$({toolCall:_,tools:e,repairToolCall:l,system:n,messages:i});if(v.set(h.toolCallId,h),k.enqueue(h),h.invalid){m.enqueue({type:"tool-error",toolCallId:h.toolCallId,toolName:h.toolName,input:h.input,error:va(h.error),dynamic:!0,title:h.title});break}let I=e==null?void 0:e[h.toolName];if(I==null)break;if(I.onInputAvailable!=null&&await I.onInputAvailable({input:h.input,toolCallId:h.toolCallId,messages:i,abortSignal:s,experimental_context:d}),await A$({tool:I,toolCall:h,messages:i,experimental_context:d})){m.enqueue({type:"tool-approval-request",approvalId:u(),toolCall:h});break}if(f.set(h.toolCallId,h.input),I.execute!=null&&h.providerExecuted!==!0){let j=u();p.add(j),yv({toolCall:h,tools:e,tracer:r,telemetry:o,messages:i,abortSignal:s,experimental_context:d,onPreliminaryToolResult:U=>{m.enqueue(U)}}).then(U=>{m.enqueue(U)}).catch(U=>{m.enqueue({type:"error",error:U})}).finally(()=>{p.delete(j),S()})}}catch(h){m.enqueue({type:"error",error:h})}break}case"tool-result":{let h=_.toolName;_.isError?m.enqueue({type:"tool-error",toolCallId:_.toolCallId,toolName:h,input:f.get(_.toolCallId),providerExecuted:!0,error:_.result,dynamic:_.dynamic}):k.enqueue({type:"tool-result",toolCallId:_.toolCallId,toolName:h,input:f.get(_.toolCallId),output:_.result,providerExecuted:!0,dynamic:_.dynamic});break}default:{let h=w;throw new Error(`Unhandled chunk type: ${h}`)}}},flush(){g=!0,S()}});return new ReadableStream({async start(_){return Promise.all([t.pipeThrough(b).pipeTo(new WritableStream({write(k){_.enqueue(k)},close(){}})),c.pipeTo(new WritableStream({write(k){_.enqueue(k)},close(){_.close()}}))])}})}var iF=qr({prefix:"aitxt",size:24});function bv({model:e,tools:t,toolChoice:r,system:o,prompt:n,messages:i,maxRetries:s,abortSignal:l,timeout:d,headers:u,stopWhen:m=M$(1),experimental_output:c,output:p=c,experimental_telemetry:f,prepareStep:v,providerOptions:g,experimental_activeTools:y,activeTools:S=y,experimental_repairToolCall:b,experimental_transform:_,experimental_download:k,includeRawChunks:w=!1,onChunk:h,onError:I=({error:E})=>{},onFinish:j,onAbort:U,onStepFinish:F,experimental_context:Z,experimental_include:L,_internal:{now:M=oF,generateId:q=iF}={},...C}){let E=vv(d),te=u$(d),P=s2(d),se=te!=null?new AbortController:void 0,ee=P!=null?new AbortController:void 0;return new lF({model:Ju(e),telemetry:f,headers:u,settings:C,maxRetries:s,abortSignal:j$(l,E!=null?AbortSignal.timeout(E):void 0,se==null?void 0:se.signal,ee==null?void 0:ee.signal),stepTimeoutMs:te,stepAbortController:se,chunkTimeoutMs:P,chunkAbortController:ee,system:o,prompt:n,messages:i,tools:t,toolChoice:r,transforms:Wi(_),activeTools:S,repairToolCall:b,stopConditions:Wi(m),output:p,providerOptions:g,prepareStep:v,includeRawChunks:w,onChunk:h,onError:I,onFinish:j,onAbort:U,onStepFinish:F,now:M,generateId:q,experimental_context:Z,download:k,include:L})}function sF(e){let t,r="",o="",n,i="";function s({controller:l,partialOutput:d=void 0}){l.enqueue({part:{type:"text-delta",id:t,text:o,providerMetadata:n},partialOutput:d}),o=""}return new TransformStream({async transform(l,d){var u;if(l.type==="finish-step"&&o.length>0&&s({controller:d}),l.type!=="text-delta"&&l.type!=="text-start"&&l.type!=="text-end"){d.enqueue({part:l,partialOutput:void 0});return}if(t==null)t=l.id;else if(l.id!==t){d.enqueue({part:l,partialOutput:void 0});return}if(l.type==="text-start"){d.enqueue({part:l,partialOutput:void 0});return}if(l.type==="text-end"){o.length>0&&s({controller:d}),d.enqueue({part:l,partialOutput:void 0});return}r+=l.text,o+=l.text,n=(u=l.providerMetadata)!=null?u:n;let m=await e.parsePartialOutput({text:r});if(m!==void 0){let c=JSON.stringify(m.partial);c!==i&&(s({controller:d,partialOutput:m.partial}),i=c)}}})}var lF=class{constructor({model:e,telemetry:t,headers:r,settings:o,maxRetries:n,abortSignal:i,stepTimeoutMs:s,stepAbortController:l,chunkTimeoutMs:d,chunkAbortController:u,system:m,prompt:c,messages:p,tools:f,toolChoice:v,transforms:g,activeTools:y,repairToolCall:S,stopConditions:b,output:_,providerOptions:k,prepareStep:w,includeRawChunks:h,now:I,generateId:j,onChunk:U,onError:F,onFinish:Z,onAbort:L,onStepFinish:M,experimental_context:q,download:C,include:E}){this._totalUsage=new so,this._finishReason=new so,this._rawFinishReason=new so,this._steps=new so,this.outputSpecification=_,this.includeRawChunks=h,this.tools=f;let te,P=[],se=[],ee,he,fe,V={},Ae=[],T=[],pe=new Map,de,H={},le={},R=new TransformStream({async transform(De,at){var gt,ge,_t,Xt;at.enqueue(De);let{part:ne}=De;if((ne.type==="text-delta"||ne.type==="reasoning-delta"||ne.type==="source"||ne.type==="tool-call"||ne.type==="tool-result"||ne.type==="tool-input-start"||ne.type==="tool-input-delta"||ne.type==="raw")&&await(U==null?void 0:U({chunk:ne})),ne.type==="error"&&await F({error:_$(ne.error)}),ne.type==="text-start"&&(H[ne.id]={type:"text",text:"",providerMetadata:ne.providerMetadata},P.push(H[ne.id])),ne.type==="text-delta"){let He=H[ne.id];if(He==null){at.enqueue({part:{type:"error",error:`text part ${ne.id} not found`},partialOutput:void 0});return}He.text+=ne.text,He.providerMetadata=(gt=ne.providerMetadata)!=null?gt:He.providerMetadata}if(ne.type==="text-end"){let He=H[ne.id];if(He==null){at.enqueue({part:{type:"error",error:`text part ${ne.id} not found`},partialOutput:void 0});return}He.providerMetadata=(ge=ne.providerMetadata)!=null?ge:He.providerMetadata,delete H[ne.id]}if(ne.type==="reasoning-start"&&(le[ne.id]={type:"reasoning",text:"",providerMetadata:ne.providerMetadata},P.push(le[ne.id])),ne.type==="reasoning-delta"){let He=le[ne.id];if(He==null){at.enqueue({part:{type:"error",error:`reasoning part ${ne.id} not found`},partialOutput:void 0});return}He.text+=ne.text,He.providerMetadata=(_t=ne.providerMetadata)!=null?_t:He.providerMetadata}if(ne.type==="reasoning-end"){let He=le[ne.id];if(He==null){at.enqueue({part:{type:"error",error:`reasoning part ${ne.id} not found`},partialOutput:void 0});return}He.providerMetadata=(Xt=ne.providerMetadata)!=null?Xt:He.providerMetadata,delete le[ne.id]}if(ne.type==="file"&&P.push({type:"file",file:ne.file}),ne.type==="source"&&P.push(ne),ne.type==="tool-call"&&P.push(ne),ne.type==="tool-result"&&!ne.preliminary&&P.push(ne),ne.type==="tool-approval-request"&&P.push(ne),ne.type==="tool-error"&&P.push(ne),ne.type==="start-step"&&(P=[],le={},H={},V=ne.request,Ae=ne.warnings),ne.type==="finish-step"){let He=await pv({content:P,tools:f}),Ue=new R$({content:P,finishReason:ne.finishReason,rawFinishReason:ne.rawFinishReason,usage:ne.usage,warnings:Ae,request:V,response:{...ne.response,messages:[...se,...He]},providerMetadata:ne.providerMetadata});await(M==null?void 0:M(Ue)),hv({warnings:Ae,provider:e.provider,model:e.modelId}),T.push(Ue),se.push(...He),te.resolve()}ne.type==="finish"&&(fe=ne.totalUsage,ee=ne.finishReason,he=ne.rawFinishReason)},async flush(De){try{if(T.length===0){let _t=i!=null&&i.aborted?i.reason:new G0({message:"No output generated. Check the stream for errors."});Oe._finishReason.reject(_t),Oe._rawFinishReason.reject(_t),Oe._totalUsage.reject(_t),Oe._steps.reject(_t);return}let at=ee!=null?ee:"other",gt=fe!=null?fe:uv();Oe._finishReason.resolve(at),Oe._rawFinishReason.resolve(he),Oe._totalUsage.resolve(gt),Oe._steps.resolve(T);let ge=T[T.length-1];await(Z==null?void 0:Z({finishReason:ge.finishReason,rawFinishReason:ge.rawFinishReason,totalUsage:gt,usage:ge.usage,content:ge.content,text:ge.text,reasoningText:ge.reasoningText,reasoning:ge.reasoning,files:ge.files,sources:ge.sources,toolCalls:ge.toolCalls,staticToolCalls:ge.staticToolCalls,dynamicToolCalls:ge.dynamicToolCalls,toolResults:ge.toolResults,staticToolResults:ge.staticToolResults,dynamicToolResults:ge.dynamicToolResults,request:ge.request,response:ge.response,warnings:ge.warnings,providerMetadata:ge.providerMetadata,steps:T,experimental_context:q})),de.setAttributes(await Br({telemetry:t,attributes:{"ai.response.finishReason":at,"ai.response.text":{output:()=>ge.text},"ai.response.reasoning":{output:()=>ge.reasoningText},"ai.response.toolCalls":{output:()=>{var _t;return(_t=ge.toolCalls)!=null&&_t.length?JSON.stringify(ge.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(ge.providerMetadata),"ai.usage.inputTokens":gt.inputTokens,"ai.usage.outputTokens":gt.outputTokens,"ai.usage.totalTokens":gt.totalTokens,"ai.usage.reasoningTokens":gt.reasoningTokens,"ai.usage.cachedInputTokens":gt.cachedInputTokens}}))}catch(at){De.error(at)}finally{de.end()}}}),D=nF();this.addStream=D.addStream,this.closeStream=D.close;let Q=D.stream.getReader(),B=new ReadableStream({async start(De){De.enqueue({type:"start"})},async pull(De){function at(){L==null||L({steps:T}),De.enqueue({type:"abort",...(i==null?void 0:i.reason)!==void 0?{reason:fr(i.reason)}:{}}),De.close()}try{let{done:gt,value:ge}=await Q.read();if(gt){De.close();return}if(i!=null&&i.aborted){at();return}De.enqueue(ge)}catch(gt){un(gt)&&(i!=null&&i.aborted)?at():De.error(gt)}},cancel(De){return D.stream.cancel(De)}});for(let De of g)B=B.pipeThrough(De({tools:f,stopStream(){D.terminate()}}));this.baseStream=B.pipeThrough(sF(_!=null?_:Wu())).pipeThrough(R);let{maxRetries:G,retry:Me}=$$({maxRetries:n,abortSignal:i}),sr=x$(t),x=dv(o),ue=b$({model:e,telemetry:t,headers:r,settings:{...x,maxRetries:G}}),Oe=this;Xi({name:"ai.streamText",attributes:Br({telemetry:t,attributes:{...Yi({operationId:"ai.streamText",telemetry:t}),...ue,"ai.prompt":{input:()=>JSON.stringify({system:m,prompt:c,messages:p})}}}),tracer:sr,endWhenDone:!1,fn:async De=>{de=De;let at=await y$({system:m,prompt:c,messages:p}),gt=at.messages,ge=[],{approvedToolApprovals:_t,deniedToolApprovals:Xt}=E$({messages:gt});if(Xt.length>0||_t.length>0){let He=[..._t,...Xt].filter(be=>be.toolCall.providerExecuted),Ue=_t.filter(be=>!be.toolCall.providerExecuted),gn=Xt.filter(be=>!be.toolCall.providerExecuted),qn=Xt.filter(be=>be.toolCall.providerExecuted),Ze,It=new ReadableStream({start(be){Ze=be}});Oe.addStream(It);try{for(let tt of[...gn,...qn])Ze==null||Ze.enqueue({type:"tool-output-denied",toolCallId:tt.toolCall.toolCallId,toolName:tt.toolCall.toolName});let be=[];if(await Promise.all(Ue.map(async tt=>{let ct=await yv({toolCall:tt.toolCall,tools:f,tracer:sr,telemetry:t,messages:gt,abortSignal:i,experimental_context:q,onPreliminaryToolResult:hn=>{Ze==null||Ze.enqueue(hn)}});ct!=null&&(Ze==null||Ze.enqueue(ct),be.push(ct))})),He.length>0&&ge.push({role:"tool",content:He.map(tt=>({type:"tool-approval-response",approvalId:tt.approvalResponse.approvalId,approved:tt.approvalResponse.approved,reason:tt.approvalResponse.reason,providerExecuted:!0}))}),be.length>0||gn.length>0){let tt=[];for(let ct of be)tt.push({type:"tool-result",toolCallId:ct.toolCallId,toolName:ct.toolName,output:await Ji({toolCallId:ct.toolCallId,input:ct.input,tool:f==null?void 0:f[ct.toolName],output:ct.type==="tool-result"?ct.output:ct.error,errorMode:ct.type==="tool-error"?"json":"none"})});for(let ct of gn)tt.push({type:"tool-result",toolCallId:ct.toolCall.toolCallId,toolName:ct.toolCall.toolName,output:{type:"execution-denied",reason:ct.approvalResponse.reason}});ge.push({role:"tool",content:tt})}}finally{Ze==null||Ze.close()}}se.push(...ge);async function ne({currentStep:He,responseMessages:Ue,usage:gn}){var qn,Ze,It,be,tt,ct,hn;let ho=Oe.includeRawChunks,vn=s!=null?setTimeout(()=>l.abort(),s):void 0,Cr;function Ac(){d!=null&&(Cr!=null&&clearTimeout(Cr),Cr=setTimeout(()=>u.abort(),d))}function Ma(){Cr!=null&&(clearTimeout(Cr),Cr=void 0)}function is(){vn!=null&&clearTimeout(vn)}try{te=new so;let Zn=[...gt,...Ue],Tt=await(w==null?void 0:w({model:e,steps:T,stepNumber:T.length,messages:Zn,experimental_context:q})),Ie=Ju((qn=Tt==null?void 0:Tt.model)!=null?qn:e),Pt=await m$({prompt:{system:(Ze=Tt==null?void 0:Tt.system)!=null?Ze:at.system,messages:(It=Tt==null?void 0:Tt.messages)!=null?It:Zn},supportedUrls:await Ie.supportedUrls,download:C}),{toolChoice:Vn,tools:Wr}=await f$({tools:f,toolChoice:(be=Tt==null?void 0:Tt.toolChoice)!=null?be:v,activeTools:(tt=Tt==null?void 0:Tt.activeTools)!=null?tt:y});q=(ct=Tt==null?void 0:Tt.experimental_context)!=null?ct:q;let ss=Ku(k,Tt==null?void 0:Tt.providerOptions),{result:{stream:ls,response:Na,request:vo},doStreamSpan:Kr,startTimestampMs:ja}=await Me(()=>Xi({name:"ai.streamText.doStream",attributes:Br({telemetry:t,attributes:{...Yi({operationId:"ai.streamText.doStream",telemetry:t}),...ue,"ai.model.provider":Ie.provider,"ai.model.id":Ie.modelId,"ai.prompt.messages":{input:()=>S$(Pt)},"ai.prompt.tools":{input:()=>Wr==null?void 0:Wr.map(ye=>JSON.stringify(ye))},"ai.prompt.toolChoice":{input:()=>Vn!=null?JSON.stringify(Vn):void 0},"gen_ai.system":Ie.provider,"gen_ai.request.model":Ie.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxOutputTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.stop_sequences":x.stopSequences,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:sr,endWhenDone:!1,fn:async ye=>({startTimestampMs:I(),doStreamSpan:ye,result:await Ie.doStream({...x,tools:Wr,toolChoice:Vn,responseFormat:await(_==null?void 0:_.responseFormat),prompt:Pt,providerOptions:ss,abortSignal:i,headers:r,includeRawChunks:ho})})})),Pc=aF({tools:f,generatorStream:ls,tracer:sr,telemetry:t,system:m,messages:Zn,repairToolCall:S,abortSignal:i,experimental_context:q,generateId:j}),St=(hn=E==null?void 0:E.requestBody)==null||hn?vo!=null?vo:{}:{...vo,body:void 0},lr=[],yn=[],Oc,Rc={},yo="other",Mc,mr=uv(),Nc,$v=!0,Ar={id:j(),timestamp:new Date,modelId:e.modelId},Ev="";Oe.addStream(Pc.pipeThrough(new TransformStream({async transform(ye,$t){var Da,za,us,pt,Pr;if(Ac(),ye.type==="stream-start"){Oc=ye.warnings;return}if($v){let ht=I()-ja;$v=!1,Kr.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ht}),Kr.setAttributes({"ai.response.msToFirstChunk":ht}),$t.enqueue({type:"start-step",request:St,warnings:Oc!=null?Oc:[]})}let jc=ye.type;switch(jc){case"tool-approval-request":case"text-start":case"text-end":{$t.enqueue(ye);break}case"text-delta":{ye.delta.length>0&&($t.enqueue({type:"text-delta",id:ye.id,text:ye.delta,providerMetadata:ye.providerMetadata}),Ev+=ye.delta);break}case"reasoning-start":case"reasoning-end":{$t.enqueue(ye);break}case"reasoning-delta":{$t.enqueue({type:"reasoning-delta",id:ye.id,text:ye.delta,providerMetadata:ye.providerMetadata});break}case"tool-call":{$t.enqueue(ye),lr.push(ye);break}case"tool-result":{$t.enqueue(ye),ye.preliminary||yn.push(ye);break}case"tool-error":{$t.enqueue(ye),yn.push(ye);break}case"response-metadata":{Ar={id:(Da=ye.id)!=null?Da:Ar.id,timestamp:(za=ye.timestamp)!=null?za:Ar.timestamp,modelId:(us=ye.modelId)!=null?us:Ar.modelId};break}case"finish":{mr=ye.usage,yo=ye.finishReason,Mc=ye.rawFinishReason,Nc=ye.providerMetadata;let ht=I()-ja;Kr.addEvent("ai.stream.finish"),Kr.setAttributes({"ai.response.msToFinish":ht,"ai.response.avgOutputTokensPerSecond":1e3*((pt=mr.outputTokens)!=null?pt:0)/ht});break}case"file":{$t.enqueue(ye);break}case"source":{$t.enqueue(ye);break}case"tool-input-start":{Rc[ye.id]=ye.toolName;let ht=f==null?void 0:f[ye.toolName];(ht==null?void 0:ht.onInputStart)!=null&&await ht.onInputStart({toolCallId:ye.id,messages:Zn,abortSignal:i,experimental_context:q}),$t.enqueue({...ye,dynamic:(Pr=ye.dynamic)!=null?Pr:(ht==null?void 0:ht.type)==="dynamic",title:ht==null?void 0:ht.title});break}case"tool-input-end":{delete Rc[ye.id],$t.enqueue(ye);break}case"tool-input-delta":{let ht=Rc[ye.id],Dc=f==null?void 0:f[ht];(Dc==null?void 0:Dc.onInputDelta)!=null&&await Dc.onInputDelta({inputTextDelta:ye.delta,toolCallId:ye.id,messages:Zn,abortSignal:i,experimental_context:q}),$t.enqueue(ye);break}case"error":{$t.enqueue(ye),yo="error";break}case"raw":{ho&&$t.enqueue(ye);break}default:{let ht=jc;throw new Error(`Unknown chunk type: ${ht}`)}}},async flush(ye){let $t=lr.length>0?JSON.stringify(lr):void 0;try{Kr.setAttributes(await Br({telemetry:t,attributes:{"ai.response.finishReason":yo,"ai.response.text":{output:()=>Ev},"ai.response.reasoning":{output:()=>{let pt=P.filter(Pr=>Pr.type==="reasoning");return pt.length>0?pt.map(Pr=>Pr.text).join(`
`):void 0}},"ai.response.toolCalls":{output:()=>$t},"ai.response.id":Ar.id,"ai.response.model":Ar.modelId,"ai.response.timestamp":Ar.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Nc),"ai.usage.inputTokens":mr.inputTokens,"ai.usage.outputTokens":mr.outputTokens,"ai.usage.totalTokens":mr.totalTokens,"ai.usage.reasoningTokens":mr.reasoningTokens,"ai.usage.cachedInputTokens":mr.cachedInputTokens,"gen_ai.response.finish_reasons":[yo],"gen_ai.response.id":Ar.id,"gen_ai.response.model":Ar.modelId,"gen_ai.usage.input_tokens":mr.inputTokens,"gen_ai.usage.output_tokens":mr.outputTokens}}))}catch(pt){}finally{Kr.end()}ye.enqueue({type:"finish-step",finishReason:yo,rawFinishReason:Mc,usage:mr,providerMetadata:Nc,response:{...Ar,headers:Na==null?void 0:Na.headers}});let Da=I$(gn,mr);await te.promise;let za=lr.filter(pt=>pt.providerExecuted!==!0),us=yn.filter(pt=>pt.providerExecuted!==!0);for(let pt of lr){if(pt.providerExecuted!==!0)continue;let Pr=f==null?void 0:f[pt.toolName];(Pr==null?void 0:Pr.type)==="provider"&&Pr.supportsDeferredResults&&(yn.some(ht=>(ht.type==="tool-result"||ht.type==="tool-error")&&ht.toolCallId===pt.toolCallId)||pe.set(pt.toolCallId,{toolName:pt.toolName}))}for(let pt of yn)(pt.type==="tool-result"||pt.type==="tool-error")&&pe.delete(pt.toolCallId);if(is(),Ma(),(za.length>0&&us.length===za.length||pe.size>0)&&!await N$({stopConditions:b,steps:T})){Ue.push(...await pv({content:T[T.length-1].content,tools:f}));try{await ne({currentStep:He+1,responseMessages:Ue,usage:Da})}catch(pt){ye.enqueue({type:"error",error:pt}),Oe.closeStream()}}else ye.enqueue({type:"finish",finishReason:yo,rawFinishReason:Mc,totalUsage:Da}),Oe.closeStream()}})))}finally{is(),Ma()}}await ne({currentStep:0,responseMessages:ge,usage:uv()})}}).catch(De=>{Oe.addStream(new ReadableStream({start(at){at.enqueue({type:"error",error:De}),at.close()}})),Oe.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}get rawFinishReason(){return this.consumeStream(),this._rawFinishReason.promise}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return Bi(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.text)}})))}get fullStream(){return Bi(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await rF({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(r){(t=e==null?void 0:e.onError)==null||t.call(e,r)}}get experimental_partialOutputStream(){return this.partialOutputStream}get partialOutputStream(){return Bi(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}get elementStream(){var e,t,r;let o=(e=this.outputSpecification)==null?void 0:e.createElementStreamTransform();if(o==null)throw new Re({functionality:`element streams in ${(r=(t=this.outputSpecification)==null?void 0:t.name)!=null?r:"text"} mode`});return Bi(this.teeStream().pipeThrough(o))}get output(){return this.finalStep.then(e=>{var t;return((t=this.outputSpecification)!=null?t:Wu()).parseCompleteOutput({text:e.text},{response:e.response,usage:e.usage,finishReason:e.finishReason})})}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:o,sendReasoning:n=!0,sendSources:i=!1,sendStart:s=!0,sendFinish:l=!0,onError:d=fr}={}){let u=t!=null?J2({originalMessages:e,responseMessageId:t}):void 0,m=p=>{var f;let v=(f=this.tools)==null?void 0:f[p.toolName];return v==null?p.dynamic:(v==null?void 0:v.type)==="dynamic"?!0:void 0},c=this.fullStream.pipeThrough(new TransformStream({transform:async(p,f)=>{let v=o==null?void 0:o({part:p}),g=p.type;switch(g){case"text-start":{f.enqueue({type:"text-start",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"text-delta":{f.enqueue({type:"text-delta",id:p.id,delta:p.text,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"text-end":{f.enqueue({type:"text-end",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"reasoning-start":{f.enqueue({type:"reasoning-start",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"reasoning-delta":{n&&f.enqueue({type:"reasoning-delta",id:p.id,delta:p.text,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"reasoning-end":{f.enqueue({type:"reasoning-end",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"file":{f.enqueue({type:"file",mediaType:p.file.mediaType,url:`data:${p.file.mediaType};base64,${p.file.base64}`});break}case"source":{i&&p.sourceType==="url"&&f.enqueue({type:"source-url",sourceId:p.id,url:p.url,title:p.title,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}}),i&&p.sourceType==="document"&&f.enqueue({type:"source-document",sourceId:p.id,mediaType:p.mediaType,title:p.title,filename:p.filename,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"tool-input-start":{let y=m(p);f.enqueue({type:"tool-input-start",toolCallId:p.id,toolName:p.toolName,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{},...y!=null?{dynamic:y}:{},...p.title!=null?{title:p.title}:{}});break}case"tool-input-delta":{f.enqueue({type:"tool-input-delta",toolCallId:p.id,inputTextDelta:p.delta});break}case"tool-call":{let y=m(p);p.invalid?f.enqueue({type:"tool-input-error",toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{},...y!=null?{dynamic:y}:{},errorText:d(p.error),...p.title!=null?{title:p.title}:{}}):f.enqueue({type:"tool-input-available",toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{},...y!=null?{dynamic:y}:{},...p.title!=null?{title:p.title}:{}});break}case"tool-approval-request":{f.enqueue({type:"tool-approval-request",approvalId:p.approvalId,toolCallId:p.toolCall.toolCallId});break}case"tool-result":{let y=m(p);f.enqueue({type:"tool-output-available",toolCallId:p.toolCallId,output:p.output,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.preliminary!=null?{preliminary:p.preliminary}:{},...y!=null?{dynamic:y}:{}});break}case"tool-error":{let y=m(p);f.enqueue({type:"tool-output-error",toolCallId:p.toolCallId,errorText:d(p.error),...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...y!=null?{dynamic:y}:{}});break}case"tool-output-denied":{f.enqueue({type:"tool-output-denied",toolCallId:p.toolCallId});break}case"error":{f.enqueue({type:"error",errorText:d(p.error)});break}case"start-step":{f.enqueue({type:"start-step"});break}case"finish-step":{f.enqueue({type:"finish-step"});break}case"start":{s&&f.enqueue({type:"start",...v!=null?{messageMetadata:v}:{},...u!=null?{messageId:u}:{}});break}case"finish":{l&&f.enqueue({type:"finish",finishReason:p.finishReason,...v!=null?{messageMetadata:v}:{}});break}case"abort":{f.enqueue(p);break}case"tool-input-end":break;case"raw":break;default:{let y=g;throw new Error(`Unknown chunk type: ${y}`)}}v!=null&&g!=="start"&&g!=="finish"&&f.enqueue({type:"message-metadata",messageMetadata:v})}}));return Bi(eF({stream:c,messageId:u!=null?u:t==null?void 0:t(),originalMessages:e,onFinish:r,onError:d}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:r,onFinish:o,messageMetadata:n,sendReasoning:i,sendSources:s,sendFinish:l,sendStart:d,onError:u,...m}={}){tF({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:r,onFinish:o,messageMetadata:n,sendReasoning:i,sendSources:s,sendFinish:l,sendStart:d,onError:u}),...m})}pipeTextStreamToResponse(e,t){H2({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:o,sendReasoning:n,sendSources:i,sendFinish:s,sendStart:l,onError:d,...u}={}){return B2({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:o,sendReasoning:n,sendSources:i,sendFinish:s,sendStart:l,onError:d}),...u})}toTextStreamResponse(e){return G2({textStream:this.textStream,...e})}};var jW=O(()=>A(a.array(a.object({id:a.string(),role:a.enum(["system","user","assistant"]),metadata:a.unknown().optional(),parts:a.array(a.union([a.object({type:a.literal("text"),text:a.string(),state:a.enum(["streaming","done"]).optional(),providerMetadata:ve.optional()}),a.object({type:a.literal("reasoning"),text:a.string(),state:a.enum(["streaming","done"]).optional(),providerMetadata:ve.optional()}),a.object({type:a.literal("source-url"),sourceId:a.string(),url:a.string(),title:a.string().optional(),providerMetadata:ve.optional()}),a.object({type:a.literal("source-document"),sourceId:a.string(),mediaType:a.string(),title:a.string(),filename:a.string().optional(),providerMetadata:ve.optional()}),a.object({type:a.literal("file"),mediaType:a.string(),filename:a.string().optional(),url:a.string(),providerMetadata:ve.optional()}),a.object({type:a.literal("step-start")}),a.object({type:a.string().startsWith("data-"),id:a.string().optional(),data:a.unknown()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("input-streaming"),input:a.unknown().optional(),providerExecuted:a.boolean().optional(),callProviderMetadata:ve.optional(),output:a.never().optional(),errorText:a.never().optional(),approval:a.never().optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("input-available"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.never().optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("approval-requested"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.never().optional(),reason:a.never().optional()})}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("approval-responded"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.boolean(),reason:a.string().optional()})}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("output-available"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.unknown(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),preliminary:a.boolean().optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("output-error"),input:a.unknown(),rawInput:a.unknown().optional(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.string(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("output-denied"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.literal(!1),reason:a.string().optional()})}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("input-streaming"),providerExecuted:a.boolean().optional(),callProviderMetadata:ve.optional(),input:a.unknown().optional(),output:a.never().optional(),errorText:a.never().optional(),approval:a.never().optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("input-available"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.never().optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("approval-requested"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.never().optional(),reason:a.never().optional()})}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("approval-responded"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.boolean(),reason:a.string().optional()})}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("output-available"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.unknown(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),preliminary:a.boolean().optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("output-error"),providerExecuted:a.boolean().optional(),input:a.unknown(),rawInput:a.unknown().optional(),output:a.never().optional(),errorText:a.string(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("output-denied"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:ve.optional(),approval:a.object({id:a.string(),approved:a.literal(!1),reason:a.string().optional()})})])).nonempty("Message must contain at least one part")})).nonempty("Messages array must not be empty")));var zW=qr({prefix:"aiobj",size:24});var FW=qr({prefix:"aiobj",size:24});var uF="AI_NoSuchProviderError",cF=`vercel.ai.error.${uF}`,dF=Symbol.for(cF),pF;pF=dF;var jt=class{getSystemMessageRole(){return"system"}supportsSystemField(){return!1}supportsToolCalling(){return!0}requiresApiKey(){return!0}extractModelName(t){return t.startsWith(`${this.type}@`)?t.substring(this.type.length+1):t}prefixModelId(t){return`${this.type}@${t}`}handleFetchError(t,r){let o=r||`Error fetching ${this.displayName} models`}validateApiKey(t){return!(!t&&this.requiresApiKey())}getApiPathSuffix(t){return"/v1"}};var Xu=class extends jt{constructor(){super(...arguments);this.type="openai";this.displayName="OpenAI"}getDefaultBaseUrl(){return"https://api.openai.com"}getAuthHeaders(r){return{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}async fetchModels(r,o,n,i){if(!this.validateApiKey(o))return[];try{let s=this.getAuthHeaders(o);return(await i(`${r}/v1/models`,s,this.type)).data.filter(d=>this.isValidChatModel(d)).sort((d,u)=>d.id<u.id?1:d.id>u.id?-1:0).map(d=>this.prefixModelId(d.id))}catch(s){return this.handleFetchError(s),[]}}isValidChatModel(r){let o=r.id,n=o.includes("o3")||o.includes("o4")||o.includes("o1")||o.includes("gpt-4")||o.includes("gpt-5")||o.includes("gpt-3"),i=o.includes("audio")||o.includes("transcribe")||o.includes("realtime")||o.includes("o1-pro")||o.includes("tts");return n&&!i}getSystemMessageRole(){return"developer"}};var F$=require("obsidian");var Qu=class extends jt{constructor(){super(...arguments);this.type="anthropic";this.displayName="Anthropic"}getDefaultBaseUrl(){return"https://api.anthropic.com"}getAuthHeaders(r){return{"x-api-key":r,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true","Content-Type":"application/json"}}async fetchModels(r,o,n,i){if(!this.validateApiKey(o))return[];try{let s=this.getApiPathSuffix(r),l=`${r.replace(/\/$/,"")}${s}/models`,d=this.getAuthHeaders(o),m=(await(0,F$.requestUrl)({url:l,method:"GET",headers:d})).json;return m.data&&Array.isArray(m.data)?m.data.filter(c=>c.type==="model"&&c.id).map(c=>this.prefixModelId(c.id)).sort():[]}catch(s){return this.handleFetchError(s),[]}}supportsSystemField(){return!0}};var ec=class extends jt{constructor(){super(...arguments);this.type="ollama";this.displayName="Ollama"}getDefaultBaseUrl(){return"http://localhost:11434"}getAuthHeaders(r){return{"Content-Type":"application/json"}}async fetchModels(r,o,n,i){try{let s=this.getAuthHeaders(o);return(await i(`${r}/api/tags`,s,this.type)).models.sort((u,m)=>u.name<m.name?1:u.name>m.name?-1:0).map(u=>this.prefixModelId(u.name))}catch(s){return this.handleFetchError(s),[]}}requiresApiKey(){return!1}};var tc=class extends jt{constructor(){super(...arguments);this.type="openrouter";this.displayName="OpenRouter"}getDefaultBaseUrl(){return"https://openrouter.ai"}getAuthHeaders(r){return{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}getApiPathSuffix(r){return"/api/v1"}async fetchModels(r,o,n,i){if(!this.validateApiKey(o))return[];try{let s=this.getAuthHeaders(o),l=this.getApiPathSuffix(r);return(await i(`${r}${l}/models`,s,this.type)).data.sort((u,m)=>u.id<m.id?1:u.id>m.id?-1:0).map(u=>this.prefixModelId(u.id))}catch(s){return this.handleFetchError(s),[]}}};var rc=class extends jt{constructor(){super(...arguments);this.type="gemini";this.displayName="Gemini"}getDefaultBaseUrl(){return"https://generativelanguage.googleapis.com"}getAuthHeaders(r){return{"Content-Type":"application/json"}}async fetchModels(r,o,n,i){if(!this.validateApiKey(o))return[];try{let s=`${r}/v1beta/models?key=${o}`,l=this.getAuthHeaders(o),d=await i(s,l,this.type);return d.models&&Array.isArray(d.models)?d.models.filter(u=>u.name&&u.name.includes("generate")).map(u=>{let m=u.name.split("/").pop();return m?this.prefixModelId(m):null}).filter(u=>u!==null).sort():[]}catch(s){return this.handleFetchError(s),[]}}};var nc=class extends jt{constructor(){super(...arguments);this.type="lmstudio";this.displayName="LM Studio"}getDefaultBaseUrl(){return"http://localhost:1234"}getAuthHeaders(r){return{"Content-Type":"application/json"}}async fetchModels(r,o,n,i){try{let s=this.getAuthHeaders(o),l=await i(`${r}/v1/models`,s,this.type);return l.data&&Array.isArray(l.data)?l.data.map(d=>this.prefixModelId(d.id)).sort():[]}catch(s){return this.handleFetchError(s),[]}}supportsToolCalling(){return!1}requiresApiKey(){return!1}};var oc=class extends jt{constructor(){super(...arguments);this.type="zai";this.displayName="Z.AI";this.KNOWN_MODELS=["glm-4.5","glm-4.6","glm-4.6v","glm-4.6v-flash","glm-4.6v-flashx","glm-4.7","glm-4.7-flash"]}getDefaultBaseUrl(){return"https://api.z.ai"}isAnthropicMode(r){return r.includes("/api/anthropic")}getAuthHeaders(r){return{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}getAuthHeadersForUrl(r,o){return this.isAnthropicMode(o)?{"x-api-key":r,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true","Content-Type":"application/json"}:this.getAuthHeaders(r)}getApiPathSuffix(r){return r&&this.isAnthropicMode(r)?"/api/anthropic/v1":"/api/paas/v4"}async fetchModels(r,o,n,i){return this.validateApiKey(o)?this.KNOWN_MODELS.map(s=>this.prefixModelId(s)).sort():[]}supportsSystemField(){return!1}supportsSystemFieldForUrl(r){return this.isAnthropicMode(r)}supportsToolCalling(){return!0}requiresApiKey(){return!0}};var ac=class ac{constructor(){this.inferTitleFromMessages=async(t,r,o)=>{try{if(r.length<2)return this.notificationService.showWarning("Not enough messages to infer title. Minimum 2 messages."),"";let n=`Infer title from the summary of the content of these messages. The title **cannot** contain any of the following characters: colon (:), back slash (\\), forward slash (/), asterisk (*), question mark (?), double quote ("), less than (<), greater than (>), or pipe (|) as these are invalid in file names. Just return the title. Write the title in ${o.inferTitleLanguage}. 
Messages:${vt}${JSON.stringify(r)}`,i=this.getDefaultConfig(),s={...i,...o};s.model||(s.model=i.model),s.url||(s.url=i.url);try{return(await this.callNonStreamingAPI(t,[{role:zt,content:n}],s,o)).fullString}catch(l){return""}}catch(n){return this.showNoTitleInferredNotification(),""}};this.notificationService=new Ut,this.errorService=new Nr(this.notificationService),this.apiService=new ko(this.errorService,this.notificationService),this.apiAuthService=new xn(this.notificationService),this.adapters=new Map([["openai",new Xu],["anthropic",new Qu],["ollama",new ec],["openrouter",new tc],["gemini",new rc],["lmstudio",new nc],["zai",new oc]]),this.currentAdapter=this.adapters.get("openai")}static setSaveSettingsCallback(t){ac.saveSettingsCallback=t}setProviderFromModel(t){for(let[r,o]of this.adapters)if(t.startsWith(`${r}@`)){this.currentAdapter=o;return}this.currentAdapter=this.adapters.get("openai")}modelSupportsTools(t,r){return Ss(t,r.toolEnabledModels||"")}getDefaultConfig(){return{provider:this.currentAdapter.type,model:"",maxTokens:400,temperature:.7,stream:!0,url:this.currentAdapter.getDefaultBaseUrl(),title:"Untitled",system_commands:null,tags:null}}getApiKeyFromSettings(t){return this.apiAuthService.getApiKey(t,this.currentAdapter.type)}async fetchAvailableModels(t,r,o,n){try{if(n){let i=this.adapters.get(n);i&&(this.currentAdapter=i)}return!r&&this.currentAdapter.requiresApiKey()?[]:await this.currentAdapter.fetchModels(t,r,o,this.apiService.makeGetRequest.bind(this.apiService))}catch(i){return[]}}async callAiAPI(t,r={},o,n,i,s,l,d,u){let m={...this.getDefaultConfig(),...r};return this.setProviderFromModel(m.model),d&&(m.url=n),m.stream&&i?this.callStreamingAPI(l,t,m,i,o,s,d,u):this.callNonStreamingAPI(l,t,m,d,u)}async inferTitle(t,r,o,n){try{if(!t.file)throw new Error("No active file found");let i=this.getApiKeyFromSettings(r),s=await this.inferTitleFromMessages(i,o,r),l="";if(typeof s=="string"){if(this.isTruncationError(s))return this.handleTitleTruncationError(t,s),this.showNoTitleInferredNotification(),"";l=s}else if(s&&typeof s=="object"){let u=s.fullString||"";if(this.isTruncationError(u))return this.handleTitleTruncationError(t,u),this.showNoTitleInferredNotification(),"";l=u}return l&&l.trim().length>0?(await n.writeInferredTitle(t,l.trim()),l.trim()):(this.showNoTitleInferredNotification(),"")}catch(i){return this.showNoTitleInferredNotification(),""}}showNoTitleInferredNotification(){this.notificationService.showWarning("Could not infer title. The file name was not changed.")}isTruncationError(t){return t.includes(ty)}handleTitleTruncationError(t,r){let o=t.editor,n=o.lastLine(),i=o.getLine(n).length,s={line:n,ch:i};o.setCursor(s);let d=`
---
${"#".repeat(2)+" "}${ry}
`;o.replaceRange(d+r+`
`,s)}stopStreaming(){var t;(t=this.apiService)==null||t.stopStreaming()}ensureProvider(t,r){if(this.provider)return;let o=this.apiService.createFetchAdapter(),n=this.getProviderFactory(this.currentAdapter.type,r.url),i=this.currentAdapter.getApiPathSuffix(r.url);this.provider=n({apiKey:t||"",baseURL:`${r.url}${i}`,fetch:o,name:this.currentAdapter.type})}getProviderFactory(t,r){switch(t){case"openai":return dh;case"anthropic":return vh;case"gemini":return yh;case"ollama":case"lmstudio":case"zai":return IS;case"openrouter":return Dh;default:throw new Error(`Unsupported provider: ${t}`)}}extractModelName(t){return this.currentAdapter.extractModelName(t)}async callStreamingAPI(t,r,o,n,i,s,l,d){this.ensureProvider(t,o);let u=this.extractModelName(o.model),m=this.provider(u),c=d&&l?d.getToolsForRequest(l):void 0;return this.callAiSdkStreamText(m,o.model,r,o,n,i,s,c,d,l)}async callNonStreamingAPI(t,r,o,n,i){this.ensureProvider(t,o);let s=this.extractModelName(o.model),l=this.provider(s),d=i&&n?i.getToolsForRequest(n):void 0;return this.callAiSdkGenerateText(l,o.model,r,d,i,n)}async callAiSdkGenerateText(t,r,o,n,i,s){var p;let l=o.map(f=>({role:f.role,content:f.content})),d={model:t,messages:l};n&&typeof n=="object"&&Object.keys(n).length>0&&s&&this.modelSupportsTools(r,s)&&(d.tools=n);let c;try{c=await _v(d)}catch(f){throw f}if(i&&c.toolCalls&&c.toolCalls.length>0){let f=await i.handleToolCalls(c.toolCalls,r),{contextMessages:v}=await i.processToolResults(c.toolCalls,f,r),g=[...l];return(p=c.text)!=null&&p.trim()&&g.push({role:"assistant",content:c.text}),g.push(...v),{fullString:(await _v({model:t,messages:g})).text,mode:"non-streaming"}}return{fullString:c.text,mode:"non-streaming"}}async callAiSdkStreamText(t,r,o,n,i,s,l,d,u,m){let{aiSdkMessages:c,handler:p,abortController:f}=this.setupStreamingContext(o,i,s,r,l);try{let v=this.buildStreamRequest(t,c,f.signal,d,r,m);p.startBuffering();let g=bv(v),y=await this.consumeStream(g,p),S=await g;if(this.checkForStreamError(S),u&&(S!=null&&S.toolCalls)){let b=await S.toolCalls;(b==null?void 0:b.length)>0&&(y=await this.handleStreamToolCalls(b,y,p,i,t,c,u,r))}return l||i.setCursor(p.getCursor()),{fullString:y,mode:"streaming",wasAborted:this.apiService.wasAborted()}}catch(v){return this.handleStreamError(v,p,i)}}setupStreamingContext(t,r,o,n,i){let s=this.prepareAiSdkMessages(t),l=_y(r,o,n),d=new AbortController;this.apiService.setAbortController(d);let u=i?l.initialCursor:l.newCursor,m=new xs(r,u,i);return{aiSdkMessages:s,handler:m,abortController:d}}handleStreamError(t,r,o){r.stopBuffering();let n=this.formatStreamError(t),i=r.getCursor();return o.replaceRange(n,i),{fullString:n,mode:"streaming"}}prepareAiSdkMessages(t){return t.map(r=>({role:r.role,content:r.content}))}buildStreamRequest(t,r,o,n,i,s){let l={model:t,messages:r,abortSignal:o};return n&&typeof n=="object"&&Object.keys(n).length>0&&s&&this.modelSupportsTools(i,s)&&(l.tools=n),l}async consumeStream(t,r){let o="",{textStream:n}=t;for await(let i of n){if(this.apiService.wasAborted())break;o+=i,r.appendText(i)}return r.stopBuffering(),o}async checkForStreamError(t){if(await(t==null?void 0:t.finishReason)==="error"){let o=t.error;throw o||new Error("Stream finished with error")}}async handleStreamToolCalls(t,r,o,n,i,s,l,d){let u=`_[Tool approval required...]_
`,m=o.getCursor();n.replaceRange(u,m),o.updateCursorAfterInsert(u,m);let c=await l.handleToolCalls(t,d),{contextMessages:p}=await l.processToolResults(t,c,d),f=o.getCursor();n.replaceRange("",{line:f.line-1,ch:0},f),o.setCursor({line:f.line-1,ch:0});let v=[...s,{role:"assistant",content:r},...p];return this.streamContinuation(i,v,o,r)}async streamContinuation(t,r,o,n){let i=bv({model:t,messages:r}),s=o.getCursor();o.reset(s),o.startBuffering();let l=n;try{for await(let u of i.textStream){if(this.apiService.wasAborted())break;l+=u,o.appendText(u)}let d=await i;return this.checkForStreamError(d),l}finally{o.stopBuffering()}}formatStreamError(t){var n;let r=t;for(;r!=null&&r.cause&&this.isRetryError(r);)r=r.cause;let o="Error: ";return r!=null&&r.message?o+=r.message:t!=null&&t.message?o+=t.message:typeof t=="string"?o+=t:o+="Unknown error occurred",r!=null&&r.name&&r.name!=="Error"&&(o=`Error (${r.name}): ${o.replace("Error: ","")}`),(n=t==null?void 0:t.cause)!=null&&n.message&&(t==null?void 0:t.cause)!==r&&(o+=`

Details: ${t.cause.message}`),o}isRetryError(t){var r;return(t==null?void 0:t.name)==="AI_RetryError"||((r=t==null?void 0:t.message)==null?void 0:r.includes("Retry"))}};ac.saveSettingsCallback=null;var es=ac;var H$=require("obsidian");var Ke={aiService:rt,frequency_penalty:0,max_tokens:400,model:"openai@gpt-4.1-mini",presence_penalty:0,stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://api.openai.com"},At={aiService:st,max_tokens:400,model:"anthropic@claude-sonnet-4-20250514",stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://api.anthropic.com"},Jr={aiService:it,model:"",url:"http://localhost:11434",stream:!0,title:"Untitled",system_commands:null,temperature:.7,top_p:1},dt={aiService:Ve,frequency_penalty:.5,max_tokens:400,model:"openrouter@openai/gpt-4.1-mini",openrouterApiKey:"",presence_penalty:.5,stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://openrouter.ai"},bt={aiService:ut,model:"",url:"http://localhost:1234",stream:!0,title:"Untitled",system_commands:null,temperature:.7,top_p:1,presence_penalty:0,frequency_penalty:0},xt={aiService:lt,max_tokens:400,model:"gemini@",stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://generativelanguage.googleapis.com"},Dt={aiService:mt,max_tokens:400,model:"zai@glm-4.7",stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://api.z.ai"};var mF=()=>`---
system_commands: ['You are a helpful assistant.']
frequency_penalty: ${Ke.frequency_penalty}
max_tokens: ${Ke.max_tokens}
model: ${Ke.model}
presence_penalty: ${Ke.presence_penalty}
stream: true
temperature: ${Ke.temperature}
---`,xv={apiKey:"",openrouterApiKey:"",anthropicApiKey:"",geminiApiKey:"",zaiApiKey:"",openaiUrl:Ke.url,openrouterUrl:dt.url,ollamaUrl:Jr.url,lmstudioUrl:bt.url,anthropicUrl:At.url,geminiUrl:xt.url,zaiUrl:Dt.url,chatFolder:"ChatGPT_MD/chats",chatTemplateFolder:"ChatGPT_MD/templates",agentFolder:"ChatGPT_MD/agents",stream:!0,generateAtCursor:!1,autoInferTitle:!1,enableToolCalling:!1,toolEnabledModels:ky(),debugMode:!1,pluginSystemMessage:fs,webSearchProvider:"brave",webSearchApiKey:"",webSearchApiUrl:"",maxWebSearchResults:5,dateFormat:ms,headingLevel:Gv,inferTitleLanguage:Hv,defaultChatFrontmatter:mF(),openaiDefaultModel:Ke.model,openaiDefaultTemperature:Ke.temperature,openaiDefaultTopP:Ke.top_p,openaiDefaultMaxTokens:Ke.max_tokens,openaiDefaultPresencePenalty:Ke.presence_penalty,openaiDefaultFrequencyPenalty:Ke.frequency_penalty,anthropicDefaultModel:At.model,anthropicDefaultTemperature:At.temperature,anthropicDefaultMaxTokens:At.max_tokens,geminiDefaultModel:xt.model,geminiDefaultTemperature:xt.temperature,geminiDefaultTopP:xt.top_p,geminiDefaultMaxTokens:xt.max_tokens,openrouterDefaultModel:dt.model,openrouterDefaultTemperature:dt.temperature,openrouterDefaultTopP:dt.top_p,openrouterDefaultMaxTokens:dt.max_tokens,openrouterDefaultPresencePenalty:dt.presence_penalty,openrouterDefaultFrequencyPenalty:dt.frequency_penalty,ollamaDefaultTemperature:.7,ollamaDefaultTopP:1,lmstudioDefaultTemperature:bt.temperature,lmstudioDefaultTopP:bt.top_p,lmstudioDefaultPresencePenalty:bt.presence_penalty,lmstudioDefaultFrequencyPenalty:bt.frequency_penalty,zaiDefaultModel:Dt.model,zaiDefaultTemperature:Dt.temperature,zaiDefaultMaxTokens:Dt.max_tokens};var sc=require("obsidian");var fF=["OpenAI","Anthropic","Gemini","OpenRouter","Z.AI","Ollama (Local)","LM Studio (Local)"],ic=class extends sc.PluginSettingTab{constructor(t,r,o){super(t,r),this.settingsProvider=o}updateSetting(t,r){this.settingsProvider.settings[t]=r}display(){let{containerEl:t}=this;t.empty();let r=[{id:"apiKey",name:"OpenAI API Key",description:"API Key for OpenAI",type:"text",placeholder:"your openAI API Key",group:"API Keys"},{id:"openrouterApiKey",name:"OpenRouter.ai API Key",description:"API Key for OpenRouter.ai",type:"text",placeholder:"your openRouter API Key",group:"API Keys"},{id:"anthropicApiKey",name:"Anthropic API Key",description:"API Key for Anthropic (Claude)",type:"text",placeholder:"your Anthropic API Key",group:"API Keys"},{id:"geminiApiKey",name:"Gemini API Key",description:"API Key for Google Gemini (Google AI Studio)",type:"text",placeholder:"your Gemini API Key",group:"API Keys"},{id:"zaiApiKey",name:"Z.AI API Key",description:"API Key for Z.AI (GLM models). Works with both Standard API and Coding Plan. Get your key at https://z.ai",type:"text",placeholder:"your Z.AI API Key",group:"API Keys"},{id:"defaultChatFrontmatter",name:"Default Chat Frontmatter",description:"Default frontmatter for new chat files. You can change/use all of the settings exposed by the OpenAI API here: https://platform.openai.com/docs/api-reference/chat/create",type:"textarea",placeholder:this.settingsProvider.settings.defaultChatFrontmatter,group:"Chat Behavior"},{id:"pluginSystemMessage",name:"Plugin System Message",description:"System message that provides context about the Obsidian/ChatGPT MD plugin environment. This helps the AI understand it's working within Obsidian and format responses appropriately.",type:"textarea",group:"Chat Behavior"},{id:"stream",name:"Stream",description:"Stream responses from OpenAI",type:"toggle",group:"Chat Behavior"},{id:"generateAtCursor",name:"Generate at Cursor",description:"Generate text at cursor instead of end of file",type:"toggle",group:"Chat Behavior"},{id:"autoInferTitle",name:"Automatically Infer Title",description:"Automatically infer title after 4 messages have been exchanged",type:"toggle",group:"Chat Behavior"},{id:"inferTitleLanguage",name:"Infer Title Language",description:"Language to use for title inference.",type:"dropdown",options:{English:"English",Japanese:"Japanese",Spanish:"Spanish",French:"French",German:"German",Chinese:"Chinese",Korean:"Korean",Italian:"Italian",Russian:"Russian"},group:"Chat Behavior"},{id:"openaiUrl",name:"API URL",description:`URL for OpenAI API
Default URL: ${Ke.url}`,type:"text",placeholder:Ke.url,group:"OpenAI"},{id:"openaiDefaultModel",name:"Default Model",description:"Default model for OpenAI chats",type:"text",placeholder:"openai@gpt-4",group:"OpenAI"},{id:"openaiDefaultTemperature",name:"Default Temperature",description:"Default temperature for OpenAI chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"OpenAI"},{id:"openaiDefaultMaxTokens",name:"Default Max Tokens",description:"Default max tokens for OpenAI chats",type:"text",placeholder:"400",group:"OpenAI"},{id:"anthropicUrl",name:"API URL",description:`URL for Anthropic API
Default URL: ${At.url}`,type:"text",placeholder:At.url,group:"Anthropic"},{id:"anthropicDefaultModel",name:"Default Model",description:"Default model for Anthropic chats",type:"text",placeholder:"anthropic@claude-3-5-sonnet-20241022",group:"Anthropic"},{id:"anthropicDefaultTemperature",name:"Default Temperature",description:"Default temperature for Anthropic chats (0.0 to 1.0)",type:"text",placeholder:"0.7",group:"Anthropic"},{id:"anthropicDefaultMaxTokens",name:"Default Max Tokens",description:"Default max tokens for Anthropic chats",type:"text",placeholder:"400",group:"Anthropic"},{id:"geminiUrl",name:"API URL",description:`URL for Gemini API
Default URL: ${xt.url}`,type:"text",placeholder:xt.url,group:"Gemini"},{id:"geminiDefaultModel",name:"Default Model",description:"Default model for Gemini chats",type:"text",placeholder:"gemini@gemini-1.5-pro",group:"Gemini"},{id:"geminiDefaultTemperature",name:"Default Temperature",description:"Default temperature for Gemini chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"Gemini"},{id:"geminiDefaultMaxTokens",name:"Default Max Tokens",description:"Default max tokens for Gemini chats",type:"text",placeholder:"400",group:"Gemini"},{id:"openrouterUrl",name:"API URL",description:`URL for OpenRouter.ai API
Default URL: ${dt.url}`,type:"text",placeholder:dt.url,group:"OpenRouter"},{id:"openrouterDefaultModel",name:"Default Model",description:"Default model for OpenRouter chats",type:"text",placeholder:"openrouter@anthropic/claude-3.5-sonnet",group:"OpenRouter"},{id:"openrouterDefaultTemperature",name:"Default Temperature",description:"Default temperature for OpenRouter chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"OpenRouter"},{id:"openrouterDefaultMaxTokens",name:"Default Max Tokens",description:"Default max tokens for OpenRouter chats",type:"text",placeholder:"400",group:"OpenRouter"},{id:"zaiUrl",name:"API URL",description:`URL for Z.AI API. Two modes available:
\u2022 Standard API (pay-per-token): https://api.z.ai/api/paas/v4
\u2022 Coding Plan (subscription): https://api.z.ai/api/anthropic

Default: https://api.z.ai (uses Standard API mode)`,type:"text",placeholder:Dt.url,group:"Z.AI"},{id:"zaiDefaultModel",name:"Default Model",description:"Default model for Z.AI chats (e.g., zai@glm-4.7)",type:"text",placeholder:Dt.model,group:"Z.AI"},{id:"zaiDefaultTemperature",name:"Default Temperature",description:"Default temperature for Z.AI chats (0.0 to 1.0)",type:"text",placeholder:"0.7",group:"Z.AI"},{id:"zaiDefaultMaxTokens",name:"Default Max Tokens",description:"Default max tokens for Z.AI chats",type:"text",placeholder:"400",group:"Z.AI"},{id:"ollamaUrl",name:"API URL",description:`URL for Ollama API
Default URL: ${Jr.url}`,type:"text",placeholder:Jr.url,group:"Ollama (Local)"},{id:"ollamaDefaultTemperature",name:"Default Temperature",description:"Default temperature for Ollama chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"Ollama (Local)"},{id:"lmstudioUrl",name:"API URL",description:`URL for LM Studio API
Default URL: ${bt.url}`,type:"text",placeholder:bt.url,group:"LM Studio (Local)"},{id:"lmstudioDefaultTemperature",name:"Default Temperature",description:"Default temperature for LM Studio chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"LM Studio (Local)"},{id:"chatFolder",name:"Chat Folder",description:"Path to folder for chat files",type:"text",group:"Folders"},{id:"chatTemplateFolder",name:"Chat Template Folder",description:"Path to folder for chat file templates",type:"text",placeholder:"chat-templates",group:"Folders"},{id:"agentFolder",name:"Agent Folder",description:"Path to folder for agent files",type:"text",placeholder:"ChatGPT_MD/agents",group:"Folders"},{id:"dateFormat",name:"Date Format",description:"Date format for chat files. Valid date blocks are: YYYY, MM, DD, hh, mm, ss",type:"text",placeholder:ms,group:"Formatting"},{id:"headingLevel",name:"Heading Level",description:`Heading level for messages (example for heading level 2: '## ${Rr}${zt}'). Valid heading levels are 0, 1, 2, 3, 4, 5, 6`,type:"text",group:"Formatting"},{id:"enableToolCalling",name:"Enable AI Tool Calling (Experimental, read only)",description:"Privacy Focus: All tool calls require your explicit approval before the LLM sees the data. Allow the AI to use tools: Search files, Read file contents, Web Search (Privacy focused Brave Search API). ",type:"toggle",group:"Tool Calling"},{id:"toolEnabledModels",name:"Tool-Enabled Models",description:`Models allowed to use tools (vault search, file read, web search).

Format: One model pattern per line. Supports wildcards (*).
Examples: 'gpt-4o', 'claude-*', 'gemini-1.5*'

Only tested models are included by default.`,type:"textarea",placeholder:`gpt-5.2
gpt-5.2-chat-latest
o3
claude-opus-4-5`,group:"Tool Calling"},{id:"webSearchApiKey",name:"Brave Search API Key",description:"API key for Brave Search.",type:"text",placeholder:"your Brave Search API key",group:"Tool Calling"},{id:"webSearchProvider",name:"Alternative Search Provider",description:"Use a custom search API endpoint instead of Brave Search",type:"dropdown",options:{brave:"Brave Search (Default)",custom:"Custom API Endpoint"},group:"Tool Calling"},{id:"webSearchApiUrl",name:"Custom Search API URL",description:"URL for custom search API endpoint (only when using Custom provider)",type:"text",placeholder:"https://your-search-api.com/search",group:"Tool Calling"},{id:"maxWebSearchResults",name:"Max Web Search Results",description:"Maximum number of search results to return (1-10)",type:"text",placeholder:"5",group:"Tool Calling"},{id:"debugMode",name:"Debug Mode",description:"Enable detailed logging for debugging tool operations. Messages will appear in the console.",type:"toggle",group:"Tool Calling"}],o={};r.forEach(s=>{o[s.group]||(o[s.group]=[]),o[s.group].push(s)});let n={},i={};if(Object.entries(o).forEach(([s,l])=>{fF.includes(s)?n[s]=l:i[s]=l}),i["API Keys"]&&(this.renderGroupHeader(t,"API Keys"),i["API Keys"].forEach(s=>{this.createSettingElement(t,s)}),t.createEl("hr"),delete i["API Keys"]),i["Chat Behavior"]&&(this.renderGroupHeader(t,"Chat Behavior"),i["Chat Behavior"].forEach(s=>{this.createSettingElement(t,s)}),t.createEl("hr"),delete i["Chat Behavior"]),Object.keys(n).length>0){this.renderGroupHeader(t,"Provider Settings");let s=t.createEl("p",{text:"Configure default settings for each AI provider. Click to expand.",cls:"setting-item-description"});s.style.marginTop="-10px",s.style.marginBottom="15px",Object.entries(n).forEach(([l,d])=>{this.renderCollapsibleGroup(t,l,d)}),t.createEl("hr")}Object.entries(i).forEach(([s,l])=>{this.renderGroupHeader(t,s),l.forEach(d=>{this.createSettingElement(t,d)}),t.createEl("hr")})}renderGroupHeader(t,r){t.createEl("h3",{text:r})}renderCollapsibleGroup(t,r,o){let n=t.createEl("details",{cls:"chatgpt-md-collapsible-group"});n.style.marginBottom="10px",n.style.border="1px solid var(--background-modifier-border)",n.style.borderRadius="5px",n.style.padding="0";let i=n.createEl("summary",{text:r});i.style.padding="10px 15px",i.style.cursor="pointer",i.style.fontWeight="600",i.style.backgroundColor="var(--background-secondary)",i.style.borderRadius="5px",i.style.userSelect="none";let s=n.createEl("div",{cls:"chatgpt-md-collapsible-content"});s.style.padding="10px 15px",o.forEach(l=>{this.createSettingElement(s,l)})}createSettingElement(t,r){let o=new sc.Setting(t).setName(r.name).setDesc(r.description);r.type==="text"?o.addText(n=>(n.setPlaceholder(r.placeholder||"").setValue(String(this.settingsProvider.settings[r.id])).onChange(async i=>{this.updateSetting(r.id,i),await this.settingsProvider.saveSettings()}),n.inputEl.style.width="300px",n)):r.type==="textarea"?o.addTextArea(n=>(n.setPlaceholder(r.placeholder||"").setValue(String(this.settingsProvider.settings[r.id]||r.placeholder)).onChange(async i=>{this.updateSetting(r.id,i),await this.settingsProvider.saveSettings()}),n.inputEl.style.width="300px",(r.id==="defaultChatFrontmatter"||r.id==="pluginSystemMessage")&&(n.inputEl.style.height="260px",n.inputEl.style.minHeight="260px"),r.id==="toolEnabledModels"&&(n.inputEl.style.height="200px",n.inputEl.style.minHeight="200px"),n)):r.type==="toggle"?o.addToggle(n=>n.setValue(!!this.settingsProvider.settings[r.id]).onChange(async i=>{this.updateSetting(r.id,i),await this.settingsProvider.saveSettings()})):r.type==="dropdown"&&r.options&&o.addDropdown(n=>(n.addOptions(r.options||{}),n.setValue(String(this.settingsProvider.settings[r.id])),n.onChange(async i=>{this.updateSetting(r.id,i),await this.settingsProvider.saveSettings()}),n.selectEl.style.width="300px",n))}};var gF=`You are an AI assistant integrated into Obsidian through the ChatGPT MD plugin. You are helping a user who is working within their Obsidian vault - a personal knowledge management system where they store notes, thoughts, and information in Markdown format.

Key context:
- The user is writing in Markdown format within Obsidian
- They may reference other notes in their vault using [[wiki links]] or standard [markdown links](url)
- Your responses will be inserted directly into their Markdown document
- Be concise but helpful, and format your responses appropriately for Markdown
- If you provide code examples, use proper markdown code blocks with language specification
- When suggesting organizational strategies, consider that this is within a personal knowledge management context
- The user may be taking notes, brainstorming, writing, researching, or organizing information

Code block formatting requirements:
- Code blocks must start and end with exactly 3 backticks (\`\`\`) on a new line
- There should be no whitespace before the opening or closing backticks
- The language name should be specified immediately after the opening backticks
- The actual code should start on a new line after the language specification
- Example format:
\`\`\`javascript
console.log("Hello World");
\`\`\`

Inline code formatting requirements:
- Use single backticks (\`) for inline code references like filenames (e.g., \`example.md\`), variable names (e.g., \`myVariable\`), or short code snippets referenced within a paragraph.
- Always ensure that single backticks are properly closed to avoid breaking Markdown rendering. For example, use \`code\` not \`code.

Table formatting requirements:
- Use standard Markdown table syntax.
- Tables should NOT be wrapped in code blocks.

Respond naturally and helpfully while being mindful of this Obsidian/note-taking context.`,lc=class{async migrateSettings(t,r){let o=!1;return o=await this.migrateUrlSettings(t,r)||o,o=await this.migrateFrontmatterSettings(t,r)||o,o=await this.migratePluginSystemMessage(t,r)||o,o}async migrateUrlSettings(t,r){let o=[{setting:"ollamaUrl",pattern:/\/api\/$/,replacement:"",description:"Removing trailing /api/ from Ollama URL",introducedIn:"2.1.3"},{setting:"openrouterUrl",pattern:/\/api\/$/,replacement:"",description:"Removing trailing /api/ from OpenRouter URL",introducedIn:"2.1.3"},{setting:"openaiUrl",pattern:/\/$/,replacement:"",description:"Removing trailing slash from OpenAI URL",introducedIn:"2.1.3"}],n=!1;for(let i of o){let s=i.setting,l=t[s];l&&i.pattern.test(l)&&(r({[s]:l.replace(i.pattern,i.replacement)}),n=!0)}return n}async migrateFrontmatterSettings(t,r){if(t.hasOwnProperty("openaiDefaultModel")||t.hasOwnProperty("anthropicDefaultModel"))return!1;let n={openaiDefaultModel:Ke.model,openaiDefaultTemperature:Ke.temperature,openaiDefaultTopP:Ke.top_p,openaiDefaultMaxTokens:Ke.max_tokens,openaiDefaultPresencePenalty:Ke.presence_penalty,openaiDefaultFrequencyPenalty:Ke.frequency_penalty,anthropicDefaultModel:At.model,anthropicDefaultTemperature:At.temperature,anthropicDefaultMaxTokens:At.max_tokens,geminiDefaultModel:xt.model,geminiDefaultTemperature:xt.temperature,geminiDefaultTopP:xt.top_p,geminiDefaultMaxTokens:xt.max_tokens,openrouterDefaultModel:dt.model,openrouterDefaultTemperature:dt.temperature,openrouterDefaultTopP:dt.top_p,openrouterDefaultMaxTokens:dt.max_tokens,openrouterDefaultPresencePenalty:dt.presence_penalty,openrouterDefaultFrequencyPenalty:dt.frequency_penalty,ollamaDefaultTemperature:.7,ollamaDefaultTopP:1,lmstudioDefaultTemperature:bt.temperature,lmstudioDefaultTopP:bt.top_p,lmstudioDefaultPresencePenalty:bt.presence_penalty,lmstudioDefaultFrequencyPenalty:bt.frequency_penalty};return r({...n}),!0}async migratePluginSystemMessage(t,r){var i;let o=(i=t.pluginSystemMessage)==null?void 0:i.trim(),n=gF.trim();return o!==n?!1:(r({pluginSystemMessage:fs}),!0)}migrateFrontmatterString(t){let r={"model: gpt-4":"model: ${openaiDefaultModel}","model: gpt-4o":"model: ${openaiDefaultModel}","model: claude-3":"model: ${anthropicDefaultModel}","model: gemini-pro":"model: ${geminiDefaultModel}","temperature: 1":"temperature: ${providerDefaultTemperature}","max_tokens: 300":"max_tokens: ${providerDefaultMaxTokens}"},o=t;for(let[n,i]of Object.entries(r))o=o.replace(new RegExp(n,"g"),i);return o!==t&&(o=`# Migrated frontmatter - consider using provider-specific defaults in settings
${o}`),o}};function wv(e){return{[rt]:Ke,[it]:Jr,[Ve]:dt,[ut]:bt,[st]:At,[lt]:xt,[mt]:Dt}[e]||Ke}function L$(e){return wv(e).model||""}function q$(e){let t={[rt]:Ke,[Ve]:dt,[it]:Jr,[ut]:bt,[st]:At,[lt]:xt,[mt]:Dt};return Object.fromEntries([rt,Ve,it,ut,st,lt,mt].map(o=>[o,e[`${o}Url`]||t[o].url]))}function Z$(e="",t){if(!e||!t)return!1;let r=t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&").replace("YYYY","\\d{4}").replace("MM","\\d{2}").replace("DD","\\d{2}").replace("hh","\\d{2}").replace("mm","\\d{2}").replace("ss","\\d{2}"),o=new RegExp(`^${r}$`);return e.length===t.length&&o.test(e)}var V$=(e,t)=>{if(!t)return;let r=[["openai@",rt],["anthropic@",st],["gemini@",lt],["ollama@",it],["lmstudio@",ut],["openrouter@",Ve],["zai@",mt],["local@",it]];for(let[o,n]of r)if(t.startsWith(o))return n;if(e){let n=e.replace(/\/$/,"").replace(/^https?:\/\//,"");if(n.includes("openrouter.ai"))return Ve;if(n.includes("localhost:1234")||n.includes("127.0.0.1:1234"))return ut;if(n.includes("localhost:11434")||n.includes("127.0.0.1:11434"))return it;if(n.includes("api.anthropic.com"))return st;if(n.includes("generativelanguage.googleapis.com"))return lt;if(n.includes("api.z.ai"))return mt}},G$=e=>{let t=ur(e.openrouterApiKey),r=ur(e.apiKey),o=ur(e.anthropicApiKey),n=ur(e.geminiApiKey),i=ur(e.zaiApiKey);return r?rt:o?st:n?lt:t?Ve:i?mt:null};var hF={[rt]:e=>({model:e.openaiDefaultModel,temperature:e.openaiDefaultTemperature,top_p:e.openaiDefaultTopP,max_tokens:e.openaiDefaultMaxTokens,presence_penalty:e.openaiDefaultPresencePenalty,frequency_penalty:e.openaiDefaultFrequencyPenalty}),[it]:e=>({url:e.ollamaUrl,temperature:e.ollamaDefaultTemperature,top_p:e.ollamaDefaultTopP}),[Ve]:e=>({model:e.openrouterDefaultModel,temperature:e.openrouterDefaultTemperature,top_p:e.openrouterDefaultTopP,max_tokens:e.openrouterDefaultMaxTokens,presence_penalty:e.openrouterDefaultPresencePenalty,frequency_penalty:e.openrouterDefaultFrequencyPenalty}),[ut]:e=>({url:e.lmstudioUrl,temperature:e.lmstudioDefaultTemperature,top_p:e.lmstudioDefaultTopP,presence_penalty:e.lmstudioDefaultPresencePenalty,frequency_penalty:e.lmstudioDefaultFrequencyPenalty}),[st]:e=>({model:e.anthropicDefaultModel,url:e.anthropicUrl,temperature:e.anthropicDefaultTemperature,max_tokens:e.anthropicDefaultMaxTokens}),[lt]:e=>({model:e.geminiDefaultModel,url:e.geminiUrl,temperature:e.geminiDefaultTemperature,top_p:e.geminiDefaultTopP,max_tokens:e.geminiDefaultMaxTokens}),[mt]:e=>({model:e.zaiDefaultModel,url:e.zaiUrl,temperature:e.zaiDefaultTemperature,max_tokens:e.zaiDefaultMaxTokens})},uc=class{constructor(t,r,o=new Ut,n=new Nr(new Ut)){this.plugin=t;this.frontmatterManager=r;this.notificationService=o;this.errorService=n;this.migrationService=new lc,this.settings=structuredClone(xv),this.loadSettings().catch(i=>this.notificationService.showError("Failed to load settings"))}setAgentService(t){this.agentService=t}getSettings(){return this.settings}async migrateSettings(){await this.migrationService.migrateSettings(this.settings,this.updateSettings.bind(this))&&await this.saveSettings()}migrateFrontmatterString(t){return this.migrationService.migrateFrontmatterString(t)}async loadSettings(){let t=await this.plugin.loadData();return Object.assign(this.settings,xv,t),this.settings}async saveSettings(){await this.plugin.saveData(this.settings)}updateSettings(t){Object.assign(this.settings,t)}async addSettingTab(){await this.loadSettings(),this.plugin.addSettingTab(new ic(this.plugin.app,this.plugin,{settings:this.settings,saveSettings:this.saveSettings.bind(this)}))}async getFrontmatter(t){let r={};if(t.file){let u=await this.frontmatterManager.readFrontmatter(t.file);u&&(r={...u})}let o=this.settings.defaultChatFrontmatter?hs(this.settings.defaultChatFrontmatter):{},n=await this.resolveAgentFrontmatter(r),i={...o,...this.settings,...n,...r},s=i.aiService||V$(i.url,i.model)||G$(i)||rt;return{...wv(s),...o,...this.settings,...n,...r,aiService:s}}async resolveAgentFrontmatter(t){let r=t.agent;if(!r||!this.agentService)return{};let o=await this.agentService.resolveAgentByName(r,this.settings);if(!o)return{};let{position:n,...i}=o.frontmatter;return o.body&&(i._agentSystemMessage=o.body),i}async updateFrontmatterField(t,r,o){let n=this.plugin.app.workspace.getActiveViewOfType(H$.MarkdownView);if(!n||!n.file)return;let i=n.file;try{await this.frontmatterManager.updateFrontmatterField(i,r,o)}catch(s){throw s}}generateFrontmatter(t={}){if(this.settings.defaultChatFrontmatter)return this.handleExistingTemplate(t);let r=t.aiService||rt,o=hF[r],n={stream:this.settings.stream,...t,...o?o(this.settings):{}};return Zc(n)}handleExistingTemplate(t){if(Object.keys(t).length>0){let o={...hs(this.settings.defaultChatFrontmatter),...t};return Zc(o)}return this.settings.defaultChatFrontmatter+`

`}};var W$=require("obsidian");var B$=require("obsidian"),vF=50,Oa=class{constructor(t,r){this.app=t;this.fileService=r}async searchVault(t,r){var c;let{query:o,limit:n=10}=t,s=o.toLowerCase().split(/\s+/).filter(p=>p.length>0),l=[],d=this.app.vault.getMarkdownFiles(),u=this.app.workspace.getActiveFile(),m=u==null?void 0:u.path;for(let p of d){if((c=r.abortSignal)!=null&&c.aborted)break;if(m&&p.path===m)continue;let f=p.basename.toLowerCase(),v=!1;for(let g of s)if(f.includes(g)){v=!0;break}if(v)l.push({path:p.path,basename:p.basename,matches:1});else{let y=(await this.app.vault.read(p)).toLowerCase();for(let S of s)if(y.includes(S)){l.push({path:p.path,basename:p.basename,matches:1});break}}if(l.length>=Math.min(n,vF))break}return l}async readFiles(t,r){var i;let{filePaths:o}=t,n=[];for(let s of o){if((i=r.abortSignal)!=null&&i.aborted)break;let l=this.app.vault.getAbstractFileByPath(s);if(l instanceof B$.TFile)try{let d=await this.app.vault.read(l);n.push({path:l.path,content:d,size:l.stat.size})}catch(d){n.push({path:s,content:`Error reading file: ${d}`,size:0})}else n.push({path:s,content:`File not found: ${s}`,size:0})}return n}};var Sv=require("obsidian"),yF=10,Ra=class{constructor(t){this.notificationService=t}async searchBrave(t,r,o=5){var n,i;try{let s=`https://api.search.brave.com/res/v1/web/search?q=${encodeURIComponent(t)}&count=${o}`;return((i=(n=(await(0,Sv.requestUrl)({url:s,method:"GET",headers:{Accept:"application/json","X-Subscription-Token":r}})).json.web)==null?void 0:n.results)==null?void 0:i.map(u=>({title:u.title,url:u.url,snippet:u.description})))||[]}catch(s){return this.notificationService.showWarning("Web search failed. Check your API key."),[]}}async searchCustom(t,r,o,n=5){var i;try{let s=`${r}?q=${encodeURIComponent(t)}&limit=${n}`,l={Accept:"application/json","Content-Type":"application/json"};return o&&(l.Authorization=`Bearer ${o}`),((i=(await(0,Sv.requestUrl)({url:s,method:"GET",headers:l})).json.results)==null?void 0:i.slice(0,n).map(m=>({title:m.title||"Untitled",url:m.url||m.link||"",snippet:m.snippet||m.description||""})))||[]}catch(s){return this.notificationService.showWarning("Custom web search failed. Check your endpoint configuration."),[]}}async searchWeb(t,r,o,n){let{query:i,limit:s=5}=t,l=Math.min(s,yF);switch(r){case"brave":return o?this.searchBrave(i,o,l):(this.notificationService.showWarning("Brave Search requires an API key. Please configure in settings."),[]);case"custom":return n?this.searchCustom(i,n,o,l):(this.notificationService.showWarning("Custom search requires an API URL. Please configure in settings."),[]);default:return this.notificationService.showWarning("Unknown search provider. Please configure in settings."),[]}}};var J$=require("obsidian"),Fn=class extends J$.Modal{constructor(r,o="AI"){super(r);this.result=null;this.selections=new Map;this.modelName=o,this.modalPromise=new Promise(n=>{this.resolveModalPromise=n})}onOpen(){let{contentEl:r}=this;r.addClass(this.getCssClass()),this.renderHeader(r),this.renderDescription(r),this.renderSelectionItems(r),this.renderSelectAllButtons(r),this.renderControlNote(r),this.renderActionButtons(r)}renderHeader(r){let o=r.createEl("h2",{text:this.getModalTitle()});o.style.marginBottom="12px",o.style.fontWeight="600"}renderDescription(r){let o=r.createEl("p",{text:this.getDescription()});o.style.marginBottom="12px",o.style.opacity="0.7"}renderSelectAllButtons(r){let o=r.createDiv();o.style.display="flex",o.style.gap="8px",o.style.marginBottom="16px";let n=o.createEl("button",{text:"Select All"});this.styleSecondaryButton(n),n.style.flex="1",n.onclick=()=>{this.setAllSelections(!0),this.refreshSelectionItems()};let i=o.createEl("button",{text:"Deselect All"});this.styleSecondaryButton(i),i.style.flex="1",i.onclick=()=>{this.setAllSelections(!1),this.refreshSelectionItems()}}setAllSelections(r){for(let o of this.selections.keys())this.selections.set(o,r)}refreshSelectionItems(){this.close()}renderControlNote(r){let o=r.createEl("div",{text:this.getControlNoteText()});o.style.padding="12px",o.style.backgroundColor="var(--background-secondary)",o.style.borderRadius="6px",o.style.fontSize="0.9em",o.style.lineHeight="1.4",o.style.opacity="0.85",o.style.marginTop="12px",o.style.marginBottom="12px"}renderActionButtons(r){let o=r.createDiv();o.style.display="flex",o.style.gap="8px",o.style.justifyContent="flex-end",o.style.marginTop="20px";let n=o.createEl("button",{text:this.getCancelText()});this.styleCancelButton(n),n.onclick=()=>{this.result=this.buildCancelledResult(),this.resolveModalPromise(this.result),this.close()};let i=o.createEl("button",{text:this.getApproveText()});this.styleApproveButton(i),i.onclick=()=>{this.result=this.buildApprovedResult(),this.resolveModalPromise(this.result),this.close()}}styleSecondaryButton(r){r.style.padding="6px 12px",r.style.borderRadius="4px",r.style.border="1px solid var(--background-modifier-border)",r.style.backgroundColor="transparent",r.style.cursor="pointer",r.style.fontSize="0.9em"}styleCancelButton(r){r.style.padding="8px 16px",r.style.borderRadius="4px",r.style.border="1px solid var(--background-modifier-border)",r.style.backgroundColor="transparent",r.style.cursor="pointer"}styleApproveButton(r){r.style.padding="8px 16px",r.style.borderRadius="4px",r.style.border="none",r.style.backgroundColor="var(--interactive-accent)",r.style.color="var(--text-on-accent)",r.style.cursor="pointer",r.style.fontWeight="500"}waitForResult(){return this.modalPromise}onClose(){let{contentEl:r}=this;r.empty(),this.result||this.resolveModalPromise(this.buildCancelledResult())}};var cc=class extends Fn{constructor(t,r,o,n="AI"){super(t,n),this.query=r,this.results=o}getModalTitle(){return"ChatGPT MD - Vault Search Results"}getCssClass(){return"search-results-approval-modal"}getDescription(){return`${this.results.length} result${this.results.length!==1?"s":""} have been found and can be shared with '${this.modelName}'.`}renderSelectionItems(t){let r=t.createEl("p",{text:"Select which files to share:"});r.style.marginTop="8px",r.style.marginBottom="8px",r.style.fontWeight="500",r.style.opacity="0.7";let o=t.createDiv();o.style.marginBottom="12px";for(let n of this.results){this.selections.has(n.path)||this.selections.set(n.path,!0);let i=this.selections.get(n.path)||!1,s=n.path,l=n.path.match(/\]\((.*?)\)$/);l&&(s=l[1]);let d=o.createDiv();d.style.display="flex",d.style.alignItems="center",d.style.padding="8px",d.style.marginBottom="4px",d.style.borderRadius="4px",d.style.backgroundColor="var(--background-secondary)";let u=d.createEl("input");u.type="checkbox",u.checked=i,u.style.marginRight="8px",u.onchange=()=>{this.selections.set(n.path,u.checked)};let m=d.createEl("label");m.style.flex="1",m.style.cursor="pointer";let c=m.createEl("div",{text:n.basename});c.style.fontWeight="500",c.style.fontSize="0.95em";let p=m.createEl("div",{text:s});p.style.fontSize="0.85em",p.style.opacity="0.6",p.style.marginTop="2px",m.onclick=()=>{u.checked=!u.checked,this.selections.set(n.path,u.checked)}}}getControlNoteText(){return"You control what data is shared. The AI will only know about files you select. Deselected files remain private."}getCancelText(){return"Cancel"}getApproveText(){return"Approve and Continue"}buildApprovedResult(){return{approved:!0,approvedResults:this.results.filter(r=>this.selections.get(r.path)===!0)}}buildCancelledResult(){return{approved:!1,approvedResults:[]}}refreshSelectionItems(){let{contentEl:t}=this;t.empty(),this.onOpen()}};var dc=class extends Fn{constructor(t,r,o,n="AI"){super(t,n),this.query=r,this.results=o;for(let i of o)this.selections.set(i.url,!0)}getModalTitle(){return"ChatGPT MD - Web Search Results"}getCssClass(){return"websearch-approval-modal"}getDescription(){return`${this.results.length} result${this.results.length!==1?"s":""} have been found and can be shared with '${this.modelName}'.`}renderSelectionItems(t){var n;let r=t.createEl("p",{text:"Select which results to share:"});r.style.marginTop="8px",r.style.marginBottom="8px",r.style.fontWeight="500",r.style.opacity="0.7";let o=t.createDiv();o.style.marginBottom="12px";for(let i of this.results){let s=(n=this.selections.get(i.url))!=null?n:!0,l=o.createDiv();l.style.display="flex",l.style.alignItems="flex-start",l.style.padding="8px",l.style.marginBottom="8px",l.style.borderRadius="4px",l.style.backgroundColor="var(--background-secondary)",l.style.gap="8px";let d=l.createEl("input");d.type="checkbox",d.checked=s,d.style.marginTop="2px",d.style.flexShrink="0",d.onchange=()=>{this.selections.set(i.url,d.checked)};let u=l.createEl("label");u.style.flex="1",u.style.cursor="pointer",u.style.display="flex",u.style.flexDirection="column",u.style.gap="4px";let m=u.createEl("div",{text:i.title});m.style.fontWeight="500",m.style.fontSize="0.95em";let c=u.createEl("a",{text:i.url,href:i.url});if(c.style.fontSize="0.8em",c.style.opacity="0.6",c.setAttr("target","_blank"),i.snippet){let p=u.createEl("div",{text:i.snippet.substring(0,150)+(i.snippet.length>150?"...":"")});p.style.fontSize="0.85em",p.style.opacity="0.7",p.style.lineHeight="1.3"}u.onclick=()=>{d.checked=!d.checked,this.selections.set(i.url,d.checked)}}}getControlNoteText(){return"You control what data is shared. Only selected results will be visible to the AI. Deselected results remain private."}getCancelText(){return"Cancel"}getApproveText(){return"Share Selected Results"}buildApprovedResult(){return{approved:!0,approvedResults:this.results.filter(r=>this.selections.get(r.url)===!0)}}buildCancelledResult(){return{approved:!1,approvedResults:[]}}refreshSelectionItems(){let{contentEl:t}=this;t.empty(),this.onOpen()}};var pc=class extends Fn{constructor(r,o,n,i="AI"){super(r,i);this.editedQuery=null;this.queryTextarea=null;this.approveBtn=null;this.toolName=o,this.args=n}getModalTitle(){return{vault_search:"ChatGPT MD - Vault Search",file_read:"ChatGPT MD - File Read",web_search:"ChatGPT MD - Web Search"}[this.toolName]||this.toolName}getCssClass(){return"tool-approval-modal"}getDescription(){return""}renderSelectionItems(r){this.renderRequestDescription(r),this.toolName==="file_read"&&this.args&&Array.isArray(this.args.filePaths)&&this.renderFileSelection(r,this.args.filePaths)}renderFileSelection(r,o){let n=r.createEl("p",{text:"Select files to share:"});n.style.marginTop="16px",n.style.marginBottom="8px",n.style.fontWeight="500",n.style.opacity="0.7";let i=r.createDiv();i.style.marginBottom="12px";for(let s of o){this.selections.has(s)||this.selections.set(s,!0);let l=s.split("/").pop()||s,d=this.selections.get(s)||!1,u=i.createDiv();u.style.display="flex",u.style.alignItems="center",u.style.padding="8px",u.style.marginBottom="4px",u.style.borderRadius="4px",u.style.backgroundColor="var(--background-secondary)";let m=u.createEl("input");m.type="checkbox",m.checked=d,m.style.marginRight="8px",m.onchange=()=>{this.selections.set(s,m.checked)};let c=u.createEl("label");c.style.flex="1",c.style.cursor="pointer";let p=c.createEl("div",{text:l});p.style.fontWeight="500",p.style.fontSize="0.95em";let f=c.createEl("div",{text:s});f.style.fontSize="0.85em",f.style.opacity="0.6",f.style.marginTop="2px",c.onclick=()=>{m.checked=!m.checked,this.selections.set(s,m.checked)}}}getControlNoteText(){return this.toolName==="vault_search"||this.toolName==="web_search"?"After the search completes, you'll review and approve the results before they're shared with the AI.":""}renderControlNote(r){(this.toolName==="vault_search"||this.toolName==="web_search")&&super.renderControlNote(r)}getCancelText(){return"Cancel"}getApproveText(){return"Approve and Execute"}renderActionButtons(r){let o=r.createDiv();o.style.display="flex",o.style.gap="8px",o.style.justifyContent="flex-end",o.style.marginTop="20px";let n=o.createEl("button",{text:this.getCancelText()});this.styleCancelButton(n),n.onclick=()=>{this.result=this.buildCancelledResult(),this.resolveModalPromise(this.result),this.close()},this.approveBtn=o.createEl("button",{text:this.getApproveText()}),this.styleApproveButton(this.approveBtn),this.validateApproveButton(),this.approveBtn.onclick=()=>{this.result=this.buildApprovedResult(),this.resolveModalPromise(this.result),this.close()}}buildApprovedResult(){return{approvalId:this.toolName,approved:!0,modifiedArgs:this.getModifiedArgs()}}buildCancelledResult(){return{approvalId:this.toolName,approved:!1}}validateApproveButton(){if(this.approveBtn)if((this.toolName==="vault_search"||this.toolName==="web_search")&&this.queryTextarea){let o=this.queryTextarea.value.trim().length>0;this.approveBtn.disabled=!o,this.approveBtn.style.opacity=o?"1":"0.5",this.approveBtn.style.cursor=o?"pointer":"not-allowed"}else this.approveBtn.disabled=!1,this.approveBtn.style.opacity="1",this.approveBtn.style.cursor="pointer"}getModifiedArgs(){let r=this.args||{};if(this.toolName==="file_read"&&r.filePaths){let o=Array.from(this.selections.entries()).filter(([n,i])=>i).map(([n,i])=>n);return{...r,filePaths:o}}return(this.toolName==="vault_search"||this.toolName==="web_search")&&this.editedQuery?{...r,query:this.editedQuery}:r}renderRequestDescription(r){var s,l;let o=((s=this.args)==null?void 0:s.query)||"",n=(l=this.args)==null?void 0:l.filePaths,i=r.createEl("p");switch(i.style.marginBottom="8px",i.style.lineHeight="1.5",i.style.fontSize="0.95em",i.appendChild(document.createTextNode(`'${this.modelName}'`)),this.toolName){case"vault_search":i.appendChild(document.createTextNode(" requests to search your vault for:"));break;case"file_read":i.appendChild(document.createTextNode(` requests to read ${(n==null?void 0:n.length)||0} file${(n==null?void 0:n.length)!==1?"s":""}:`));break;case"web_search":i.appendChild(document.createTextNode(" requests to search the web for:"));break;default:i.appendChild(document.createTextNode(" requests to use a tool."))}if((this.toolName==="vault_search"||this.toolName==="web_search")&&o){let d=r.createEl("label",{text:"Search query:"});d.style.display="block",d.style.marginBottom="8px",d.style.fontWeight="500",d.style.opacity="0.7",this.queryTextarea=r.createEl("textarea"),this.queryTextarea.value=o,this.queryTextarea.style.width="100%",this.queryTextarea.style.minHeight="80px",this.queryTextarea.style.padding="8px",this.queryTextarea.style.borderRadius="4px",this.queryTextarea.style.border="1px solid var(--background-modifier-border)",this.queryTextarea.style.backgroundColor="var(--background-secondary)",this.queryTextarea.style.color="var(--text-normal)",this.queryTextarea.style.fontSize="0.95em",this.queryTextarea.style.fontFamily="var(--font-interface)",this.queryTextarea.style.resize="vertical",this.queryTextarea.style.marginBottom="16px",this.queryTextarea.addEventListener("input",()=>{this.editedQuery=this.queryTextarea.value.trim(),this.validateApproveButton()})}else if(this.toolName==="file_read"){let d=r.createEl("p",{text:"You can select which files to share on the next screen."});d.style.marginBottom="16px",d.style.opacity="0.7",d.style.fontSize="0.9em"}else{let d=r.createEl("p",{text:""});d.style.marginBottom="16px"}}refreshSelectionItems(){let{contentEl:r}=this;r.empty(),this.onOpen()}};var mc=class{constructor(t,r,o,n,i,s){this.app=t;this.fileService=r;this.notificationService=o;this.settingsService=n;this.tools=new Map;this.toolResultHandlers={vault_search:this.handleVaultSearchResult.bind(this),file_read:this.handleFileReadResult.bind(this),web_search:this.handleWebSearchResult.bind(this)},this.vaultSearchService=i||new Oa(t,r),this.webSearchService=s||new Ra(o),this.registerDefaultTools()}registerDefaultTools(){let t={description:"Search the Obsidian vault for files by name or content. Returns file paths, names, and content previews. Use this to find relevant notes before reading them.",inputSchema:A(a.object({query:a.string().describe("The search query to find files. Can be keywords, topics, or phrases to search for in file names and content."),limit:a.number().optional().default(10).describe("Maximum number of search results to return. Default is 10, maximum is 50.")})),execute:async n=>(await this.vaultSearchService.searchVault(n,{app:this.app,toolCallId:"",messages:[]})).map(s=>({...s,path:`[${s.basename}](${s.path})`}))};this.registerTool("vault_search",t);let r={description:"Read the full contents of specific files from the vault. User will be asked to approve which files to share. Use this after searching to get complete file contents.",inputSchema:A(a.object({filePaths:a.array(a.string()).describe("Array of file paths to read. Use the paths returned from vault_search.")})),execute:async n=>await this.vaultSearchService.readFiles(n,{app:this.app,toolCallId:"",messages:[]})};this.registerTool("file_read",r);let o={description:"Search the web for information on a topic. Returns titles, URLs, and snippets from search results. User will be asked to approve which results to share.",inputSchema:A(a.object({query:a.string().describe("The search query to look up on the web"),limit:a.number().optional().default(5).describe("Maximum number of search results to return. Default is 5, maximum is 10.")})),execute:async n=>await this.webSearchService.searchWeb(n,this.settingsService.webSearchProvider,this.settingsService.webSearchApiKey,this.settingsService.webSearchApiUrl)};this.registerTool("web_search",o)}registerTool(t,r){this.tools.set(t,r)}isWebSearchAvailable(t){return t.webSearchProvider==="brave"?!!t.webSearchApiKey&&t.webSearchApiKey.trim().length>0:t.webSearchProvider==="custom"?!!t.webSearchApiUrl&&t.webSearchApiUrl.trim().length>0:!1}getTool(t){return this.tools.get(t)}getAllTools(){let t={};return this.tools.forEach((r,o)=>{t[o]=r}),t}getEnabledTools(t){if(!t.enableToolCalling)return;let r=this.getAllTools(),o={};return r.vault_search&&(o.vault_search=r.vault_search),r.file_read&&(o.file_read=r.file_read),r.web_search&&this.isWebSearchAvailable(t)&&(o.web_search=r.web_search),Object.keys(o).length>0?o:void 0}async requestApproval(t){let r=new pc(this.app,t.toolName,t.args,t.modelName);r.open();let o=await r.waitForResult();return o.approved||this.notificationService.showWarning(`Tool execution cancelled: ${t.toolName}`),o}setApprovalHandler(t){this.approvalHandler=t}getToolsForRequest(t){return this.getEnabledTools(t)}async requestSearchResultsApproval(t,r,o){let n=new cc(this.app,t,r,o);n.open();let i=await n.waitForResult();return i.approved?i.approvedResults:[]}async requestWebSearchResultsApproval(t,r,o){let n=new dc(this.app,t,r,o);n.open();let i=await n.waitForResult();return i.approved?i.approvedResults:[]}async readFilesFromSearchResults(t){let r=[];for(let o of t)try{let n=o.path,i=n.match(/\]\((.*?)\)$/);i&&(n=i[1]);let s=this.app.vault.getAbstractFileByPath(n);if(s instanceof W$.TFile){let l=await this.app.vault.read(s);r.push({path:n,content:l})}}catch(n){}return r}async handleVaultSearchResult(t,r,o,n,i){var d;let s=t.result;if(!Array.isArray(s)){o.push(t);return}let l=((d=r==null?void 0:r.input)==null?void 0:d.query)||"unknown";if(s.length>0){let u=await this.requestSearchResultsApproval(l,s,i);if(o.push({...t,result:u}),u.length>0){let m=await this.readFilesFromSearchResults(u);for(let c of m)n.push({role:"user",content:`[vault_search result]

File: ${c.path}

${c.content}`})}else n.push({role:"user",content:`[vault_search result - no files found]

The search for "${l}" returned no results. Try searching with different keywords or single words.`})}else o.push(t),n.push({role:"user",content:`[vault_search result - no files found]

The search for "${l}" returned no results. Try searching with different keywords or single words.`})}async handleFileReadResult(t,r,o,n,i){let s=t.result;if(!(!Array.isArray(s)||s.length===0)){o.push(t);for(let l of s)l.content&&typeof l.content=="string"&&n.push({role:"user",content:`[file_read result]

File: ${l.path}

${l.content}`})}}async handleWebSearchResult(t,r,o,n,i){var d;let s=t.result;if(!Array.isArray(s)){o.push(t);return}let l=((d=r==null?void 0:r.input)==null?void 0:d.query)||"unknown";if(s.length>0){let u=await this.requestWebSearchResultsApproval(l,s,i);if(o.push({...t,result:u}),u.length>0)for(let m of u)n.push({role:"user",content:`[web_search result]

Title: ${m.title}
URL: ${m.url}

${m.content||m.snippet}`});else n.push({role:"user",content:`[web_search result - no results selected]

The web search for "${l}" returned results, but none were approved for sharing.`})}else o.push(t),n.push({role:"user",content:`[web_search result - no results found]

The web search for "${l}" returned no results. Try different search terms.`})}async processToolResults(t,r,o){let n=[],i=[];for(let s of r){let l=t.find(m=>(m.toolCallId||m.id||"unknown")===s.toolCallId),d=l==null?void 0:l.toolName,u=this.toolResultHandlers[d];u?await u(s,l,i,n,o):i.push(s)}return{filteredResults:i,contextMessages:n}}async handleToolCalls(t,r){return Promise.all(t.map(o=>this.executeToolCall(o,r)))}async executeToolCall(t,r){let{toolName:o,args:n,toolCallId:i}=this.normalizeToolCall(t),s=await this.requestApproval({toolCallId:i,toolName:o,args:n,modelName:r});return s.approved?this.executeTool(o,s.modifiedArgs||n,i):{toolCallId:i,result:{error:"User declined tool execution"}}}normalizeToolCall(t){return{toolName:t.toolName||t.name||t.tool,args:t.args||t.input||t.arguments||{},toolCallId:t.toolCallId||t.id||"unknown"}}async executeTool(t,r,o){try{let n=this.getTool(t);if(!n||!n.execute)return{toolCallId:o,result:{error:"Tool not found or has no execute function"}};let i=await n.execute(r,{app:this.app,toolCallId:o,messages:[]});return{toolCallId:o,result:i}}catch(n){return{toolCallId:o,result:{error:`Tool execution failed: ${n}`}}}}};var fo=require("obsidian");var fc=class{constructor(t,r,o){this.app=t;this.fileService=r;this.frontmatterManager=o}getAgentFiles(t){let r=this.app.vault.getAbstractFileByPath(t.agentFolder);return r instanceof fo.TFolder?r.children.filter(o=>o instanceof fo.TFile&&o.extension==="md"):[]}async readAgent(t){let r=await this.app.vault.read(t),o=await this.frontmatterManager.readFrontmatter(t)||{},n=this.extractBody(r);return{frontmatter:o,body:n}}async resolveAgentByName(t,r){let n=this.getAgentFiles(r).find(i=>i.basename===t);return n?this.readAgent(n):null}async createAgentFile(t,r,o,n,i){await this.fileService.ensureFolderExists(i.agentFolder,Fa);let s=this.fileService.sanitizeFileName(t),l=(0,fo.normalizePath)(`${i.agentFolder}/${s}.md`);for(let m=1;await this.app.vault.adapter.exists(l);m++)l=(0,fo.normalizePath)(`${i.agentFolder}/${s} (${m}).md`);let u=`${this.buildAgentFrontmatter(r,o)}
${n}`;return this.app.vault.create(l,u)}extractBody(t){let r=t.match(/^---\n[\s\S]*?\n---\n?/);return r?t.slice(r[0].length).trim():t.trim()}buildAgentFrontmatter(t,r){return["---",`model: ${t}`,`temperature: ${r}`,"stream: true","---"].join(`
`)}};var gc=class e{constructor(t,r,o,n,i,s,l,d,u,m,c,p,f,v,g,y,S){this.app=t,this.plugin=r,this.notificationService=o,this.errorService=n,this.apiService=i,this.apiAuthService=s,this.fileService=l,this.frontmatterManager=d,this.messageService=u,this.templateService=m,this.editorService=c,this.aiProviderService=p,this.settingsService=f,this.agentService=v,this.vaultSearchService=g,this.webSearchService=y,this.toolService=S}static create(t,r){let o=new Ut,n=new Nr(o),i=new ko(n,o),s=new xn(o),l=new _o(t),d=new So(t),u=new xo(l,o),m=new uc(r,d,o,n),c=new ys(t,l,u,void 0,m),p=new wo(t,l,c),f=new fc(t,l,d);m.setAgentService(f);let v=()=>new es;es.setSaveSettingsCallback(m.saveSettings.bind(m));let g=new Oa(t,l),y=new Ra(o),S=new mc(t,l,o,m.getSettings(),g,y);return new e(t,r,o,n,i,s,l,d,u,p,c,v,m,f,g,y,S)}};var go=require("obsidian");var K$=require("obsidian");function yt(e){return q$(e)}function Y$(e){return{[rt]:e.openaiUrl||Ke.url,[Ve]:e.openrouterUrl||dt.url,[it]:e.ollamaUrl||Jr.url,[ut]:e.lmstudioUrl||bt.url,[st]:e.anthropicUrl||At.url,[lt]:e.geminiUrl||xt.url,[mt]:e.zaiUrl||Dt.url}}async function kv(e,t,r,o,n,i){function s(l,d,u){return Promise.race([l,new Promise(m=>setTimeout(()=>m(u),d))])}try{let l=[];l.push(s(e.fetchAvailableModels(t[it],void 0,i.getSettings(),"ollama"),_n,[])),l.push(s(e.fetchAvailableModels(t[ut],void 0,i.getSettings(),"lmstudio"),_n,[])),ur(r)&&l.push(s(e.fetchAvailableModels(t[rt],r,i.getSettings(),"openai"),_n,[])),ur(o)&&l.push(s(e.fetchAvailableModels(t[Ve],o,i.getSettings(),"openrouter"),_n,[]));let d=n.getApiKey(i.getSettings(),st);ur(d)&&l.push(s(e.fetchAvailableModels(t[st],d,i.getSettings(),"anthropic"),_n,[]));let u=n.getApiKey(i.getSettings(),lt);ur(u)&&l.push(s(e.fetchAvailableModels(t[lt],u,i.getSettings(),"gemini"),_n,[]));let m=n.getApiKey(i.getSettings(),mt);return ur(m)&&l.push(s(e.fetchAvailableModels(t[mt],m,i.getSettings(),"zai"),_n,[])),(await Promise.all(l)).flat()}catch(l){return new K$.Notice("Error fetching models: "+(l instanceof Error?l.message:String(l))),[]}}var ts=class{constructor(t,r){this.services=t;this.stopStreamingHandler=r;this.statusBarItemEl=t.plugin.addStatusBarItem()}static getCommand(){return{id:Ov,name:"Chat",icon:"message-circle"}}async execute(t,r){var m;let{editorService:o,settingsService:n,apiAuthService:i,toolService:s}=this.services,l=n.getSettings(),d=await o.getFrontmatter(r,l,this.services.app),u=this.services.aiProviderService();this.stopStreamingHandler.setCurrentAiService(u);try{let{messagesWithRole:c,messages:p}=await o.getMessagesFromEditor(t,l),f=this.buildSystemMessages(d);f.length>0&&c.unshift(...f),l.generateAtCursor||o.moveCursorToEnd(t),go.Platform.isMobile?new go.Notice(`${Uc} Calling ${d.model}`):this.updateStatusBar(`Calling ${d.model}`);let v=i.getApiKey(l,d.aiService),g=l.enableToolCalling?s:void 0,y=await u.callAiAPI(c,d,Qr(l.headingLevel),yt(d)[d.aiService],t,l.generateAtCursor,v,l,g);if(o.processResponse(t,y,l),l.autoInferTitle&&Z$((m=r==null?void 0:r.file)==null?void 0:m.basename,l.dateFormat)&&c.length>Bv){let S={...l,...d,openrouterApiKey:i.getApiKey(l,Ve),url:yt(d)[d.aiService]};if(!S.model&&(S.model=L$(d.aiService),!S.model)){new go.Notice(`Auto title inference skipped: No model configured for ${d.aiService}. Please set a model in settings.`,Kv);return}await u.inferTitle(r,S,p,o)}}catch(c){go.Platform.isMobile&&new go.Notice(`${Uc} Calling ${d.model}. `+c,Yv),this.services.errorService.handleApiError(c,"ChatHandler.execute",{showNotification:!0})}this.updateStatusBar("")}buildSystemMessages(t){let r=[],o=t._agentSystemMessage;if(o&&r.push({role:"system",content:o}),t.system_commands&&Array.isArray(t.system_commands))for(let n of t.system_commands)typeof n=="string"&&n.trim()&&r.push({role:"system",content:n});return r}updateStatusBar(t){this.statusBarItemEl.setText(t)}};var rs=require("obsidian");var ns=class extends rs.SuggestModal{constructor(t,r,o,n=[],i){super(t),this.modelNames=n,this.editor=r,this.editorService=o,this.settings=i,this.limit=this.modelNames.length,this.modelNames.length>0?this.setPlaceholder("Select Large Language Model"):this.setPlaceholder("Loading available models...")}getSuggestions(t){return this.modelNames.filter(r=>r.toLowerCase().includes(t.toLowerCase()))}renderSuggestion(t,r){var n;let o=r.createEl("div",{cls:"ai-model-suggestion"});if(o.style.display="flex",o.style.alignItems="center",o.style.gap="8px",o.createEl("span",{text:t}),(n=this.settings)!=null&&n.enableToolCalling&&Ss(t,this.settings.toolEnabledModels)){let i=o.createEl("span",{cls:"ai-model-tool-badge",text:"Tools"});i.title="This model supports tool calling (vault search, file read, web search)"}}async onChooseSuggestion(t,r){if(!(this.modelNames.indexOf(t)===-1||this.modelNames.length===0)){new rs.Notice(`Selected model: ${t}`);try{await this.editorService.setModel(this.editor,t)}catch(o){new rs.Notice(`Error setting model: ${o.message}`)}}}};var os=class{constructor(t){this.services=t;this.availableModels=[]}static getCommand(){return{id:"select-model-command",name:"Select Model",icon:"list"}}async execute(t,r){let{editorService:o,settingsService:n,apiAuthService:i}=this.services,s=n.getSettings(),l=new ns(this.services.app,t,o,this.availableModels,s);l.open(),(async()=>{try{let d=await o.getFrontmatter(r,s,this.services.app),u=i.getApiKey(s,rt),m=i.getApiKey(s,Ve),c={[rt]:String(d.openaiUrl||s.openaiUrl||yt(d).openai),[Ve]:String(d.openrouterUrl||s.openrouterUrl||yt(d).openrouter),[it]:String(d.ollamaUrl||s.ollamaUrl||yt(d).ollama),[ut]:String(d.lmstudioUrl||s.lmstudioUrl||yt(d).lmstudio),[st]:String(d.anthropicUrl||s.anthropicUrl||yt(d).anthropic),[lt]:String(d.geminiUrl||s.geminiUrl||yt(d).gemini),[mt]:String(d.zaiUrl||s.zaiUrl||yt(d).zai||Dt.url)},p=this.services.aiProviderService(),f=await kv(p,c,u,m,i,n),v=new Set(this.availableModels),g=new Set(f);(this.availableModels.length!==f.length||![...v].every(S=>g.has(S))||![...g].every(S=>v.has(S)))&&f.length>0&&(this.availableModels=f,l.close(),new ns(this.services.app,t,o,this.availableModels,s).open())}catch(d){}})()}getAvailableModels(){return this.availableModels}async initializeAvailableModels(){try{let{settingsService:t,apiAuthService:r}=this.services,o=t.getSettings(),n=r.getApiKey(o,rt),i=r.getApiKey(o,Ve),s={[rt]:o.openaiUrl||yt({}).openai,[Ve]:o.openrouterUrl||yt({}).openrouter,[it]:o.ollamaUrl||yt({}).ollama,[ut]:o.lmstudioUrl||yt({}).lmstudio,[st]:o.anthropicUrl||yt({}).anthropic,[lt]:o.geminiUrl||yt({}).gemini,[mt]:o.zaiUrl||yt({}).zai||Dt.url},l=this.services.aiProviderService();this.availableModels=await kv(l,s,n,i,r,t)}catch(t){this.availableModels=[]}}};var hc=class{constructor(t){this.services=t}async execute(t){let{editorService:r,settingsService:o}=this.services,n=o.getSettings();r.addHorizontalRule(t,zt,n.headingLevel)}getCommand(){return{id:Pv,name:"Add divider",icon:"minus"}}},vc=class{constructor(t){this.services=t}execute(t){let r=t.getCursor(),o=r.line,n=r.ch,i=`${Zv}${vt}${Vv}`;t.replaceRange(i,r);let s={line:o+1,ch:n};t.setCursor(s)}getCommand(){return{id:"add-comment-block",name:"Add comment block",icon:"comment"}}};var yc=class{constructor(t){this.services=t;this.currentAiService=null}setCurrentAiService(t){this.currentAiService=t}execute(){this.currentAiService&&"stopStreaming"in this.currentAiService?this.currentAiService.stopStreaming():this.services.notificationService.showWarning("No active streaming request to stop")}getCommand(){return{id:Rv,name:"Stop streaming",icon:"octagon"}}};var X$=require("obsidian");var _c=class{constructor(t){this.statusBarItemEl=t.addStatusBarItem()}setText(t){this.statusBarItemEl.setText(t)}clear(){this.statusBarItemEl.setText("")}};var bc=class{constructor(t,r){this.services=t;this.stopStreamingHandler=r;this.statusBarManager=new _c(t.plugin)}async execute(t,r){let{editorService:o,settingsService:n,apiAuthService:i}=this.services,s=n.getSettings(),l=await o.getFrontmatter(r,s,this.services.app),d=this.services.aiProviderService();if(this.stopStreamingHandler.setCurrentAiService(d),!l.model){new X$.Notice("Model not set in frontmatter. Please configure a model in settings or frontmatter.");return}this.statusBarManager.setText(`Calling ${l.model}`);let{messages:u}=await o.getMessagesFromEditor(t,s),m={...s,...l,openrouterApiKey:i.getApiKey(s,Ve),url:yt(l)[l.aiService]};await d.inferTitle(r,m,u,o),this.statusBarManager.clear()}getCommand(){return{id:Nv,name:"Infer title",icon:"subtitles"}}};var Iv=require("obsidian");var xc=class{constructor(t){this.services=t}async execute(t){let{editorService:r,settingsService:o}=this.services,n=o.getSettings();try{await r.createNewChatWithHighlightedText(t,n)}catch(i){new Iv.Notice("[ChatGPT MD] Error in Create new chat with highlighted text, check console")}}getCommand(){return{id:Mv,name:"Create new chat with highlighted text",icon:"highlighter"}}},wc=class{constructor(t){this.services=t}async execute(){let{editorService:t,settingsService:r}=this.services,o=r.getSettings();if(o.dateFormat){await t.createNewChatFromTemplate(o,t.getDate(new Date,o.dateFormat));return}new Iv.Notice("date format cannot be empty in your ChatGPT MD settings. You can choose something like YYYYMMDDhhmmss")}getCommand(){return{id:jv,name:"Create new chat from template",icon:"layout-template"}}},Sc=class{constructor(t){this.services=t}async execute(t){let{editorService:r}=this.services;await r.clearChat(t)}getCommand(){return{id:Dv,name:"Clear chat (except frontmatter)",icon:"trash"}}};var Tv=require("obsidian");var Ln=require("obsidian"),kc=class extends Ln.SuggestModal{constructor(r,o,n,i){super(r);this.agentService=o;this.settingsService=n;this.settings=i;this.agents=this.loadAgents(),this.limit=this.agents.length,this.setPlaceholder(this.agents.length>0?"Select an agent":"No agents found")}loadAgents(){return this.agentService.getAgentFiles(this.settings).map(r=>({title:r.basename,file:r})).sort((r,o)=>r.title.localeCompare(o.title))}getSuggestions(r){return r?this.agents.filter(o=>o.title.toLowerCase().includes(r.toLowerCase())):this.agents}renderSuggestion(r,o){o.createEl("div",{text:r.title})}async onChooseSuggestion(r){try{let o=this.app.workspace.getActiveViewOfType(Ln.MarkdownView);if(!o){new Ln.Notice("[ChatGPT MD] No active note found");return}await this.settingsService.updateFrontmatterField(o.editor,"agent",r.title),new Ln.Notice(`Agent set to "${r.title}"`)}catch(o){new Ln.Notice(`[ChatGPT MD] Error setting agent: ${o.message}`)}}};var wt=require("obsidian");var Ic=class extends wt.Modal{constructor(r,o,n,i,s){super(r);this.agentService=o;this.settings=n;this.availableModels=i;this.services=s;this.name="";this.model="";this.temperature=.7;this.message="";this.step="mode-select";this.wizardModel="";this.wizardIdea="";this.cameFromWizard=!1}onOpen(){(!this.services||this.availableModels.length===0)&&(this.step="manual-form"),this.render()}onClose(){this.contentEl.empty()}render(){switch(this.contentEl.empty(),this.step){case"mode-select":this.renderModeSelect();break;case"wizard-input":this.renderWizardInput();break;case"wizard-loading":this.renderWizardLoading();break;case"manual-form":this.renderManualForm();break}}navigateTo(r){this.step=r,this.render()}renderModeSelect(){let{contentEl:r}=this;r.createEl("h2",{text:"Create New Agent"});let o=r.createEl("p",{text:"How would you like to create your agent?"});o.style.color="var(--text-muted)",o.style.marginBottom="16px";let n=r.createDiv();n.style.display="flex",n.style.gap="12px",n.style.marginTop="8px",this.createModeCard(n,"Manual","Configure everything yourself",()=>this.navigateTo("manual-form")),this.createModeCard(n,"AI Wizard","Describe your idea, AI creates the agent",()=>this.navigateTo("wizard-input"))}createModeCard(r,o,n,i){let s=r.createDiv();s.style.flex="1",s.style.padding="20px",s.style.borderRadius="8px",s.style.border="1px solid var(--background-modifier-border)",s.style.cursor="pointer",s.style.textAlign="center",s.style.transition="border-color 0.15s ease, background-color 0.15s ease",s.createEl("h3",{text:o}).style.margin="0 0 8px 0";let l=s.createEl("p",{text:n});l.style.margin="0",l.style.color="var(--text-muted)",l.style.fontSize="0.85em",s.addEventListener("mouseenter",()=>{s.style.borderColor="var(--interactive-accent)",s.style.backgroundColor="var(--background-modifier-hover)"}),s.addEventListener("mouseleave",()=>{s.style.borderColor="var(--background-modifier-border)",s.style.backgroundColor=""}),s.addEventListener("click",i)}renderWizardInput(){let{contentEl:r}=this;r.createEl("h2",{text:"AI Agent Wizard"}),this.addWizardModelField(r),new wt.Setting(r).setName("Describe your agent idea").addTextArea(o=>{o.setPlaceholder("e.g., A coding assistant that specializes in TypeScript and React, helps with code reviews, and suggests best practices...").setValue(this.wizardIdea).onChange(n=>{this.wizardIdea=n}),o.inputEl.style.width="100%",o.inputEl.style.height="150px"}),this.addWizardButtons(r)}addWizardModelField(r){let o;new wt.Setting(r).setName("AI Model").setDesc("Select which model generates the agent").addText(n=>{n.setPlaceholder("Type to filter models...").onChange(i=>{this.wizardModel=i,this.updateModelSuggestions(i,o,!0)}),n.inputEl.style.width="300px",this.wizardModel&&n.setValue(this.wizardModel),this.modelInputEl=n.inputEl}),o=r.createDiv({cls:"chatgpt-md-model-suggestions"}),o.style.maxHeight="150px",o.style.overflowY="auto",o.style.marginTop="-10px",o.style.marginBottom="10px"}addWizardButtons(r){let o=r.createDiv();o.style.display="flex",o.style.gap="8px",o.style.justifyContent="flex-end",o.style.marginTop="20px";let n=o.createEl("button",{text:"Back"});n.onclick=()=>this.navigateTo("mode-select");let i=o.createEl("button",{text:"Create with AI",cls:"mod-cta"});i.onclick=()=>this.handleWizardGenerate()}renderWizardLoading(){let{contentEl:r}=this;r.createEl("h2",{text:"Creating your agent..."});let o=r.createDiv();o.style.textAlign="center",o.style.padding="40px 0";let n=o.createDiv();n.style.display="inline-block",n.style.width="32px",n.style.height="32px",n.style.border="3px solid var(--background-modifier-border)",n.style.borderTop="3px solid var(--interactive-accent)",n.style.borderRadius="50%",n.style.animation="chatgpt-md-spin 1s linear infinite";let i=o.createEl("p",{text:"AI is crafting your agent's configuration..."});i.style.color="var(--text-muted)",i.style.marginTop="16px",this.addSpinnerStyle()}addSpinnerStyle(){if(document.getElementById("chatgpt-md-spinner-style"))return;let r=document.createElement("style");r.id="chatgpt-md-spinner-style",r.textContent="@keyframes chatgpt-md-spin { to { transform: rotate(360deg); } }",document.head.appendChild(r)}renderManualForm(){let{contentEl:r}=this;r.createEl("h2",{text:"Create New Agent"}),this.addNameField(r),this.addModelField(r),this.addTemperatureField(r),this.addMessageField(r),this.addManualButtons(r)}addNameField(r){new wt.Setting(r).setName("Agent Name").addText(o=>{o.setPlaceholder("My Agent").setValue(this.name).onChange(n=>{this.name=n}),o.inputEl.style.width="300px"})}addModelField(r){new wt.Setting(r).setName("Model").addText(n=>{n.setPlaceholder("Type to filter models...").setValue(this.model).onChange(i=>{this.model=i,this.updateModelSuggestions(i,o,!1)}),n.inputEl.style.width="300px",this.modelInputEl=n.inputEl});let o=r.createDiv({cls:"chatgpt-md-model-suggestions"});o.style.maxHeight="150px",o.style.overflowY="auto",o.style.marginTop="-10px",o.style.marginBottom="10px",this.updateModelSuggestions("",o,!1)}updateModelSuggestions(r,o,n){o.empty();let i=this.availableModels.filter(s=>s.toLowerCase().includes(r.toLowerCase()));for(let s of i){let l=o.createDiv({cls:"suggestion-item"});l.setText(s),l.style.padding="4px 8px",l.style.cursor="pointer",l.style.borderRadius="4px",l.addEventListener("mouseenter",()=>l.style.backgroundColor="var(--background-modifier-hover)"),l.addEventListener("mouseleave",()=>l.style.backgroundColor=""),l.addEventListener("click",()=>{n?this.wizardModel=s:this.model=s,this.modelInputEl&&(this.modelInputEl.value=s,this.modelInputEl.dispatchEvent(new Event("input"))),o.empty()})}}addTemperatureField(r){let o=r.createEl("span",{text:this.temperature.toFixed(1)});o.style.marginLeft="8px",o.style.fontFamily="monospace",new wt.Setting(r).setName("Temperature").addSlider(s=>{s.setLimits(0,2,.1).setValue(this.temperature).onChange(l=>{this.temperature=l,o.setText(l.toFixed(1))}),s.sliderEl.style.width="250px",s.sliderEl.addEventListener("input",()=>{o.setText(s.getValue().toFixed(1))})});let n=r.lastElementChild,i=n==null?void 0:n.querySelector(".setting-item-control");i&&i.appendChild(o)}addMessageField(r){new wt.Setting(r).setName("Agent Message").addTextArea(o=>{o.setPlaceholder("Enter the agent's initial prompt or instructions...").setValue(this.message).onChange(n=>{this.message=n}),o.inputEl.style.width="100%",o.inputEl.style.height="200px"})}addManualButtons(r){let o=r.createDiv();o.style.display="flex",o.style.gap="8px",o.style.justifyContent="flex-end",o.style.marginTop="20px";let n=o.createEl("button",{text:"Back"});n.onclick=()=>this.navigateTo(this.cameFromWizard?"wizard-input":"mode-select");let i=o.createEl("button",{text:"Create Agent",cls:"mod-cta"});i.onclick=()=>this.handleCreate()}async handleWizardGenerate(){if(!this.wizardModel.trim()){new wt.Notice("Please select a model");return}if(!this.wizardIdea.trim()){new wt.Notice("Please describe your agent idea");return}if(!this.services){new wt.Notice("AI services not available");return}this.navigateTo("wizard-loading");try{let r=await this.callAiForAgentConfig(),o=this.parseWizardResponse(r);if(!o){new wt.Notice("Could not parse AI response. Please try again."),this.navigateTo("wizard-input");return}this.name=o.name,this.temperature=Math.max(0,Math.min(2,o.temperature)),this.message=o.prompt,this.model=this.wizardModel,this.cameFromWizard=!0,this.navigateTo("manual-form")}catch(r){new wt.Notice(`AI wizard error: ${r instanceof Error?r.message:String(r)}`),this.navigateTo("wizard-input")}}async callAiForAgentConfig(){let r=this.services,o=r.aiProviderService(),n=this.getProviderTypeFromModel(this.wizardModel),i=r.apiAuthService.getApiKey(this.settings,n),l=Y$(this.settings)[n]||"",d=[{role:"system",content:Xv},{role:"user",content:this.wizardIdea}];return(await o.callAiAPI(d,{model:this.wizardModel,stream:!1,temperature:.7},"",l,void 0,!1,i,this.settings)).fullString}getProviderTypeFromModel(r){let o=["ollama","openrouter","lmstudio","anthropic","gemini","zai"];for(let n of o)if(r.startsWith(`${n}@`))return n;return"openai"}parseWizardResponse(r){let o=r.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();try{let n=JSON.parse(o);if(typeof n.name=="string"&&typeof n.temperature=="number"&&typeof n.prompt=="string")return{name:n.name,temperature:n.temperature,prompt:n.prompt}}catch(n){let i=o.match(/\{[\s\S]*\}/);if(i)try{let s=JSON.parse(i[0]);if(typeof s.name=="string"&&typeof s.temperature=="number"&&typeof s.prompt=="string")return{name:s.name,temperature:s.temperature,prompt:s.prompt}}catch(s){}}return null}async handleCreate(){if(!this.name.trim()){new wt.Notice("Please enter an agent name");return}if(!this.model.trim()){new wt.Notice("Please select or enter a model");return}try{await this.agentService.createAgentFile(this.name,this.model,this.temperature,this.message,this.settings),new wt.Notice(`Agent "${this.name}" created`),this.close()}catch(r){new wt.Notice(`[ChatGPT MD] Error creating agent: ${r.message}`)}}};var Tc=class{constructor(t){this.services=t}async execute(){let{agentService:t,fileService:r,settingsService:o}=this.services,n=o.getSettings();if(!n.agentFolder||n.agentFolder.trim()===""){new Tv.Notice("[ChatGPT MD] No agent folder value found. Please set one in settings.");return}await r.ensureFolderExists(n.agentFolder,Fa)&&new kc(this.services.app,t,o,n).open()}getCommand(){return{id:Uv,name:"Choose agent",icon:"bot"}}},$c=class{constructor(t,r){this.services=t;this.modelSelectHandler=r}async execute(){let{agentService:t,fileService:r,settingsService:o}=this.services,n=o.getSettings();if(!n.agentFolder||n.agentFolder.trim()===""){new Tv.Notice("[ChatGPT MD] No agent folder value found. Please set one in settings.");return}if(!await r.ensureFolderExists(n.agentFolder,Fa))return;let s=this.modelSelectHandler.getAvailableModels();new Ic(this.services.app,t,n,s,this.services).open()}getCommand(){return{id:Fv,name:"Create new agent",icon:"bot-message-square"}}};var Ec=class{constructor(t){this.plugin=t}registerEditorCommand(t){let r=t.getCommand();this.plugin.addCommand({...r,editorCallback:(o,n)=>t.execute(o)})}registerEditorViewCommand(t){let r=t.getCommand();this.plugin.addCommand({...r,editorCallback:(o,n)=>t.execute(o,n)})}registerCallbackCommand(t){let r=t.getCommand();this.plugin.addCommand({...r,callback:()=>t.execute()})}};var Cc=class extends as.Plugin{async onload(){this.services=gc.create(this.app,this);let t=this.services.settingsService;await t.loadSettings(),await t.migrateSettings(),await t.addSettingTab(),this.stopStreamingHandler=new yc(this.services),this.chatHandler=new ts(this.services,this.stopStreamingHandler),this.inferTitleHandler=new bc(this.services,this.stopStreamingHandler),this.modelSelectHandler=new os(this.services),this.registerCommands(),this.modelSelectHandler.initializeAvailableModels().catch(r=>{})}registerCommands(){let t=new Ec(this);this.addCommand({...ts.getCommand(),editorCallback:(r,o)=>{o instanceof as.MarkdownView&&this.chatHandler.execute(r,o)}}),this.addCommand({...os.getCommand(),editorCallback:(r,o)=>{o instanceof as.MarkdownView&&this.modelSelectHandler.execute(r,o)}}),t.registerEditorCommand(new hc(this.services)),t.registerEditorCommand(new vc(this.services)),t.registerCallbackCommand(this.stopStreamingHandler),t.registerEditorViewCommand(this.inferTitleHandler),t.registerEditorCommand(new xc(this.services)),t.registerCallbackCommand(new wc(this.services)),t.registerEditorCommand(new Sc(this.services)),t.registerCallbackCommand(new Tc(this.services)),t.registerCallbackCommand(new $c(this.services,this.modelSelectHandler))}};

/* nosourcemap */